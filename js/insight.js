function loadInsight(t,g){var n=$(".searchbox"),e=n.find(".searchbox-input"),v=n.find(".searchbox-body");function d(t,n,e){if(!Array.isArray(n)||!n.length||!t)return e?t.slice(0,e):t;var r=t.toLowerCase(),o=n.map(function(t){var n=r.indexOf(t.toLowerCase());return t&&-1!==n?[n,n+t.length]:null}).filter(function(t){return null!==t}).sort(function(t,n){return t[0]-n[0]||t[1]-n[1]});if(!o.length)return t;var a,s,i="",c=0,l=(a=void 0,s=[],o.forEach(function(t){!a||t[0]>a[1]?s.push(a=t):t[1]>a[1]&&(a[1]=t[1])}),s),u=[l[0][0],l[l.length-1][1]];e&&e<u[1]&&(c=u[0]);for(var f=0;f<l.length;f++){var h=l[f];if(i+=t.slice(c,Math.min(h[0],u[0]+e)),e&&h[0]>=u[0]+e)break;i+="<em>"+t.slice(h[0],h[1])+"</em>",c=h[1],f===l.length-1&&(i+=e?t.slice(h[1],Math.min(t.length,u[0]+e+1)):t.slice(h[1]))}return i}function m(t,n,e,r,o){return'<a class="searchbox-result-item" href="'+o+'">\n            <span class="searchbox-result-icon">\n                <i class="fa fa-'+t+'" />\n            </span>\n            <span class="searchbox-result-content">\n                <span class="searchbox-result-title">\n                    '+(n=null!=n&&""!==n?n:g.untitled)+"\n                    "+(e?'<span class="searchbox-result-title-secondary">('+e+")</span>":"")+"\n                </span>\n                "+(r?'<span class="searchbox-result-preview">'+r+"</span>":"")+"\n            </span>\n        </a>"}function b(t){return t.split(" ").filter(function(t){return!!t}).map(function(t){return t.toLowerCase()})}function x(t,e,r){var n=b(t);return n.filter(function(n){return 0<r.filter(function(t){return!!Object.prototype.hasOwnProperty.call(e,t)&&-1<e[t].toLowerCase().indexOf(n)}).length}).length===n.length}function C(t,o,n,a){var s=0;return b(t).forEach(function(t){var r=new RegExp(t,"img");n.forEach(function(t,n){var e;Object.prototype.hasOwnProperty.call(o,t)&&(e=o[t].match(r),s+=e?e.length*a[n]:0)})}),s}function r(t){var n=$.makeArray(v.find(".searchbox-result-item")),e=-1;n.forEach(function(t,n){$(t).hasClass("active")&&(e=n)});var r,o,a,s,i=(n.length+e+t)%n.length;$(n[e]).removeClass("active"),$(n[i]).addClass("active"),0!==(r=$(n[i])).length&&(o=v[0].clientHeight,a=r.position().top-v.scrollTop(),(s=r[0].clientHeight+r.position().top)>o+v.scrollTop()&&v.scrollTop(s-v[0].clientHeight),a<0&&v.scrollTop(r.position().top))}function o(t){t&&t.length&&(location.href=t.attr("href"))}$.getJSON(t.contentUrl,function(p){"#insight-search"===location.hash.trim()&&n.addClass("show"),e.on("input",function(){var t,n,e,r,o,a,s,i,c,l,u,f,h=$(this).val();!function(t,n){for(var e in v.empty(),n)v.append(function(r,o,t){var n=void 0;if(0===t.length)return null;var e,a=g[o.toLowerCase()];switch(o){case"POSTS":case"PAGES":n=t.map(function(t){return m("file",d(t.title,r),null,d(t.text,r,100),t.link)});break;case"CATEGORIES":case"TAGS":n=t.map(function(t){var n=d(t.name,r),e=d(t.slug,r);return m("CATEGORIES"===o?"folder":"tag",n,e,null,t.link)});break;default:return null}return e=a,$("<section>").addClass("searchbox-result-section").append($("<header>").text(e)).append(n)}(b(t),e.toUpperCase(),n[e]))}(h,(r=function(t){return C(n,t,["title","text"],[3,1])},o=function(t){return C(n,t,["title","text"],[3,1])},a=function(t){return C(n,t,["name","slug"],[1,1])},s=function(t){return C(n,t,["name","slug"],[1,1])},e=n=h,i={post:function(t){return x(e,t,["title","text"])},page:function(t){return x(e,t,["title","text"])},category:function(t){return x(e,t,["name","slug"])},tag:function(t){return x(e,t,["name","slug"])}},c=(t=p).posts,l=t.pages,u=t.tags,f=t.categories,{posts:c.filter(i.post).sort(function(t,n){return r(n)-r(t)}).slice(0,5),pages:l.filter(i.page).sort(function(t,n){return o(n)-o(t)}).slice(0,5),categories:f.filter(i.category).sort(function(t,n){return a(n)-a(t)}).slice(0,5),tags:u.filter(i.tag).sort(function(t,n){return s(n)-s(t)}).slice(0,5)}))}),e.trigger("input")});var a=!1;$(document).on("click focus",".navbar-main .search",function(){n.addClass("show"),n.find(".searchbox-input").focus()}).on("click touchend",".searchbox-result-item",function(t){"click"!==t.type&&!a||(o($(this)),a=!1)}).on("click touchend",".searchbox-close",function(t){"click"!==t.type&&!a||($(".navbar-main").css("pointer-events","none"),setTimeout(function(){$(".navbar-main").css("pointer-events","auto")},400),n.removeClass("show"),a=!1)}).on("keydown",function(t){if(n.hasClass("show"))switch(t.keyCode){case 27:n.removeClass("show");break;case 38:r(-1);break;case 40:r(1);break;case 13:o(v.find(".searchbox-result-item.active").eq(0))}}).on("touchstart",function(t){a=!0}).on("touchmove",function(t){a=!1})}