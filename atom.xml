<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Longing(MysteryGuestçš„åšå®¢)</title>
  
  <subtitle>å¿ƒå‘æ˜Ÿå…‰</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://mysticalguest.github.io/"/>
  <updated>2020-09-13T04:32:44.634Z</updated>
  <id>https://mysticalguest.github.io/</id>
  
  <author>
    <name>MysticalGuest</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç®¡ç†GitHubä¸ªäººèµ„æ–™README</title>
    <link href="https://mysticalguest.github.io/2020/09/13/Github/Profile/"/>
    <id>https://mysticalguest.github.io/2020/09/13/Github/Profile/</id>
    <published>2020-09-13T02:05:40.655Z</published>
    <updated>2020-09-13T04:32:44.634Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README"><a href="#ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README" class="headerlink" title="ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README"></a>ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README</h2><a id="more"></a><p>æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªGithubä¸»é¡µæ·»åŠ ä¸ªäººèµ„æ–™ï¼Œè§‰å¾—æŒºä¸é”™ï¼Œå°±æƒ³ç€ä¹Ÿå¼„ä¸€ä¸ªï¼Œå°±æƒ³ä¸‹å›¾ä¸€æ ·ï¼Œå…¶å®å¹¶ä¸éº»çƒ¦ã€‚</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Github/github.PNG" alt=""></p><p>GitHubæä¾›äº†è¿™æ ·çš„æœåŠ¡ï¼Œ<a href="https://docs.github.com/en/github/setting-up-and-managing-your-github-profile/managing-your-profile-readme">å®˜æ–¹æ–‡æ¡£</a>ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨å®˜æ–¹æ–‡æ¡£æ‰¾åˆ°çš„è¯¦ç»†æ•™ç¨‹ã€‚ä»¥ä¸‹å¤§å¤šéƒ½æ˜¯ç¿»è¯‘ç‰ˆï¼Œè¿˜æœ‰ä¸€äº›ä¸ªäººå»ºè®®å’Œè¸©å‘ç»éªŒï¼Œæˆ‘æŒ‘å‡ºå…¶ä¸­æœ€é‡è¦çš„éƒ¨åˆ†åˆ†äº«ã€‚</p><h3 id="å…³äºæ‚¨çš„ä¸ªäººèµ„æ–™README"><a href="#å…³äºæ‚¨çš„ä¸ªäººèµ„æ–™README" class="headerlink" title="å…³äºæ‚¨çš„ä¸ªäººèµ„æ–™README"></a>å…³äºæ‚¨çš„ä¸ªäººèµ„æ–™README</h3><p>æ‚¨å¯ä»¥å°†è‡ªè¿°æ–‡ä»¶æ·»åŠ åˆ°æ‚¨çš„GitHubä¸ªäººèµ„æ–™ä¸­ï¼Œä»¥å‘å…¶ä»–äººä»‹ç»æ‚¨è‡ªå·±ã€‚</p><p>æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºä¸ªäººèµ„æ–™READMEä¸GitHubç¤¾åŒºä¸Šæœ‰å…³æ‚¨è‡ªå·±çš„ä¿¡æ¯ã€‚ GitHubåœ¨ä¸ªäººèµ„æ–™é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºæ‚¨çš„ä¸ªäººèµ„æ–™READMEã€‚</p><p>æ‚¨å¯ä»¥å†³å®šåœ¨ä¸ªäººèµ„æ–™READMEä¸­åŒ…å«å“ªäº›ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥å®Œå…¨æ§åˆ¶è‡ªå·±åœ¨GitHubä¸Šçš„å±•ç¤ºæ–¹å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è®¿é—®è€…åœ¨æ‚¨çš„ä¸ªäººèµ„æ–™READMEä¸­å¯èƒ½å‘ç°æœ‰è¶£ï¼Œæœ‰è¶£æˆ–æœ‰ç”¨çš„ä¿¡æ¯ç¤ºä¾‹ã€‚</p><ul><li><p>â€œå…³äºæˆ‘â€éƒ¨åˆ†æè¿°äº†æ‚¨çš„å·¥ä½œå’Œå…´è¶£</p></li><li><p>æ‚¨å¼•ä»¥ä¸ºè±ªçš„è´¡çŒ®ä»¥åŠè¿™äº›è´¡çŒ®çš„èƒŒæ™¯</p></li><li><p>åœ¨æ‚¨æ‰€å‚ä¸çš„ç¤¾åŒºä¸­è·å¾—å¸®åŠ©çš„æŒ‡å—</p></li></ul><p>æ‚¨å¯ä»¥ä½¿ç”¨GitHub Flavored Markdownè®¾ç½®æ–‡æœ¬æ ¼å¼ï¼Œå¹¶åœ¨ä¸ªäººèµ„æ–™READMEä¸­åŒ…å«è¡¨æƒ…ç¬¦å·ï¼Œå›¾åƒå’ŒGIFã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ<a href="https://docs.github.com/en/github/writing-on-github/getting-started-with-writing-and-formatting-on-github">åœ¨GitHubä¸Šç¼–å†™å’Œæ ¼å¼åŒ–å…¥é—¨</a>â€ã€‚</p><h3 id="å…ˆå†³æ¡ä»¶"><a href="#å…ˆå†³æ¡ä»¶" class="headerlink" title="å…ˆå†³æ¡ä»¶"></a>å…ˆå†³æ¡ä»¶</h3><p>å¦‚æœæ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼Œåˆ™GitHubå°†åœ¨æ‚¨çš„ä¸ªäººèµ„æ–™é¡µé¢ä¸Šæ˜¾ç¤ºæ‚¨çš„ä¸ªäººèµ„æ–™READMEã€‚</p><ul><li><p>æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªåç§°ä¸<strong>æ‚¨çš„GitHubç”¨æˆ·åç›¸åŒ¹é…</strong>çš„å­˜å‚¨åº“ã€‚</p></li><li><p>è¯¥å­˜å‚¨åº“æ˜¯<strong>å…¬å…±ï¼ˆPublicï¼‰</strong>çš„ã€‚</p></li><li><p>å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸­åŒ…å«ä¸€ä¸ªåä¸ºREADME.mdçš„æ–‡ä»¶ï¼ˆåˆå§‹åŒ–åˆ›å»ºå³å¯ï¼Œä¸éœ€è¦å…‹éš†åˆ°æœ¬åœ°ï¼‰ã€‚</p></li><li><p>README.mdæ–‡ä»¶åŒ…å«ä»»ä½•å†…å®¹ã€‚</p></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Github/create.PNG" alt=""></p><p>å½“ä½ åˆ›å»ºä»“åº“çš„æ—¶å€™ï¼Œå°†ä»“åº“åå‘½åä¸º<code>mysticalguest</code>ï¼Œä¸‹é¢å°±ä¼šå‡ºç°æç¤ºï¼š</p><blockquote><p><em>æ‚¨å‘ç°äº†ä¸€ä¸ªç§˜å¯†ï¼ MysticalGuest / MysticalGuestæ˜¯ä¸€ä¸ªâ€œç‰¹æ®Šâ€å­˜å‚¨åº“ï¼Œå¯ç”¨äºå°†README.mdæ·»åŠ åˆ°æ‚¨çš„GitHubä¸ªäººèµ„æ–™ä¸­ã€‚ç¡®ä¿å®ƒæ˜¯å…¬å¼€çš„ï¼Œå¹¶ä½¿ç”¨è‡ªè¿°æ–‡ä»¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ä»¥å¼€å§‹ä½¿ç”¨ã€‚</em></p></blockquote><p>å…¶ä»–ä»“åº“ä¸ä¼šå‡ºç°è¿™æ ·çš„æç¤ºã€‚è¯´æ˜æ˜¯æˆåŠŸçš„ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ‚¨åœ¨2020å¹´7æœˆä¹‹å‰åˆ›å»ºäº†ä¸€ä¸ªä¸ç”¨æˆ·åç›¸åŒåç§°çš„å…¬å…±å­˜å‚¨åº“ï¼Œåˆ™GitHubä¸ä¼šåœ¨æ‚¨çš„ä¸ªäººèµ„æ–™ä¸Šè‡ªåŠ¨æ˜¾ç¤ºè¯¥å­˜å‚¨åº“çš„è‡ªè¿°æ–‡ä»¶ã€‚æ‚¨å¯ä»¥é€šè¿‡è½¬åˆ°GitHub.comä¸Šçš„å­˜å‚¨åº“å¹¶å•å‡»â€œå…±äº«åˆ°é…ç½®æ–‡ä»¶â€ï¼Œæ‰‹åŠ¨å°†å­˜å‚¨åº“çš„è‡ªè¿°æ–‡ä»¶å…±äº«åˆ°æ‚¨çš„é…ç½®æ–‡ä»¶ã€‚ï¼ˆè¿™ä¸ªä¸ç”¨ç®¡äº†ï¼Œå› ä¸º7æœˆä¹‹åå¾ˆæ–¹ä¾¿ï¼Œä¸€æ—¦ä»“åº“åˆ›å»ºæˆåŠŸï¼ŒGitHubä¸ªäººä¸»é¡µå°±ä¼šæ˜¾ç¤ºäº†ï¼ï¼‰</p></blockquote><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Github/success.PNG" alt=""></p><p>ä¸‹é¢å°±å¼€å§‹<strong>åœ¨çº¿ç¼–è¾‘</strong>è¿™ä¸ªä»“åº“ä¸‹çš„README.mdæ–‡ä»¶å³å¯ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Github/edit.PNG" alt=""></p><h3 id="ç¼–è¾‘"><a href="#ç¼–è¾‘" class="headerlink" title="ç¼–è¾‘"></a>ç¼–è¾‘</h3><p>GitHubæä¾›äº†å¼ºå¤§çš„åœ¨çº¿ç¼–è¾‘å™¨ï¼Œè¿˜å¯ä»¥é¢„è§ˆã€‚æˆ‘çš„ç¼–è¾‘ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">### Welcomeï¼ğŸ‘‹ </span></span><br><span class="line"><span class="bullet">+ </span><span class="strong">**My Github Blog.[https://mysticalguest.github.io](https://mysticalguest.github.io/)**</span></span><br><span class="line"><span class="bullet">+ </span><span class="strong">**My Gitee Blog.[https://mysteryguest.gitee.io](https://mysteryguest.gitee.io/)**</span></span><br><span class="line"><span class="bullet">+ </span><span class="strong">**My CSDN Blog.[https://blog.csdn.net/etherealsymbol](https://blog.csdn.net/etherealsymbol/)**</span></span><br><span class="line"><span class="bullet">+ </span><span class="strong">**My CNBlogs Blog.[https://www.cnblogs.com/mysteryguest](https://www.cnblogs.com/mysteryguest/)**</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>ğŸ”­ Iâ€™m currently working on java source code...</span><br><span class="line"><span class="bullet">- </span>ğŸŒ± Iâ€™m currently learning Java, MySQL, Spring, Redis, Elasticsearch...</span><br><span class="line"><span class="bullet">- </span>ğŸ“« How to reach me: mysticalguest@163.com</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!--</span></span></span><br><span class="line"><span class="xml">**MysticalGuest/mysticalguest** is a âœ¨ _special_ âœ¨ repository because its `README.md` (this file) appears on your GitHub profile.</span></span><br><span class="line"></span><br><span class="line"><span class="xml">Here are some ideas to get you started:</span></span><br><span class="line"></span><br><span class="line"><span class="xml">- ğŸ”­ Iâ€™m currently working on ...</span></span><br><span class="line"><span class="xml">- ğŸŒ± Iâ€™m currently learning ...</span></span><br><span class="line"><span class="xml">- ğŸ‘¯ Iâ€™m looking to collaborate on ...</span></span><br><span class="line"><span class="xml">- ğŸ¤” Iâ€™m looking for help with ...</span></span><br><span class="line"><span class="xml">- ğŸ’¬ Ask me about ...</span></span><br><span class="line"><span class="xml">- ğŸ“« How to reach me: ...</span></span><br><span class="line"><span class="xml">- ğŸ˜„ Pronouns: ...</span></span><br><span class="line"><span class="xml">- âš¡ Fun fact: ...</span></span><br><span class="line"><span class="xml">--&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–è¾‘å®Œæˆ<code>Commit Changes</code>å³å¯ï¼Œåˆ·æ–°ä¸»é¡µã€‚</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Github/github.PNG" alt=""></p><p>æˆåŠŸï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼</p><h3 id="åˆ é™¤ä¸ªäººèµ„æ–™README"><a href="#åˆ é™¤ä¸ªäººèµ„æ–™README" class="headerlink" title="åˆ é™¤ä¸ªäººèµ„æ–™README"></a>åˆ é™¤ä¸ªäººèµ„æ–™README</h3><p>å¦‚æœæ»¡è¶³ä»¥ä¸‹ä»»ä½•æ¡ä»¶ï¼Œåˆ™ä»æ‚¨çš„GitHubä¸ªäººèµ„æ–™ä¸­åˆ é™¤ä¸ªäººèµ„æ–™READMEï¼š</p><ul><li><p>è‡ªè¿°æ–‡ä»¶ä¸ºç©ºæˆ–ä¸å­˜åœ¨ã€‚</p></li><li><p>è¯¥å­˜å‚¨åº“æ˜¯ç§æœ‰çš„ã€‚</p></li><li><p>å­˜å‚¨åº“åç§°ä¸å†ä¸æ‚¨çš„ç”¨æˆ·ååŒ¹é…ã€‚</p></li></ul><p>é€‰æ‹©çš„æ–¹æ³•å–å†³äºæ‚¨çš„éœ€æ±‚ï¼Œä½†æ˜¯å¦‚æœä¸ç¡®å®šï¼Œæˆ‘ä»¬å»ºè®®å°†å­˜å‚¨åº“è®¾ä¸ºç§æœ‰ã€‚ æœ‰å…³å¦‚ä½•å°†å­˜å‚¨åº“è®¾ä¸ºç§æœ‰çš„æ­¥éª¤ï¼Œè¯·å‚é˜…â€œ<a href="https://docs.github.com/en/github/administering-a-repository/setting-repository-visibility#changing-a-repositorys-visibility">æ›´æ”¹å­˜å‚¨åº“çš„å¯è§æ€§</a>â€ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README&quot;&gt;&lt;a href=&quot;#ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README&quot; class=&quot;headerlink&quot; title=&quot;ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README&quot;&gt;&lt;/a&gt;ç®¡ç†æ‚¨çš„ä¸ªäººèµ„æ–™README&lt;/h2&gt;
    
    </summary>
    
    
      <category term="é…ç½®" scheme="https://mysticalguest.github.io/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="GitHub" scheme="https://mysticalguest.github.io/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Javaå¤šçº¿ç¨‹</title>
    <link href="https://mysticalguest.github.io/2020/09/05/Java/Thread/"/>
    <id>https://mysticalguest.github.io/2020/09/05/Java/Thread/</id>
    <published>2020-09-05T15:50:15.714Z</published>
    <updated>2020-09-09T03:15:34.105Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åˆ›å»ºçº¿ç¨‹çš„<strong>ä¸»è¦</strong>æ–¹å¼</p><ol><li>ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆé‡ç‚¹ï¼‰</li><li>å®ç°Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆé‡ç‚¹ï¼‰</li><li>å®ç°Callableæ¥å£æˆ–Futureæ¥å£åˆ›å»ºçº¿ç¨‹ï¼ˆäº†è§£ï¼‰</li></ol></blockquote><a id="more"></a><h2 id="1ã€å‰è¨€"><a href="#1ã€å‰è¨€" class="headerlink" title="1ã€å‰è¨€"></a>1ã€å‰è¨€</h2><p>å…³äºå­¦ä¹ Javaå¤šçº¿ç¨‹ï¼Œå…¶ä¸­ç¨‹åºï¼Œè¿›ç¨‹å’Œçº¿ç¨‹ç­‰é‡è¦æ¦‚å¿µåŠå…¶å…³ç³»åœ¨è¿™é‡Œå°±ä¸å¤šèµ˜è¿°ï¼Œä¹‹å‰æ“ä½œç³»ç»Ÿä¹Ÿè¯¦ç»†è®²è¿‡ï¼Œæˆ‘å°±ä¸å†è¯¦ç»†æ‰©å±•ï¼Œç›´æ¥è¿›å…¥Javaçº¿ç¨‹çš„å­¦ä¹ å§ï¼</p><p>æ­¤å¤„åˆ†äº«ä¸€ä¸‹<a href="https://pan.baidu.com/s/1BqJdwPNVusF14r9JhMzwdA">Java1.8å¸®åŠ©æ–‡æ¡£</a>ï¼ˆä¸­æ–‡ç‰ˆï¼‰ï¼Œæå–ç : k26d</p><h2 id="2ã€Threadç±»"><a href="#2ã€Threadç±»" class="headerlink" title="2ã€Threadç±»"></a>2ã€Threadç±»</h2><h3 id="2-1-Threadç±»å®ç°Runnableæ¥å£"><a href="#2-1-Threadç±»å®ç°Runnableæ¥å£" class="headerlink" title="2.1 Threadç±»å®ç°Runnableæ¥å£"></a>2.1 Threadç±»å®ç°Runnableæ¥å£</h3><p>æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* Make sure registerNatives is the first thing &lt;clinit&gt; does. */</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">registerNatives</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    registerNatives();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>            priority;</span><br><span class="line">  <span class="keyword">private</span> Thread         threadQ;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span>           eetop;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Whether or not to single_step this thread. */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span>     single_step;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-åˆ›å»ºæ­¥éª¤ï¼š"><a href="#2-2-åˆ›å»ºæ­¥éª¤ï¼š" class="headerlink" title="2.2 åˆ›å»ºæ­¥éª¤ï¼š"></a>2.2 åˆ›å»ºæ­¥éª¤ï¼š</h3><p><strong>å°†ä¸€ä¸ªç±»å£°æ˜ä¸º<code>Thread</code>çš„å­ç±»ã€‚  è¿™ä¸ªå­ç±»åº”è¯¥é‡å†™<code>Thread</code>ç±»çš„<code>run</code>æ–¹æ³• ã€‚ ç„¶åå¯ä»¥åˆ†é…å¹¶å¯åŠ¨å­ç±»çš„å®ä¾‹</strong></p><ul><li>è‡ªå®šä¹‰çº¿ç¨‹ç±»ç»§æ‰¿<strong>Threadç±»</strong></li><li>é‡å†™<strong>run()</strong>æ–¹æ³•ï¼Œç¼–å†™çº¿ç¨‹æ‰§è¡Œä½“</li><li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨<strong>start()</strong>æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li></ul><h4 id="2-2-1-æµ‹è¯•"><a href="#2-2-1-æµ‹è¯•" class="headerlink" title="2.2.1 æµ‹è¯•"></a>2.2.1 æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread1</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// runæ–¹æ³•çº¿ç¨‹ä½“</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      System.out.print(String.format(<span class="string">"%-3d"</span>, i) + <span class="string">"Hello    "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// mainæ–¹æ³•ä¸»çº¿ç¨‹</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">    Thread1 thread1 = <span class="keyword">new</span> Thread1();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è°ƒç”¨startæ–¹æ³•å¼€å¯çº¿ç¨‹</span></span><br><span class="line">    thread1.start();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">800</span>; i++) &#123;</span><br><span class="line">      System.err.print(String.format(<span class="string">"%-3d"</span>, i) + <span class="string">"World    "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/Thread/thread1.PNG" alt=""></p><blockquote><p>æ³¨æ„ï¼šçº¿ç¨‹å¼€å¯ä¸ä¸€å®šç«‹å³æ‰§è¡Œï¼Œç”±CPUè°ƒåº¦æ‰§è¡Œ</p><p>è°ƒç”¨startæ–¹æ³•ï¼Œæ˜¯çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œäº¤æ›¿æ‰§è¡Œã€‚å¦‚æœè°ƒç”¨runæ–¹æ³•ï¼Œå°±æ˜¯é¡ºåºæ‰§è¡Œã€‚</p></blockquote><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/Thread/run_and_start.PNG" alt=""></p><h4 id="2-2-2-æ¡ˆä¾‹ï¼šå®ç°å¤šçº¿ç¨‹åŒæ­¥ä¸‹è½½å›¾ç‰‡"><a href="#2-2-2-æ¡ˆä¾‹ï¼šå®ç°å¤šçº¿ç¨‹åŒæ­¥ä¸‹è½½å›¾ç‰‡" class="headerlink" title="2.2.2 æ¡ˆä¾‹ï¼šå®ç°å¤šçº¿ç¨‹åŒæ­¥ä¸‹è½½å›¾ç‰‡"></a>2.2.2 æ¡ˆä¾‹ï¼šå®ç°å¤šçº¿ç¨‹åŒæ­¥ä¸‹è½½å›¾ç‰‡</h4><p>APACHEå®˜ç½‘ä¸‹è½½<a href="https://commons.apache.org/proper/commons-io/download_io.cgi">commons-io</a>ï¼Œå¯¼å…¥é¡¹ç›®Library</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread2</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String url;<span class="comment">// Picture url</span></span><br><span class="line">  <span class="keyword">private</span> String path;</span><br><span class="line">  <span class="keyword">private</span> String name;<span class="comment">// Saved file name</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Thread2</span><span class="params">(String url, String path, String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.url = url;</span><br><span class="line">    <span class="keyword">this</span>.path = path;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    WebDownloader webDownloader = <span class="keyword">new</span> WebDownloader();</span><br><span class="line">    webDownloader.downloader(url, path, name);</span><br><span class="line">    System.out.println(<span class="string">"Downloaded the file which name is "</span> + name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String path = <span class="string">"src/com/newthread/img/"</span>;</span><br><span class="line">    Thread2 t1 = <span class="keyword">new</span> Thread2(</span><br><span class="line">        <span class="string">"https://wx1.sinaimg.cn/orj360/67e231a6ly1geq8okovekj21hc0u0e42.jpg"</span>,</span><br><span class="line">        path, <span class="string">"tower.jpg"</span>);</span><br><span class="line">    Thread2 t2 = <span class="keyword">new</span> Thread2(</span><br><span class="line">        <span class="string">"https://wx1.sinaimg.cn/orj360/67e231a6ly1geq8oq8jx1j21hc0u0qse.jpg"</span>,</span><br><span class="line">        path, <span class="string">"bike.jpg"</span>);</span><br><span class="line">    Thread2 t3 = <span class="keyword">new</span> Thread2(</span><br><span class="line">        <span class="string">"https://wx1.sinaimg.cn/orj360/67e231a6ly1geq8on2u4gj21hc0u0ngj.jpg"</span>,</span><br><span class="line">        path, <span class="string">"bridge.jpg"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// simultaneous execution</span></span><br><span class="line">    t1.start();</span><br><span class="line">    t2.start();</span><br><span class="line">    t3.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// downloader</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WebDownloader</span></span>&#123;</span><br><span class="line">  <span class="comment">// download function</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downloader</span><span class="params">(String url, String path,String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      FileUtils.copyURLToFile(<span class="keyword">new</span> URL(url), <span class="keyword">new</span> File(path + name));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">      System.err.println(<span class="string">"IO Exception...downloader function has a problem!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/Thread/webdownloader.PNG" alt=""></p><h2 id="3ã€Runnableæ¥å£"><a href="#3ã€Runnableæ¥å£" class="headerlink" title="3ã€Runnableæ¥å£"></a>3ã€Runnableæ¥å£</h2><h3 id="3-1-Runnableæ¥å£"><a href="#3-1-Runnableæ¥å£" class="headerlink" title="3.1 Runnableæ¥å£"></a>3.1 Runnableæ¥å£</h3><p>å£°æ˜å®ç°ç±»<code>Runnable</code>æ¥å£ã€‚ é‚£ä¸ªç±»ç„¶åå®ç°äº†<code>run</code>æ–¹æ³•ã€‚  ç„¶åå¯ä»¥åˆ†é…ç±»çš„å®ä¾‹ï¼Œåœ¨<strong>åˆ›å»º<code>Thread</code>æ—¶ä½œä¸ºå‚æ•°ä¼ é€’</strong>ï¼Œå¹¶å¯åŠ¨ã€‚</p><p>æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* Make sure registerNatives is the first thing &lt;clinit&gt; does. */</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">registerNatives</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    registerNatives();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Thread</span><span class="params">(Runnable target)</span> </span>&#123;</span><br><span class="line">    init(<span class="keyword">null</span>, target, <span class="string">"Thread-"</span> + nextThreadNum(), <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å®ç°Runnableæ¥å£åˆ›å»ºçš„çº¿ç¨‹ï¼Œä¸èƒ½é€šè¿‡runæˆ–startæ–¹æ³•æ¥å¯åŠ¨ã€‚åœ¨Threadç±»ä¸­æœ‰ä¸€ä¸ªæ„é€ å™¨ï¼Œè¿™ä¸ªæ„é€ å™¨æ¥æ”¶ä¸€ä¸ªRunnableæ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼Œæ„é€ Threadçº¿ç¨‹ç±»å¯¹è±¡ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªçº¿ç¨‹ç±»å¯¹è±¡è°ƒç”¨startæ–¹æ³•å¯åŠ¨æˆ‘ä»¬çš„çº¿ç¨‹ã€‚</p></blockquote><h3 id="3-2-åˆ›å»ºæ­¥éª¤"><a href="#3-2-åˆ›å»ºæ­¥éª¤" class="headerlink" title="3.2 åˆ›å»ºæ­¥éª¤"></a>3.2 åˆ›å»ºæ­¥éª¤</h3><ul><li>è‡ªå®šä¹‰çº¿ç¨‹ç±»å®ç°<strong>Runnableæ¥å£</strong></li><li>å®ç°<strong>run()</strong>æ–¹æ³•ï¼Œç¼–å†™çº¿ç¨‹æ‰§è¡Œä½“</li><li>åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨<strong>start()</strong>æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li></ul><p>æ¨èä½¿ç”¨Runnableå¯¹è±¡ï¼Œå› ä¸ºJavaå•ç»§æ‰¿çš„å±€é™æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread3</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// runæ–¹æ³•çº¿ç¨‹ä½“</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      System.out.print(String.format(<span class="string">"%-3d"</span>, i) + <span class="string">"Hello    "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// mainæ–¹æ³•ä¸»çº¿ç¨‹</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºRunnableæ¥å£çš„å®ç°ç±»å¯¹è±¡</span></span><br><span class="line">    Thread3 thread3 = <span class="keyword">new</span> Thread3();</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    Thread thread = new Thread(thread3);</span></span><br><span class="line"><span class="comment">//    thread.start();</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">new</span> Thread(thread3).start();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">800</span>; i++) &#123;</span><br><span class="line">      System.err.print(String.format(<span class="string">"%-3d"</span>, i) + <span class="string">"World    "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-å¯¹æ¯”"><a href="#3-3-å¯¹æ¯”" class="headerlink" title="3.3 å¯¹æ¯”"></a>3.3 å¯¹æ¯”</h3><ul><li>ç»§æ‰¿Threadç±»<ul><li>å­ç±»ç»§æ‰¿Threadç±»å…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›</li><li>å¯åŠ¨çº¿ç¨‹ï¼šå­ç±»å¯¹è±¡.start()</li><li>ä¸å»ºè®®ä½¿ç”¨ï¼šé¿å…OOPå•ç»§æ‰¿å±€é™</li></ul></li><li>å®ç°Runnableæ¥å£<ul><li>å­ç±»å®ç°Runnableæ¥å£å…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›</li><li>å¯åŠ¨çº¿ç¨‹ï¼šä¼ å…¥ç›®æ ‡å¯¹è±¡+Threadå¯¹è±¡.start()</li><li>æ¨èä½¿ç”¨ï¼šé¿å…å•ç»§æ‰¿å±€é™æ€§ï¼Œçµæ´»æ–¹ä¾¿ï¼Œæ–¹ä¾¿åŒä¸€å¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨</li></ul></li></ul><h2 id="4ã€Callableæ¥å£ï¼ˆäº†è§£å³å¯ï¼‰"><a href="#4ã€Callableæ¥å£ï¼ˆäº†è§£å³å¯ï¼‰" class="headerlink" title="4ã€Callableæ¥å£ï¼ˆäº†è§£å³å¯ï¼‰"></a>4ã€Callableæ¥å£ï¼ˆäº†è§£å³å¯ï¼‰</h2><h3 id="4-1-æºç ï¼š"><a href="#4-1-æºç ï¼š" class="headerlink" title="4.1 æºç ï¼š"></a>4.1 æºç ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callable</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Computes a result, or throws an exception if unable to do so.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> computed result</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception if unable to compute a result</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">  <span class="function">V <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä»æºç å¯ä»¥çœ‹å‡ºï¼ŒCallableæ¥å£ä¸­çš„call()æ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ˜¯ä¸€ä¸ªæ³›å‹ï¼Œå’ŒFutureã€FutureTaské…åˆå¯ä»¥ç”¨æ¥è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœã€‚</p><p>è¿™å…¶å®æ˜¯å¾ˆæœ‰ç”¨çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå› ä¸ºå¤šçº¿ç¨‹ç›¸æ¯”å•çº¿ç¨‹æ›´éš¾ã€æ›´å¤æ‚çš„ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯å› ä¸ºå¤šçº¿ç¨‹å……æ»¡ç€æœªçŸ¥æ€§ï¼ŒæŸæ¡çº¿ç¨‹æ˜¯å¦æ‰§è¡Œäº†ï¼ŸæŸæ¡çº¿ç¨‹æ‰§è¡Œäº†å¤šä¹…ï¼ŸæŸæ¡çº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™æˆ‘ä»¬æœŸæœ›çš„æ•°æ®æ˜¯å¦å·²ç»èµ‹å€¼å®Œæ¯•ï¼Ÿæ— æ³•å¾—çŸ¥ï¼Œæˆ‘ä»¬èƒ½åšçš„åªæ˜¯ç­‰å¾…è¿™æ¡å¤šçº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•è€Œå·²ã€‚è€ŒCallable+Future/FutureTaskå´å¯ä»¥è·å–å¤šçº¿ç¨‹è¿è¡Œçš„ç»“æœï¼Œå¯ä»¥åœ¨ç­‰å¾…æ—¶é—´å¤ªé•¿æ²¡è·å–åˆ°éœ€è¦çš„æ•°æ®çš„æƒ…å†µä¸‹å–æ¶ˆè¯¥çº¿ç¨‹çš„ä»»åŠ¡ã€‚</p></blockquote><h3 id="4-2-åˆ›å»ºæ­¥éª¤"><a href="#4-2-åˆ›å»ºæ­¥éª¤" class="headerlink" title="4.2 åˆ›å»ºæ­¥éª¤"></a>4.2 åˆ›å»ºæ­¥éª¤</h3><ul><li><p>å®ç°Callableæ¥å£ï¼Œéœ€è¦è¿”å›å€¼ç±»å‹</p></li><li><p>é‡å†™callæ–¹æ³•ï¼Œéœ€è¦æŠ›å‡ºå¼‚å¸¸</p></li><li><p>åˆ›å»ºç›®æ ‡å¯¹è±¡</p></li><li><p>åˆ›å»ºæ‰§è¡ŒæœåŠ¡ï¼š<code>ExecutorService ser = Executors.newFixedThreadPool(1);</code></p></li><li><p>æäº¤æ‰§è¡Œï¼š<code>Future&lt; Boolean&gt; result1 = ser.submit(1);</code></p></li><li><p>è·å–ç»“æœï¼š<code>boolean r1= result1.get();</code></p></li><li><p>å…³é—­æœåŠ¡ï¼š<code>ser.shutdownNow();</code></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Callable1</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Boolean</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      System.out.println(String.format(<span class="string">"%-3d"</span>, i) +</span><br><span class="line">            Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> InterruptedException, ExecutionException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Callable1 callable1 = <span class="keyword">new</span> Callable1();</span><br><span class="line">    Callable1 callable2 = <span class="keyword">new</span> Callable1();</span><br><span class="line">    Callable1 callable3 = <span class="keyword">new</span> Callable1();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºæ‰§è¡ŒæœåŠ¡</span></span><br><span class="line">    ExecutorService ser = Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æäº¤æ‰§è¡Œ</span></span><br><span class="line">    Future&lt;Boolean&gt; result1 = ser.submit(callable1);</span><br><span class="line">    Future&lt;Boolean&gt; result2 = ser.submit(callable2);</span><br><span class="line">    Future&lt;Boolean&gt; result3 = ser.submit(callable3);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–ç»“æœ</span></span><br><span class="line">    <span class="keyword">boolean</span> r1= result1.get();</span><br><span class="line">    <span class="keyword">boolean</span> r2= result2.get();</span><br><span class="line">    <span class="keyword">boolean</span> r3= result3.get();</span><br><span class="line">    System.out.println(r1 + <span class="string">" "</span>+ r2 + <span class="string">" "</span> + r3);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æœåŠ¡</span></span><br><span class="line">    ser.shutdownNow();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5ã€é™æ€ä»£ç†æ¨¡å¼"><a href="#5ã€é™æ€ä»£ç†æ¨¡å¼" class="headerlink" title="5ã€é™æ€ä»£ç†æ¨¡å¼"></a>5ã€é™æ€ä»£ç†æ¨¡å¼</h2><h3 id="5-1-å†…å®¹"><a href="#5-1-å†…å®¹" class="headerlink" title="5.1 å†…å®¹"></a>5.1 å†…å®¹</h3><p>çœŸå®è§’è‰²ï¼Œä»£ç†è§’è‰²ï¼›çœŸå®è§’è‰²å’Œä»£ç†è§’è‰²è¦å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œä»£ç†è§’è‰²è¦æŒæœ‰çœŸå®è§’è‰²çš„<strong>å¼•ç”¨</strong>ã€‚</p><blockquote><p>åœ¨Javaä¸­çº¿ç¨‹çš„è®¾è®¡ä½¿ç”¨äº†é™æ€ä»£ç†è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­è‡ªå®šä¹‰çº¿ç¨‹ç±»å®ç°Runableæ¥å£ï¼ŒThreadç±»ä¹Ÿå®ç°äº†Runalbeæ¥å£ï¼Œåœ¨åˆ›å»ºå­çº¿ç¨‹çš„æ—¶å€™ï¼Œä¼ å…¥äº†è‡ªå®šä¹‰çº¿ç¨‹ç±»çš„å¼•ç”¨ï¼Œå†é€šè¿‡è°ƒç”¨start()æ–¹æ³•ï¼Œè°ƒç”¨è‡ªå®šä¹‰çº¿ç¨‹å¯¹è±¡çš„run()æ–¹æ³•ã€‚å®ç°äº†çº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚</p></blockquote><p>Threadå¯¹è±¡è°ƒç”¨çº¿ç¨‹çš„start()æ–¹æ³•ï¼Œåœ¨å†…éƒ¨è°ƒç”¨äº†çœŸå®è§’è‰²çš„run()æ–¹æ³•ã€‚</p><h3 id="5-2-è®¾è®¡"><a href="#5-2-è®¾è®¡" class="headerlink" title="5.2 è®¾è®¡"></a>5.2 è®¾è®¡</h3><p>ä»£ç ç»“æ„ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</p><ul><li><p>æ¥å£ï¼šä¸»é¢˜</p></li><li><p>ä»£ç†ç±»</p></li><li><p>è¢«ä»£ç†ç±»</p></li></ul><blockquote><p>å®ç°æ–¹å¼ï¼šä»£ç†ç±»å’Œè¢«ä»£ç†ç±»è¦å®ç°åŒä¸€ä¸ªä¸»é¢˜æ¥å£ï¼Œè€Œä¸”ä»£ç†ç±»ä¸­è¦æœ‰ä¸€ä¸ªè¢«ä»£ç†ç±»çš„å±æ€§ï¼ˆtargetï¼‰ï¼Œè¿™æ ·æ‰èƒ½æŠŠæ ¸å¿ƒä¸šåŠ¡é€»è¾‘äº¤è¿˜ç»™è¢«ä»£ç†ç±»å®Œæˆï¼›è€Œä¸€äº›ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ— å…³çš„é€»è¾‘ï¼Œå¹¶ä¸”éœ€æ±‚æ˜¯å¤šå˜çš„ï¼Œé‚£ä¹ˆè¿™äº›é€»è¾‘å°±å¯ä»¥äº¤ç»™ä»£ç†ç±»æ¥å®Œæˆã€‚</p><p>ä»£ç†å¯¹è±¡å¯ä»¥åšå¾ˆå¤šçœŸå®å¯¹è±¡åšä¸äº†çš„äº‹æƒ…ï¼ŒçœŸå®å¯¹è±¡ä¸“æ³¨åšè‡ªå·±çš„äº‹æƒ…</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticProxy</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    SpringPioneer springPioneer = <span class="keyword">new</span> SpringPioneer(<span class="keyword">new</span> Programmer());</span><br><span class="line">    springPioneer.Deploy();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">SpringBootFrame</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ¥å£ä¸»é¢˜ï¼šæ¡†æ¶æ•´åˆéƒ¨ç½²</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Deploy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çœŸå®è§’è‰²ï¼Œç¨‹åºå‘˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Programmer</span> <span class="keyword">implements</span> <span class="title">SpringBootFrame</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Deploy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Programmer SpringBoot deployed successfully!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç†è§’è‰²ï¼ŒSpringBootçš„ä½œè€…ï¼Œå¸®æˆ‘ä»¬ç®€åŒ–å¼€å‘</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringPioneer</span> <span class="keyword">implements</span> <span class="title">SpringBootFrame</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä»£ç†è°--&gt;çœŸå®ç›®æ ‡è§’è‰²</span></span><br><span class="line">  <span class="keyword">private</span> SpringBootFrame target;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SpringPioneer</span><span class="params">(SpringBootFrame target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.target = target;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Deploy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    before();</span><br><span class="line">    <span class="keyword">this</span>.target.Deploy();<span class="comment">// è¿™å°±æ˜¯çœŸå®å¯¹è±¡</span></span><br><span class="line">    after();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"ç ”å‘å‡ºè¿™ä¸ªSpringBootæ¡†æ¶ï¼Œå¹¶å¼€æºã€‚"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"ä¸æ–­æ¨å‡ºæ–°çš„ç‰¹æ€§ã€‚"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6ã€Lambdaè¡¨è¾¾å¼"><a href="#6ã€Lambdaè¡¨è¾¾å¼" class="headerlink" title="6ã€Lambdaè¡¨è¾¾å¼"></a>6ã€Lambdaè¡¨è¾¾å¼</h2><p>å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µ</p><h3 id="6-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Ÿ"><a href="#6-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Ÿ" class="headerlink" title="6.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Ÿ"></a>6.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Ÿ</h3><p>é¿å…åŒ¿åå†…éƒ¨ç±»å®šä¹‰è¿‡å¤šï¼Œä»£ç ç®€æ´ï¼Œå»æ‰æ— æ„ä¹‰ä»£ç ï¼Œæ ¸å¿ƒé€»è¾‘ã€‚</p><p>ç†è§£Functional Interfaceï¼ˆå‡½æ•°å¼æ¥å£ï¼‰æ˜¯å­¦ä¹ Java8 lambdaè¡¨è¾¾å¼çš„å…³é”®ã€‚</p><p>å‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼šä»»ä½•æ¥å£ï¼Œå¦‚æœåªåŒ…å«å”¯ä¸€ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºå‡½æ•°å¼æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºæ¥å£çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">lambda1</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 3.é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticEntityLike</span> <span class="keyword">implements</span> <span class="title">Like</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"Static likes lambda!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Like entityLike = <span class="keyword">new</span> EntityLike();</span><br><span class="line">    entityLike.lambda();</span><br><span class="line"></span><br><span class="line">    Like staticEntityLike = <span class="keyword">new</span> StaticEntityLike();</span><br><span class="line">    staticEntityLike.lambda();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.å±€éƒ¨å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">InternalEntityLike</span> <span class="keyword">implements</span> <span class="title">Like</span> </span>&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Internal likes lambda!"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Like internalEntityLike = <span class="keyword">new</span> InternalEntityLike();</span><br><span class="line">    internalEntityLike.lambda();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.åŒ¿åå†…éƒ¨ç±»ï¼Œæ²¡æœ‰ç±»çš„åç§°ï¼Œå¿…é¡»å€ŸåŠ©æ¥å£æˆ–è€…çˆ¶ç±»</span></span><br><span class="line">    Like anonymousEntityLike = <span class="keyword">new</span> Like() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Anonymous likes lambda!"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    anonymousEntityLike.lambda();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.ç”¨lambdaç®€åŒ–</span></span><br><span class="line">    Like lambdaLike = () -&gt; &#123;</span><br><span class="line">      System.out.println(<span class="string">"Lambda likes lambda!"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    lambdaLike.lambda();</span><br><span class="line"></span><br><span class="line"><span class="comment">//    new Like(()-&gt;System.out.println("Lambda likes lambda!")).lambda();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7.å¸¦å‚æ•°çš„</span></span><br><span class="line">    Love lambdaLove = (<span class="keyword">int</span> t) -&gt; &#123;</span><br><span class="line">      System.out.println(<span class="string">"Lambda loves you "</span> + t + <span class="string">" times!"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    lambdaLove.time(<span class="number">520</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7.1ç®€åŒ–å»æ‰å‚æ•°ç±»å‹</span></span><br><span class="line">    Love love1 = (t) -&gt; &#123;</span><br><span class="line">      System.out.println(<span class="string">"Lambda loves you "</span> + t + <span class="string">" times!"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    love1.time(<span class="number">521</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7.2ç®€åŒ–å»æ‰æ‹¬å·</span></span><br><span class="line">    Love love2 = t -&gt; &#123;</span><br><span class="line">      System.out.println(<span class="string">"Lambda loves you "</span> + t + <span class="string">" times!"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    love2.time(<span class="number">522</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7.3ç®€åŒ–å»æ‰èŠ±æ‹¬å·</span></span><br><span class="line">    <span class="comment">// lambdaè¡¨è¾¾å¼åªèƒ½æœ‰ä¸€è¡Œä»£ç çš„æƒ…å†µä¸‹æ‰èƒ½ç®€åŒ–æˆä¸ºä¸€è¡Œï¼Œå¦‚æœæœ‰å¤šè¡Œï¼Œé‚£ä¹ˆå°±ç”¨ä»£ç å—åŒ…è£¹</span></span><br><span class="line">    Love love3 = t -&gt; System.out.println(<span class="string">"Lambda loves you "</span> + t + <span class="string">" times!"</span>);</span><br><span class="line">    love3.time(<span class="number">523</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.å®šä¹‰ä¸€ä¸ªå‡½æ•°å¼æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Like</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å®ç°ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EntityLike</span> <span class="keyword">implements</span> <span class="title">Like</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"I like lambda!"</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦å‚æ•°çš„</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Love</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">time</span><span class="params">(<span class="keyword">int</span> t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤šä¸ªå‚æ•°å¯ä»¥å»æ‰å‚æ•°ç±»å‹ï¼Œå†ç®€åŒ–å°±å¿…é¡»åŠ ä¸Šæ‹¬å·<code>(a, b)-&gt;{};</code></p><h2 id="7ã€çº¿ç¨‹"><a href="#7ã€çº¿ç¨‹" class="headerlink" title="7ã€çº¿ç¨‹"></a>7ã€çº¿ç¨‹</h2><h3 id="7-1-çº¿ç¨‹çŠ¶æ€"><a href="#7-1-çº¿ç¨‹çŠ¶æ€" class="headerlink" title="7.1 çº¿ç¨‹çŠ¶æ€"></a>7.1 çº¿ç¨‹çŠ¶æ€</h3><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/Thread/thread_state.PNG" style="zoom:80%;" /></p><p>åˆ›å»ºçŠ¶æ€ï¼ˆnewï¼‰ï¼š<code>Thread t = new Thread();</code>ï¼Œçº¿ç¨‹å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå°±è¿›å…¥åˆ°äº†æ–°ç”ŸçŠ¶æ€ã€‚</p><p>å°±ç»ªçŠ¶æ€ï¼šå½“è°ƒç”¨<code>start()</code>æ–¹æ³•ï¼Œçº¿ç¨‹ç«‹å³è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œä½†ä¸æ„å‘³ç€ç«‹å³è°ƒåº¦æ‰§è¡Œã€‚</p><p>è¿è¡ŒçŠ¶æ€ï¼šCPUè°ƒåº¦è¿›å…¥è¿è¡ŒçŠ¶æ€çº¿ç¨‹æ‰çœŸæ­£æ‰§è¡Œçº¿ç¨‹ä½“çš„ä»£ç å—ã€‚</p><p>é˜»å¡çŠ¶æ€ï¼šå½“è°ƒç”¨<code>sleep()</code>ï¼Œ<code>wait()</code>æˆ–åŒæ­¥é”å®šæ—¶ï¼Œçº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€å°±æ˜¯ä»£ç ä¸å¾€ä¸‹æ‰§è¡Œï¼Œé˜»å¡<br>äº‹ä»¶è§£é™¤åï¼Œé‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…cpuè°ƒåº¦æ‰§è¡Œã€‚</p><p>æ­»äº¡çŠ¶æ€ï¼ˆdeadï¼‰ï¼šçº¿ç¨‹ä¸­æ–­æˆ–è€…ç»“æŸï¼Œ<strong>ä¸€æ—¦è¿›å…¥æ­»äº¡çŠ¶æ€ï¼Œå°±ä¸èƒ½å†æ¬¡å¯åŠ¨</strong>ã€‚</p><h3 id="7-2-çº¿ç¨‹æ–¹æ³•"><a href="#7-2-çº¿ç¨‹æ–¹æ³•" class="headerlink" title="7.2 çº¿ç¨‹æ–¹æ³•"></a>7.2 çº¿ç¨‹æ–¹æ³•</h3><div class="table-container"><table><thead><tr><th style="text-align:center">æ–¹æ³•</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">setPriority(int newPriority)</td><td style="text-align:left">è®¾ç½®å½“å‰çº¿ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td style="text-align:center">static void sleep(long millis)</td><td style="text-align:left">åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰ã€‚ä¼‘çœ çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</td></tr><tr><td style="text-align:center">void join()</td><td style="text-align:left">è°ƒç”¨joinæ–¹æ³•çš„çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œï¼Œå…¶ä»–çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œç­‰è¯¥çº¿ç¨‹æ‰§è¡Œå®Œåï¼Œå…¶ä»–çº¿ç¨‹å†æ‰§è¡Œã€‚æœ‰å¯èƒ½è¢«å¤–ç•Œä¸­æ–­äº§ç”ŸInterruptedExceptionä¸­æ–­å¼‚å¸¸ã€‚</td></tr><tr><td style="text-align:center">static void yield()</td><td style="text-align:left">è°ƒç”¨yieldæ–¹æ³•çš„çº¿ç¨‹ï¼Œï¼ˆæš‚åœå½“å‰æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼‰ä¼šç¤¼è®©å…¶ä»–çº¿ç¨‹å…ˆè¿è¡Œã€‚ï¼ˆå¤§æ¦‚ç‡å…¶ä»–çº¿ç¨‹å…ˆè¿è¡Œï¼Œå°æ¦‚ç‡è‡ªå·±è¿˜ä¼šè¿è¡Œï¼‰</td></tr><tr><td style="text-align:center">void interrupt()</td><td style="text-align:left">ä¸­æ–­çº¿ç¨‹ï¼Œä¸å»ºè®®ä½¿ç”¨</td></tr><tr><td style="text-align:center">boolean isAlive()</td><td style="text-align:left">åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ ï¼ˆçº¿ç¨‹è°ƒç”¨startåï¼Œå³å¤„äºæ´»åŠ¨çŠ¶æ€ï¼‰</td></tr></tbody></table></div><h3 id="7-3-åœæ­¢çº¿ç¨‹"><a href="#7-3-åœæ­¢çº¿ç¨‹" class="headerlink" title="7.3 åœæ­¢çº¿ç¨‹"></a>7.3 åœæ­¢çº¿ç¨‹</h3><ul><li><p>ä¸æ¨èä½¿ç”¨JDKæä¾›çš„<code>stop()</code>å’Œ<code>destroy()</code>æ–¹æ³•ã€‚ï¼ˆå·²åºŸå¼ƒï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SecurityManager security = System.getSecurityManager();</span><br><span class="line">    <span class="keyword">if</span> (security != <span class="keyword">null</span>) &#123;</span><br><span class="line">      checkAccess();</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span> != Thread.currentThread()) &#123;</span><br><span class="line">        security.checkPermission(SecurityConstants.STOP_THREAD_PERMISSION);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// A zero status value corresponds to "NEW", it can't change to</span></span><br><span class="line">    <span class="comment">// not-NEW because we hold the lock.</span></span><br><span class="line">    <span class="keyword">if</span> (threadStatus != <span class="number">0</span>) &#123;</span><br><span class="line">      resume(); <span class="comment">// Wake up thread if it was suspended; no-op otherwise</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The VM can handle all thread states</span></span><br><span class="line">    stop0(<span class="keyword">new</span> ThreadDeath());</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchMethodError();</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ¨èçº¿ç¨‹è‡ªå·±åœæ­¢ä¸‹æ¥ï¼Œå»ºè®®ä½¿ç”¨ä¸€ä¸ªæ ‡å¿—ä½è¿›è¡Œç»ˆæ­¢å˜é‡å½“<code>flag=false</code>ï¼Œåˆ™ç»ˆæ­¢çº¿ç¨‹è¿è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStop</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 1.è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">      System.out.println(<span class="string">"run...Thread..."</span>+i++);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.è®¾ç½®ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•åœæ­¢çº¿ç¨‹ï¼Œè½¬æ¢æ ‡å¿—ä½</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    TestStop testStop = <span class="keyword">new</span> TestStop();</span><br><span class="line">    <span class="keyword">new</span> Thread(testStop).start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">200</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"main...Thread..."</span>+i);</span><br><span class="line">      <span class="keyword">if</span>(i==<span class="number">100</span>) &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨stopæ–¹æ³•åœæ­¢çº¿ç¨‹</span></span><br><span class="line">        testStop.stop();</span><br><span class="line">        System.out.println(<span class="string">"run...Thread...stoped..."</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šçº¿ç¨‹åœæ­¢ï¼Œmainçº¿ç¨‹ç»§ç»­æ‰§è¡Œåˆ°ç»“æŸ</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/Thread/test_stop.PNG" style="zoom:67%;" /></p></li></ul><h3 id="7-4-çº¿ç¨‹ä¼‘çœ "><a href="#7-4-çº¿ç¨‹ä¼‘çœ " class="headerlink" title="7.4 çº¿ç¨‹ä¼‘çœ "></a>7.4 çº¿ç¨‹ä¼‘çœ </h3><blockquote><p>sleep(æ—¶é—´)æŒ‡å®šå½“å‰çº¿ç¨‹é˜»å¡çš„æ¯«ç§’æ•°ï¼›sleepå­˜åœ¨å¼‚å¸¸Interrupted Exceptionï¼›sleepæ—¶é—´è¾¾åˆ°åçº¿ç¨‹è¿›å…¥<strong>å°±ç»ªçŠ¶æ€</strong>ï¼›sleepå¯ä»¥æ¨¡æ‹Ÿç½‘ç»œå»¶æ—¶ï¼Œå€’è®¡æ—¶ç­‰ï¼›æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”ï¼Œsleepä¸ä¼šé‡Šæ”¾é”ã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡æ‹Ÿå€’è®¡æ—¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSleep2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      tenDown();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°å½“å‰ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">    Date startTime = <span class="keyword">new</span> Date(System.currentTimeMillis());<span class="comment">// è·å–å½“å‰ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"Start printing system time..."</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> SimpleDateFormat(<span class="string">"HH:mm:ss"</span>).format(startTime));</span><br><span class="line">        startTime = <span class="keyword">new</span> Date(System.currentTimeMillis());<span class="comment">// æ›´æ–°æ—¶é—´</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tenDown</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      System.out.println(num--);</span><br><span class="line">      <span class="keyword">if</span> (num&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-4-çº¿ç¨‹ç¤¼è®©"><a href="#7-4-çº¿ç¨‹ç¤¼è®©" class="headerlink" title="7.4 çº¿ç¨‹ç¤¼è®©"></a>7.4 çº¿ç¨‹ç¤¼è®©</h3><p><strong>ç¤¼è®©çº¿ç¨‹ï¼Œè®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œä½†ä¸é˜»å¡ï¼›å°†çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬ä¸ºå°±ç»ªçŠ¶æ€ï¼›è®©cpué‡æ–°è°ƒåº¦ï¼Œç¤¼è®©ä¸ä¸€å®šæˆåŠŸï¼çœ‹CPUå¿ƒæƒ…ã€‚</strong></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestYield</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    MyYield myYield = <span class="keyword">new</span> MyYield();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">new</span> Thread(myYield, <span class="string">"a"</span>).start();</span><br><span class="line">    <span class="keyword">new</span> Thread(myYield, <span class="string">"b"</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyYield</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(Thread.currentThread().getName()+<span class="string">"Thread starts..."</span>);</span><br><span class="line">    Thread.yield();    <span class="comment">// ç¤¼è®©</span></span><br><span class="line">    System.out.println(Thread.currentThread().getName()+<span class="string">"Thread ends..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-5-çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ"><a href="#7-5-çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ" class="headerlink" title="7.5 çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ"></a>7.5 çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ</h3><blockquote><p>join()åˆå¹¶ç¨‹åºï¼Œå¾…æ­¤çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œå†æ‰§è¡Œå…¶ä»–çº¿ç¨‹ï¼Œå…¶ä»–çº¿ç¨‹é˜»å¡ã€‚å¯ä»¥æƒ³è±¡ä¸ºæ’é˜Ÿã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJoin</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"VIP thread comes..."</span>+i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    TestJoin testJoin = <span class="keyword">new</span> TestJoin();</span><br><span class="line">    Thread thisThread = <span class="keyword">new</span> Thread(testJoin);</span><br><span class="line">    thisThread.start();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">200</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i==<span class="number">90</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          thisThread.join();<span class="comment">// æ’é˜Ÿ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">"main Thread..."</span>+i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–ä¸€ä¸ªè¿è¡Œç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">main Thread...0</span><br><span class="line">VIP thread comes...0</span><br><span class="line">main Thread...1</span><br><span class="line">VIP thread comes...1</span><br><span class="line">VIP thread comes...2</span><br><span class="line">VIP thread comes...3</span><br><span class="line">VIP thread comes...4</span><br><span class="line">VIP thread comes...5</span><br><span class="line">...</span><br><span class="line">main Thread...87</span><br><span class="line">main Thread...88</span><br><span class="line">main Thread...89</span><br><span class="line">VIP thread comes...19</span><br><span class="line">VIP thread comes...20</span><br><span class="line">VIP thread comes...21</span><br><span class="line">VIP thread comes...22</span><br><span class="line">VIP thread comes...23</span><br><span class="line">VIP thread comes...24</span><br><span class="line">...</span><br><span class="line">VIP thread comes...98</span><br><span class="line">VIP thread comes...99</span><br><span class="line">main Thread...90</span><br><span class="line">main Thread...91</span><br><span class="line">main Thread...92</span><br><span class="line">main Thread...93</span><br></pre></td></tr></table></figure><p>åœ¨æ’é˜Ÿä¹‹å‰ï¼Œ2çº¿ç¨‹å¹¶è¡Œï¼Œå½“è°ƒç”¨join()åï¼Œè¿™ä¸ªçº¿ç¨‹å³æˆä¸ºVIPï¼Œåªèƒ½ç­‰VIPçº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚</p><h3 id="7-6-çº¿ç¨‹çŠ¶æ€"><a href="#7-6-çº¿ç¨‹çŠ¶æ€" class="headerlink" title="7.6 çº¿ç¨‹çŠ¶æ€"></a>7.6 çº¿ç¨‹çŠ¶æ€</h3><p>çº¿ç¨‹çŠ¶æ€Stateæ˜¯æšä¸¾ç±»å‹ï¼Œæœ‰5ä¸ªçŠ¶æ€ï¼Œåœ¨ä¸­æ–‡å¸®åŠ©æ–‡æ¡£ä¸­æœ‰å£°æ˜ã€‚</p><p>Thread.javaæºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">enum</span> State &#123;</span><br><span class="line">    NEW,</span><br><span class="line"></span><br><span class="line">    RUNNABLE,</span><br><span class="line"></span><br><span class="line">    BLOCKED,</span><br><span class="line"></span><br><span class="line">    WAITING,</span><br><span class="line"></span><br><span class="line">    TIMED_WAITING,</span><br><span class="line"></span><br><span class="line">    TERMINATED;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> State <span class="title">getState</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sun.misc.VM.toThreadState(threadStatus);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestState</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">"\\\\\\"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è§‚å¯ŸçŠ¶æ€</span></span><br><span class="line">    Thread.State state = thread.getState();</span><br><span class="line">    System.out.println(state);<span class="comment">// NEW</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯åŠ¨</span></span><br><span class="line">    thread.start();</span><br><span class="line">    state = thread.getState();</span><br><span class="line">    System.out.println(state);<span class="comment">// RUN</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (state != Thread.State.TERMINATED) &#123;<span class="comment">// åªè¦çº¿ç¨‹ä¸ç»ˆæ­¢å°±ä¸€ç›´è¾“å‡ºçŠ¶æ€</span></span><br><span class="line">      Thread.sleep(<span class="number">100</span>);</span><br><span class="line">      state = thread.getState();<span class="comment">// æ›´æ–°çŠ¶æ€</span></span><br><span class="line">      System.out.println(state);</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-7-çº¿ç¨‹ä¼˜å…ˆçº§"><a href="#7-7-çº¿ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="7.7 çº¿ç¨‹ä¼˜å…ˆçº§"></a>7.7 çº¿ç¨‹ä¼˜å…ˆçº§</h3><blockquote><p>Javaæä¾›ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘æ§ç¨‹åºä¸­å¯åŠ¨åè¿›å…¥å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ï¼Œçº¿ç¨‹è°ƒåº¦å™¨æŒ‰ç…§ä¼˜å…ˆçº§å†³å®šåº”è¯¥è°ƒåº¦å“ªä¸ªçº¿ç¨‹æ¥æ‰§è¡Œï¼›çº¿ç¨‹çš„ä¼˜å…ˆçº§ç”¨æ•°å­—è¡¨ç¤ºï¼ŒèŒƒå›´ä»1-10ã€‚</p></blockquote><p>Thread.javaæºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MIN_PRIORITY = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> NORM_PRIORITY = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MAX_PRIORITY = <span class="number">10</span>;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setPriority</span><span class="params">(<span class="keyword">int</span> newPriority)</span> </span>&#123;</span><br><span class="line">    ThreadGroup g;</span><br><span class="line">    checkAccess();</span><br><span class="line">    <span class="keyword">if</span> (newPriority &gt; MAX_PRIORITY || newPriority &lt; MIN_PRIORITY) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>((g = getThreadGroup()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (newPriority &gt; g.getMaxPriority()) &#123;</span><br><span class="line">        newPriority = g.getMaxPriority();</span><br><span class="line">      &#125;</span><br><span class="line">      setPriority0(priority = newPriority);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜å…ˆçº§ä½åªæ˜¯æ„å‘³ç€è·å¾—è°ƒåº¦çš„æ¦‚ç‡ä½ï¼Œå¹¶ä¸æ˜¯ä¼˜å…ˆçº§ä½å°±ä¸ä¼šè¢«è°ƒç”¨äº†ï¼Œè¿™éƒ½æ˜¯çœ‹CPUçš„è°ƒåº¦ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPriority</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸»çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§</span></span><br><span class="line">    System.out.println(</span><br><span class="line">        Thread.currentThread().getName() +</span><br><span class="line">        <span class="string">"--&gt;"</span>+Thread.currentThread().getPriority()</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    MyPriority myPriority = <span class="keyword">new</span> MyPriority();</span><br><span class="line">    </span><br><span class="line">    Thread t1 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">    Thread t2 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">    Thread t3 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">    Thread t4 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">    Thread t5 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line"></span><br><span class="line">    t1.start();</span><br><span class="line">    </span><br><span class="line">    t2.setPriority(<span class="number">2</span>);<span class="comment">// å…ˆè®¾ç½®ä¼˜å…ˆçº§å†å¯åŠ¨</span></span><br><span class="line">    t2.start();</span><br><span class="line">    </span><br><span class="line">    t3.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">    t3.start();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      t4.setPriority(-<span class="number">1</span>);</span><br><span class="line">      t4.start();</span><br><span class="line">      </span><br><span class="line">      t5.setPriority(<span class="number">11</span>);</span><br><span class="line">      t5.start();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      System.err.println(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPriority</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(</span><br><span class="line">        Thread.currentThread().getName()+<span class="string">"--&gt;"</span> +</span><br><span class="line">        Thread.currentThread().getPriority()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–ä¸€ä¸ªè¿è¡Œç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">main--&gt;5</span><br><span class="line">java.lang.IllegalArgumentException</span><br><span class="line">Thread-0--&gt;5</span><br><span class="line">Thread-2--&gt;10</span><br><span class="line">Thread-1--&gt;2</span><br></pre></td></tr></table></figure><p>æ€»æ˜¯ä¸»çº¿ç¨‹miané™åˆ¶æ€§ï¼Œä¼˜å…ˆçº§ä½çš„ä¹Ÿå¯èƒ½æ¯”é«˜çš„ä¼˜å…ˆæ‰§è¡Œã€‚</p><h3 id="7-8-å®ˆæŠ¤ï¼ˆdaemonï¼‰çº¿ç¨‹"><a href="#7-8-å®ˆæŠ¤ï¼ˆdaemonï¼‰çº¿ç¨‹" class="headerlink" title="7.8 å®ˆæŠ¤ï¼ˆdaemonï¼‰çº¿ç¨‹"></a>7.8 å®ˆæŠ¤ï¼ˆdaemonï¼‰çº¿ç¨‹</h3><blockquote><p>çº¿ç¨‹åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹ï¼›è™šæ‹Ÿæœºå¿…é¡»ç¡®ä¿ç”¨æˆ·çº¿ç¨‹ï¼ˆmainçº¿ç¨‹ï¼‰æ‰§è¡Œå®Œæ¯•ï¼›è™šæ‹Ÿæœºä¸ç”¨ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼›å¦‚åå°è®°å½•æ“ä½œæ—¥å¿—ï¼Œç›‘æ§å†…å­˜åƒåœ¾å›æ”¶ç­‰ã€‚</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDaemon</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    God god = <span class="keyword">new</span> God();</span><br><span class="line">    Man man = <span class="keyword">new</span> Man();</span><br><span class="line">    </span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(god);</span><br><span class="line">    thread.setDaemon(<span class="keyword">true</span>);  <span class="comment">// é»˜è®¤falseè¡¨ç¤ºç”¨æˆ·çº¿ç¨‹ï¼Œæ­£å¸¸çš„çº¿ç¨‹éƒ½æ˜¯ç”¨æˆ·çº¿ç¨‹</span></span><br><span class="line">    </span><br><span class="line">    thread.start();  <span class="comment">// å®ˆæŠ¤çº¿ç¨‹å¯åŠ¨</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">new</span> Thread(man).start();  <span class="comment">// ç”¨æˆ·çº¿ç¨‹æŒºåœæ­¢</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">God</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">"God bless you!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"Hello World!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.err.println(<span class="string">"Goodbye World!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹ä¼¼godçº¿ç¨‹ä¼šä¸€ç›´å¾ªç¯æ‰§è¡Œä¸‹å»ï¼Œä½†å®ƒæ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œmançº¿ç¨‹æ‰§è¡Œç»“æŸåï¼Œå®ˆæŠ¤çº¿ç¨‹ç­‰ä¸€ä¼šä¹Ÿä¼šç»“æŸï¼Œå› ä¸ºè™šæ‹Ÿæœºè¿˜ä¼šè¿è¡Œä¸€ä¼šå„¿ã€‚</p><h2 id="8ã€çº¿ç¨‹åŒæ­¥"><a href="#8ã€çº¿ç¨‹åŒæ­¥" class="headerlink" title="8ã€çº¿ç¨‹åŒæ­¥"></a>8ã€çº¿ç¨‹åŒæ­¥</h2><p>å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªèµ„æºã€‚</p><p>å¹¶å‘ï¼šåŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œã€‚</p><p>å¤„ç†å¤šçº¿ç¨‹é—®é¢˜æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹è®¿é—®åŒâ€”ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æŸäº›çº¿ç¨‹è¿˜æƒ³ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦çº¿ç¨‹åŒæ­¥ã€‚çº¿ç¨‹åŒæ­¥å…¶å®å°±æ˜¯ä¸€ç§ç­‰å¾…æœºåˆ¶ï¼Œå¤šä¸ªéœ€è¦åŒæ—¶è®¿é—®æ­¤å¯¹è±¡çš„çº¿ç¨‹è¿›å…¥è¿™ä¸ªå¯¹è±¡çš„ç­‰å¾…æ± å½¢æˆé˜Ÿåˆ—ï¼Œç­‰å¾…å‰é¢çº¿ç¨‹ä½¿ç”¨å®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†ä½¿ç”¨ã€‚</p><h3 id="8-1-é˜Ÿåˆ—å’Œé”"><a href="#8-1-é˜Ÿåˆ—å’Œé”" class="headerlink" title="8.1 é˜Ÿåˆ—å’Œé”"></a>8.1 é˜Ÿåˆ—å’Œé”</h3><p>ç”±äºåŒä¸€è¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å­˜å‚¨ç©ºé—´ï¼Œåœ¨å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†è®¿é—®å†²çªé—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ•°æ®åœ¨æ–¹æ³•ä¸­è¢«è®¿é—®æ—¶çš„æ­£ç¡®æ€§ï¼Œåœ¨è®¿é—®æ—¶åŠ å…¥é”æœºåˆ¶synchronizedï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹è±¡çš„æ’å®ƒé”ï¼ˆé”æ˜¯å¯¹è±¡çš„ï¼‰ï¼Œå°†ä¼šç‹¬å èµ„æºã€‚å…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…è¿™ä¸ªçº¿ç¨‹ä½¿ç”¨åé‡Šæ”¾é”å³å¯ã€‚å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><p>ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ä¼šå¯¼è‡´å…¶ä»–æ‰€æœ‰éœ€è¦æ­¤é”çš„<strong>çº¿ç¨‹æŒ‚èµ·</strong></p></li><li><p>åœ¨å¤šçº¿ç¨‹ç«äº‰ä¸‹ï¼ŒåŠ é”ï¼Œé‡Šæ”¾é”ä¼šå¯¼è‡´æ¯”è¾ƒå¤šçš„<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>å’Œ<strong>è°ƒåº¦å»¶æ—¶</strong>ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜</p></li><li><p>å¦‚æœä¸€ä¸ªä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªä¼˜å…ˆçº§ä½çš„çº¿ç¨‹é‡Šæ”¾é”ä¼šå¯¼è‡´<strong>ä¼˜å…ˆçº§å€’ç½®</strong>ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜</p></li></ul><h3 id="8-2-åŒæ­¥æ–¹æ³•"><a href="#8-2-åŒæ­¥æ–¹æ³•" class="headerlink" title="8.2 åŒæ­¥æ–¹æ³•"></a>8.2 åŒæ­¥æ–¹æ³•</h3><ul><li><p>ç”±äºæˆ‘ä»¬å¯ä»¥é€šè¿‡privateå…³é”®å­—æ¥ä¿è¯æ•°æ®å¯¹è±¡åªèƒ½è¢«æ–¹æ³•è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é’ˆå¯¹æ–¹æ³•æå‡ºä¸€å¥—æœºåˆ¶ï¼Œè¿™å¥—æœºåˆ¶å°±æ˜¯synchronizedå…³é”®å­—ï¼Œå®ƒåŒ…æ‹¬ä¸¤ç§ç”¨æ³•synchronizedæ–¹æ³•å’Œsynchronizedå—</p><blockquote><p>åŒæ­¥æ–¹æ³•: <code>public synchronized void method(int args)</code></p></blockquote></li><li><p>synchronizedæ–¹æ³•æ§åˆ¶å¯¹â€œ<strong>å¯¹è±¡</strong>â€œçš„è®¿é—®ï¼Œæ¯ä¸ª<strong>å¯¹è±¡</strong>å¯¹åº”ä¸€æŠŠé”ï¼Œæ¯ä¸ªsynchronizedæ–¹æ³•éƒ½å¿…é¡»è·å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡çš„é”æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™çº¿ç¨‹ä¼šé˜»å¡ï¼Œæ–¹æ³•ä¸€æ—¦æ‰§è¡Œï¼Œå°±ç‹¬å è¯¥é”ï¼Œç›´åˆ°è¯¥æ–¹æ³•è¿”å›æ‰é‡Šæ”¾é”ï¼Œåé¢è¢«é˜»å¡çš„çº¿ç¨‹æ‰èƒ½è·å¾—è¿™ä¸ªé”ï¼Œç»§ç»­æ‰§è¡Œ</p><blockquote><p>ç¼ºé™·ï¼šè‹¥å°†ä¸€ä¸ªå¤§çš„æ–¹æ³•ç”³æ˜ä¸º synchronizedå°†ä¼šå½±å“æ•ˆç‡</p></blockquote></li><li><p>å¼Šç«¯ï¼šéœ€è¦é”å¤ªå¤šï¼Œæµªè´¹èµ„æº</p></li></ul><h3 id="8-3-åŒæ­¥å—"><a href="#8-3-åŒæ­¥å—" class="headerlink" title="8.3 åŒæ­¥å—"></a>8.3 åŒæ­¥å—</h3><ul><li><p>åŒæ­¥å—ï¼š<code>synchronized(obj){}</code></p></li><li><p>objç§°ä¹‹ä¸ºåŒæ­¥ç›‘è§†å™¨</p><ul><li>objå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ï¼Œä½†æ˜¯æ¨èä½¿ç”¨å…±äº«èµ„æºä½œä¸ºåŒæ­¥ç›‘è§†å™¨</li><li>åŒæ­¥æ–¹æ³•ä¸­æ— éœ€æŒ‡å®šåŒæ­¥ç›‘è§†å™¨ï¼Œå› ä¸ºåŒæ­¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨å°±æ˜¯thisï¼Œå°±æ˜¯è¿™ä¸ªå¯¹è±¡æœ¬èº«ï¼Œæˆ–è€…æ˜¯class[åå°„ä¸­è®²è§£]</li></ul></li><li><p>åŒæ­¥ç›‘è§†å™¨çš„æ‰§è¡Œè¿‡ç¨‹</p><ul><li>ç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé”å®šåŒæ­¥ç›‘è§†å™¨ï¼Œæ‰§è¡Œå…¶ä¸­ä»£ç </li><li>ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®ï¼Œå‘ç°åŒæ­¥ç›‘è§†å™¨è¢«é”å®šï¼Œæ— æ³•è®¿é—®</li><li>ç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®Œæ¯•ï¼Œè§£é”åŒæ­¥ç›‘è§†å™¨</li><li>ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®ï¼Œå‘ç°åŒæ­¥ç›‘è§†å™¨æ²¡æœ‰é”ï¼Œç„¶åé”å®šå¹¶è®¿é—®</li></ul></li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bank</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Account account = <span class="keyword">new</span> Account(<span class="number">100</span>, <span class="string">"Deposit"</span>);</span><br><span class="line">    </span><br><span class="line">    Drawing husband = <span class="keyword">new</span> Drawing(account, <span class="number">50</span>, <span class="string">"husband"</span>);</span><br><span class="line">    Drawing wife = <span class="keyword">new</span> Drawing(account, <span class="number">100</span>, <span class="string">"wife"</span>);</span><br><span class="line">    </span><br><span class="line">    husband.start();</span><br><span class="line">    wife.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> money;</span><br><span class="line">  String name;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(<span class="keyword">int</span> money, String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.money = money;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Drawing</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  Account account;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> drawingMoney;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> nowMoney;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Drawing</span><span class="params">(Account account, <span class="keyword">int</span> drawingMoney, String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">    <span class="keyword">this</span>.account = account;</span><br><span class="line">    <span class="keyword">this</span>.drawingMoney = drawingMoney;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// @Override</span></span><br><span class="line">  <span class="comment">// public synchronized void run() &#123;</span></span><br><span class="line">  <span class="comment">//   if(account.money-drawingMoney&lt;0) &#123;</span></span><br><span class="line">  <span class="comment">//     System.out.println(Thread.currentThread().getName()+" Money is not enough!");</span></span><br><span class="line">  <span class="comment">//     return;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">//   try &#123;</span></span><br><span class="line">  <span class="comment">//     Thread.sleep(1000);</span></span><br><span class="line">  <span class="comment">//   &#125; catch (InterruptedException e) &#123;</span></span><br><span class="line">  <span class="comment">//     e.printStackTrace();</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   // å¡å†…ä½™é¢</span></span><br><span class="line">  <span class="comment">//   account.money = account.money - drawingMoney;</span></span><br><span class="line">  <span class="comment">//   // æ‰‹é‡Œçš„ç°é‡‘</span></span><br><span class="line">  <span class="comment">//   nowMoney = nowMoney + drawingMoney;</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">//   System.out.println(account.name + " balance is "+account.money);</span></span><br><span class="line">  <span class="comment">//   System.out.println(this.getName()+"'s cash now is "+nowMoney);</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (account) &#123;</span><br><span class="line">      <span class="keyword">if</span>(account.money-drawingMoney&lt;<span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">" Money is not enough!"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      account.money = account.money - drawingMoney;</span><br><span class="line"></span><br><span class="line">      nowMoney = nowMoney + drawingMoney;</span><br><span class="line">      </span><br><span class="line">      System.out.println(account.name + <span class="string">" balance is "</span>+account.money);</span><br><span class="line">      System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"'s cash now is "</span>+nowMoney);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œè¦æ³¨æ„äº†ï¼šåŒæ­¥å—æŒ‡å®šé”ä½çš„å¯¹è±¡ï¼Œå¯ä»¥é”ä½ä»»ä½•å¯¹è±¡ã€‚å¦‚æœç”¨ä¸Šé¢çš„æ–¹æ³•å°†runæ–¹æ³•ä¸Šé”ï¼Œé”ä½çš„æ˜¯husbandå’Œwifeå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸¤æŠŠé”äº†ï¼ˆ2ä¸ªçº¿ç¨‹2æŠŠé”ï¼‰ã€‚åªèƒ½ç”¨ä¸‹é¢çš„æ–¹æ³•é”ä½å˜åŒ–çš„é‡ï¼Œæ‰æœ‰ç”¨ã€‚</p><p>Listç­‰å¸¸è§æ•°æ®é›†åˆæ˜¯éå®‰å…¨çš„ï¼ŒJUC(java.util.concurrentåŒ…)ä¸­æä¾›äº†CopyOnWriteArrayListç­‰å®‰å…¨ç±»å‹çš„é›†åˆã€‚</p></blockquote><h2 id="9ã€é”"><a href="#9ã€é”" class="headerlink" title="9ã€é”"></a>9ã€é”</h2><h3 id="9-1-æ­»é”"><a href="#9-1-æ­»é”" class="headerlink" title="9.1 æ­»é”"></a>9.1 æ­»é”</h3><blockquote><p>å¤šä¸ªçº¿ç¨‹å„è‡ªå æœ‰ä¸€äº›å…±äº«èµ„æºï¼Œå¹¶ä¸”äº’ç›¸ç­‰å¾…å…¶ä»–çº¿ç¨‹å æœ‰çš„èµ„æºæ‰èƒ½è¿è¡Œï¼Œè€Œå¯¼è‡´ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œéƒ½åœæ­¢æ‰§è¡Œçš„æƒ…å½¢ã€‚æŸä¸€ä¸ªåŒæ­¥å—åŒæ—¶æ‹¥æœ‰â€œä¸¤ä¸ªä»¥ä¸Šå¯¹è±¡çš„é”â€æ—¶ï¼Œå°±å¯èƒ½ä¼šå‘ç”Ÿâ€œæ­»é”â€çš„é—®é¢˜ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Makeup girl1 = <span class="keyword">new</span> Makeup(<span class="number">0</span>, <span class="string">"Marry"</span>);</span><br><span class="line">    Makeup girl2 = <span class="keyword">new</span> Makeup(<span class="number">1</span>, <span class="string">"Lisa"</span>);</span><br><span class="line">    </span><br><span class="line">    girl1.start();</span><br><span class="line">    girl2.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lipstick</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mirror</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Makeup</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”¨staticä¿è¯èµ„æºåªæœ‰ä¸€ä»½å„¿</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Lipstick lipstick = <span class="keyword">new</span> Lipstick();</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Mirror mirror = <span class="keyword">new</span> Mirror();</span><br><span class="line">  <span class="keyword">int</span> choice;</span><br><span class="line">  String name;<span class="comment">// åŒ–å¦†çš„äºº</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Makeup</span><span class="params">(<span class="keyword">int</span> choice, String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.choice = choice;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      startMakeup();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŒ–å¦†ï¼Œäº’ç›¸æŒæœ‰å¯¹æ–¹çš„é”ï¼Œå°±æ˜¯éœ€è¦æ‹¿åˆ°å¯¹æ–¹çš„èµ„æº</span></span><br><span class="line">  <span class="comment">// private void startMakeup() throws InterruptedException &#123;</span></span><br><span class="line">  <span class="comment">//   if (choice==0) &#123;</span></span><br><span class="line">  <span class="comment">//     synchronized (lipstick) &#123;// è·å¾—å£çº¢çš„é”</span></span><br><span class="line">  <span class="comment">//       System.out.println(this.name+" got the lipstick!");</span></span><br><span class="line">  <span class="comment">//       Thread.sleep(1000);</span></span><br><span class="line">  <span class="comment">//       synchronized (mirror) &#123;// 1ç§’é’Ÿåå‘è·å¾—é•œå­</span></span><br><span class="line">  <span class="comment">//         System.out.println(this.name+" got the mirror!");</span></span><br><span class="line">  <span class="comment">//       &#125;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//   &#125; else &#123;</span></span><br><span class="line">  <span class="comment">//     synchronized (mirror) &#123;</span></span><br><span class="line">  <span class="comment">//       System.out.println(this.name+" got the mirror!");</span></span><br><span class="line">  <span class="comment">//       Thread.sleep(1000);</span></span><br><span class="line">  <span class="comment">//       synchronized (lipstick) &#123;</span></span><br><span class="line">  <span class="comment">//         System.out.println(this.name+" got the lipstick!");</span></span><br><span class="line">  <span class="comment">//       &#125;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   // æ¯”å¦‚é€‰æ‹©0æ—¶ï¼Œåªæœ‰å½“å¾—åˆ°é•œå­åæ‰ä¼šé‡Šæ”¾å£çº¢çš„é”ï¼Œå°±ä¼šæ­»é”</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">startMakeup</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (choice==<span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (lipstick) &#123;<span class="comment">// è·å¾—å£çº¢çš„é”</span></span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name+<span class="string">" got the lipstick!"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">synchronized</span> (mirror) &#123;<span class="comment">// 1ç§’é’Ÿåå‘è·å¾—é•œå­</span></span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name+<span class="string">" got the mirror!"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (mirror) &#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name+<span class="string">" got the mirror!"</span>);</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">synchronized</span> (lipstick) &#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name+<span class="string">" got the lipstick!"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿™æ ·åšå°±æ˜¯å½“å£çº¢ç”¨å®Œå£çº¢çš„é”å°±é‡Šæ”¾</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“åˆæ“ä½œç³»ç»Ÿæ­»é”äº§ç”Ÿçš„æ¡ä»¶å’Œé¿å…æ­»é”çš„æ–¹å¼ã€‚</p><h3 id="9-2-Lockï¼ˆé”ï¼‰"><a href="#9-2-Lockï¼ˆé”ï¼‰" class="headerlink" title="9.2 Lockï¼ˆé”ï¼‰"></a>9.2 Lockï¼ˆé”ï¼‰</h3><ul><li><p>ä»JDK5.0å¼€å§‹ï¼ŒJavaæä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼šé€šè¿‡æ˜¾å¼å®šä¹‰<strong>åŒæ­¥é”å¯¹è±¡</strong>æ¥å®ç°åŒæ­¥ã€‚åŒæ­¥é”ä½¿ç”¨Lockå¯¹è±¡å……å½“</p></li><li><p>java.utll.concurrent.locks.Lockæ¥å£æ˜¯æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·ã€‚é”æä¾›äº†å¯¹å…±äº«èµ„æºçš„ç‹¬å è®¿é—®,æ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹Lockå¯¹è±¡åŠ é”ï¼Œçº¿ç¨‹å¼€å§‹è®¿é—®å…±äº«èµ„æºä¹‹å‰åº”å…ˆè·å¾—Lockå¯¹è±¡</p></li><li><p>ReentrantLockï¼ˆå¯é‡å…¥é”ï¼‰ç±»å®ç°äº†Lockï¼Œå®ƒæ‹¥æœ‰ä¸synchronizedç›¸åŒçš„å¹¶å‘æ€§å’Œå†…å­˜è¯­ä¹‰ï¼Œåœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ§åˆ¶ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯Reentrantlockï¼Œå¯ä»¥æ˜¾å¼åŠ é”ã€é‡Šæ”¾é”ã€‚</p></li></ul><h3 id="9-3-synchronizedå’ŒLockçš„å¯¹æ¯”"><a href="#9-3-synchronizedå’ŒLockçš„å¯¹æ¯”" class="headerlink" title="9.3 synchronizedå’ŒLockçš„å¯¹æ¯”"></a>9.3 synchronizedå’ŒLockçš„å¯¹æ¯”</h3><ul><li><p>Lockæ˜¯æ˜¾å¼é”ï¼ˆæ‰‹åŠ¨å¼€å¯å’Œå…³é—­é”ï¼Œåˆ«å¿˜è®°å…³é—­é”ï¼‰synchronizedæ˜¯éšå¼é”ï¼Œå‡ºäº†ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾</p></li><li><p>Lockåªæœ‰ä»£ç å—é”ï¼Œsynchronizedæœ‰ä»£ç å—é”å’Œæ–¹æ³•é”</p></li><li><p>ä½¿ç”¨Locké”ï¼ŒJwMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰</p></li><li><p>ä¼˜å…ˆä½¿ç”¨é¡ºåºï¼šLock &gt; åŒæ­¥ä»£ç å—ï¼ˆå·²ç»è¿›å…¥äº†æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”èµ„æºï¼‰ &gt; åŒæ­¥æ–¹æ³•ï¼ˆåœ¨æ–¹æ³•ä½“ä¹‹å¤–ï¼‰</p></li></ul><h2 id="10ã€çº¿ç¨‹åä½œï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰"><a href="#10ã€çº¿ç¨‹åä½œï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰" class="headerlink" title="10ã€çº¿ç¨‹åä½œï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰"></a>10ã€çº¿ç¨‹åä½œï¼ˆçº¿ç¨‹é€šä¿¡ï¼‰</h2><blockquote><p>åœ¨ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œä»…æœ‰synchronizedæ˜¯ä¸å¤Ÿçš„</p><ul><li><p>synchronizedå¯é˜»æ­¢å¹¶å‘æ›´æ–°åŒä¸€ä¸ªå…±äº«èµ„æºï¼Œå®ç°äº†åŒæ­¥</p></li><li><p>synchronizedä¸èƒ½ç”¨æ¥å®ç°ä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ï¼ˆé€šä¿¡ï¼‰</p></li></ul></blockquote><p>Javaæä¾›äº†å‡ ä¸ªæ–¹æ³•è§£å†³çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡é—®é¢˜</p><div class="table-container"><table><thead><tr><th>æ–¹æ³•å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>wait()</td><td>è¡¨ç¤ºçº¿ç¨‹ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é€šçŸ¥ï¼Œä¸sleepä¸åŒï¼Œä¼šé‡Šæ”¾é”</td></tr><tr><td>wait(long timeout)</td><td>æŒ‡å®šç­‰å¾…çš„æ¯«ç§’æ•°</td></tr><tr><td>notify()</td><td>å”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹</td></tr><tr><td>notifyAll()</td><td>å”¤é†’åŒä¸€ä¸ªå¯¹è±¡ä¸Šæ‰€æœ‰è°ƒç”¨wait()æ–¹æ³•çš„çº¿ç¨‹ï¼Œä¼˜å…ˆçº§åˆ«é«˜çš„çº¿ç¨‹ä¼˜å…ˆè°ƒåº¦</td></tr></tbody></table></div><blockquote><p>æ³¨æ„ï¼šå‡æ˜¯Objectç±»çš„æ–¹æ³•ï¼Œéƒ½åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥ä»£ç å—ä¸­ä½¿ç”¨å¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸IlegalMonitorState Exception</p></blockquote><h3 id="10-1-è§£å†³æ–¹å¼1ï¼šç®¡ç¨‹æ³•"><a href="#10-1-è§£å†³æ–¹å¼1ï¼šç®¡ç¨‹æ³•" class="headerlink" title="10.1 è§£å†³æ–¹å¼1ï¼šç®¡ç¨‹æ³•"></a>10.1 è§£å†³æ–¹å¼1ï¼šç®¡ç¨‹æ³•</h3><p>å¹¶å‘åä½œæ¨¡å‹â€œç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼â€â€”&gt;ç®¡ç¨‹æ³•</p><ul><li><p>ç”Ÿäº§è€…ï¼šè´Ÿè´£ç”Ÿäº§æ•°æ®çš„æ¨¡å—(å¯èƒ½æ˜¯æ–¹æ³•ï¼Œå¯¹è±¡ï¼Œçº¿ç¨‹ï¼Œè¿›ç¨‹)</p></li><li><p>æ¶ˆè´¹è€…ï¼šè´Ÿè´£å¤„ç†æ•°æ®çš„æ¨¡å—(å¯èƒ½æ˜¯æ–¹æ³•ï¼Œå¯¹è±¡ï¼Œçº¿ç¨‹ï¼Œè¿›ç¨‹)</p></li><li><p>ç¼“å†²åŒºï¼šæ¶ˆè´¹è€…ä¸èƒ½ç›´æ¥ä½¿ç”¨ç”Ÿäº§è€…çš„æ•°æ®ï¼Œä»–ä»¬ä¹‹é—´æœ‰ä¸ªâ€œç¼“å†²åŒºâ€œ</p></li></ul><p>ç”Ÿäº§è€…å°†ç”Ÿäº§å¥½çš„æ•°æ®æ”¾å…¥<strong>ç¼“å†²åŒº</strong>ï¼Œæ¶ˆè´¹è€…ä»ç¼“å†²åŒºæ‹¿å‡ºæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestProductorCustomer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Buffer buffer = <span class="keyword">new</span> Buffer();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">new</span> Productor(buffer).start();</span><br><span class="line">    <span class="keyword">new</span> Customer(buffer).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿäº§è€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Productor</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="comment">// éœ€è¦ä¸€ä¸ªå®¹å™¨</span></span><br><span class="line">  Buffer buffer;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Productor</span><span class="params">(Buffer buffer)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.buffer = buffer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”Ÿäº§</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      buffer.push(<span class="keyword">new</span> Goods(i));</span><br><span class="line">      System.out.println(<span class="string">"ç”Ÿäº§äº†ç¬¬"</span>+i+<span class="string">"ä¸ªå•†å“ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  Buffer buffer;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Buffer buffer)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.buffer = buffer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¶ˆè´¹</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"æ¶ˆè´¹äº†ç¬¬"</span> + buffer.pop().getID() + <span class="string">"ä¸ªå•†å“ï¼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº§å“</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Goods</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> ID;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Goods</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ID = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getID</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ID;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼“å†²åŒº</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Buffer</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="comment">// éœ€è¦ä¸€ä¸ªå®¹å™¨å¤§å°</span></span><br><span class="line">  Goods[] goods = <span class="keyword">new</span> Goods[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”Ÿäº§è€…æ”¾å…¥äº§å“</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Goods good)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå®¹å™¨æ»¡äº†ï¼Œå°±éœ€è¦ç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹</span></span><br><span class="line">    <span class="keyword">if</span>(count==goods.length) &#123;</span><br><span class="line">      <span class="comment">// é€šçŸ¥æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç”Ÿäº§ç­‰å¾…</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.wait();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰æ»¡å°±éœ€è¦æ”¾å…¥äº§å“</span></span><br><span class="line">    goods[count] = good;</span><br><span class="line">    count++;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯ä»¥é€šçŸ¥æ¶ˆè´¹è€…æ¶ˆè´¹äº†</span></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¶ˆè´¹è€…æ¶ˆè´¹äº§å“</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> Goods <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå®¹å™¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span>(count==<span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// é€šçŸ¥ç”Ÿäº§è€…ç”Ÿäº§ï¼Œæ¶ˆè´¹ç­‰å¾…</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.wait();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå¯ä»¥æ¶ˆè´¹</span></span><br><span class="line">    count--;</span><br><span class="line">    Goods good = goods[count];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥é€šçŸ¥ç”Ÿäº§è€…ç”Ÿäº§äº†</span></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    <span class="keyword">return</span> good;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-2-è§£å†³æ–¹å¼2ï¼šä¿¡å·ç¯æ³•"><a href="#10-2-è§£å†³æ–¹å¼2ï¼šä¿¡å·ç¯æ³•" class="headerlink" title="10.2 è§£å†³æ–¹å¼2ï¼šä¿¡å·ç¯æ³•"></a>10.2 è§£å†³æ–¹å¼2ï¼šä¿¡å·ç¯æ³•</h3><p>å°±æ˜¯é•¿åº¦ä¸º1çš„ç®¡ç¨‹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductorCustomerUsingSignal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Show show = <span class="keyword">new</span> Show();</span><br><span class="line">    <span class="keyword">new</span> Actor(show).start();</span><br><span class="line">    <span class="keyword">new</span> Audience(show).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿäº§è€…æ¼”å‘˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Actor</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Show show;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Actor</span><span class="params">(Show show)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.show = show;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i%<span class="number">2</span>==<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.show.play(<span class="string">"Happy Camp!"</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.show.play(<span class="string">"TikTok!"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¶ˆè´¹è€…è§‚ä¼—</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Audience</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Show show;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Audience</span><span class="params">(Show show)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.show = show;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.show.watch();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ„æºèŠ‚ç›®</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Show</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ¼”å‘˜è¡¨æ¼”ï¼Œè§‚ä¼—ç­‰å¾…T</span></span><br><span class="line">  <span class="comment">// è§‚ä¼—è§‚çœ‹ï¼Œæ¼”å‘˜ç­‰å¾…F</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">  String display;<span class="comment">// è¡¨æ¼”çš„èŠ‚ç›®</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨æ¼”</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">(String display)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.wait();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"Actors show the "</span>+display);</span><br><span class="line">    <span class="comment">// é€šçŸ¥è§‚ä¼—è§‚çœ‹</span></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    <span class="keyword">this</span>.display = display;</span><br><span class="line">    <span class="keyword">this</span>.flag = !<span class="keyword">this</span>.flag;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨æ¼”</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">watch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.wait();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"Audience watch the "</span>+display);</span><br><span class="line">    <span class="comment">// é€šçŸ¥æ¼”å‘˜è¡¨æ¼”</span></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    <span class="keyword">this</span>.flag = !<span class="keyword">this</span>.flag;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="11ã€çº¿ç¨‹æ± "><a href="#11ã€çº¿ç¨‹æ± " class="headerlink" title="11ã€çº¿ç¨‹æ± "></a>11ã€çº¿ç¨‹æ± </h2><blockquote><p>èƒŒæ™¯ï¼šç»å¸¸åˆ›å»ºå’Œé”€æ¯ã€ä½¿ç”¨é‡ç‰¹åˆ«å¤§çš„èµ„æºï¼Œæ¯”å¦‚å¹¶å‘æƒ…å†µä¸‹çš„çº¿ç¨‹ï¼Œå¯¹æ€§èƒ½å½±å“å¾ˆå¤§ã€‚</p><p>æ€è·¯ï¼šæå‰åˆ›å»ºå¥½å¤šä¸ªçº¿ç¨‹ï¼Œæ”¾å…¥çº¿ç¨‹æ± ä¸­ï¼Œä½¿ç”¨æ—¶ç›´æ¥è·å–ï¼Œä½¿ç”¨å®Œæ”¾å›æ± ä¸­ã€‚å¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯ã€å®ç°é‡å¤åˆ©ç”¨ã€‚ç±»ä¼¼ç”Ÿæ´»ä¸­çš„å…¬å…±äº¤é€šå·¥å…·ï¼ˆå…±äº«å•è½¦ï¼‰ã€‚</p></blockquote><p>ä¼˜åŠ¿ï¼š</p><ul><li><p>æé«˜å“åº”é€Ÿåº¦ï¼ˆå‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´ï¼‰</p></li><li><p>é™ä½èµ„æºæ¶ˆè€—ï¼ˆé‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼‰</p></li><li><p>ä¾¿äºçº¿ç¨‹ç®¡ç†ï¼ˆâ€¦ï¼‰</p><ul><li>core Poolsizeï¼šæ ¸å¿ƒæ± çš„å¤§å°</li><li>maximumPoolsizeï¼šæœ€å¤§çº¿ç¨‹æ•°</li><li>keepAlive Timeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPool</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.åˆ›å»ºæœåŠ¡ï¼Œåˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line">    ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">    </span><br><span class="line">    executorService.execute(<span class="keyword">new</span> PoolThread());</span><br><span class="line">    executorService.execute(<span class="keyword">new</span> PoolThread());</span><br><span class="line">    executorService.execute(<span class="keyword">new</span> PoolThread());</span><br><span class="line">    executorService.execute(<span class="keyword">new</span> PoolThread());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.å…³é—­è¿æ¥</span></span><br><span class="line">    executorService.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PoolThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(Thread.currentThread().getName());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>JDK5.0èµ·æä¾›äº†çº¿ç¨‹æ± ç›¸å…³APIï¼šExecutor Serviceå’ŒExecutors</p></li><li><p>Executor Serviceï¼šçœŸæ­£çš„çº¿ç¨‹æ± æ¥å£ã€‚å¸¸è§å­ç±» ThreadPoolExecutor</p><ul><li><code>void execute( Runnable command)</code>ï¼šæ‰§è¡Œä»»åŠ¡å‘½ä»¤ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§<br>è¡Œ Runnable</li><li><code>&lt;T&gt; Future&lt;T&gt; submit( Callable&lt;T&gt;task)</code>ï¼šæ‰§è¡Œä»»åŠ¡ï¼Œæœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬åˆæ¥æ‰§è¡Œ<br>Callableï¼ˆä¸Šé¢æˆ‘ä»¬ä»‹ç»Callableæ¥å£æ—¶æµ‹è¯•è¿‡ï¼‰</li><li><code>void shutdown()</code>ï¼šå…³é—­è¿æ¥æ± </li></ul></li><li><p>Executorsï¼šå·¥å…·ç±»ã€çº¿ç¨‹æ± çš„å·¥å‚ç±»ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸åŒç±»å‹çš„çº¿ç¨‹æ± </p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ›å»ºçº¿ç¨‹çš„&lt;strong&gt;ä¸»è¦&lt;/strong&gt;æ–¹å¼&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆé‡ç‚¹ï¼‰&lt;/li&gt;
&lt;li&gt;å®ç°Runnableæ¥å£åˆ›å»ºçº¿ç¨‹ç±»ï¼ˆé‡ç‚¹ï¼‰&lt;/li&gt;
&lt;li&gt;å®ç°Callableæ¥å£æˆ–Futureæ¥å£åˆ›å»ºçº¿ç¨‹ï¼ˆäº†è§£ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="åŸç†" scheme="https://mysticalguest.github.io/categories/%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="Java" scheme="https://mysticalguest.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹å¤ä¹ </title>
    <link href="https://mysticalguest.github.io/2020/09/04/ComputerNetwork/postgraduate/"/>
    <id>https://mysticalguest.github.io/2020/09/04/ComputerNetwork/postgraduate/</id>
    <published>2020-09-04T14:18:36.387Z</published>
    <updated>2020-09-07T10:16:34.539Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è€ƒæŸ¥ç›®æ ‡ï¼š</p><ol><li>æŒæ¡è®¡ç®—æœºç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µã€åŸºæœ¬åŸç†å’ŒåŸºæœ¬æ–¹æ³•ã€‚</li><li>æŒæ¡è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„å’Œå…¸å‹ç½‘ç»œåè®®ï¼Œäº†è§£å…¸å‹ç½‘ç»œè®¾å¤‡çš„ç»„æˆå’Œç‰¹ç‚¹ï¼Œç†è§£å…¸å‹ç½‘ç»œè®¾å¤‡çš„å·¥ä½œåŸç†ã€‚</li><li>èƒ½å¤Ÿè¿ç”¨è®¡ç®—æœºç½‘ç»œåŸºæœ¬æ¦‚å¿µã€åŸºæœ¬åŸç†å’ŒåŸºæœ¬æ–¹æ³•è¿›è¡Œç½‘ç»œç³»ç»Ÿåˆ†æã€è®¾è®¡å’Œåº”ç”¨ã€‚</li></ol><p>ä»¥è¥¿åŒ—å·¥ä¸šå¤§å­¦801è®¡ç®—æœºä¸“ä¸šåŸºç¡€ä¸ºè€ƒçº²</p></blockquote><a id="more"></a><h2 id="ä¸€ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"><a href="#ä¸€ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„" class="headerlink" title="ä¸€ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></a>ä¸€ã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h2><h3 id="1-1-è®¡ç®—æœºç½‘ç»œæ¦‚è¿°"><a href="#1-1-è®¡ç®—æœºç½‘ç»œæ¦‚è¿°" class="headerlink" title="1.1 è®¡ç®—æœºç½‘ç»œæ¦‚è¿°"></a>1.1 è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</h3><h4 id="1-1-1-è®¡ç®—æœºç½‘ç»œçš„æ¦‚å¿µã€ç»„æˆä¸åŠŸèƒ½"><a href="#1-1-1-è®¡ç®—æœºç½‘ç»œçš„æ¦‚å¿µã€ç»„æˆä¸åŠŸèƒ½" class="headerlink" title="1.1.1 è®¡ç®—æœºç½‘ç»œçš„æ¦‚å¿µã€ç»„æˆä¸åŠŸèƒ½"></a>1.1.1 è®¡ç®—æœºç½‘ç»œçš„æ¦‚å¿µã€ç»„æˆä¸åŠŸèƒ½</h4><ul><li>è®¡ç®—æœºç½‘ç»œæ˜¯â€œä»¥ç›¸äº’å…±äº«èµ„æºçš„æ–¹å¼äº’è”èµ·æ¥çš„è‡ªæ²»è®¡ç®—æœºç³»ç»Ÿçš„é›†åˆâ€ã€‚</li><li>è®¡ç®—æœºç½‘ç»œé€šå¸¸ç”±3ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯èµ„æºå­ç½‘ã€é€šä¿¡å­ç½‘å’Œé€šä¿¡åè®®ã€‚</li></ul><div class="table-container"><table><thead><tr><th>ç»„æˆ</th><th>èµ„æºå­ç½‘</th><th>é€šä¿¡å­ç½‘</th><th>é€šä¿¡åè®®</th></tr></thead><tbody><tr><td>åŒ…æ‹¬</td><td>ä¸»æœºä¸ç»ˆç«¯ã€ç»ˆç«¯æ§åˆ¶å™¨ã€è”ç½‘å¤–è®¾ã€å„ç§ç½‘ç»œè½¯ä»¶ä¸æ•°æ®èµ„æº</td><td>è·¯ç”±å™¨ã€å„ç§äº’è”è®¾å¤‡ä¸é€šä¿¡çº¿è·¯</td><td>é€šä¿¡åŒæ–¹å¿…é¡»å…±åŒéµå®ˆçš„è§„åˆ™å’Œçº¦å®šå°±ç§°ä¸ºé€šä¿¡åè®®</td></tr><tr><td>ä½œç”¨</td><td>è´Ÿè´£å…¨ç½‘çš„æ•°æ®å¤„ç†ä¸šåŠ¡ï¼Œå‘ç½‘ç»œç”¨æˆ·æä¾›å„ç§ç½‘ç»œèµ„æºä¸ç½‘ç»œæœåŠ¡</td><td>è´Ÿè´£å®Œæˆç½‘ç»œæ•°æ®ä¼ è¾“ã€è·¯ç”±ä¸åˆ†ç»„è½¬å‘ç­‰ä¿¡æ¯å¤„ç†ä»»åŠ¡</td><td>ç­‰</td></tr></tbody></table></div><ul><li>è®¡ç®—æœºç½‘ç»œçš„åŠŸèƒ½</li></ul><div class="table-container"><table><thead><tr><th>ä¸»è¦åŠŸèƒ½</th><th>è¯¦ç»†</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>æ•°æ®é€šä¿¡</td><td>ä¾ç…§ä¸€å®šçš„é€šä¿¡åè®®ï¼Œåˆ©ç”¨æ•°æ®ä¼ è¾“æŠ€æœ¯åœ¨ä¸¤ä¸ªç»ˆç«¯ä¹‹é—´ä¼ é€’æ•°æ®ä¿¡æ¯çš„ä¸€ç§é€šä¿¡æ–¹å¼å’Œé€šä¿¡ä¸šåŠ¡</td><td>å®ç°è®¡ç®—æœºå’Œè®¡ç®—æœºã€è®¡ç®—æœºå’Œç»ˆç«¯ä»¥åŠç»ˆç«¯ä¸ç»ˆç«¯ä¹‹é—´çš„æ•°æ®ä¿¡æ¯ä¼ é€’ï¼Œæ˜¯ç»§ç”µæŠ¥ã€ç”µè¯ä¸šåŠ¡ä¹‹åçš„ç¬¬ä¸‰ç§æœ€å¤§çš„é€šä¿¡ä¸šåŠ¡</td></tr><tr><td>èµ„æºå…±äº«</td><td>èµ„æºå…±äº«æ˜¯äººä»¬å»ºç«‹è®¡ç®—æœºç½‘ç»œçš„ä¸»è¦ç›®çš„ä¹‹ä¸€ã€‚è®¡ç®—æœºèµ„æºåŒ…æ‹¬ç¡¬ä»¶èµ„æºã€è½¯ä»¶èµ„æºå’Œæ•°æ®èµ„æº</td><td>ç¡¬ä»¶èµ„æºçš„å…±äº«å¯ä»¥æé«˜è®¾å¤‡çš„åˆ©ç”¨ç‡ï¼Œé¿å…è®¾å¤‡çš„é‡å¤æŠ•èµ„ï¼Œå¦‚åˆ©ç”¨è®¡ç®—æœºç½‘ç»œå»ºç«‹ç½‘ç»œæ‰“å°æœºï¼›è½¯ä»¶èµ„æºå’Œæ•°æ®èµ„æºçš„å…±äº«å¯ä»¥å……åˆ†åˆ©ç”¨å·²æœ‰çš„ä¿¡æ¯èµ„æºï¼Œå‡å°‘è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„åŠ³åŠ¨ï¼Œé¿å…å¤§å‹æ•°æ®åº“çš„é‡å¤å»ºè®¾</td></tr><tr><td>é›†ä¸­ç®¡ç†</td><td>è®¡ç®—æœºç½‘ç»œæŠ€æœ¯çš„å‘å±•å’Œåº”ç”¨ï¼Œå·²ä½¿å¾—ç°ä»£çš„åŠå…¬æ‰‹æ®µã€ç»è¥ç®¡ç†ç­‰å‘ç”Ÿäº†å˜åŒ–</td><td>ç®¡ç†ä¿¡æ¯ç³»ç»Ÿã€åŠå…¬è‡ªåŠ¨åŒ–ç³»ç»Ÿç­‰ï¼Œé€šè¿‡è¿™äº›ç³»ç»Ÿå¯ä»¥å®ç°æ—¥å¸¸å·¥ä½œçš„é›†ä¸­ç®¡ç†ï¼Œæé«˜å·¥ä½œæ•ˆç‡ï¼Œå¢åŠ ç»æµæ•ˆç›Š</td></tr><tr><td>å®ç°åˆ†å¸ƒå¼å¤„ç†</td><td>ç½‘ç»œæŠ€æœ¯çš„å‘å±•ï¼Œä½¿å¾—åˆ†å¸ƒå¼è®¡ç®—æˆä¸ºå¯èƒ½</td><td>å¯¹äºå¤§å‹çš„è¯¾é¢˜ï¼Œå¯ä»¥åˆ†ä¸ºè®¸è®¸å¤šå¤šå°é¢˜ç›®ï¼Œç”±ä¸åŒçš„è®¡ç®—æœºåˆ†åˆ«å®Œæˆï¼Œç„¶åå†é›†ä¸­èµ·æ¥ï¼Œè§£å†³é—®é¢˜</td></tr><tr><td>è´Ÿè·å‡è¡¡</td><td>è´Ÿè·å‡è¡¡æ˜¯æŒ‡å·¥ä½œè¢«å‡åŒ€çš„åˆ†é…ç»™ç½‘ç»œä¸Šçš„å„å°è®¡ç®—æœºç³»ç»Ÿ</td><td>ç½‘ç»œæ§åˆ¶ä¸­å¿ƒè´Ÿè´£åˆ†é…å’Œæ£€æµ‹ï¼Œå½“æŸå°è®¡ç®—æœºè´Ÿè·è¿‡é‡æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è½¬ç§»è´Ÿè·åˆ°è¾ƒè½»çš„è®¡ç®—æœºç³»ç»Ÿå»å¤„ç†</td></tr></tbody></table></div><h4 id="1-1-2-è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»"><a href="#1-1-2-è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»" class="headerlink" title="1.1.2 è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»"></a>1.1.2 è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»</h4><ul><li>è®¡ç®—æœºç½‘ç»œçš„åˆ†ç±»æ–¹æ³•æœ‰å¤šç§ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„æ–¹æ³•æ˜¯æ ¹æ®<strong>è¦†ç›–èŒƒå›´</strong>è¿›è¡Œåˆ†ç±»çš„æ–¹æ³•ã€‚</li></ul><div class="table-container"><table><thead><tr><th style="text-align:center">åˆ†ç±»</th><th>è¦†ç›–èŒƒå›´(Reference)</th><th>è¯¦ç»†</th><th>ç‰¹ç‚¹</th><th>ç§ç±»</th></tr></thead><tbody><tr><td style="text-align:center">å¹¿åŸŸç½‘(Wide Area Network; WAN)</td><td>&gt;100km</td><td>ä¹Ÿç§°ä¸ºè¿œç¨‹ç½‘ã€‚ä¸€èˆ¬æ˜¯åœ¨ä¸åŒåŸå¸‚ä¹‹é—´çš„LANæˆ–è€…MANç½‘ç»œäº’è”</td><td>è·ç¦»è¾ƒè¿œï¼Œä¿¡æ¯è¡°å‡æ¯”è¾ƒä¸¥é‡ï¼Œæ‰€ä»¥è¿™ç§ç½‘ç»œä¸€èˆ¬æ˜¯è¦ç§Ÿç”¨ä¸“çº¿ï¼Œé€šè¿‡IMPï¼ˆæ¥å£ä¿¡æ¯å¤„ç†ï¼‰åè®®å’Œçº¿è·¯è¿æ¥èµ·æ¥ï¼Œæ„æˆç½‘çŠ¶ç»“æ„ï¼Œè§£å†³å¾ªå¾„é—®é¢˜</td><td>é‚®ç”µéƒ¨çš„CHINANETï¼ŒCHINAPACï¼Œå’ŒCHINADDNç½‘</td></tr><tr><td style="text-align:center">åŸåŸŸç½‘(Metropolitan Area Network; MAN)</td><td>10~100km</td><td>æ—©æœŸä»¥å…‰çº¤ä¸ºä¼ è¾“ä»‹è´¨ã€‚å®½å¸¦åŸåŸŸç½‘ä»¥IPä¸ºåŸºç¡€ï¼Œé€šè¿‡<strong>è®¡ç®—æœºç½‘ç»œã€å¹¿æ’­ç”µè§†ç½‘ã€ç”µä¿¡ç½‘ä¸‰ç½‘èåˆ</strong></td><td>å®Œå–„çš„å…‰çº¤ä¼ è¾“ç½‘æ˜¯åŸºç¡€ã€‚ä¼ ç»Ÿç”µä¿¡ã€æœ‰çº¿ç”µè§†ä¸IPä¸šåŠ¡çš„èåˆæˆä¸ºå®½å¸¦åŸåŸŸç½‘çš„æ ¸å¿ƒä¸šåŠ¡ã€‚é«˜ç«¯è·¯ç”±å™¨å’Œå¤šå±‚äº¤æ¢æœºæ˜¯æ ¸å¿ƒè®¾å¤‡ã€‚æ‰©å¤§å®½å¸¦æ¥å…¥è§„æ¨¡ä¸æœåŠ¡è´¨é‡æ˜¯åº”ç”¨å…³é”®</td><td>æä¾›æ™®é€šå®¶åº­ç”¨æˆ·å’Œé›†å›¢ç”¨æˆ·é«˜é€Ÿæ¥å…¥å› ç‰¹ç½‘ã€å±€åŸŸç½‘äº’è¿ä»¥åŠVPN/VPDNç­‰ä¸šåŠ¡</td></tr><tr><td style="text-align:center">å±€åŸŸç½‘(Local Area Network; LAN)</td><td>10m~10km</td><td>å±€éƒ¨åœ°åŒºèŒƒå›´å†…çš„ç½‘ç»œã€‚å±€åŸŸç½‘ä¸€èˆ¬ä½äºä¸€ä¸ªå»ºç­‘ç‰©æˆ–ä¸€ä¸ªå•ä½å†…ï¼Œä¸å­˜åœ¨å¯»å¾„é—®é¢˜ï¼Œä¸åŒ…æ‹¬ç½‘ç»œå±‚çš„åº”ç”¨</td><td>è¿æ¥èŒƒå›´çª„ã€ç”¨æˆ·æ•°å°‘ã€é…ç½®å®¹æ˜“ã€è¿æ¥é€Ÿç‡é«˜</td><td>ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰ã€ä»¤ç‰Œç¯ç½‘ï¼ˆToken Ringï¼‰ã€å…‰çº¤åˆ†å¸ƒå¼æ¥å£ç½‘ç»œï¼ˆFDDIï¼‰ã€å¼‚æ­¥ä¼ è¾“æ¨¡å¼ç½‘ï¼ˆATMï¼‰ä»¥åŠæœ€æ–°çš„æ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰</td></tr><tr><td style="text-align:center">ä¸ªäººåŒºåŸŸç½‘(Personal Area Network; PAN)</td><td>&lt;10m</td><td>ä¸ªäººæ“ä½œç©ºé—´(Personal Operating Space; POS)ã€‚æ— çº¿ä¸ªäººåŒºåŸŸç½‘ç»œ(WPAN)ã€‚è¿‘è·ç¦»ä¸åŒç§»åŠ¨åŠå…¬è®¾å¤‡ä¹‹é—´ä½é€Ÿäº’è”</td><td>è“ç‰™ï¼šå¼€æ”¾çš„è§„èŒƒï¼Œè¿‘è·ç¦»æ— çº¿é€šä¿¡ï¼Œè¯­éŸ³å’Œæ•°æ®ä¼ è¾“ï¼Œä¸–ç•Œä»»ä½•åœ°æ–¹é€šä¿¡<br>ZigBeeï¼šä½åŠŸè€—ã€ä½é€Ÿç‡ã€ä½æˆæœ¬</td><td>è“ç‰™æŠ€æœ¯ä¸ZigBeeæŠ€æœ¯ï¼ˆè¿‘è·ç¦»æ— çº¿é€šä¿¡ï¼‰</td></tr></tbody></table></div><h4 id="1-1-3-è®¡ç®—æœºç½‘ç»œä¸äº’è”ç½‘çš„å‘å±•å†å²"><a href="#1-1-3-è®¡ç®—æœºç½‘ç»œä¸äº’è”ç½‘çš„å‘å±•å†å²" class="headerlink" title="1.1.3 è®¡ç®—æœºç½‘ç»œä¸äº’è”ç½‘çš„å‘å±•å†å²"></a>1.1.3 è®¡ç®—æœºç½‘ç»œä¸äº’è”ç½‘çš„å‘å±•å†å²</h4><ul><li><p>ç¬¬ä¸€é˜¶æ®µï¼šè®¡ç®—æœºç½‘ç»œæŠ€æœ¯ä¸ç†è®ºå‡†å¤‡é˜¶æ®µï¼ˆ20ä¸–çºª50å¹´ä»£ï¼‰</p><blockquote><p>æ•°æ®é€šä¿¡æŠ€æœ¯æ—¥è¶‹æˆç†Ÿï¼Œä¸ºè®¡ç®—æœºç½‘ç»œçš„å½¢æˆå¥ å®šæŠ€æœ¯åŸºç¡€</p><p>åˆ†ç»„äº¤æ¢æ¦‚å¿µçš„æå‡ºä¸ºè®¡ç®—æœºç½‘ç»œçš„ç ”ç©¶å¥ å®šäº†ç†è®ºåŸºç¡€</p></blockquote></li><li><p>ç¬¬äºŒé˜¶æ®µï¼šè®¡ç®—æœºç½‘ç»œçš„å½¢æˆï¼ˆ20ä¸–çºª60å¹´ä»£ï¼‰</p><blockquote><p>ARPANETçš„æˆåŠŸè¿è¡Œè¯æ˜äº†åˆ†ç»„äº¤æ¢ç†è®ºçš„æ­£ç¡®æ€§</p><p>TCP/IPåè®®çš„å¹¿æ³›åº”ç”¨ä¸ºæ›´å¤§è§„æ¨¡çš„ç½‘ç»œäº’è”å¥ å®šäº†åšå®çš„åŸºç¡€</p><p>E-mailã€FTPã€TELNETã€BBSç­‰åº”ç”¨å±•ç°å‡ºç½‘ç»œæŠ€æœ¯å¹¿é˜”çš„åº”ç”¨å‰æ™¯</p></blockquote></li><li><p>ç¬¬ä¸‰é˜¶æ®µï¼šç½‘ç»œä½“ç³»ç»“æ„çš„ç ”ç©¶ï¼ˆ20ä¸–çºª70å¹´ä»£ä¸­æœŸï¼‰</p><blockquote><p>ç½‘ç»œä½“ç³»ç»“æ„ä¸åè®®çš„æ ‡å‡†åŒ–ç ”ç©¶ï¼Œå¯¹æ›´å¤§è§„æ¨¡çš„ç½‘ç»œäº’è”èµ·åˆ°æ¨åŠ¨ä½œç”¨</p><p>å›½é™…æ ‡å‡†åŒ–ç»„ç»‡(ISO)åœ¨æ¨åŠ¨â€œå¼€æ”¾ç³»ç»Ÿäº’è¿(Open System Interconnection, OSI)å‚è€ƒæ¨¡å‹â€ä¸ç½‘ç»œåè®®æ ‡å‡†åŒ–ç ”ç©¶æ–¹é¢åšäº†å¤§é‡å·¥ä½œ</p><p>OSIå‚è€ƒæ¨¡å‹çš„ç ”ç©¶å¯¹ç½‘ç»œç†è®ºä½“ç³»çš„å½¢æˆä¸å‘å±•ï¼Œä»¥åŠåœ¨ç½‘ç»œåè®®æ ‡å‡†åŒ–ç ”ç©¶æ–¹é¢èµ·åˆ°äº†é‡è¦çš„æ¨åŠ¨ä½œç”¨</p><p>TCP/IPç»å—äº†å¸‚åœºå’Œç”¨æˆ·çš„æ£€éªŒï¼Œå¸å¼•äº†å¤§é‡çš„æŠ•èµ„ï¼Œæ¨åŠ¨äº†Internetåº”ç”¨çš„å‘å±•ï¼Œæˆä¸ºä¸šç•Œæ ‡å‡†</p></blockquote></li><li><p>ç¬¬å››é˜¶æ®µï¼šInternetåº”ç”¨ã€æ— çº¿ç½‘ç»œä¸ç½‘ç»œå®‰å…¨æŠ€æœ¯ç ”ç©¶çš„å‘å±•</p><blockquote><p>Internetä½œä¸ºå…¨çƒæ€§çš„å›½é™…ç½‘ä¸å¤§å‹ä¿¡æ¯ç³»ç»Ÿ</p><p>Internetå¤§è§„æ¨¡æ¥å…¥æ¨åŠ¨äº†æ¥å…¥æŠ€æœ¯çš„å‘å±•</p><p>å¯¹ç­‰(Peer-to-Peer, P2P)ç½‘ç»œæŠ€æœ¯çš„ç ”ç©¶ï¼Œä½¿å¾—â€œå³æ—¶é€šä¿¡â€ç­‰æ–°çš„ç½‘ç»œåº”ç”¨ä¸æ–­æ¶Œç°</p><p>WPANã€WLANä¸WMANæŠ€æœ¯æ—¥ç›Šæˆç†Ÿï¼Œå¹¶åº”ç”¨é˜¶æ®µã€‚æ— çº¿è‡ªç»„ç½‘ã€æ— çº¿ä¼ æ„Ÿå™¨ç½‘ç»œå—åˆ°é«˜åº¦é‡è§†</p><p>ç‰©è”ç½‘æŠ€æœ¯å½¢æˆä¸å‘å±•</p><p>ç½‘ç»œå®‰å…¨æŠ€æœ¯å¿«é€Ÿå‘å±•</p></blockquote></li></ul><h3 id="1-2è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–å·¥ä½œåŠç›¸å…³ç»„ç»‡ã€‚"><a href="#1-2è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–å·¥ä½œåŠç›¸å…³ç»„ç»‡ã€‚" class="headerlink" title="1.2è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–å·¥ä½œåŠç›¸å…³ç»„ç»‡ã€‚"></a>1.2è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†åŒ–å·¥ä½œåŠç›¸å…³ç»„ç»‡ã€‚</h3><h4 id="1-2-1-ç½‘ç»œåè®®æ ‡å‡†åŒ–ç»„ç»‡"><a href="#1-2-1-ç½‘ç»œåè®®æ ‡å‡†åŒ–ç»„ç»‡" class="headerlink" title="1.2.1 ç½‘ç»œåè®®æ ‡å‡†åŒ–ç»„ç»‡"></a>1.2.1 ç½‘ç»œåè®®æ ‡å‡†åŒ–ç»„ç»‡</h4><ul><li><p>å›½é™…ç”µä¿¡è”ç›Ÿï¼ˆInternational Telecommunications Union, ITUï¼‰</p><p>è´Ÿè´£ç”µä¿¡æ–¹é¢çš„æ ‡å‡†åˆ¶å®šã€‚</p></li><li><p>å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆInternational Organization for Standardization, ISOï¼‰</p><p>ç»„ç»‡åˆ¶å®šå›½é™…æ ‡å‡†ã€‚ISOä¸­è´Ÿè´£æ•°æ®é€šä¿¡æ ‡å‡†çš„æ˜¯ISOç¬¬97æŠ€æœ¯å§”å‘˜ä¼šï¼ˆTC97ï¼‰ã€‚OSIå‚è€ƒæ¨¡å‹å°±æ˜¯ç”±ISOçš„TC97ç»„ç»‡åˆ¶å®šçš„ã€‚</p></li><li><p>ç”µå­å·¥ä¸šåä¼šï¼ˆElectronic Industries Association, EIAï¼‰</p><p>åˆ¶å®šçš„RS-232æ¥å£æ ‡å‡†åœ¨é€šä¿¡ä¸­åº”ç”¨å¹¿æ³›ã€‚</p></li><li><p>ç”µæ°”ç”µå­å·¥ç¨‹å¸ˆåä¼šï¼ˆInstitute of Electrical and Electronics Engineers, IEEEï¼‰</p><p>ç»„ç»‡åˆ¶å®šäº†å±€åŸŸç½‘ä¸­æœ€é‡è¦çš„802ç³»åˆ—æ ‡å‡†ã€‚</p></li></ul><h3 id="1-3-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸å‚è€ƒæ¨¡å‹"><a href="#1-3-è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸å‚è€ƒæ¨¡å‹" class="headerlink" title="1.3 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸å‚è€ƒæ¨¡å‹"></a>1.3 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸å‚è€ƒæ¨¡å‹</h3><h4 id="1-3-1-è®¡ç®—æœºç½‘ç»œåˆ†å±‚ç»“æ„"><a href="#1-3-1-è®¡ç®—æœºç½‘ç»œåˆ†å±‚ç»“æ„" class="headerlink" title="1.3.1 è®¡ç®—æœºç½‘ç»œåˆ†å±‚ç»“æ„"></a>1.3.1 è®¡ç®—æœºç½‘ç»œåˆ†å±‚ç»“æ„</h4><ul><li>OSIä½“ç³»ç»“æ„ï¼šåº”ç”¨å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œä¼šè¯å±‚ï¼Œè¿è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚</li><li>TCP/IPä½“ç³»ç»“æ„ï¼šåº”ç”¨å±‚ï¼Œè¿è¾“å±‚ï¼ˆTCPæˆ–UDPï¼‰ï¼Œç½‘é™…å±‚ï¼ˆIPï¼‰ï¼Œç½‘ç»œæ¥å£å±‚</li><li>äº”å±‚åè®®ä½“ç³»ç»“æ„ï¼šåº”ç”¨å±‚ï¼Œè¿è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚</li></ul><h4 id="1-3-2-è®¡ç®—æœºç½‘ç»œåè®®ã€æ¥å£ã€æœåŠ¡ç­‰æ¦‚å¿µ"><a href="#1-3-2-è®¡ç®—æœºç½‘ç»œåè®®ã€æ¥å£ã€æœåŠ¡ç­‰æ¦‚å¿µ" class="headerlink" title="1.3.2 è®¡ç®—æœºç½‘ç»œåè®®ã€æ¥å£ã€æœåŠ¡ç­‰æ¦‚å¿µ"></a>1.3.2 è®¡ç®—æœºç½‘ç»œåè®®ã€æ¥å£ã€æœåŠ¡ç­‰æ¦‚å¿µ</h4><ul><li><p>åè®®å°±æ˜¯ä¸€ç»„<strong>æ§åˆ¶æ•°æ®äº¤äº’</strong>è¿‡ç¨‹çš„é€šä¿¡è§„åˆ™ï¼Œè¿™äº›ä¸ºç½‘ç»œæ•°æ®äº¤æ¢åˆ¶å®šçš„é€šä¿¡è§„åˆ™ã€çº¦å®šä¸æ ‡å‡†è¢«ç§°ä¸ºâ€œç½‘ç»œåè®®â€</p><blockquote><p>ç½‘ç»œåè®®ä¸‰è¦ç´ ï¼š</p><p>ï¼ˆ1ï¼‰è¯­ä¹‰ï¼šè§£é‡Šæ§åˆ¶ä¿¡æ¯æ¯ä¸ªéƒ¨åˆ†çš„æ„ä¹‰</p><p>ï¼ˆ2ï¼‰è¯­æ³•ï¼šè¯­æ³•æ˜¯ç”¨æˆ·æ•°æ®ä¸æ§åˆ¶ä¿¡æ¯çš„ç»“æ„ä¸æ ¼å¼ï¼Œä»¥åŠæ•°æ®å‡ºç°çš„é¡ºåº</p><p>ï¼ˆ3ï¼‰æ—¶åºï¼šæ˜¯å¯¹äº‹ä»¶å‘ç”Ÿé¡ºåºåœ°è¯¦ç»†è¯´æ˜</p></blockquote></li><li><p>å±‚æ¬¡ç»“æ„æ˜¯å¤„ç†è®¡ç®—æœºç½‘ç»œé—®é¢˜æœ€åŸºæœ¬çš„æ–¹æ³•ã€‚å¯¹äºä¸€äº›éš¾ä»¥å¤„ç†çš„å¤æ‚é—®é¢˜ï¼Œé€šå¸¸é‡‡ç”¨åˆ†è§£ä¸ºè‹¥å¹²ä¸ªå®¹æ˜“å¤„ç†çš„ã€å°ä¸€äº›çš„é—®é¢˜ï¼Œâ€œåŒ–æ•´ä¸ºé›¶ï¼Œåˆ†è€Œæ²»ä¹‹â€çš„æ–¹æ³•å»è§£å†³</p></li><li><p>åœ¨é‚®æ”¿ç³»ç»Ÿä¸­ï¼Œé‚®ç®±å°±æ˜¯å‘ä¿¡äººã€æ”¶ä¿¡äººä¸é‚®é€’å‘˜ä¹‹é—´äº¤äº’çš„æ¥å£ã€‚æ¥å£æ˜¯åŒä¸€ä¸»æœºå†…<strong>ç›¸é‚»å±‚ä¹‹é—´äº¤æ¢ä¿¡æ¯</strong>çš„è¿æ¥ç‚¹</p></li><li><p>å®ä½“ï¼šä»»ä½•å¯<strong>å‘é€æˆ–æ¥å—ä¿¡æ¯</strong>çš„<strong>ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹</strong>ï¼Œé€šå¸¸æ˜¯ä¸ªç‰¹å®šçš„è½¯ä»¶æ¨¡å—ã€‚</p><blockquote><p>ç¬¬nå±‚çš„æ´»åŠ¨å…ƒç´ ç§°ä¸ºnå±‚å®ä½“</p><p>ä¸åŒæœºå™¨ä¸ŠåŒä¸€å±‚ç§°ä¸ºå¯¹ç­‰å±‚ï¼ŒåŒä¸€å±‚çš„å®ä½“å«åš<strong>å¯¹ç­‰å®ä½“</strong></p></blockquote></li><li><p>æœåŠ¡ï¼šä¸‹å±‚ä¸ºç›¸é‚»ä¸Šå±‚æä¾›çš„åŠŸèƒ½è°ƒç”¨ï¼Œå‚ç›´çš„ã€‚å¯¹ç­‰å®ä½“åœ¨åè®®çš„æ§åˆ¶ä¸‹ä½¿å¾—æœ¬å±‚èƒ½ä¸ºä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚</p></li></ul><h4 id="1-3-3-ISO-OSIå‚è€ƒæ¨¡å‹å’ŒTCP-IPæ¨¡å‹"><a href="#1-3-3-ISO-OSIå‚è€ƒæ¨¡å‹å’ŒTCP-IPæ¨¡å‹" class="headerlink" title="1.3.3 ISO/OSIå‚è€ƒæ¨¡å‹å’ŒTCP/IPæ¨¡å‹"></a>1.3.3 ISO/OSIå‚è€ƒæ¨¡å‹å’ŒTCP/IPæ¨¡å‹</h4><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/computernetwork/stratification.png" style="zoom: 50%;" /></p><h2 id="äºŒã€ç‰©ç†å±‚"><a href="#äºŒã€ç‰©ç†å±‚" class="headerlink" title="äºŒã€ç‰©ç†å±‚"></a>äºŒã€ç‰©ç†å±‚</h2><h3 id="2-1-é€šä¿¡åŸºç¡€"><a href="#2-1-é€šä¿¡åŸºç¡€" class="headerlink" title="2.1 é€šä¿¡åŸºç¡€"></a>2.1 é€šä¿¡åŸºç¡€</h3><h4 id="2-1-1-ä¿¡é“ã€ä¿¡å·ã€å®½å¸¦ã€ç å…ƒã€æ³¢ç‰¹ã€é€Ÿç‡ã€ä¿¡æºä¸ä¿¡å®¿ç­‰åŸºæœ¬æ¦‚å¿µ"><a href="#2-1-1-ä¿¡é“ã€ä¿¡å·ã€å®½å¸¦ã€ç å…ƒã€æ³¢ç‰¹ã€é€Ÿç‡ã€ä¿¡æºä¸ä¿¡å®¿ç­‰åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.1.1 ä¿¡é“ã€ä¿¡å·ã€å®½å¸¦ã€ç å…ƒã€æ³¢ç‰¹ã€é€Ÿç‡ã€ä¿¡æºä¸ä¿¡å®¿ç­‰åŸºæœ¬æ¦‚å¿µ"></a>2.1.1 ä¿¡é“ã€ä¿¡å·ã€å®½å¸¦ã€ç å…ƒã€æ³¢ç‰¹ã€é€Ÿç‡ã€ä¿¡æºä¸ä¿¡å®¿ç­‰åŸºæœ¬æ¦‚å¿µ</h4><ul><li><p>ä¿¡é“ï¼šé€šä¿¡çš„é€šé“ï¼Œæ˜¯ä¿¡å·ä¼ è¾“çš„åª’ä»‹</p></li><li><p>ä¿¡å·ï¼šåœ¨é€šä¿¡ç³»ç»Ÿä¸­ï¼ŒäºŒè¿›åˆ¶ä»£ç 0ã€1æ¯”ç‰¹åºåˆ—å¿…é¡»å˜æ¢æˆä¸åŒçš„ç”µå¹³æˆ–é¢‘ç‡å˜åŒ–çš„ä¿¡å·ä¹‹åï¼Œæ‰èƒ½é€šè¿‡ä¼ è¾“ä»‹è´¨è¿›è¡Œä¼ è¾“</p></li><li><p>å¸¦å®½ï¼šç½‘ç»œçš„é€šä¿¡çº¿è·¯ä¼ é€æ•°æ®çš„èƒ½åŠ›ã€‚å³ï¼šåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ä¸ªç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€</p></li><li><p>ç å…ƒï¼šåœ¨æ•°å­—é€šä¿¡ä¸­å¸¸å¸¸ç”¨æ—¶é—´é—´éš”ç›¸åŒçš„ç¬¦å·æ¥è¡¨ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ•°å­—ï¼Œè¿™æ ·çš„æ—¶é—´é—´éš”å†…çš„ä¿¡å·ç§°ä¸º(äºŒè¿›åˆ¶ï¼‰ç å…ƒ</p><blockquote><p>ä¸€ä¸ªæ•°å­—è„‰å†²å°±æ˜¯ä¸€ä¸ªç å…ƒ</p></blockquote></li><li><p>æ³¢ç‰¹ï¼šè°ƒåˆ¶é€Ÿç‡æè¿°é€šè¿‡æ¨¡æ‹Ÿçº¿è·¯ä¼ è¾“æ¨¡æ‹Ÿæ•°æ®ä¿¡å·çš„è¿‡ç¨‹ä¸­ï¼Œä»è°ƒåˆ¶è§£è°ƒå™¨è¾“å‡ºçš„è°ƒåˆ¶ä¿¡å·æ¯ç§’é’Ÿè½½æ³¢è°ƒåˆ¶çŠ¶æ€æ”¹å˜çš„æ•°å€¼ï¼Œå•ä½æ˜¯1/sï¼Œç§°ä¸ºæ³¢ç‰¹</p><blockquote><p>1æ³¢ç‰¹è¡¨ç¤ºæ•°å­—é€šä¿¡ç³»ç»Ÿæ¯ç§’ä¼ è¾“1ä¸ªç å…ƒï¼Œå•ä½æ—¶é—´å†…æ•°å­—é€šä¿¡ç³»ç»Ÿæ‰€ä¼ è¾“çš„ç å…ƒä¸ªæ•°</p></blockquote></li><li><p>é€Ÿç‡ï¼šè¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ•°æ®çš„é€Ÿç‡ï¼Œä¹Ÿç§°ä¸ºæ•°æ®ç‡æˆ–æ¯”ç‰¹ç‡ã€‚</p></li><li><p>ä¿¡æºï¼šå‘é€æ•°æ®çš„ä¸€æ–¹</p></li><li><p>ä¿¡å®¿ï¼šæ¥æ”¶æ•°æ®çš„ä¸€æ–¹</p></li></ul><h4 id="2-1-2-å¥ˆå¥æ–¯ç‰¹å®šç†ä¸é¦™å†œå®šç†"><a href="#2-1-2-å¥ˆå¥æ–¯ç‰¹å®šç†ä¸é¦™å†œå®šç†" class="headerlink" title="2.1.2 å¥ˆå¥æ–¯ç‰¹å®šç†ä¸é¦™å†œå®šç†"></a>2.1.2 å¥ˆå¥æ–¯ç‰¹å®šç†ä¸é¦™å†œå®šç†</h4><ul><li>Nyquistå‡†åˆ™</li></ul><h4 id="2-1-3-ç¼–ç ä¸è°ƒåˆ¶"><a href="#2-1-3-ç¼–ç ä¸è°ƒåˆ¶" class="headerlink" title="2.1.3 ç¼–ç ä¸è°ƒåˆ¶"></a>2.1.3 ç¼–ç ä¸è°ƒåˆ¶</h4><ul><li><p>ç¼–ç ï¼šæŠŠæ•°å­—ä¿¡å·è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼çš„æ•°å­—ä¿¡å·</p><blockquote><p>å¸¸ç”¨ç¼–ç æ–¹å¼ï¼šä¸å½’é›¶åˆ¶ï¼Œå½’é›¶åˆ¶ï¼ˆæ­£è„‰å†²ä»£è¡¨1ï¼Œè´Ÿè„‰å†²ä»£è¡¨0ï¼‰ï¼Œæ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆä½å‘¨æœŸä¸­å¿ƒçš„å‘ä¸Šè·³å˜ä»£è¡¨0ï¼Œå‘ä¸‹ä»£è¡¨1ï¼Œåä¹‹äº¦å¯ï¼‰ï¼Œå·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆæ¯ä¸€ä½çš„ä¸­å¿ƒå¤„å§‹ç»ˆæœ‰è·³å˜ã€‚ä½å¼€å§‹è¾¹ç•Œæœ‰è·³å˜ä¸º0ï¼Œä½å¼€å§‹è¾¹ç•Œæ— è·³å˜ä¸º1ï¼‰ã€‚</p></blockquote></li><li><p>è°ƒåˆ¶ï¼šå°†å‘é€ç«¯çš„æ•°å­—ä¿¡å·å˜æ¢æˆæ¨¡æ‹Ÿä¿¡å·çš„è¿‡ç¨‹ã€‚å®ç°è°ƒåˆ¶åŠŸèƒ½çš„è®¾å¤‡ç§°ä¸ºâ€œè°ƒåˆ¶å™¨â€</p></li></ul><h4 id="2-1-4-ç”µè·¯äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢ä¸åˆ†ç»„äº¤æ¢"><a href="#2-1-4-ç”µè·¯äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢ä¸åˆ†ç»„äº¤æ¢" class="headerlink" title="2.1.4 ç”µè·¯äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢ä¸åˆ†ç»„äº¤æ¢"></a>2.1.4 ç”µè·¯äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢ä¸åˆ†ç»„äº¤æ¢</h4><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/computernetwork/dataexchange.png" alt=""></p><div class="table-container"><table><thead><tr><th>åˆ†ç±»</th><th>è¯¦ç»†</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ç”µè·¯äº¤æ¢ï¼ˆçº¿è·¯äº¤æ¢ï¼ŒCircuit Switchingï¼‰</td><td>ä¸¤å°è®¡ç®—æœºé€šè¿‡é€šä¿¡å­ç½‘è¿›è¡Œæ•°æ®äº¤æ¢ä¹‹å‰ï¼Œé¦–å…ˆä»ä¿¡æºåˆ°ä¿¡å®¿å»ºç«‹ä¸€æ¡å®é™…çš„ç‰©ç†è¿æ¥é€šé“</td><td>åœ¨ä¿æŒè¿æ¥æœŸé—´åŒæ–¹ç‹¬å ä¿¡é“ï¼ˆæ²¡æœ‰å†²çªï¼Œæµªè´¹ä¿¡é“èµ„æºï¼‰ã€‚ä¿¡é“èµ„æºçš„åˆ©ç”¨æ•ˆç‡è¾ƒä½ã€‚é€‚ç”¨äºäº¤äº’å¼ä¼šè¯ç±»é€šä¿¡</td></tr><tr><td>æŠ¥æ–‡äº¤æ¢</td><td>ä»¥æŠ¥æ–‡ä¸ºæ•°æ®äº¤æ¢çš„å•ä½ï¼Œæ•´å—æ•°æ®ä»æºåˆ°å®¿ç”±äº¤æ¢ç»“ç‚¹é€ä¸€ä¸­è½¬</td><td>æ•´å—æ•°æ®é€ç«™<strong>å­˜å‚¨è½¬å‘</strong>ã€‚å¯¹æŠ¥æ–‡çš„é•¿åº¦æ²¡æœ‰é™åˆ¶ï¼Œå¯¹äºå¤§å—æ•°æ®ï¼ˆå ç”¨å­˜å‚¨ç©ºé—´å¤§ï¼Œå ç”¨ä¿¡é“æ—¶é—´é•¿ï¼‰ã€‚å»¶è¿Ÿè¾ƒå¤§ï¼Œä¸èƒ½å®ç°äº¤äº’å¼é€šä¿¡</td></tr><tr><td>åˆ†ç»„äº¤æ¢</td><td>å°†æ•°æ®æ‹†åˆ†æˆåˆ†ç»„ï¼Œä¾æ¬¡ä»æºåˆ°å®¿ç»äº¤æ¢ç»“ç‚¹è½¬å‘</td><td>åˆ†ç»„çš„é•¿åº¦æœ‰ä¸Šé™æ§åˆ¶ï¼Œå„è‡ªç‹¬ç«‹ä¼ è¾“ï¼ˆå ç”¨ä¿¡é“æ—¶é—´çŸ­ï¼Œå ç”¨ç¼“å­˜ç©ºé—´å°ï¼‰ã€‚ä¿¡é“å…±äº«ï¼ˆå¯å……åˆ†åˆ©ç”¨ä¿¡é“èµ„æºï¼Œæœ‰å¯èƒ½å‘ç”Ÿèµ„æº(ä¿¡é“å’Œç»“ç‚¹ï¼‰å ç”¨å†²çªï¼‰</td></tr></tbody></table></div><ul><li>åˆ†ç»„äº¤æ¢çš„ä¼˜ç‚¹<ul><li>æ¯”æŠ¥æ–‡äº¤æ¢çš„å»¶è¿Ÿå°</li><li>æ¯”ç”µè·¯äº¤æ¢çš„æ•ˆç‡é«˜</li><li>é€‚äºè®¡ç®—æœºç½‘ç»œé€šä¿¡</li></ul></li><li>åˆ†ç»„äº¤æ¢çš„ç¼ºç‚¹<ul><li>ä»ç„¶æœ‰å»¶è¿Ÿï¼Œä¸èƒ½æ»¡è¶³å®æ—¶å¤šåª’ä½“é€šä¿¡çš„æœåŠ¡è´¨é‡</li><li>éœ€è¦è§£å†³å†²çªæ£€æµ‹ã€æ‹¥å¡æ§åˆ¶å’Œçº é”™é‡å‘ç­‰é—®é¢˜</li></ul></li></ul><h4 id="2-1-5-æ•°æ®æŠ¥ä¸è™šç”µè·¯"><a href="#2-1-5-æ•°æ®æŠ¥ä¸è™šç”µè·¯" class="headerlink" title="2.1.5 æ•°æ®æŠ¥ä¸è™šç”µè·¯"></a>2.1.5 æ•°æ®æŠ¥ä¸è™šç”µè·¯</h4><p>åˆ†ç»„äº¤æ¢æŠ€æœ¯å¯ä»¥åˆ†ä¸º2ç±»ï¼šæ•°æ®æŠ¥ï¼ˆData Gram, DGï¼‰ä¸è™šç”µè·¯ï¼ˆVirtual Circuit, VCï¼‰ã€‚</p><ul><li>æ•°æ®æŠ¥æ–¹å¼</li><li>è™šç”µè·¯æ–¹å¼</li></ul><h3 id="2-2-ä¼ è¾“ä»‹è´¨"><a href="#2-2-ä¼ è¾“ä»‹è´¨" class="headerlink" title="2.2 ä¼ è¾“ä»‹è´¨"></a>2.2 ä¼ è¾“ä»‹è´¨</h3><ol><li><p>åŒç»çº¿ã€åŒè½´ç”µç¼†ã€å…‰çº¤ä¸æ— çº¿ä¼ è¾“ä»‹è´¨</p></li><li><p>ç‰©ç†å±‚æ¥å£çš„ç‰¹æ€§</p></li></ol><h3 id="2-3-ç‰©ç†å±‚è®¾å¤‡"><a href="#2-3-ç‰©ç†å±‚è®¾å¤‡" class="headerlink" title="2.3 ç‰©ç†å±‚è®¾å¤‡"></a>2.3 ç‰©ç†å±‚è®¾å¤‡</h3><ol><li><p>ä¸­ç»§å™¨</p></li><li><p>é›†çº¿å™¨ã€‚</p></li></ol><h2 id="ä¸‰ã€æ•°æ®é“¾è·¯å±‚"><a href="#ä¸‰ã€æ•°æ®é“¾è·¯å±‚" class="headerlink" title="ä¸‰ã€æ•°æ®é“¾è·¯å±‚"></a>ä¸‰ã€æ•°æ®é“¾è·¯å±‚</h2><h3 id="3-1-æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½"><a href="#3-1-æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½" class="headerlink" title="3.1 æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½"></a>3.1 æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½</h3><p>é‡‡å–å·®é”™æ£€æµ‹ã€å·®é”™æ§åˆ¶ä¸æµé‡æ§åˆ¶ç­‰æ–¹æ³•ï¼Œå°†æœ‰å·®é”™çš„ç‰©ç†çº¿è·¯æ”¹è¿›æˆæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œå‘ç½‘ç»œå±‚æä¾›é«˜è´¨é‡çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚</p><h3 id="3-2-ç»„å¸§"><a href="#3-2-ç»„å¸§" class="headerlink" title="3.2 ç»„å¸§"></a>3.2 ç»„å¸§</h3><h3 id="3-3-å·®é”™æ§åˆ¶"><a href="#3-3-å·®é”™æ§åˆ¶" class="headerlink" title="3.3 å·®é”™æ§åˆ¶"></a>3.3 å·®é”™æ§åˆ¶</h3><p>åœ¨è®¡ç®—æœºé€šä¿¡ä¸­ï¼Œç ”ç©¶<strong>æ£€æµ‹ä¸çº æ­£æ¯”ç‰¹æµä¼ è¾“é”™è¯¯</strong>çš„æ–¹æ³•ç§°ä¸ºâ€œå·®é”™æ§åˆ¶â€ã€‚å·®é”™æ§åˆ¶çš„ç›®çš„æ˜¯å‡å°‘ç‰©ç†çº¿è·¯çš„ä¼ è¾“é”™è¯¯ã€‚åœ¨è®¾è®¡å·®é”™æ§åˆ¶æ–¹æ³•æ—¶æå‡ºä»¥ä¸‹2ç§ç­–ç•¥ï¼š</p><h4 id="3-3-1-æ£€é”™ç¼–ç "><a href="#3-3-1-æ£€é”™ç¼–ç " class="headerlink" title="3.3.1 æ£€é”™ç¼–ç "></a>3.3.1 æ£€é”™ç¼–ç </h4><p>æ£€é”™ç ä¸ºæ¯ä¸ªä¼ è¾“å•å…ƒåŠ ä¸Šä¸€å®šçš„å†—ä½™ä¿¡æ¯ï¼Œæ¥æ”¶ç«¯å¯ä»¥æ ¹æ®è¿™äº›å†—ä½™ä¿¡æ¯<strong>å‘ç°</strong>ä¼ è¾“å·®é”™ï¼Œä½†æ˜¯ä¸èƒ½ç¡®å®šæ˜¯å“ªä¸€ä½æˆ–å“ªäº›ä½å‡ºé”™ï¼Œå¹¶ä¸”è‡ªå·±ä¸èƒ½å¤Ÿè‡ªåŠ¨çº æ­£ä¼ è¾“é”™è¯¯ã€‚</p><p>å¸¸ç”¨çš„æ£€é”™ç æœ‰å¥‡å¶æ ¡éªŒç ï¼ˆå‚ç›´ã€æ°´å¹³ã€å‚ç›´æ°´å¹³å¥‡å¶æ ¡éªŒï¼‰å’Œå¾ªç¯å†—ä½™ç ï¼ˆCRCï¼‰ã€‚</p><h4 id="3-3-2-çº é”™ç¼–ç "><a href="#3-3-2-çº é”™ç¼–ç " class="headerlink" title="3.3.2 çº é”™ç¼–ç "></a>3.3.2 çº é”™ç¼–ç </h4><p>çº é”™ç ä¸ºæ¯ä¸ªä¼ è¾“å•å…ƒåŠ ä¸Šè¶³å¤Ÿå¤šçš„å†—ä½™ä¿¡æ¯ï¼Œä»¥ä¾¿æ¥æ”¶ç«¯èƒ½å¤Ÿå‘ç°ï¼Œå¹¶èƒ½å¤Ÿè‡ªåŠ¨<strong>çº æ­£</strong>ä¼ è¾“å·®é”™ã€‚</p><blockquote><p>æ£€é”™ç éœ€è¦é€šè¿‡é‡ä¼ æœºåˆ¶è¾¾åˆ°çº é”™ç›®çš„ï¼Œä½†å·¥ä½œåŸç†ç®€å•ï¼Œå®ç°èµ·æ¥å®¹æ˜“ï¼Œå¹¿æ³›ä½¿ç”¨ã€‚</p><p>çº é”™ç æœ‰ä¼˜è¶Šä¹‹å¤„ï¼Œä½†å®ç°èµ·æ¥å›°éš¾ï¼Œåœ¨ä¸€èˆ¬çš„é€šä¿¡åœºæ‰€ä¸æ˜“é‡‡ç”¨ã€‚</p></blockquote><h3 id="3-4-æµé‡æ§åˆ¶ä¸å¯é ä¼ è¾“æœºåˆ¶"><a href="#3-4-æµé‡æ§åˆ¶ä¸å¯é ä¼ è¾“æœºåˆ¶" class="headerlink" title="3.4 æµé‡æ§åˆ¶ä¸å¯é ä¼ è¾“æœºåˆ¶"></a>3.4 æµé‡æ§åˆ¶ä¸å¯é ä¼ è¾“æœºåˆ¶</h3><h4 id="3-4-1-æµé‡æ§åˆ¶ã€å¯é ä¼ è¾“ä¸æ»‘åŠ¨çª—å£æœºåˆ¶"><a href="#3-4-1-æµé‡æ§åˆ¶ã€å¯é ä¼ è¾“ä¸æ»‘åŠ¨çª—å£æœºåˆ¶" class="headerlink" title="3.4.1 æµé‡æ§åˆ¶ã€å¯é ä¼ è¾“ä¸æ»‘åŠ¨çª—å£æœºåˆ¶"></a>3.4.1 æµé‡æ§åˆ¶ã€å¯é ä¼ è¾“ä¸æ»‘åŠ¨çª—å£æœºåˆ¶</h4><ul><li><p>æµé‡æ§åˆ¶</p><p>å‘é€ç«¯å‘é€æ•°æ®è¶…è¿‡ç‰©ç†çº¿è·¯çš„ä¼ è¾“èƒ½åŠ›æˆ–è¶…è¿‡æ¥æ”¶ç«¯çš„å¸§æ¥æ”¶èƒ½åŠ›æ—¶ï¼Œå°±ä¼šé€ æˆ<strong>é“¾è·¯æ‹¥å¡</strong>ã€‚ä¸ºäº†é˜²æ­¢é“¾è·¯æ‹¥å¡ï¼Œæ•°æ®é“¾è·¯å±‚å¿…é¡»å…·æœ‰æµé‡æ§åˆ¶åŠŸèƒ½ã€‚ï¼ˆé¿å…æ·¹æ²¡ç‰©ç†çº¿è·¯å’Œæ¥æ”¶ç«¯ï¼‰</p></li></ul><ol><li><p>åœæ­¢-ç­‰å¾…åè®®;</p></li><li><p>åé€€Nå¸§åè®®(GBN);</p></li><li><p>é€‰æ‹©é‡ä¼ åè®®(SR)ã€‚</p></li></ol><h3 id="3-5-ä»‹è´¨è®¿é—®æ§åˆ¶"><a href="#3-5-ä»‹è´¨è®¿é—®æ§åˆ¶" class="headerlink" title="3.5 ä»‹è´¨è®¿é—®æ§åˆ¶"></a>3.5 ä»‹è´¨è®¿é—®æ§åˆ¶</h3><ol><li><p>ä¿¡é“åˆ’åˆ†ä»‹è´¨è®¿é—®æ§åˆ¶ï¼šé¢‘åˆ†å¤šè·¯å¤ç”¨ã€æ—¶åˆ†å¤šè·¯å¤ç”¨ã€æ³¢åˆ†å¤šè·¯å¤ç”¨ã€ç åˆ†å¤šè·¯å¤ç”¨çš„æ¦‚å¿µå’ŒåŸºæœ¬åŸç†;</p></li><li><p>éšå³è®¿é—®ä»‹è´¨è®¿é—®æ§åˆ¶ï¼šALOHAåè®®ï¼ŒCSMAåè®®ï¼ŒCSMA/CDåè®®ï¼ŒCSMA/CAåè®®;</p></li><li><p>è½®è¯¢è®¿é—®ä»‹è´¨è®¿é—®æ§åˆ¶ï¼šä»¤ç‰Œä¼ é€’åè®®ã€‚</p></li></ol><h3 id="3-6-å±€åŸŸç½‘"><a href="#3-6-å±€åŸŸç½‘" class="headerlink" title="3.6 å±€åŸŸç½‘"></a>3.6 å±€åŸŸç½‘</h3><ol><li><p>å±€åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µä¸ä½“ç³»ç»“æ„;</p></li><li><p>ä»¥å¤ªç½‘ä¸IEEE 802.3;</p></li><li><p>IEEE 802.11;</p></li><li><p>ä»¤ç‰Œç¯ç½‘çš„åŸºæœ¬åŸç†ã€‚</p></li></ol><h3 id="3-7-å¹¿åŸŸç½‘"><a href="#3-7-å¹¿åŸŸç½‘" class="headerlink" title="3.7 å¹¿åŸŸç½‘"></a>3.7 å¹¿åŸŸç½‘</h3><h4 id="3-7-1-å¹¿åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µ"><a href="#3-7-1-å¹¿åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3.7.1 å¹¿åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µ;"></a>3.7.1 å¹¿åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µ;</h4><h4 id="3-7-2-PPPåè®®"><a href="#3-7-2-PPPåè®®" class="headerlink" title="3.7.2 PPPåè®®;"></a>3.7.2 PPPåè®®;</h4><h4 id="3-7-3-HDLCåè®®"><a href="#3-7-3-HDLCåè®®" class="headerlink" title="3.7.3 HDLCåè®®"></a>3.7.3 HDLCåè®®</h4><ul><li><p>èƒŒæ™¯</p><p>ISOå°†SDLCåè®®ï¼ˆé¢å‘æ¯”ç‰¹å‹ï¼‰ä¿®æ”¹åçš„é«˜çº§æ•°æ®é“¾è·¯æ§åˆ¶ï¼ˆHDLCï¼‰åè®®ä½œä¸ºå›½é™…æ ‡å‡†ï¼ˆISO 3309ï¼‰ã€‚ç›®å‰å¾ˆå¤šæµè¡Œçš„æ•°æ®é“¾è·¯å±‚åè®®ï¼Œå¦‚Ethernetå¸§ç»“æ„ä¸PPPåè®®ï¼Œéƒ½æ˜¯åœ¨HDLCåŸºç¡€ä¸Šä¿®æ”¹ï¼Œæˆ–æ˜¯å–å…¶å­é›†å½¢æˆçš„ã€‚</p></li><li><p>æ•°æ®é“¾è·¯çš„é…ç½®æ–¹å¼å’Œæ•°æ®ä¼ é€æ–¹å¼</p><p>HDLCæ•°æ®é“¾è·¯æœ‰2ç§åŸºæœ¬é…ç½®æ–¹å¼ï¼šéå¹³è¡¡é…ç½®ä¸å¹³è¡¡é…ç½®</p><ul><li><p>éå¹³è¡¡é…ç½®</p><p>ä¸€ç»„ä¸»æœºæ ¹æ®åœ¨é€šä¿¡è¿‡ç¨‹ä¸­çš„åœ°ä½åˆ†ä¸ºä¸»ç«™ä¸ä»ç«™ï¼Œç”±ä¸»ç«™æ¥æ§åˆ¶æ•°æ®é“¾è·¯çš„å·¥ä½œè¿‡ç¨‹ã€‚</p></li></ul></li></ul><h3 id="3-8-æ•°æ®é“¾è·¯å±‚è®¾å¤‡"><a href="#3-8-æ•°æ®é“¾è·¯å±‚è®¾å¤‡" class="headerlink" title="3.8 æ•°æ®é“¾è·¯å±‚è®¾å¤‡"></a>3.8 æ•°æ®é“¾è·¯å±‚è®¾å¤‡</h3><ol><li><p>ç½‘æ¡¥çš„æ¦‚å¿µåŠå…¶åŸºæœ¬åŸç†;</p></li><li><p>å±€åŸŸç½‘äº¤æ¢æœºåŠå…¶å·¥ä½œåŸç†ã€‚</p></li></ol><h2 id="å››ã€ç½‘ç»œå±‚"><a href="#å››ã€ç½‘ç»œå±‚" class="headerlink" title="å››ã€ç½‘ç»œå±‚"></a>å››ã€ç½‘ç»œå±‚</h2><h3 id="4-1-ç½‘ç»œå±‚çš„åŠŸèƒ½"><a href="#4-1-ç½‘ç»œå±‚çš„åŠŸèƒ½" class="headerlink" title="4.1 ç½‘ç»œå±‚çš„åŠŸèƒ½"></a>4.1 ç½‘ç»œå±‚çš„åŠŸèƒ½</h3><ol><li><p>å¼‚æ„ç½‘ç»œäº’è”;</p></li><li><p>è·¯ç”±ä¸è½¬å‘;</p></li><li><p>æ‹¥å¡æ§åˆ¶ã€‚</p></li></ol><h3 id="4-2-è·¯ç”±ç®—æ³•"><a href="#4-2-è·¯ç”±ç®—æ³•" class="headerlink" title="4.2 è·¯ç”±ç®—æ³•"></a>4.2 è·¯ç”±ç®—æ³•</h3><ol><li><p>é™æ€è·¯ç”±ä¸åŠ¨æ€è·¯ç”±;</p></li><li><p>è·ç¦»-å‘é‡è·¯ç”±ç®—æ³•;</p></li><li><p>é“¾è·¯çŠ¶æ€è·¯ç”±ç®—æ³•;</p></li><li><p>å±‚æ¬¡è·¯ç”±ã€‚</p></li></ol><h3 id="4-3-IPv4"><a href="#4-3-IPv4" class="headerlink" title="4.3 IPv4"></a>4.3 IPv4</h3><blockquote><p>IPåè®®çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ol><li>IPåè®®æ˜¯ä¸€ç§æ— è¿æ¥ã€ä¸å¯é çš„åˆ†ç»„ä¼ é€æœåŠ¡çš„åè®®</li><li>IPåè®®æ˜¯ç‚¹-ç‚¹ç½‘ç»œå±‚é€šä¿¡åè®®</li><li>IPåè®®å±è”½äº†äº’è”çš„ç½‘ç»œåœ¨æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚åè®®ä¸å®ç°æŠ€æœ¯ä¸Šçš„å·®å¼‚</li></ol></blockquote><h4 id="4-3-1-IPv4åˆ†ç»„"><a href="#4-3-1-IPv4åˆ†ç»„" class="headerlink" title="4.3.1 IPv4åˆ†ç»„"></a>4.3.1 IPv4åˆ†ç»„</h4><p>åˆ†ç»„ç”±2éƒ¨åˆ†ç»„æˆï¼šåˆ†ç»„å¤´ï¼ˆé¦–éƒ¨ï¼‰å’Œæ•°æ®</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/computernetwork/IPv4_packet_header.png" style="zoom:60%;" /></p><blockquote><p>å›¾ä¸­åˆ†ç»„å¤´çš„æ¯è¡Œå®½åº¦ï¼ˆ0~31ï¼‰å…±32ä½ï¼Œ4å­—èŠ‚ã€‚å‰5è¡Œæ˜¯åˆ†ç»„å¤´ä¸­å¿…æœ‰å­—æ®µï¼Œç¬¬6è¡Œå¼€å§‹æ˜¯é€‰é¡¹å­—æ®µï¼Œå› æ­¤IPv4åˆ†ç»„å¤´çš„åŸºæœ¬é•¿åº¦ï¼ˆ$4(å­—èŠ‚)*5(è¡Œ)$ï¼‰20å­—èŠ‚ï¼Œæœ€å¤§é•¿åº¦ï¼ˆ$20+40(å­—èŠ‚çš„é€‰é¡¹)$ï¼‰60å­—èŠ‚ã€‚</p></blockquote><h4 id="4-3-2-IPv4åœ°å€ä¸NAT"><a href="#4-3-2-IPv4åœ°å€ä¸NAT" class="headerlink" title="4.3.2 IPv4åœ°å€ä¸NAT"></a>4.3.2 IPv4åœ°å€ä¸NAT</h4><p>è¿æ¥åˆ°æ¯ä¸ªå±€åŸŸç½‘çš„è®¡ç®—æœºéƒ½æœ‰ä¸€å—ç½‘å¡ï¼Œå°±æœ‰ä¸€ä¸ªMACåœ°å€ï¼ˆç‰©ç†åœ°å€ï¼‰ã€‚IPåœ°å€ï¼ˆé€»è¾‘åœ°å€ï¼‰æ˜¯ç½‘ç»œå±‚çš„åœ°å€ï¼Œä¸»è¦ç”¨äºè·¯ç”±å™¨çš„å¯»å€ï¼Œå› æ­¤IPåœ°å€é‡‡ç”¨å±‚æ¬¡ç»“æ„ã€‚</p><h4 id="4-3-3-å­ç½‘åˆ’åˆ†ä¸å­ç½‘æ©ç ã€CIDR"><a href="#4-3-3-å­ç½‘åˆ’åˆ†ä¸å­ç½‘æ©ç ã€CIDR" class="headerlink" title="4.3.3 å­ç½‘åˆ’åˆ†ä¸å­ç½‘æ©ç ã€CIDR"></a>4.3.3 å­ç½‘åˆ’åˆ†ä¸å­ç½‘æ©ç ã€CIDR</h4><h4 id="4-3-4-ARPåè®®ã€DHCPåè®®ä¸ICMPåè®®"><a href="#4-3-4-ARPåè®®ã€DHCPåè®®ä¸ICMPåè®®" class="headerlink" title="4.3.4 ARPåè®®ã€DHCPåè®®ä¸ICMPåè®®"></a>4.3.4 ARPåè®®ã€DHCPåè®®ä¸ICMPåè®®</h4><h3 id="4-4-IPv6"><a href="#4-4-IPv6" class="headerlink" title="4.4 IPv6"></a>4.4 IPv6</h3><ol><li><p>IPv6çš„ä¸»è¦ç‰¹ç‚¹;</p></li><li><p>IPv6åœ°å€</p></li></ol><h3 id="4-5-è·¯ç”±åè®®"><a href="#4-5-è·¯ç”±åè®®" class="headerlink" title="4.5 è·¯ç”±åè®®"></a>4.5 è·¯ç”±åè®®</h3><ol><li><p>è‡ªæ²»ç³»ç»Ÿ;</p></li><li><p>åŸŸå†…è·¯ç”±ä¸åŸŸé—´è·¯ç”±;</p></li><li><p>RIPè·¯ç”±åè®®;</p></li><li><p>OSPFè·¯ç”±åè®®;</p></li><li><p>BGPè·¯ç”±åè®®ã€‚</p></li></ol><h3 id="4-6-IPç»„æ’­"><a href="#4-6-IPç»„æ’­" class="headerlink" title="4.6 IPç»„æ’­"></a>4.6 IPç»„æ’­</h3><ol><li><p>ç»„æ’­çš„æ¦‚å¿µ; </p></li><li><p>IPç»„æ’­åœ°å€ã€‚</p></li></ol><h3 id="4-7-ç§»åŠ¨IP"><a href="#4-7-ç§»åŠ¨IP" class="headerlink" title="4.7 ç§»åŠ¨IP"></a>4.7 ç§»åŠ¨IP</h3><ol><li><p>ç§»åŠ¨IPçš„æ¦‚å¿µ; </p></li><li><p>ç§»åŠ¨IPçš„é€šä¿¡è¿‡ç¨‹ã€‚</p></li></ol><h3 id="4-8-ç½‘ç»œå±‚è®¾å¤‡"><a href="#4-8-ç½‘ç»œå±‚è®¾å¤‡" class="headerlink" title="4.8 ç½‘ç»œå±‚è®¾å¤‡"></a>4.8 ç½‘ç»œå±‚è®¾å¤‡</h3><ol><li><p>è·¯ç”±å™¨çš„ç»„æˆå’ŒåŠŸèƒ½; </p></li><li><p>è·¯ç”±è¡¨ä¸è·¯ç”±è½¬å‘ã€‚</p></li></ol><h2 id="äº”ã€ä¼ è¾“å±‚"><a href="#äº”ã€ä¼ è¾“å±‚" class="headerlink" title="äº”ã€ä¼ è¾“å±‚"></a>äº”ã€ä¼ è¾“å±‚</h2><h3 id="5-1-ä¼ è¾“å±‚æä¾›çš„æœåŠ¡"><a href="#5-1-ä¼ è¾“å±‚æä¾›çš„æœåŠ¡" class="headerlink" title="5.1 ä¼ è¾“å±‚æä¾›çš„æœåŠ¡"></a>5.1 ä¼ è¾“å±‚æä¾›çš„æœåŠ¡</h3><ol><li><p>ä¼ è¾“å±‚çš„åŠŸèƒ½;</p></li><li><p>ä¼ è¾“å±‚å¯»å€ä¸ç«¯å£;</p></li><li><p>æ— è¿æ¥æœåŠ¡ä¸é¢å‘è¿æ¥æœåŠ¡ã€‚</p></li></ol><h3 id="5-2-UDPåè®®"><a href="#5-2-UDPåè®®" class="headerlink" title="5.2 UDPåè®®"></a>5.2 UDPåè®®</h3><ol><li><p>UDPæ•°æ®æŠ¥;</p></li><li><p>UDPæ ¡éªŒã€‚</p></li></ol><h3 id="5-3-TCPåè®®"><a href="#5-3-TCPåè®®" class="headerlink" title="5.3 TCPåè®®"></a>5.3 TCPåè®®</h3><ol><li><p>TCPæ®µ;</p></li><li><p>TCPè¿æ¥ç®¡ç†;</p></li><li><p>TCPå¯é ä¼ è¾“;</p></li><li><p>TCPæµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶ã€‚</p></li></ol><h2 id="å…­ã€åº”ç”¨å±‚"><a href="#å…­ã€åº”ç”¨å±‚" class="headerlink" title="å…­ã€åº”ç”¨å±‚"></a>å…­ã€åº”ç”¨å±‚</h2><h3 id="6-1-ç½‘ç»œåº”ç”¨æ¨¡å‹"><a href="#6-1-ç½‘ç»œåº”ç”¨æ¨¡å‹" class="headerlink" title="6.1 ç½‘ç»œåº”ç”¨æ¨¡å‹"></a>6.1 ç½‘ç»œåº”ç”¨æ¨¡å‹</h3><ol><li><p>å®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹;</p></li><li><p>P2Pæ¨¡å‹ã€ã€‚</p></li></ol><h3 id="6-2-DNSç³»ç»Ÿ"><a href="#6-2-DNSç³»ç»Ÿ" class="headerlink" title="6.2 DNSç³»ç»Ÿ"></a>6.2 DNSç³»ç»Ÿ</h3><ol><li><p>å±‚æ¬¡åŸŸåç©ºé—´; </p></li><li><p>åŸŸåæœåŠ¡å™¨;</p></li><li><p>åŸŸåè§£æè¿‡ç¨‹ã€‚</p></li></ol><h3 id="6-3-FTP"><a href="#6-3-FTP" class="headerlink" title="6.3 FTP"></a>6.3 FTP</h3><ol><li><p>FTPåè®®çš„å·¥ä½œåŸç†;</p></li><li><p>æ§åˆ¶è¿æ¥ä¸æ•°æ®è¿æ¥ã€‚</p></li></ol><h3 id="6-4-ç”µå­é‚®ä»¶"><a href="#6-4-ç”µå­é‚®ä»¶" class="headerlink" title="6.4 ç”µå­é‚®ä»¶"></a>6.4 ç”µå­é‚®ä»¶</h3><ol><li><p>ç”µå­é‚®ä»¶ç³»ç»Ÿçš„ç»„æˆç»“æ„;</p></li><li><p>ç”µå­é‚®ä»¶æ ¼å¼ä¸MIME;</p></li><li><p>SMTPåè®®ä¸POP3åè®®ã€‚</p></li></ol><h3 id="6-5-WWW"><a href="#6-5-WWW" class="headerlink" title="6.5 WWW"></a>6.5 WWW</h3><ol><li><p>WWWçš„æ¦‚å¿µä¸ç»„æˆç»“æ„;</p></li><li><p>HTTPåè®®ã€‚</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è€ƒæŸ¥ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æŒæ¡è®¡ç®—æœºç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µã€åŸºæœ¬åŸç†å’ŒåŸºæœ¬æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;æŒæ¡è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„å’Œå…¸å‹ç½‘ç»œåè®®ï¼Œäº†è§£å…¸å‹ç½‘ç»œè®¾å¤‡çš„ç»„æˆå’Œç‰¹ç‚¹ï¼Œç†è§£å…¸å‹ç½‘ç»œè®¾å¤‡çš„å·¥ä½œåŸç†ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿè¿ç”¨è®¡ç®—æœºç½‘ç»œåŸºæœ¬æ¦‚å¿µã€åŸºæœ¬åŸç†å’ŒåŸºæœ¬æ–¹æ³•è¿›è¡Œç½‘ç»œç³»ç»Ÿåˆ†æã€è®¾è®¡å’Œåº”ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥è¥¿åŒ—å·¥ä¸šå¤§å­¦801è®¡ç®—æœºä¸“ä¸šåŸºç¡€ä¸ºè€ƒçº²&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://mysticalguest.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
      <category term="Theory" scheme="https://mysticalguest.github.io/tags/Theory/"/>
    
  </entry>
  
  <entry>
    <title>Rediså…¥é—¨</title>
    <link href="https://mysticalguest.github.io/2020/09/02/Redis/NoSQL/"/>
    <id>https://mysticalguest.github.io/2020/09/02/Redis/NoSQL/</id>
    <published>2020-09-02T02:02:44.660Z</published>
    <updated>2020-09-07T15:53:55.922Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€NoSQLæ¦‚è¿°"><a href="#1ã€NoSQLæ¦‚è¿°" class="headerlink" title="1ã€NoSQLæ¦‚è¿°"></a>1ã€NoSQLæ¦‚è¿°</h2><h3 id="1-1-ä¸ºä»€ä¹ˆè¦ç”¨NoSQL"><a href="#1-1-ä¸ºä»€ä¹ˆè¦ç”¨NoSQL" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆè¦ç”¨NoSQL"></a>1.1 ä¸ºä»€ä¹ˆè¦ç”¨NoSQL</h3><a id="more"></a><p>å¤§æ•°æ®æ—¶ä»£ï¼Œåˆ†å¸ƒå¼é›†ç¾¤ï¼Œå•æœºâ€”&gt;åˆ†å¸ƒå¼</p><ul><li><p>å•æœºMySQLçš„æ—¶ä»£</p><blockquote><p>åº”ç”¨ä¸æ˜¯ç›´æ¥è®¿é—®MySQLï¼Œä¼šé€šè¿‡ä¸€äº›æ–¹æ³•ï¼ŒDALï¼ˆæ•°æ®è®¿é—®å±‚ï¼ŒData Access Layerï¼‰å»è®¿é—®MySQLå®ä¾‹ã€‚ä»¥å‰ä¸åŒSQLå¯¹åº”ä¸åŒè¯­æ³•ï¼Œéº»çƒ¦ï¼Œå‡ºç°äº†æ¡†æ¶Hibernateå’ŒMyBatisç­‰æ¡†æ¶ï¼Œå¼€å‘å˜å¾—ç®€å•ï¼Œæ¡†æ¶åº•å±‚å€¼å¾—å­¦ä¹ ã€‚</p></blockquote></li><li><p>90å¹´ä»£ï¼Œä¸€ä¸ªåŸºæœ¬çš„çš„ç½‘ç«™è®¿é—®é‡ä¸ä¼šå¤ªå¤§ï¼Œå•ä¸ªæ•°æ®åº“å®Œå…¨è¶³å¤Ÿï¼</p><blockquote><p>é‚£ä¸ªæ—¶å€™æ›´å¤šçš„å»ä½¿ç”¨é™æ€ç½‘é¡µHtmlï¼ŒæœåŠ¡å™¨æ ¹æœ¬æ²¡æœ‰å¤ªå¤§å‹åŠ›ï¼</p><p>æ€è€ƒä¸€ä¸‹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼šæ•´ä¸ªç½‘ç«™çš„ç“¶é¢ˆæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><ul><li>æ•°æ®é‡å¤ªå¤§ï¼Œä¸€ä¸ªæœºå™¨æ”¾ä¸ä¸‹ï¼</li><li>æ•°æ®çš„ç´¢å¼•ï¼Œæ¯”å¦‚å¦‚æœMySQLçš„æ•°æ®è¶…300ä¸‡ï¼Œä¸å»ºç«‹ç´¢å¼•å¤ªæ…¢ï¼MySQLä½¿ç”¨B+Treeï¼Œç´¢å¼•æœºå™¨ä¹Ÿæ”¾ä¸ä¸‹ï¼</li><li>è®¿é—®é‡ï¼ˆè¯»å†™æ··åˆï¼‰ï¼Œä¸€ä¸ªæœåŠ¡å™¨æ‰¿å—ä¸æ¥ï¼</li></ul><blockquote><p>åªè¦å‡ºç°ä»¥ä¸Š3ç§æƒ…å†µä¹‹ä¸€ï¼Œå°±è¦æ™‹çº§ï¼</p></blockquote></li><li><p>Memcachedï¼ˆç¼“å­˜ï¼‰+MySQL+å‚ç›´æ‹†åˆ†ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰</p><blockquote><p>ç½‘ç«™80%çš„æƒ…å†µéƒ½åœ¨è¯»ï¼Œæ¯æ¬¡éƒ½è¦å»æŸ¥è¯¢æ•°æ®åº“çš„è¯æ—¶åˆ†éº»çƒ¦ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬å¸Œæœ›å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜æ¥ä¿æŒæ•ˆç‡ï¼</p><p>å‘å±•è¿‡ç¨‹ï¼šä¼˜åŒ–æ•°æ®ç»“æ„å’Œç´¢å¼•-&gt;æ–‡ä»¶ç´¢å¼•ï¼ˆIOï¼‰-&gt;Memcachedï¼ˆå½“æ—¶æœ€çƒ­é—¨çš„æŠ€æœ¯ï¼‰</p></blockquote><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/redis/cache.png" style="zoom:50%;" /></p></li><li><p>åˆ†åº“åˆ†è¡¨+æ°´å¹³æ‹†åˆ†+MySQLé›†ç¾¤</p><blockquote><p>æŠ€æœ¯å’Œä¸šåŠ¡åœ¨å‘å±•çš„åŒæ—¶ï¼Œå¯¹äººçš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜äº†ï¼</p><p>æ•°æ®åº“æœ¬è´¨ï¼šè¯»å†™</p><p>æ—©äº›å¹´MyISAMï¼ˆé»˜è®¤å­˜å‚¨å¼•æ“ï¼‰ï¼šè¡¨é”ï¼Œååˆ†å½±å“æ•ˆç‡ï¼é«˜å¹¶å‘ä¸‹å°±ä¼šå‡ºç°ä¸¥é‡çš„é”é—®é¢˜ï¼›</p><p>è½¬æˆ˜Innodbï¼šè¡Œé”</p><p>æ…¢æ…¢çš„å¼€å§‹ä½¿ç”¨åˆ†åº“åˆ†è¡¨æ¥è§£å†³å†™çš„å‹åŠ›ï¼å¤šæœåŠ¡å¤šè¡¨MySQLåœ¨é‚£ä¸ªå¹´ä»£æ¨å‡ºäº†è¡¨åˆ†åŒºï¼ä½†å¹¶æ²¡æœ‰å¤šå°‘å…¬å¸ä½¿ç”¨ã€‚MySQLçš„é›†ç¾¤ï¼Œå¾ˆå¥½æ»¡è¶³é‚£ä¸ªå¹´ä»£éœ€æ±‚ã€‚</p></blockquote><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/redis/Cluster.png" style="zoom: 40%;" /></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€NoSQLæ¦‚è¿°&quot;&gt;&lt;a href=&quot;#1ã€NoSQLæ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;1ã€NoSQLæ¦‚è¿°&quot;&gt;&lt;/a&gt;1ã€NoSQLæ¦‚è¿°&lt;/h2&gt;&lt;h3 id=&quot;1-1-ä¸ºä»€ä¹ˆè¦ç”¨NoSQL&quot;&gt;&lt;a href=&quot;#1-1-ä¸ºä»€ä¹ˆè¦ç”¨NoSQL&quot; class=&quot;headerlink&quot; title=&quot;1.1 ä¸ºä»€ä¹ˆè¦ç”¨NoSQL&quot;&gt;&lt;/a&gt;1.1 ä¸ºä»€ä¹ˆè¦ç”¨NoSQL&lt;/h3&gt;
    
    </summary>
    
    
      <category term="æ•°æ®åº“" scheme="https://mysticalguest.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="Redis" scheme="https://mysticalguest.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>ElasticSearchå…¥é—¨</title>
    <link href="https://mysticalguest.github.io/2020/08/29/ES/ElasticSearchStart/"/>
    <id>https://mysticalguest.github.io/2020/08/29/ES/ElasticSearchStart/</id>
    <published>2020-08-29T13:00:34.978Z</published>
    <updated>2020-09-07T09:01:58.915Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€ElasticSearchä»‹ç»"><a href="#1ã€ElasticSearchä»‹ç»" class="headerlink" title="1ã€ElasticSearchä»‹ç»"></a>1ã€ElasticSearchä»‹ç»</h2><a id="more"></a><h3 id="1-1-å¼•è¨€"><a href="#1-1-å¼•è¨€" class="headerlink" title="1.1 å¼•è¨€"></a>1.1 å¼•è¨€</h3><ul><li><p>åœ¨æµ·é‡æ•°æ®ä¸­æ‰§è¡Œæœç´¢åŠŸèƒ½æ—¶ï¼Œå¦‚æœä½¿ç”¨MSQLï¼Œæ•ˆç‡å¤ªä½ã€‚</p></li><li><p>å¦‚æœå…³é”®å­—è¾“å…¥çš„ä¸å‡†ç¡®ä¸€æ ·å¯ä»¥æœç´¢åˆ°æƒ³è¦çš„æ•°æ®ã€‚</p></li><li><p>å°†æœç´¢å…³é”®å­—ï¼Œä»¥é«˜äº®å­—ä½“å±•ç¤ºï¼ˆè´­ç‰©ç½‘ç«™ï¼‰ã€‚</p></li></ul><h3 id="1-2-ESçš„ä»‹ç»"><a href="#1-2-ESçš„ä»‹ç»" class="headerlink" title="1.2 ESçš„ä»‹ç»"></a>1.2 ESçš„ä»‹ç»</h3><p>ESæ˜¯ä¸€ä¸ªä½¿ç”¨Javaè¯­è¨€å¹¶ä¸”åŸºäºlucenceç¼–å†™çš„æœç´¢å¼•æ“æ¡†æ¶ï¼Œä»–æä¾›äº†åˆ†å¸ƒå¼çš„å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„åŸºäºRESTfulé£æ ¼çš„WEBæ¥å£ã€‚<a href="https://www.elastic.co/cn/">å®˜æ–¹æ–‡æ¡£</a></p><ul><li><p>lucenceï¼šä¸€ä¸ªæœç´¢å¼•æ“åº•å±‚ï¼Œ<a href="https://lucene.apache.org/">å®˜æ–¹ç½‘ç«™</a>ï¼Œapacheæ——ä¸‹çš„é¡¶çº§é¡¹ç›®ï¼Œç›´æ¥ä½¿ç”¨æˆæœ¬å¤ªé«˜ï¼Œæ‰€ä»¥é‡‡ç”¨ESå®ç°åŠŸèƒ½ã€‚</p></li><li><p>åˆ†å¸ƒå¼ï¼šçªå‡ºESçš„æ¨ªå‘æ‰©å±•èƒ½åŠ›ã€‚</p></li><li><p>å…¨æ–‡æ£€ç´¢ï¼šå°†ä¸€æ®µè¯è¯­è¿›è¡Œåˆ†è¯ï¼Œå¹¶å°†åˆ†å‡ºçš„å•ä¸ªè¯è¯­ç»Ÿä¸€çš„æ”¾åœ¨ä¸€ä¸ªåˆ†è¯åº“ä¸­ï¼Œåœ¨æœç´¢æ—¶ï¼Œæ ¹æ®å…³é”®å­—å–åˆ†è¯åº“ä¸­æ£€ç´¢ï¼Œæ‰¾åˆ°åŒ¹é…çš„å†…å®¹ï¼ˆå€’æ’ç´¢å¼•ï¼‰ã€‚</p><blockquote><p>æ¯”å¦‚ï¼šæ·˜å®æœç´¢â€œå£³æ‰‹æœºâ€ï¼Œå°†å…¶åˆ†è§£ä¸ºâ€œå£³â€ã€â€œæ‰‹æœºâ€ã€â€œæ‰‹â€ç­‰ï¼›å°†ç›®æ ‡â€œâ€¦è‹¹æœæ‰‹æœºå£³â€¦â€ä¹Ÿè¿™æ ·åˆ†è§£ã€‚ï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰</p></blockquote></li><li><p>RESTfulé£æ ¼çš„WEBæ¥å£ï¼šæ“ä½œESï¼Œåªéœ€è¦å‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œå¹¶ä¸”æ ¹æ®è¯·æ±‚æ–¹å¼çš„ä¸åŒï¼Œæºå¸¦å‚æ•°çš„ä¸åŒï¼Œæ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ã€‚</p></li></ul><p>åº”ç”¨å¹¿æ³›ï¼šWIKIï¼ŒGithubï¼ŒGold Manç”¨ESæ¯å¤©ç»´æŠ¤å°†è¿‘10TBæ•°æ®ã€‚</p><h3 id="1-3-ESçš„ç”±æ¥"><a href="#1-3-ESçš„ç”±æ¥" class="headerlink" title="1.3 ESçš„ç”±æ¥"></a>1.3 ESçš„ç”±æ¥</h3><p><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/intro.html">ä½ çŸ¥é“çš„, ä¸ºäº†æœç´¢â€¦</a></p><p><strong>å›å¿†æ—¶å…‰</strong></p><p>è®¸å¤šå¹´å‰ï¼Œä¸€ä¸ªåˆšç»“å©šçš„åå« Shay Banon çš„å¤±ä¸šå¼€å‘è€…ï¼Œè·Ÿç€ä»–çš„å¦»å­å»äº†ä¼¦æ•¦ï¼Œä»–çš„å¦»å­åœ¨é‚£é‡Œå­¦ä¹ å¨å¸ˆã€‚ åœ¨å¯»æ‰¾ä¸€ä¸ªèµšé’±çš„å·¥ä½œçš„æ—¶å€™ï¼Œä¸ºäº†ç»™ä»–çš„å¦»å­åšä¸€ä¸ªé£Ÿè°±æœç´¢å¼•æ“ï¼Œä»–å¼€å§‹ä½¿ç”¨ Lucene çš„ä¸€ä¸ªæ—©æœŸç‰ˆæœ¬ã€‚</p><p>ç›´æ¥ä½¿ç”¨ Lucene æ˜¯å¾ˆéš¾çš„ï¼Œå› æ­¤ Shay å¼€å§‹åšä¸€ä¸ªæŠ½è±¡å±‚ï¼ŒJava å¼€å‘è€…ä½¿ç”¨å®ƒå¯ä»¥å¾ˆç®€å•çš„ç»™ä»–ä»¬çš„ç¨‹åºæ·»åŠ æœç´¢åŠŸèƒ½ã€‚ ä»–å‘å¸ƒäº†ä»–çš„ç¬¬ä¸€ä¸ªå¼€æºé¡¹ç›® Compassã€‚</p><p>åæ¥ Shay è·å¾—äº†ä¸€ä»½å·¥ä½œï¼Œä¸»è¦æ˜¯é«˜æ€§èƒ½ï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„å†…å­˜æ•°æ®ç½‘æ ¼ã€‚è¿™ä¸ªå¯¹äºé«˜æ€§èƒ½ï¼Œå®æ—¶ï¼Œåˆ†å¸ƒå¼æœç´¢å¼•æ“çš„éœ€æ±‚å°¤ä¸ºçªå‡ºï¼Œ ä»–å†³å®šé‡å†™ Compassï¼ŒæŠŠå®ƒå˜ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡å¹¶å–å Elasticsearchã€‚</p><p>ç¬¬ä¸€ä¸ªå…¬å¼€ç‰ˆæœ¬åœ¨2010å¹´2æœˆå‘å¸ƒï¼Œä»æ­¤ä»¥åï¼ŒElasticsearch å·²ç»æˆä¸ºäº† Github ä¸Šæœ€æ´»è·ƒçš„é¡¹ç›®ä¹‹ä¸€ï¼Œä»–æ‹¥æœ‰è¶…è¿‡300å contributors(ç›®å‰736å contributors )ã€‚ ä¸€å®¶å…¬å¸å·²ç»å¼€å§‹å›´ç»• Elasticsearch æä¾›å•†ä¸šæœåŠ¡ï¼Œå¹¶å¼€å‘æ–°çš„ç‰¹æ€§ï¼Œä½†æ˜¯ï¼ŒElasticsearch å°†æ°¸è¿œå¼€æºå¹¶å¯¹æ‰€æœ‰äººå¯ç”¨ã€‚</p><p>æ®è¯´ï¼ŒShay çš„å¦»å­è¿˜åœ¨ç­‰ç€å¥¹çš„é£Ÿè°±æœç´¢å¼•æ“â€¦</p><h3 id="1-4-ESå’ŒSlor"><a href="#1-4-ESå’ŒSlor" class="headerlink" title="1.4 ESå’ŒSlor"></a>1.4 ESå’ŒSlor</h3><ul><li><p>Solråœ¨æŸ¥è¯¢æ­»æ•°æ®æ—¶ï¼Œé€Ÿåº¦æ¯”ESå¿«ã€‚ä½†æ˜¯æ•°æ®å¦‚æœæ˜¯æ”¹å˜çš„ï¼ŒSolræŸ¥è¯¢é€Ÿåº¦ä¼šé™ä½å¾ˆå¤šï¼ŒESçš„æŸ¥è¯¢é€Ÿåº¦æ²¡æœ‰å˜åŒ–ã€‚</p></li><li><p>Solræ­å»ºé›†ç¾¤ä¾èµ–ZooKeeperæ¥å¸®åŠ©ç®¡ç†ï¼ŒESæœ¬èº«å°±æ”¯æŒé›†ç¾¤çš„æ­å»ºï¼Œä¸éœ€è¦ç¬¬ä¸‰æ–¹çš„ä»‹å…¥ã€‚</p></li><li><p>Solrå‡ºç°æ—©ï¼Œæœ€å¼€å§‹Solrçš„ç¤¾åŒºå¾ˆç«çˆ†ï¼Œé’ˆå¯¹å›½å†…æ–‡æ¡£å°‘ï¼›ESå‡ºç°åï¼Œå›½å†…ç¤¾åŒºç«çˆ†ç¨‹åº¦ ä¸Šå‡ï¼ŒESçš„æ–‡æ¡£éå¸¸å¥å…¨ã€‚</p></li><li><p>ESå¯¹äº‘è®¡ç®—å’Œå¤§æ•°æ®æ”¯æŒå¾ˆå¥½</p></li></ul><h3 id="1-5-å€’æ’ç´¢å¼•"><a href="#1-5-å€’æ’ç´¢å¼•" class="headerlink" title="1.5 å€’æ’ç´¢å¼•"></a>1.5 å€’æ’ç´¢å¼•</h3><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/elasticsearch/step.png" style="zoom: 67%;" /></p><p>æ‹¿åˆ°æ•°æ®çš„è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼šï¼ˆå…³é”®å­—ï¼šâ€œå¥½ç¼–ç¨‹â€œï¼Œåˆ†è¯ä¸ºâ€å¥½â€œå’Œâ€ç¼–ç¨‹â€œï¼‰</p><ul><li><strong>query</strong>ï¼šæ ¹æ®è¾“å…¥çš„å…³é”®å­—ï¼Œå»åˆ†è¯åº“ä¸­æ£€ç´¢å†…å®¹ï¼›ç»“æœï¼š1,2,3</li><li><strong>fetch</strong>ï¼šæ ¹æ®åœ¨åˆ†è¯åº“ä¸­æ£€ç´¢åˆ°çš„idï¼Œç›´æ¥æ‹‰å–æŒ‡å®šæ•°æ®ï¼›ç»“æœï¼šâ€œ1ï¼šä½ å¥½â€ï¼Œâ€œ2ï¼šç¼–ç¨‹â€å’Œâ€œ3ï¼šä½ å¥½ç¼–ç¨‹â€</li></ul><blockquote><p>å°†å­˜æ”¾çš„æ•°æ®ä»¥ä¸€å®šçš„æ–¹å¼è¿›è¡Œåˆ†è¯ï¼Œå¹¶å°†åˆ†è¯çš„å†…å®¹å­˜æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„åˆ†è¯åº“ä¸­ã€‚</p><p>å½“ç”¨æˆ·å–æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¼šå°†ç”¨æˆ·çš„æŸ¥è¯¢å…³é”®å­—è¿›è¡Œåˆ†è¯ã€‚</p><p>ç„¶åå»åˆ†è¯åº“ä¸­åŒ¹é…å†…å®¹ï¼Œæœ€ç»ˆå¾—åˆ°æ•°æ®çš„idæ ‡è¯†</p><p>æ ¹æ®idæ ‡è¯†å»å­˜æ”¾æ•°æ®çš„ä½ç½®æ‹‰å»æŒ‡å®šæ•°æ®</p></blockquote><h2 id="2ã€å®‰è£…"><a href="#2ã€å®‰è£…" class="headerlink" title="2ã€å®‰è£…"></a>2ã€å®‰è£…</h2><h3 id="2-1-å®‰è£…docker-compose"><a href="#2-1-å®‰è£…docker-compose" class="headerlink" title="2.1 å®‰è£…docker-compose"></a>2.1 å®‰è£…docker-compose</h3><p><a href="https://mysteryguest.gitee.io/2020/08/18/Spring/SpringBootDocker/#3ã€å®‰è£…Docker">Dockerå®‰è£…æ–¹æ³•</a></p><h4 id="2-2-1-å®‰è£…æ–¹æ³•1ï¼Œä½¿ç”¨pip"><a href="#2-2-1-å®‰è£…æ–¹æ³•1ï¼Œä½¿ç”¨pip" class="headerlink" title="2.2.1 å®‰è£…æ–¹æ³•1ï¼Œä½¿ç”¨pip"></a>2.2.1 å®‰è£…æ–¹æ³•1ï¼Œä½¿ç”¨pip</h4><ul><li><p>å®‰è£…pipéœ€è¦å…ˆå®‰è£…epel-releaseåŒ…</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> yum <span class="literal">-y</span> install <span class="literal">-y</span> epel<span class="literal">-release</span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…pip</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> yum install <span class="literal">-y</span> python<span class="literal">-pip</span></span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥pythonå’Œpipç‰ˆæœ¬</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> python <span class="literal">-V</span>   <span class="comment"># 3+</span></span><br><span class="line"><span class="variable">$</span> pip <span class="literal">-V</span>      <span class="comment"># 20+</span></span><br></pre></td></tr></table></figure></li><li><p>è‹¥ä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶</p><ul><li><p>pipå‡çº§</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> pip install -<span class="literal">-upgrade</span> pip <span class="literal">-ihttp</span>://pypi.douban.com/simple -<span class="literal">-trusted</span><span class="literal">-host</span> pypi.douban.com</span><br></pre></td></tr></table></figure></li><li><p>å‡çº§python2åˆ°python3</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½</span></span><br><span class="line"><span class="variable">$</span> wget https://www.python.org/ftp/python/<span class="number">3.7</span>.<span class="number">0</span>/Python<span class="literal">-3</span>.<span class="number">7.0</span>.tgz</span><br><span class="line"><span class="comment"># è§£å‹æºç åŒ…</span></span><br><span class="line"><span class="variable">$</span> tar <span class="literal">-zxvf</span> Python<span class="literal">-3</span>.<span class="number">7.0</span>.tgz</span><br><span class="line"><span class="comment"># åˆ›å»ºå®‰è£…ç›®å½•</span></span><br><span class="line"><span class="variable">$</span> mkdir /usr/local/python3</span><br><span class="line"><span class="variable">$</span> cd Python<span class="literal">-3</span>.<span class="number">7.0</span>/</span><br><span class="line"><span class="comment"># å®‰è£…åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line"><span class="variable">$</span> ./configure -<span class="literal">-prefix</span>=/usr/local/python3</span><br><span class="line"><span class="comment"># ç¼–è¯‘</span></span><br><span class="line"><span class="variable">$</span> make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®è½¯é“¾æ¥å…¨å±€ä½¿ç”¨python3</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> cd /usr/local/python3</span><br><span class="line"><span class="variable">$</span> ln <span class="literal">-s</span> /usr/local/python3/bin/python3 /usr/local/bin/python3</span><br><span class="line"><span class="variable">$</span> ln <span class="literal">-s</span> /usr/local/python3/bin/pip3 /usr/local/bin/pip3</span><br><span class="line"><span class="variable">$</span> ln <span class="literal">-s</span> /usr/local/bin/pip3 /usr/bin/pip</span><br></pre></td></tr></table></figure></li><li><p>éªŒè¯ç‰ˆæœ¬</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> python3 <span class="literal">-V</span></span><br><span class="line">Python <span class="number">3.7</span>.<span class="number">0</span></span><br><span class="line"><span class="variable">$</span> pip <span class="literal">-v</span></span><br><span class="line">pip <span class="number">20.2</span>.<span class="number">2</span> from /usr/local/python3/lib/python3.<span class="number">7</span>/site<span class="literal">-packages</span>/pip (python <span class="number">3.7</span>)</span><br></pre></td></tr></table></figure></li><li><p>å¯ä»¥ä½¿ç”¨ä¸‹è¿°å‘½ä»¤æ¥æŸ¥çœ‹è½¯é“¾æ¥è®¾ç½®</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ls <span class="literal">-al</span> /usr/bin | grep python</span><br></pre></td></tr></table></figure></li><li><p>å‡çº§ Python ä¹‹åï¼Œç”±äºå°†é»˜è®¤çš„ python æŒ‡å‘äº† python3ï¼Œyum ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œéœ€è¦ç¼–è¾‘ yum çš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> vi /usr/bin/yum</span><br><span class="line">å°† <span class="comment">#!/usr/bin/python æ”¹ä¸º #!/usr/bin/python2.7</span></span><br><span class="line"><span class="variable">$</span> vi /usr/libexec/urlgrabber<span class="literal">-ext</span><span class="literal">-down</span></span><br><span class="line">å°† <span class="comment">#!/usr/bin/python æ”¹ä¸º #!/usr/bin/python2.7</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æŒ‡å®šå®‰è£…æºï¼Œå®‰è£…docker-compose</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> pip install <span class="literal">-i</span> https://pypi.tuna.tsinghua.edu.cn/simple docker<span class="literal">-compose</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹docker-composeçš„ç‰ˆæœ¬</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> docker<span class="literal">-compose</span> <span class="literal">-v</span></span><br><span class="line">docker<span class="literal">-compose</span> version <span class="number">1.24</span>.<span class="number">0</span>, build <span class="number">0</span>aa5906</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-1-2-å®‰è£…æ–¹æ³•2ï¼Œç¦»çº¿å®‰è£…ï¼ˆæ¨èï¼‰"><a href="#2-1-2-å®‰è£…æ–¹æ³•2ï¼Œç¦»çº¿å®‰è£…ï¼ˆæ¨èï¼‰" class="headerlink" title="2.1.2 å®‰è£…æ–¹æ³•2ï¼Œç¦»çº¿å®‰è£…ï¼ˆæ¨èï¼‰"></a>2.1.2 å®‰è£…æ–¹æ³•2ï¼Œç¦»çº¿å®‰è£…ï¼ˆæ¨èï¼‰</h4><p>Githubå‘è¡Œ<a href="https://github.com/docker/compose/releases">ç‰ˆæœ¬</a>ï¼Œä¸‹è½½<code>docker-compose-Linux-x86_64</code>ï¼Œæ¨èä¸€ä¸ªè½¯ä»¶<code>Motrix</code>ï¼ŒåŠ å¿«ä¸‹è½½é€Ÿåº¦ï¼Œå°†ä¸‹è½½æ–‡ä»¶å‘½åä¸º<code>docker-compose</code>ã€‚</p><ul><li><p>ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶ç§»åŠ¨åˆ°<code>/usr/local/bin/</code>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> mv docker<span class="literal">-compose</span> /usr/local/bin/</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ å¯æ‰§è¡Œæƒé™</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> chmod +x /usr/local/bin/docker<span class="literal">-compose</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹docker-composeç‰ˆæœ¬</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> docker<span class="literal">-compose</span> <span class="literal">-v</span></span><br><span class="line">docker<span class="literal">-compose</span> version <span class="number">1.26</span>.<span class="number">2</span>, build eefe0d31</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2-å®‰è£…ElasticSearch-amp-Kibana"><a href="#2-2-å®‰è£…ElasticSearch-amp-Kibana" class="headerlink" title="2.2 å®‰è£…ElasticSearch&amp;Kibana"></a>2.2 å®‰è£…ElasticSearch&amp;Kibana</h3><p><a href="http://hub.daocloud.io/">Dockeré•œåƒå·¥å‚</a>ï¼Œåˆ†åˆ«æœç´¢â€œelasticsearchâ€å’Œâ€œkibanaâ€ï¼Œé€‰å–â€œ<strong>ç¤¾åŒºé•œåƒ</strong>â€ä½œä¸ºæ¥æºï¼Œæ‰¾åˆ°â€œlibrary/elasticsearchâ€å’Œâ€œlibrary/kibanaâ€ï¼Œç‰ˆæœ¬åŒä¸€ã€‚</p><p>Kibanaæ˜¯ä¸ºElasticsearchè®¾è®¡çš„å¼€æºåˆ†æå’Œå¯è§†åŒ–å¹³å°ã€‚</p><ul><li><p>åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> vi docker<span class="literal">-compose</span>.yml</span><br></pre></td></tr></table></figure></li><li><p>å¹¶å¤åˆ¶ä¸‹é¢å†…å®¹åˆ°docker-compose.ymlæ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.1"</span></span><br><span class="line"><span class="attr">services:</span> </span><br><span class="line">  <span class="attr">elasticsearch:</span> </span><br><span class="line">    <span class="attr">image:</span> <span class="string">daocloud.io/library/elasticsearch:6.5.4</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">elasticsearch</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">9200</span><span class="string">:9200</span></span><br><span class="line">  <span class="attr">kibana:</span> </span><br><span class="line">    <span class="attr">image:</span> <span class="string">daocloud.io/library/kibana:6.5.4</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">kibana</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">5601</span><span class="string">:5601</span></span><br><span class="line">    <span class="attr">environment:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">elasticsearch_url=ip:9200</span>   <span class="comment"># æ­¤å¤„ipä¸ºè‡ªå·±å¯¹åº”ä¸»æœºåœ°å€</span></span><br><span class="line">    <span class="attr">depends_on:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">elasticsearch</span></span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> docker<span class="literal">-compose</span> up <span class="literal">-d</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æ—¥å¿—</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> docker<span class="literal">-compose</span> logs <span class="operator">-f</span></span><br></pre></td></tr></table></figure></li><li><p>æµè§ˆå™¨æŸ¥çœ‹ï¼ŒæˆåŠŸ</p><ul><li><p>æµè§ˆ<a href="http://192.168.6.33:9200/ï¼š">http://192.168.6.33:9200/ï¼š</a></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/elasticsearch/es_success.PNG" alt=""></p></li><li><p>æµè§ˆ<a href="http://192.168.6.33:5601">http://192.168.6.33:5601</a></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/elasticsearch/kb_success.PNG" alt=""></p></li></ul></li></ul><h3 id="2-3-å®‰è£…IKåˆ†è¯å™¨"><a href="#2-3-å®‰è£…IKåˆ†è¯å™¨" class="headerlink" title="2.3 å®‰è£…IKåˆ†è¯å™¨"></a>2.3 å®‰è£…IKåˆ†è¯å™¨</h3><p>Esé»˜è®¤çš„åˆ†è¯å™¨å¯¹ä¸­æ–‡çš„æ”¯æŒæ˜¯ä¸å‹å¥½çš„ï¼ŒGithubä¸‹è½½<a href="https://github.com/medcl/elasticsearch-analysis-ik/releases">åœ°å€</a>ï¼Œç‰ˆæœ¬è¿˜æ˜¯è¦ç»Ÿä¸€ã€‚</p><p>è¿˜æ˜¯ä½¿ç”¨dockerå®‰è£…ï¼š</p><ul><li><p>æŸ¥çœ‹eså®¹å™¨çš„CONTAINER IDï¼Œè¿›å…¥eså®¹å™¨å†…éƒ¨ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> <span class="type">docker_elasticsearch</span>]<span class="comment"># docker exec -it &lt;CONTAINER ID&gt; bash</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">fddcec4fe9e7</span> <span class="type">elasticsearch</span>]<span class="comment">#</span></span><br></pre></td></tr></table></figure></li><li><p>è¿›å…¥binç›®å½•ï¼Œæ‰§è¡Œbinç›®å½•ä¸‹çš„è„šæœ¬æ–‡ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> cd bin</span><br></pre></td></tr></table></figure></li><li><p>IKåˆ†è¯å™¨å¯¹äºesæ¥è¯´å°±æ˜¯ä¸€ä¸ªæ’ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ./elastic<span class="built_in">search-plugin</span> install </span><br><span class="line">      https://github.com/medcl/elastic<span class="built_in">search-analysis</span><span class="literal">-ik</span>/releases/download/v6.<span class="number">5.4</span>/</span><br><span class="line">              elastic<span class="built_in">search-analysis</span><span class="literal">-ik</span><span class="literal">-6</span>.<span class="number">5.4</span>.zip</span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºåœ¨å®¹å™¨å†…å®‰è£…IKåˆ†è¯å™¨ï¼Œå¦‚æœæŠŠå®¹å™¨<code>down</code>æ‰ï¼Œè¿™ä¸ªIKåˆ†è¯å™¨å°±æ²¡äº†ï¼Œé‡å¯å°±å¯ä»¥äº†</p></blockquote></li><li><p>è®°å¾—é‡å¯eså®¹å™¨ï¼Œåˆ†è¯å™¨æ‰ä¼šç”Ÿæ•ˆï¼Œé‡å¯eså°±å¯ä»¥äº†ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> docker restart &lt;CONTAINER ID&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Kibanaä¸­æµ‹è¯•ï¼Œä½¿ç”¨GitHubæ¨è<a href="https://github.com/medcl/elasticsearch-analysis-ik#quick-example">æ–¹æ³•</a>ï¼›åœ¨Dev Toolä¸­ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">POST</span> <span class="string">_analyze</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="meta">"analyzer"</span>: <span class="string">"ik_max_word",</span></span><br><span class="line">  <span class="meta">"text"</span>:<span class="string">"æˆ‘æ˜¯Javaå·¥ç¨‹å¸ˆ.ä½ å‘¢?"</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>å¾—åˆ°è¾“å‡ºâ€œ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"tokens"</span> : [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"æˆ‘"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">0</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_CHAR"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"æ˜¯"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">2</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_CHAR"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"java"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">2</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">6</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"ENGLISH"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"å·¥ç¨‹å¸ˆ"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">6</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">9</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_WORD"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"å·¥ç¨‹"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">6</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">8</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_WORD"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">4</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"å¸ˆ"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">8</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">9</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_CHAR"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">5</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"ä½ "</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">10</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">11</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_CHAR"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">6</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"token"</span> : <span class="string">"å‘¢"</span>,</span><br><span class="line">      <span class="attr">"start_offset"</span> : <span class="number">11</span>,</span><br><span class="line">      <span class="attr">"end_offset"</span> : <span class="number">12</span>,</span><br><span class="line">      <span class="attr">"type"</span> : <span class="string">"CN_CHAR"</span>,</span><br><span class="line">      <span class="attr">"position"</span> : <span class="number">7</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€ElasticSearchä»‹ç»&quot;&gt;&lt;a href=&quot;#1ã€ElasticSearchä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;1ã€ElasticSearchä»‹ç»&quot;&gt;&lt;/a&gt;1ã€ElasticSearchä»‹ç»&lt;/h2&gt;
    
    </summary>
    
    
      <category term="æœç´¢å¼•æ“" scheme="https://mysticalguest.github.io/categories/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"/>
    
    
      <category term="ElasticSearch" scheme="https://mysticalguest.github.io/tags/ElasticSearch/"/>
    
  </entry>
  
  <entry>
    <title>JavaåŠJVMç®€ä»‹</title>
    <link href="https://mysticalguest.github.io/2020/08/28/Java/JVM%E7%AE%80%E4%BB%8B/"/>
    <id>https://mysticalguest.github.io/2020/08/28/Java/JVM%E7%AE%80%E4%BB%8B/</id>
    <published>2020-08-28T14:49:08.862Z</published>
    <updated>2020-09-08T15:43:22.126Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€å‰è¨€"><a href="#1ã€å‰è¨€" class="headerlink" title="1ã€å‰è¨€"></a>1ã€å‰è¨€</h2><h3 id="1-1-ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜"><a href="#1-1-ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜" class="headerlink" title="1.1 ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜?"></a>1.1 ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜?</h3><a id="more"></a><ul><li><p>è¿è¡Œç€çš„çº¿ä¸Šç³»ç»Ÿçªç„¶å¡æ­»ï¼Œç³»ç»Ÿæ— æ³•è®¿é—®ï¼Œç”šè‡³ç›´æ¥OOMï¼ˆOut Of Memoryï¼‰!</p></li><li><p>æƒ³è§£å†³çº¿ä¸Š JVM GCï¼ˆ JVMåƒåœ¾å›æ”¶ ï¼‰é—®é¢˜ï¼Œä½†å´æ— ä»ä¸‹æ‰‹ã€‚</p></li><li><p>æ–°é¡¹ç›®ä¸Šçº¿ï¼Œå¯¹å„ç§JVMå‚æ•°è®¾ç½®ä¸€è„¸èŒ«ç„¶ï¼Œç›´æ¥é»˜è®¤å§ï¼Œç„¶åå°±é”™äº†ã€‚</p></li><li><p>æ¯æ¬¡é¢è¯•ä¹‹å‰éƒ½è¦é‡æ–°èƒŒä¸€éJçš„ä¸€äº›åŸç†æ¦‚å¿µæ€§çš„ä¸œè¥¿ï¼Œç„¶è€Œé¢è¯•å®˜å´ç»å¸¸é—®ä½ åœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•è°ƒä¼˜JVMå‚æ•°ï¼Œå¦‚ä½•è§£å†³GCã€OOMç­‰é—®é¢˜ï¼Œä¸€è„¸æ‡µé€¼ã€‚</p></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/JVM.PNG" alt="JVM"></p><p>æˆ‘ä»¬é€šå¸¸éƒ½æ˜¯å­¦ä¹ åŸºç¡€çš„æŠ€èƒ½ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå­¦ä¹ æ›´å¤æ‚çš„åŠŸèƒ½ã€‚</p><h3 id="1-2-å¼€å‘äººå‘˜å¦‚ä½•çœ‹å¾…ä¸Šå±‚æ¡†æ¶"><a href="#1-2-å¼€å‘äººå‘˜å¦‚ä½•çœ‹å¾…ä¸Šå±‚æ¡†æ¶" class="headerlink" title="1.2 å¼€å‘äººå‘˜å¦‚ä½•çœ‹å¾…ä¸Šå±‚æ¡†æ¶"></a>1.2 å¼€å‘äººå‘˜å¦‚ä½•çœ‹å¾…ä¸Šå±‚æ¡†æ¶</h3><ul><li><p>ä¸€äº›æœ‰ä¸€å®šå·¥ä½œç»éªŒçš„å¼€å‘äººå‘˜ï¼Œæ‰“å¿ƒçœ¼å„¿é‡Œè§‰å¾—SSMã€å¾®æœåŠ¡ç­‰ä¸Šå±‚æŠ€æœ¯æ‰æ˜¯é‡ç‚¹ï¼ŒåŸºç¡€æŠ€æœ¯å¹¶ä¸é‡è¦ï¼Œè¿™å…¶å®æ˜¯ä¸€ç§æœ¬æœ«å€’ç½®çš„â€œç—…æ€â€œã€‚</p></li><li><p>å¦‚æœæˆ‘ä»¬æŠŠæ ¸å¿ƒç±»åº“çš„ API æ¯”åšæ•°å­¦å…¬å¼çš„è¯ï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºçš„çŸ¥è¯†å°±å¥½æ¯”å…¬å¼çš„æ¨å¯¼è¿‡ç¨‹</p></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Composition-principle.PNG" alt=""></p><blockquote><p>è®¡ç®—æœºç³»ç»Ÿä½“ç³»å¯¹æˆ‘ä»¬æ¥è¯´è¶Šæ¥è¶Šè¿œï¼Œåœ¨ä¸äº†è§£åº•å±‚å®ç°æ–¹å¼çš„å‰æä¸‹ï¼Œé€šè¿‡é«˜çº§è¯­è¨€å¾ˆå®¹æ˜“ç¼–å†™ç¨‹åºä»£ç ã€‚ä½†äº‹å®ä¸Šè®¡ç®—æœºå¹¶ä¸è®¤è¯†é«˜çº§è¯­è¨€ã€‚</p></blockquote><h3 id="1-3-æ¶æ„å¸ˆæ¯å¤©éƒ½åœ¨æ€è€ƒä»€ä¹ˆ"><a href="#1-3-æ¶æ„å¸ˆæ¯å¤©éƒ½åœ¨æ€è€ƒä»€ä¹ˆ" class="headerlink" title="1.3 æ¶æ„å¸ˆæ¯å¤©éƒ½åœ¨æ€è€ƒä»€ä¹ˆ?"></a>1.3 æ¶æ„å¸ˆæ¯å¤©éƒ½åœ¨æ€è€ƒä»€ä¹ˆ?</h3><ul><li><p>åº”è¯¥å¦‚ä½•è®©æˆ‘çš„ç³»ç»Ÿæ›´å¿«?</p></li><li><p>å¦‚ä½•é¿å…ç³»ç»Ÿå‡ºç°ç“¶é¢ˆ?</p></li></ul><h3 id="1-4-çŸ¥ä¹ä¸Šæœ‰æ¡å¸–å­ï¼šåº”è¯¥å¦‚ä½•çœ‹æ‹›è˜ä¿¡æ¯ï¼Œç›´é€šå¹´è–ª50ä¸‡"><a href="#1-4-çŸ¥ä¹ä¸Šæœ‰æ¡å¸–å­ï¼šåº”è¯¥å¦‚ä½•çœ‹æ‹›è˜ä¿¡æ¯ï¼Œç›´é€šå¹´è–ª50ä¸‡" class="headerlink" title="1.4 çŸ¥ä¹ä¸Šæœ‰æ¡å¸–å­ï¼šåº”è¯¥å¦‚ä½•çœ‹æ‹›è˜ä¿¡æ¯ï¼Œç›´é€šå¹´è–ª50ä¸‡+?"></a>1.4 çŸ¥ä¹ä¸Šæœ‰æ¡å¸–å­ï¼šåº”è¯¥å¦‚ä½•çœ‹æ‹›è˜ä¿¡æ¯ï¼Œç›´é€šå¹´è–ª50ä¸‡+?</h3><ul><li>å‚ä¸ç°æœ‰ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–ï¼Œé‡æ„ï¼Œä¿è¯å¹³å°æ€§èƒ½å’Œç¨³å®šæ€§</li><li>æ ¹æ®ä¸šåŠ¡åœºæ™¯å’Œéœ€æ±‚ï¼Œå†³å®šæŠ€æœ¯æ–¹å‘ï¼ŒåšæŠ€æœ¯é€‰å‹</li><li>èƒ½å¤Ÿç‹¬ç«‹æ¶æ„å’Œè®¾è®¡æµ·é‡æ•°æ®ä¸‹é«˜å¹¶å‘åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼Œæ»¡è¶³åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚</li><li>è§£å†³å„ç±»æ½œåœ¨ç³»ç»Ÿé£é™©ï¼Œæ ¸å¿ƒåŠŸèƒ½çš„æ¶æ„ä¸ä»£ç ç¼–å†™</li><li>åˆ†æç³»ç»Ÿç“¶é¢ˆï¼Œè§£å†³å„ç§ç–‘éš¾æ‚ç—‡,æ€§èƒ½è°ƒä¼˜ç­‰</li></ul><h3 id="1-5-ä¸ºä»€ä¹ˆè¦å­¦JVMï¼Ÿ"><a href="#1-5-ä¸ºä»€ä¹ˆè¦å­¦JVMï¼Ÿ" class="headerlink" title="1.5 ä¸ºä»€ä¹ˆè¦å­¦JVMï¼Ÿ"></a>1.5 ä¸ºä»€ä¹ˆè¦å­¦JVMï¼Ÿ</h3><ul><li>é¢è¯•çš„éœ€è¦ï¼šå…¥èŒBATJï¼ˆäº¬ä¸œï¼‰ã€Tï¼ˆå¤´æ¡ï¼‰MDï¼ˆæ»´æ»´ï¼‰ã€Pï¼ˆæ‹¼å¤šå¤šï¼‰Kï¼ˆå¿«æ‰‹ï¼‰Qï¼ˆè¶£å¤´æ¡ï¼‰ç­‰ä¸€çº¿å¤§å‚ä¸å…‰å…³æ³¨æŠ€æœ¯çš„å¹¿åº¦ï¼Œæ›´å…³æ³¨æŠ€æœ¯çš„æ·±åº¦ï¼ŒJVMæŠ€æœ¯æ˜¯å¤§å‚é¢è¯•çš„å¿…å¤‡æŠ€èƒ½ï¼ŒæŒæ¡è¶Šæ·±è¶Šå¥½</li><li>ä¸­é«˜çº§ç¨‹åºå‘˜ã€æ¶æ„å¸ˆå¿…å¤‡æŠ€èƒ½ï¼šæ¶æ„å¸ˆæ¯å¤©éƒ½åœ¨æ€è€ƒå¦‚ä½•è®©æˆ‘çš„ç³»ç»Ÿæ›´å¿«ï¼Œå¦‚ä½•é¿å…ç³»ç»Ÿå‡ºç°æ€§èƒ½ç“¶é¢ˆã€‚å•çº¯çš„ä¾é ç‰©ç†æœºä¸è¶³ä»¥è§£å†³é—®é¢˜ï¼Œåˆ†æç³»ç»Ÿæ€§èƒ½ã€è°ƒä¼˜ç³»ç»Ÿç“¶é¢ˆç¦»ä¸äº†å¯¹JVMä¸­å†…å­˜ã€åƒåœ¾å›æ”¶ã€å­—èŠ‚ç æŒ‡ä»¤ã€æ€§èƒ½ç›‘æ§å·¥å…·ã€è°ƒä¼˜å‚æ•°çš„ç†Ÿç»ƒæŒæ¡ã€‚</li><li>ç²¾è¿›æŠ€æœ¯ã€æå®¢ï¼ˆå¥½å¥‡ä¸è¡ŒåŠ¨ï¼‰è¿½æ±‚ï¼šJVMæ˜¯Javaç”Ÿæ€çš„æ ¸å¿ƒä»·å€¼çš„ä½“ç°ï¼Œåƒåœ¾å›æ”¶ç®—æ³•ã€JITï¼ˆ just in time çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯å³æ—¶ç¼–è¯‘ç¼–è¯‘å™¨ï¼ŒAOTï¼šæå‰ç¼–è¯‘å™¨ï¼‰ã€åº•å±‚åŸç†å€¼å¾—æ¯ä¸ªç¨‹åºå‘˜å»æ¢ç´¢ã€‚åŒæ—¶ï¼ŒJVMä½œä¸ºè·¨è¯­è¨€çš„å¹³å°ï¼Œå¯¹äºæ·±å…¥ç†è§£Scalaã€Kotlinã€JavaScriptã€Jythonã€Groovyä¹Ÿå¾ˆæœ‰å¸®åŠ©ã€‚Javaæœ€å‰æ²¿æœ€æˆç†Ÿåƒåœ¾å›æ”¶ç®—æ³•ã€‚</li></ul><h3 id="1-6-Java-vs-C"><a href="#1-6-Java-vs-C" class="headerlink" title="1.6 Java  vs  C++"></a>1.6 Java  vs  C++</h3><p>ä»¥Cè¯­è¨€ä»£è¡¨çš„è¯­è¨€æ˜¯é«˜çº§è¯­è¨€çš„å¼€ç«¯äº†ï¼ŒJavaå€Ÿé‰´äº†Cå’ŒC++çš„æœ‰ç‚¹ï¼Œå¹¶æ‘ˆå¼ƒå…¶ç¼ºç‚¹ï¼›ç¼ºç‚¹ä¸»è¦å°±æ˜¯<strong>å†…å­˜åŠ¨æ€åˆ†é…</strong>å’Œ<strong>åƒåœ¾æ”¶é›†æŠ€æœ¯</strong>ã€‚</p><p>åˆ†é…å†…å­˜æƒ³è¦å†æ¬¡ä½¿ç”¨å°±è¦åƒåœ¾å›æ”¶ï¼Œå¦åˆ™å°±æˆä¸€æ¬¡æ€§å†…å­˜äº†ã€‚å¯¹äºCè¯­è¨€æ¥è¯´ï¼Œå°±éœ€è¦ç¨‹åºå‘˜è‡ªå·±åˆ†é…å†…å­˜è‡ªå·±å›æ”¶ï¼›Javaæ˜¯è‡ªåŠ¨ç®¡ç†å†…å­˜çš„ã€‚å¯¹äºè‡ªåŠ¨ç®¡ç†å†…å­˜çš„å¼Šç«¯å°±æ˜¯ä¸äº†è§£Javaå†…éƒ¨çš„å†…å­˜ç»“æ„å’Œå·¥ä½œæœºåˆ¶ï¼Œå¯¹äºé¡¹ç›®è°ƒä¼˜å°±æ²¡åŠæ³•äº†ï¼Œç†è§£ä¸ºé»‘ç›’ï¼Ÿå¿ƒä¸­èƒ†æ€¯ï¼Œæ²¡åº•ï¼Ÿ</p><p>åƒåœ¾æ”¶é›†æœºåˆ¶ä¸ºæˆ‘ä»¬æ‰“ç†äº†å¾ˆå¤šç¹ççš„å·¥ä½œï¼Œå¤§å¤§æé«˜äº†å¼€å‘çš„æ•ˆç‡ï¼Œä½†æ˜¯ï¼Œåƒåœ¾æ”¶é›†ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæ‡‚å¾—JVMå†…éƒ¨çš„å†…å­˜ç»“æ„ã€å·¥ä½œæœºåˆ¶ï¼Œæ˜¯è®¾è®¡é«˜æ‰©å±•æ€§åº”ç”¨å’Œè¯Šæ–­è¿è¡Œæ—¶é—®é¢˜çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯Javaå·¥ç¨‹å¸ˆè¿›é˜¶çš„å¿…å¤‡èƒ½åŠ›ã€‚</p><h2 id="2ã€JavaåŠJVMç®€ä»‹"><a href="#2ã€JavaåŠJVMç®€ä»‹" class="headerlink" title="2ã€JavaåŠJVMç®€ä»‹"></a>2ã€JavaåŠJVMç®€ä»‹</h2><p>æ ˆç®¡è¿è¡Œï¼Œå †ç®¡å­˜å‚¨ï¼ŸJavaåŠè§£é‡Šå‹ï¼ŒåŠç¼–è¯‘å‹è¯­è¨€ï¼Ÿ</p><p><a href="https://docs.oracle.com/javase/specs/index.html">Javaè™šæ‹Ÿæœºå®˜æ–¹æ–‡æ¡£ä¸‹è½½</a></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/hotspot.PNG" alt="HotSpot" style="zoom: 70%;" /></p><p><a href="https://www.tiobe.com/tiobe-index/">TIOBEè¯­è¨€çƒ­åº¦æ’è¡Œæ¦œ</a></p><h3 id="2-1-Javaç”Ÿæ€åœˆ"><a href="#2-1-Javaç”Ÿæ€åœˆ" class="headerlink" title="2.1 Javaç”Ÿæ€åœˆ"></a>2.1 Javaç”Ÿæ€åœˆ</h3><p>Javaæ˜¯ç›®å‰åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„è½¯ä»¶å¼€å‘å¹³å°ä¹‹ä¸€ã€‚éšç€Javaä»¥åŠJavaç¤¾åŒºçš„ä¸æ–­å£®å¤§ï¼ŒJavaä¹Ÿæ—©å·²ä¸å†æ˜¯ç®€ç®€å•å•çš„ä¸€é—¨è®¡ç®—æœºè¯­è¨€äº†,å®ƒæ›´æ˜¯ä¸€ä¸ªå¹³å°ã€ä¸€ç§æ–‡åŒ–ã€ä¸€ä¸ªç¤¾åŒºã€‚</p><ul><li><p><strong>ä½œä¸ºä¸€ä¸ªå¹³å°</strong>ï¼ŒJavaè™šæ‹Ÿæœºæ‰®æ¼”ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚</p><p>Groovyã€ Scalaã€ JRubyã€Kot]inç­‰éƒ½æ˜¯Javaå¹³å°çš„ä¸€éƒ¨åˆ†</p></li><li><p><strong>ä½œä¸ºä¸€ç§æ–‡åŒ–</strong>ï¼ŒJavaå‡ ä¹æˆä¸ºäº†â€œå¼€æºâ€çš„ä»£åè¯</p><ul><li>ç¬¬ä¸‰æ–¹å¼€æºè½¯ä»¶å’Œæ¡†æ¶ã€‚å¦‚ Tomcatã€ struts, My Batis, Springç­‰ã€‚</li><li>å°±è¿UDKå’ŒJMè‡ªèº«ä¹Ÿæœ‰ä¸å°‘å¼€æºçš„å®ç°,å¦‚ OpenJDKã€ Harmonyï¼ˆå¼€æºçš„JVMï¼‰</li></ul></li><li><p><strong>ä½œä¸ºä¸€ä¸ªç¤¾åŒº</strong>ï¼ŒJavaæ‹¥æœ‰å…¨ä¸–ç•Œæœ€å¤šçš„æŠ€æœ¯æ‹¥æŠ¤è€…å’Œå¼€æºç¤¾åŒºæ”¯æŒï¼Œæœ‰æ•°ä¸æ¸…çš„è®ºå›å’Œèµ„æ–™ã€‚ä»æ¡Œé¢åº”ç”¨è½¯ä»¶ã€åµŒå…¥å¼å¼€å‘åˆ°ä¼ä¸šçº§åº”ç”¨ã€åå°æœåŠ¡å™¨ã€ä¸­é—´ä»¶ï¼Œéƒ½å¯ä»¥çœ‹åˆ°Javaçš„èº«å½±ã€‚å…¶åº”ç”¨å½¢å¼ä¹‹å¤æ‚ã€å‚ä¸äººæ•°ä¹‹ä¼—å¤šä¹Ÿä»¤äººå’‹èˆŒ</p></li></ul><h3 id="2-2-Javaï¼šè·¨å¹³å°çš„è¯­è¨€"><a href="#2-2-Javaï¼šè·¨å¹³å°çš„è¯­è¨€" class="headerlink" title="2.2 Javaï¼šè·¨å¹³å°çš„è¯­è¨€"></a>2.2 Javaï¼šè·¨å¹³å°çš„è¯­è¨€</h3><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Cross-platform.PNG" style="zoom:80%;" /></p><h3 id="2-3-JVMè™šæ‹Ÿæœºè§„èŒƒ"><a href="#2-3-JVMè™šæ‹Ÿæœºè§„èŒƒ" class="headerlink" title="2.3 JVMè™šæ‹Ÿæœºè§„èŒƒ"></a>2.3 JVMè™šæ‹Ÿæœºè§„èŒƒ</h3><p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-1.html#jvms-1">The Java Virtual Machine Specification, Java SE 8 Edition</a></p><p>Javaè™šæ‹Ÿæœºæ˜¯Javaå¹³å°çš„åŸºçŸ³ã€‚ å®ƒæ˜¯æŠ€æœ¯çš„ç»„æˆéƒ¨åˆ†ï¼Œè´Ÿè´£ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„ç‹¬ç«‹æ€§ï¼Œç¼–è¯‘ä»£ç çš„å°å·§å¤§å°ä»¥åŠä¿æŠ¤ç”¨æˆ·å…å—æ¶æ„ç¨‹åºæ”»å‡»çš„èƒ½åŠ›ã€‚</p><p>ç¼–è¯‘ä»£ç çš„å°å·§ï¼ˆå°å°ºå¯¸ï¼‰ï¼šåœ¨ä¸€ä¸ªç¨‹åºä¸­ç”¨åˆ°äº†åŸºæœ¬æ•°æ®ç±»å‹å’Œç±»ï¼Œåœ¨ç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶æ—¶å¯¹åº”ä¸€ä¸ªå¸¸é‡æ± ï¼Œè¿è¡Œçš„æ—¶å€™å¯¹åº”è¿è¡Œå¸¸é‡æ± ï¼Œé€šè¿‡å¸¸é‡æŒ‡å‘ï¼Œé¿å…å»å­—èŠ‚ç æ–‡ä»¶åŠ è½½å¤§é‡æ•°æ®å’Œç±»ï¼Œä»¥ä¿è¯å­—èŠ‚ç æ–‡ä»¶çš„å°å°ºå¯¸ï¼Œ</p><h3 id="2-4-JVMï¼šè·¨è¯­è¨€çš„å¹³å°"><a href="#2-4-JVMï¼šè·¨è¯­è¨€çš„å¹³å°" class="headerlink" title="2.4 JVMï¼šè·¨è¯­è¨€çš„å¹³å°"></a>2.4 JVMï¼šè·¨è¯­è¨€çš„å¹³å°</h3><p>Javaï¼šè·¨å¹³å°çš„è¯­è¨€</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Cross-language.PNG" style="zoom:90%;" /></p><p>ä¸ä»…å¯ä»¥æ‰§è¡ŒJavaç¨‹åºï¼Œå…¶ä»–è¯­è¨€ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åªéœ€ä¿è¯å„<strong>è‡ªçš„ç¼–è¯‘å™¨</strong>ç¼–è¯‘å‡ºçš„å­—èŠ‚ç æ–‡ä»¶éµå¾ªJavaè™šæ‹Ÿæœºè§„èŒƒå³å¯ã€‚åœ¨Javaè™šæ‹Ÿæœºçš„<strong>ç¼–è¯‘å™¨</strong>ä¸­è¿è¡Œã€‚</p><p>ä¸‰å¤§å¹¶è¡Œéš¾é¢˜ï¼šCPUã€OSã€ç¼–è¯‘å™¨ã€‚</p><ul><li><p>éšç€Java7çš„æ­£å¼å‘å¸ƒï¼ŒJavaè™šæ‹Ÿæœºçš„è®¾è®¡è€…ä»¬é€šè¿‡JSR-292è§„èŒƒåŸºæœ¬å®ç°åœ¨<strong>Javaè™šæ‹Ÿæœºå¹³å°ä¸Šè¿è¡ŒéJavaè¯­è¨€ç¼–å†™çš„ç¨‹åºã€‚</strong></p></li><li><p>Javaè™šæ‹Ÿæœºæ ¹æœ¬ä¸å…³å¿ƒè¿è¡Œåœ¨å…¶å†…éƒ¨çš„ç¨‹åºåˆ°åº•æ˜¯ä½¿ç”¨ä½•ç§ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ï¼Œ<strong>å®ƒåªå…³å¿ƒâ€œå­—èŠ‚ç â€æ–‡ä»¶</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´Javaè™šæ‹Ÿæœºæ‹¥æœ‰è¯­è¨€æ— å…³æ€§ï¼Œå¹¶ä¸ä¼šå•çº¯åœ°ä¸Javaè¯­è¨€â€œç»ˆèº«ç»‘å®šâ€ï¼Œåªè¦å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘ç»“æœæ»¡è¶³å¹¶åŒ…å«Javaè™šæ‹Ÿæœºçš„å†…éƒ¨æŒ‡ä»¤é›†ã€ç¬¦å·è¡¨ä»¥åŠå…¶ä»–çš„è¾…åŠ©ä¿¡æ¯ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œå°±èƒ½å¤Ÿè¢«è™šæ‹Ÿæœºæ‰€è¯†åˆ«å¹¶è£…è½½è¿è¡Œã€‚</p></li></ul><p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-1.html#jvms-1">The Java Virtual Machine Specification, Java SE 8 Edition</a></p><p>ä¸ºäº†å®‰å…¨èµ·è§ï¼ŒJavaè™šæ‹Ÿæœºå¯¹ç±»æ–‡ä»¶ä¸­çš„ä»£ç æ–½åŠ äº†ä¸¥æ ¼çš„è¯­æ³•å’Œç»“æ„çº¦æŸã€‚ ä½†æ˜¯ï¼ŒJavaè™šæ‹Ÿæœºå¯ä»¥æ‰˜ç®¡ä»»ä½•å…·æœ‰<strong>å¯ç”¨æœ‰æ•ˆç±»æ–‡ä»¶è¡¨ç¤ºçš„åŠŸèƒ½çš„è¯­è¨€</strong>ã€‚ å—é€šç”¨çš„ç‹¬ç«‹äºæœºå™¨çš„å¹³å°çš„å¸å¼•ï¼Œå…¶ä»–è¯­è¨€çš„å®ç°è€…å¯ä»¥å°†Javaè™šæ‹Ÿæœºä½œä¸ºå…¶è¯­è¨€çš„äº¤ä»˜å·¥å…·ã€‚</p><p>Javaä¸æ˜¯æœ€å¼ºå¤§çš„è¯­è¨€ï¼Œä½†æ˜¯JVMæ˜¯æœ€å¼ºå¤§çš„è™šæ‹Ÿæœºã€‚</p><h3 id="2-5-å­—èŠ‚ç "><a href="#2-5-å­—èŠ‚ç " class="headerlink" title="2.5 å­—èŠ‚ç "></a>2.5 å­—èŠ‚ç </h3><ul><li><p>æˆ‘ä»¬å¹³æ—¶è¯´çš„javaå­—èŠ‚ç ï¼ŒæŒ‡çš„æ˜¯ç”¨javaè¯­è¨€ç¼–è¯‘æˆçš„å­—èŠ‚ç ã€‚å‡†ç¡®çš„è¯´ä»»ä½•èƒ½åœ¨JVMå¹³å°ä¸Šæ‰§è¡Œçš„å­—èŠ‚ç æ ¼å¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥åº”è¯¥ç»Ÿç§°ä¸º<strong>JVMå­—èŠ‚ç </strong>ã€‚</p></li><li><p>ä¸åŒçš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥ç¼–è¯‘å‡ºç›¸åŒçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œå­—èŠ‚ç æ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨ä¸åŒçš„JVMä¸Šè¿è¡Œã€‚</p></li><li><p>Java è™šæ‹Ÿæœºä¸Java è¯­è¨€å¹¶æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œå®ƒåªä¸ç‰¹å®šçš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼â€”â€”Classæ–‡ä»¶æ ¼å¼æ‰€å…³è”ï¼ŒClassæ–‡ä»¶ä¸­åŒ…å«äº†Javaè™šæ‹ŸæœºæŒ‡ä»¤é›†ï¼ˆæˆ–è€…ç§°ä¸ºå­—èŠ‚ç ã€ Bytecodesï¼‰å’Œç¬¦å·è¡¨ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–è¾…åŠ©ä¿¡æ¯ã€‚</p></li></ul><h3 id="2-6-å¤šè¯­è¨€æ··åˆç¼–ç¨‹"><a href="#2-6-å¤šè¯­è¨€æ··åˆç¼–ç¨‹" class="headerlink" title="2.6 å¤šè¯­è¨€æ··åˆç¼–ç¨‹"></a>2.6 å¤šè¯­è¨€æ··åˆç¼–ç¨‹</h3><ul><li><p>Javaå¹³å°ä¸Šçš„<strong>å¤šè¯­è¨€æ··åˆç¼–ç¨‹</strong>æ­£æˆä¸ºä¸»æµï¼Œé€šè¿‡<strong>ç‰¹å®šé¢†åŸŸçš„è¯­è¨€</strong>å»è§£å†³<strong>ç‰¹å®šé¢†åŸŸçš„é—®é¢˜</strong>æ˜¯å½“å‰è½¯ä»¶å¹²å‘åº”å¯¹æ—¥è¶‹å¤æ‚çš„é¡¹ç›®éœ€æ±‚çš„ä¸€ä¸ªæ–¹å‘ã€‚</p></li><li><p>è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªé¡¹ç›®ä¹‹ä¸­ï¼Œå¹¶è¡Œå¤„ç†ç”¨Clojureè¯­è¨€ç¼–å†™ï¼Œå±•ç¤ºå±‚ä½¿ç”¨JRuby/Railsï¼Œä¸­é—´å±‚åˆ™æ˜¯Javaï¼Œæ¯ä¸ªåº”ç”¨å±‚éƒ½å°†ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æ¥å®Œæˆï¼Œè€Œä¸”ï¼Œæ¥å£å¯¹æ¯ä¸€å±‚çš„å¼€å‘è€…éƒ½æ˜¯é€æ˜çš„ï¼Œ<strong>å„ç§è¯­è¨€ä¹‹é—´çš„äº¤äº’</strong>ä¸å­˜åœ¨ä»»ä½•å›°éš¾ï¼Œå°±åƒä½¿ç”¨è‡ªå·±è¯­è¨€çš„åŸç”ŸAPIä¸€æ ·æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬æœ€ç»ˆéƒ½è¿è¡Œåœ¨<strong>ä¸€ä¸ªè™šæ‹Ÿæœº</strong>ä¹‹ä¸Šã€‚</p></li><li><p>å¯¹è¿™äº›è¿è¡ŒäºJavaè™šæ‹Ÿæœºä¹‹ä¸Šã€Javaä¹‹å¤–çš„è¯­è¨€ï¼Œæ¥è‡ªç³»ç»Ÿçº§çš„ã€åº•å±‚çš„æ”¯æŒæ­£åœ¨è¿…é€Ÿå¢å¼ºï¼Œä»¥JSR-292ä¸ºæ ¸å¿ƒçš„ä¸€ç³»åˆ—é¡¹ç›®å’ŒåŠŸèƒ½æ”¹è¿›ï¼ˆå¦‚Da Vinci machineé¡¹ç›®ã€ Nashornå¼•æ“ã€ Invoke DynamicæŒ‡ä»¤ã€java.lang.invokeåŒ…ç­‰ï¼‰ï¼Œ<strong>æ¨åŠ¨Javaè™šæ‹Ÿæœºä»â€œJavaè¯­è¨€çš„è™šæ‹Ÿæœºâ€å‘â€œå¤šè¯­è¨€è™šæ‹Ÿæœºâ€çš„æ–¹å‘å‘å±•</strong>ã€‚</p></li></ul><h2 id="3ã€Javaå‘å±•çš„é‡å¤§äº‹ä»¶"><a href="#3ã€Javaå‘å±•çš„é‡å¤§äº‹ä»¶" class="headerlink" title="3ã€Javaå‘å±•çš„é‡å¤§äº‹ä»¶"></a>3ã€Javaå‘å±•çš„é‡å¤§äº‹ä»¶</h2><ul><li><p>1990å¹´ï¼Œåœ¨Sunè®¡ç®—æœºå…¬å¸ä¸­ï¼Œç”± Patrick Naughtonã€ MikesheridanåŠJames Goslingé¢†å¯¼çš„å°ç»„ Green Teamï¼Œå¼€å‘å‡ºçš„æ–°çš„ç¨‹åºè¯­è¨€ï¼Œå‘½åä¸ºoakï¼ŒåæœŸå‘½åä¸ºJava</p></li><li><p>1995å¹´ï¼ŒSunæ­£å¼å‘å¸ƒJavaå’Œ HotJavaäº§å“ï¼ŒJavaé¦–æ¬¡å…¬å¼€äº®ç›¸ã€‚</p></li><li><p>1996å¹´1æœˆ23æ—¥ Sun Microsystemså‘å¸ƒäº†JDK1.0ã€‚</p></li><li><p>1998å¹´ï¼ŒJDK1.2ç‰ˆæœ¨å‘å¸ƒã€‚åŒæ—¶ï¼Œsunå‘å¸ƒäº†JSP/ Servletã€EJBè§„èŒƒï¼Œä»¥åŠå°†Javaåˆ†æˆäº†J2EEï¼ˆä¼ä¸šçº§åº”ç”¨ï¼‰ã€J2SEï¼ˆæ¡Œé¢çº§åº”ç”¨ï¼‰å’ŒJ2MEï¼ˆç§»åŠ¨ç«¯ï¼‰ã€‚è¿™è¡¨æ˜äº†Javaå¼€å§‹å‘ä¼ä¸šã€æ¡Œé¢åº”ç”¨å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨3å¤§é¢†åŸŸæŒºè¿›ã€‚</p></li><li><p>2000å¹´ï¼ŒJDK1.3å‘å¸ƒï¼Œ <strong>Java Hotspot Virtual Machineæ­£å¼å‘å¸ƒï¼Œæˆä¸º</strong><br><strong>Javaçš„é»˜è®¤è™šæ‹Ÿæœº</strong>ã€‚</p></li><li><p>2002å¹´ï¼ŒJDK1.4å‘å¸ƒï¼Œå¤è€çš„ Classicè™šæ‹Ÿæœºé€€å‡ºå†å²èˆå°ï¼ŒåŒæœŸå¾®è½¯.NETå‘å¸ƒ</p></li><li><p>2003å¹´å¹´åº•ï¼Œ<strong>Javaå¹³å°çš„ Scalaæ­£å¼å‘å¸ƒï¼ŒåŒå¹´ Groovyä¹ŸåŠ å…¥äº†Javaé˜µè¥</strong>ã€‚</p></li><li><p>2004å¹´ï¼ŒJDK1.5å‘å¸ƒã€‚åŒæ—¶JDK1.5æ”¹åä¸º JavaSE5.0ã€‚</p></li><li><p>2006å¹´ï¼ŒJDK6å‘å¸ƒã€‚åŒå¹´ï¼Œ<strong>Javaå¼€æºå¹¶å»ºç«‹äº† OpenJDK</strong>ã€‚é¡ºç†æˆç« ï¼Œ<strong>Hotspotè™šæ‹Ÿæœºä¹Ÿæˆä¸ºäº† OpenJDKä¸­çš„é»˜è®¤è™šæ‹Ÿæœº</strong>ã€‚</p></li><li><p>2007å¹´ï¼ŒJavaå¹³å°è¿æ¥äº†æ–°ä¼™ä¼´Clojureã€‚</p></li><li><p>2008å¹´ï¼ŒOracleæ”¶è´­äº†BEAï¼Œå¾—åˆ°äº†JRockitè™šæ‹Ÿæœºã€‚</p></li><li><p>2009å¹´ï¼ŒTwitterå®£å¸ƒæŠŠåå°å¤§éƒ¨åˆ†ç¨‹åºä»Rubyè¿ç§»åˆ° Scalaï¼Œè¿™æ˜¯Javaå¹³å°çš„åˆä¸€æ¬¡å¤§è§„æ¨¡åº”ç”¨ã€‚</p></li><li><p>2010å¹´ï¼ŒOracleæ”¶è´­äº†Sunï¼Œ<strong>è·å¾—Javaå•†æ ‡å’Œæœ€å…·ä»·å€¼çš„ Hotspotè™šæ‹Ÿæœº</strong>ï¼ŒJCPç»„ç»‡ç®¡ç†Javaè¯­è¨€ï¼Œä½†Oracleè¯è¯­æƒæ¯”è¾ƒé‡ã€‚æ­¤æ—¶ï¼ŒOracleæ‹¥æœ‰å¸‚åœºå ç”¨ç‡æœ€é«˜çš„ä¸¤æ¬¾è™šæ‹ŸæœºHot Spotå’Œ JRockitï¼Œå¹¶è®¡åˆ’åœ¨æœªæ¥å¯¹å®ƒä»¬è¿›è¡Œæ•´åˆï¼šHotrockit</p></li><li><p>2011å¹´ï¼ŒJDK7å‘å¸ƒã€‚åœ¨JDK1.7u4ä¸­ï¼Œæ­£å¼å¯ç”¨äº†æ–°çš„åƒåœ¾å›æ”¶å™¨G1ã€‚</p></li><li><p>2014å¹´ï¼Œç®—æ˜¯æ•´åˆäº†ä¸Šè¿°ä¸¤æ¬¾è™šæ‹ŸæœºHotrockitï¼Œä»JavaSE8.0å</p></li><li><p>2017å¹´ï¼ŒJDK9å‘å¸ƒã€‚å°†G1è®¾ç½®ä¸ºé»˜è®¤GCï¼Œæ›¿ä»£CMSã€‚åŒå¹´ï¼Œ<strong>IBMçš„J9å¼€æº</strong>ï¼Œå½¢æˆäº†ç°åœ¨çš„ Open J9ç¤¾åŒº</p></li><li><p>2018å¹´ï¼ŒAndroidçš„Javaä¾µæƒæ¡ˆåˆ¤å†³ï¼ŒGoogleèµ”å¿Oracleè®¡88äº¿ç¾å…ƒã€‚åŒå¹´ï¼ŒOracLeå®£å‘Š JavaEEæˆä¸ºå†å²åè¯ï¼ŒJDBCã€JMSã€servletèµ äºˆEclipseåŸºé‡‘ä¼šã€‚åŒå¹´ï¼ŒJDK11å‘å¸ƒï¼ŒLTSç‰ˆæœ¬çš„JDKï¼Œ<strong>å‘å¸ƒé©å‘½æ€§çš„ZGCï¼Œè°ƒæ•´JDKæˆæƒè®¸å¯</strong></p></li><li><p>2019å¹´ï¼ŒJDK12å‘å¸ƒï¼ŒåŠ å…¥RedHaté¢†å¯¼å¼€å‘çš„ Shenandoah GC</p></li></ul><p>åœ¨JDK11ä¹‹å‰ï¼ŒOracleJDKä¸­è¿˜ä¼šå­˜åœ¨ä¸€äº› OpenJDKä¸­æ²¡æœ‰çš„ã€é—­æºçš„åŠŸèƒ½ã€‚ä½†åœ¨JDK11ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸º OpenJDKå’Œ oracleJDKä»£ç å®è´¨ä¸Šå·²ç»å®Œå…¨ä¸€è‡´çš„ç¨‹åº¦ã€‚ä¸»è¦æ˜¯åŸºäºçš„åè®®ä¸åŒï¼ŒOpenJDKåŸºäºOPLåè®®ï¼ŒOracleJDKåŸºäºOPNåè®®ã€‚OpenJDKç»´æŠ¤æœŸåŠå¹´ï¼Œè¿‡äº†å°±æ›´æ–°ä¸‹ä¸€ç‰ˆæœ¬ï¼ŒOracleJDKæŒç»­ç»´æŠ¤3å¹´</p><h2 id="4ã€è™šæ‹Ÿæœºä¸Javaè™šæ‹Ÿæœº"><a href="#4ã€è™šæ‹Ÿæœºä¸Javaè™šæ‹Ÿæœº" class="headerlink" title="4ã€è™šæ‹Ÿæœºä¸Javaè™šæ‹Ÿæœº"></a>4ã€è™šæ‹Ÿæœºä¸Javaè™šæ‹Ÿæœº</h2><h3 id="4-1-è™šæ‹Ÿæœº"><a href="#4-1-è™šæ‹Ÿæœº" class="headerlink" title="4.1 è™šæ‹Ÿæœº"></a>4.1 è™šæ‹Ÿæœº</h3><ul><li><p>æ‰€è°“è™šæ‹Ÿæœº( Virtual Machine)ï¼Œå°±æ˜¯ä¸€å°è™šæ‹Ÿçš„è®¡ç®—æœºå®ƒæ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œç”¨æ¥æ‰§è¡Œä¸€ç³»åˆ—è™šæ‹Ÿè®¡ç®—æœºæŒ‡ä»¤ã€‚å¤§ä½“ä¸Šï¼Œè™šæ‹Ÿæœºå¯ä»¥åˆ†ä¸º<strong>ç³»ç»Ÿè™šæ‹Ÿæœº</strong>å’Œ<strong>ç¨‹åºè™šæ‹Ÿæœº</strong>ã€‚</p><ul><li>å¤§åé¼é¼çš„ Visual Boxï¼ŒVMwareå°±å±äºç³»ç»Ÿè™šæ‹Ÿæœºï¼Œå®ƒä»¬<strong>å®Œå…¨æ˜¯å¯¹ç‰©ç†è®¡ç®—æœºçš„ä»¿çœŸ</strong>ï¼Œæä¾›äº†ä¸€ä¸ªå¯è¿è¡Œå®Œæ•´æ“ä½œç³»ç»Ÿçš„è½¯ä»¶å¹³å°ã€‚</li><li>ç¨‹åºè™šæ‹Ÿæœºçš„å…¸å‹ä»£è¡¨å°±æ˜¯Javaè™šæ‹Ÿæœºï¼Œå®ƒ<strong>ä¸“é—¨ä¸ºæ‰§è¡Œå•ä¸ªè®¡ç®—æœºç¨‹åºè€Œè®¾è®¡</strong>ï¼Œåœ¨Javaè™šæ‹Ÿæœºä¸­æ‰§è¡Œçš„æŒ‡ä»¤æˆ‘ä»¬ç§°ä¸ºJavaå­—èŠ‚ç æŒ‡ä»¤ã€‚</li></ul></li><li><p>æ— è®ºæ˜¯ç³»ç»Ÿè™šæ‹Ÿæœºè¿˜æ˜¯ç¨‹åºè™šæ‹Ÿæœºï¼Œåœ¨ä¸Šé¢è¿è¡Œçš„è½¯ä»¶éƒ½è¢«é™åˆ¶äºè™šæ‹Ÿæœºæä¾›çš„èµ„æºä¸­ã€‚</p></li></ul><h3 id="4-2-Javaè™šæ‹Ÿæœº"><a href="#4-2-Javaè™šæ‹Ÿæœº" class="headerlink" title="4.2 Javaè™šæ‹Ÿæœº"></a>4.2 Javaè™šæ‹Ÿæœº</h3><ul><li><p>Javaè™šæ‹Ÿæœºæ˜¯ä¸€å°æ‰§è¡ŒJavaå­—èŠ‚ç çš„è™šæ‹Ÿè®¡ç®—æœºï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„è¿è¡Œæœºåˆ¶ï¼Œå…¶è¿è¡Œçš„Javaå­—èŠ‚ç ä¹Ÿæœªå¿…ç”±Javaè¯­è¨€ç¼–è¯‘è€Œæˆã€‚</p></li><li><p>JVMå¹³å°çš„å„ç§è¯­è¨€å¯ä»¥å…±äº«Javaè™šæ‹Ÿæœºå¸¦æ¥çš„è·¨å¹³å°æ€§ã€ä¼˜ç§€çš„åƒåœ¾å›æ”¶å™¨ï¼Œä»¥åŠå¯é çš„å³æ—¶ç¼–è¯‘å™¨ã€‚</p></li><li><p><strong>JavaæŠ€æœ¯çš„æ ¸å¿ƒå°±æ˜¯Javaè™šæ‹Ÿæœº</strong>ï¼ˆJVMï¼ŒJava Virtual Machineï¼‰å› ä¸ºæ‰€æœ‰çš„Javaç¨‹åºéƒ½è¿è¡Œåœ¨Javaè™šæ‹Ÿæœºå†…éƒ¨ã€‚</p></li><li><p>ä½œç”¨ï¼š</p><p><strong>Javaè™šæ‹Ÿæœºå°±æ˜¯äºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒ</strong>ï¼Œè´Ÿè´£è£…è½½å­—èŠ‚ç åˆ°å…¶å†…éƒ¨ï¼Œè§£é‡Š/ç¼–è¯‘ä¸ºå¯¹åº”å¹³å°ä¸Šçš„æœºå™¨æŒ‡ä»¤æ‰§è¡Œã€‚æ¯ä¸€æ¡JavaæŒ‡ä»¤ï¼ŒJavaè™šæ‹Ÿæœºè§„èŒƒä¸­éƒ½æœ‰è¯¦ç»†å®šä¹‰ï¼Œå¦‚æ€ä¹ˆå–æ“ä½œæ•°ï¼Œæ€ä¹ˆå¤„ç†æ“ä½œæ•°ï¼Œå¤„ç†ç»“æœæ”¾åœ¨å“ªé‡Œã€‚</p></li><li><p>ç‰¹ç‚¹</p><ul><li>ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œ</li><li>è‡ªåŠ¨å†…å­˜ç®¡ç†</li><li>è‡ªåŠ¨åƒåœ¾å›æ”¶åŠŸèƒ½</li></ul></li></ul><h2 id="5ã€JVMçš„ä½ç½®"><a href="#5ã€JVMçš„ä½ç½®" class="headerlink" title="5ã€JVMçš„ä½ç½®"></a>5ã€JVMçš„ä½ç½®</h2><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/JVM-location.PNG" alt=""></p><p>Jâ…¥Mæ˜¯è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„ï¼Œå®ƒä¸ç¡¬ä»¶æ²¡æœ‰ç›´æ¥çš„äº¤äº’ã€‚ä¸åŒæ“ä½œç³»ç»Ÿçš„JVMæ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><h2 id="6ã€JVMçš„æ•´ä½“ç»“æ„"><a href="#6ã€JVMçš„æ•´ä½“ç»“æ„" class="headerlink" title="6ã€JVMçš„æ•´ä½“ç»“æ„"></a>6ã€JVMçš„æ•´ä½“ç»“æ„</h2><ul><li><p>HotSpot VMæ˜¯ç›®å‰å¸‚é¢ä¸Šé«˜æ€§èƒ½è™šæ‹Ÿæœºçš„ä»£è¡¨ä½œä¹‹ä¸€ã€‚</p></li><li><p>å®ƒé‡‡ç”¨è§£é‡Šå™¨ä¸å³æ—¶ç¼–è¯‘å™¨å¹¶å­˜çš„æ¶æ„ã€‚</p></li><li><p>åœ¨ä»Šå¤©ï¼ŒJavaç¨‹åºçš„è¿è¡Œæ€§èƒ½æ—©å·²è„±èƒæ¢éª¨ï¼Œå·²ç»è¾¾åˆ°äº†å¯ä»¥å’ŒC/C++ç¨‹åºä¸€è¾ƒé«˜ä¸‹çš„åœ°æ­¥ã€‚</p></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/overall-structure.PNG" alt=""></p><p>å°†å›¾ç¤ºç»“æ„åˆ†ä¸ºä¸Šä¸­ä¸‹å±‚ï¼š</p><ul><li><p>ä¸Šå±‚ï¼šå…¥å£æ˜¯å­—èŠ‚ç æ–‡ä»¶ï¼Œé€šè¿‡è£…è½½å™¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç”Ÿæˆclasså¯¹è±¡ï¼›</p></li><li><p>ä¸­å±‚ï¼šæœ‰å¯¹åº”classçš„å®ä¾‹äº†ï¼›å¤šçº¿ç¨‹å…±äº«æ–¹æ³•åŒºå’Œå †ï¼Œè™šæ‹Ÿæœºæ ˆï¼ˆJavaæ ˆï¼‰ï¼Œæœ¬åœ°æ–¹æ³•æ ˆå’Œç¨‹åºè®¡æ•°å™¨æ˜¯æ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰çš„ã€‚</p></li><li><p>ä¸‹å±‚ï¼šæœ‰â€œåç«¯ç¼–è¯‘å™¨â€ï¼Œå°†é«˜çº§è¯­è¨€ç¿»è¯‘ä¸ºæœºå™¨è¯­è¨€</p></li></ul><h2 id="7ã€Javaä»£ç æ‰§è¡Œæµç¨‹"><a href="#7ã€Javaä»£ç æ‰§è¡Œæµç¨‹" class="headerlink" title="7ã€Javaä»£ç æ‰§è¡Œæµç¨‹"></a>7ã€Javaä»£ç æ‰§è¡Œæµç¨‹</h2><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Implementation-process.png" alt=""></p><p>å…³äºä¸Šå›¾ä¸­Javaç¼–è¯‘å™¨ï¼ˆâ€œå‰ç«¯â€ç¼–è¯‘å™¨ï¼‰çš„ç»†èŠ‚ä¸ç”¨è¿‡å¤šå…³æ³¨ï¼Œé™¤éæ¶‰åŠå¼€å‘ä¸€é—¨è¯­è¨€ï¼›åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä»»ä½•ä¸€ä¸ªè¿‡ç¨‹å¤±è´¥ï¼Œéƒ½ä¸èƒ½æ­£ç¡®ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ã€‚å­—èŠ‚ç æ–‡ä»¶ä¹Ÿæ˜¯è·¨å¹³å°çš„</p><p>â€œè§£ææ‰§è¡Œâ€å’Œâ€œç¼–è¯‘æ‰§è¡Œâ€œæ¨¡å—ç›¸å½“äºæ‰§è¡Œå¼•æ“ï¼Œâ€è§£ææ‰§è¡Œâ€œä¿è¯å“åº”æ—¶é—´ï¼Œé€è¡Œå¯¹å­—èŠ‚ç è§£é‡Šæ‰§è¡Œï¼Œåå¤æ‰§è¡Œçš„ä»£ç ç§°ä¸ºâ€çƒ­ç‚¹ä»£ç â€œï¼Œâ€œç¼–è¯‘æ‰§è¡Œâ€æœ‰ä¸ªäºŒæ¬¡ç¼–è¯‘ï¼Œç¬¬ä¸€ç¼–è¯‘ä¸ºå­—èŠ‚ç çš„çƒ­ç‚¹ä»£ç ï¼Œå°†å…¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ç›´æ¥è°ƒç”¨ï¼Œè½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤ã€‚</p><h2 id="8ã€JVMçš„æ¶æ„æ¨¡å‹"><a href="#8ã€JVMçš„æ¶æ„æ¨¡å‹" class="headerlink" title="8ã€JVMçš„æ¶æ„æ¨¡å‹"></a>8ã€JVMçš„æ¶æ„æ¨¡å‹</h2><p>Javaç¼–è¯‘å™¨è¾“å…¥çš„æŒ‡ä»¤æµåŸºæœ¬ä¸Šæ˜¯ä¸€ç§åŸºäº<strong>æ ˆçš„æŒ‡ä»¤é›†æ¶æ„</strong>ï¼Œå¦å¤–ä¸€ç§æŒ‡ä»¤é›†æ¶æ„åˆ™æ˜¯åŸºäº<strong>å¯„å­˜å™¨çš„æŒ‡ä»¤é›†æ¶æ„</strong>ã€‚HotSpotæ˜¯åŸºäºæ ˆçš„æ¶æ„ã€‚</p><h3 id="8-1-å…·ä½“æ¥è¯´ï¼šè¿™ä¸¤ç§æ¶æ„ä¹‹é—´çš„åŒºåˆ«ï¼š"><a href="#8-1-å…·ä½“æ¥è¯´ï¼šè¿™ä¸¤ç§æ¶æ„ä¹‹é—´çš„åŒºåˆ«ï¼š" class="headerlink" title="8.1 å…·ä½“æ¥è¯´ï¼šè¿™ä¸¤ç§æ¶æ„ä¹‹é—´çš„åŒºåˆ«ï¼š"></a>8.1 å…·ä½“æ¥è¯´ï¼šè¿™ä¸¤ç§æ¶æ„ä¹‹é—´çš„åŒºåˆ«ï¼š</h3><ul><li>åŸºäºæ ˆå¼æ¶æ„çš„ç‰¹ç‚¹<ul><li>è®¾è®¡å’Œå®ç°æ›´ç®€å•ï¼Œé€‚ç”¨äºèµ„æºå—é™çš„ç³»ç»Ÿï¼›ï¼ˆæ–¹æ³•ï¼Œå…¥æ ˆå‡ºæ ˆï¼Ÿå®ç°ç®€å•ï¼‰</li><li>é¿å¼€äº†å¯„å­˜å™¨çš„åˆ†é…éš¾é¢˜ï¼šä½¿ç”¨é›¶åœ°å€ï¼ˆæ— åœ°å€ï¼Œåªæœ‰æ“ä½œæ•°ï¼‰æŒ‡ä»¤æ–¹å¼åˆ†é…ã€‚ï¼ˆæ ˆçš„ç»“æ„ï¼Ÿæ ˆé¡¶å…ƒç´ ï¼Ÿä¸éœ€è¦çŸ¥é“åœ°å€ï¼Ÿä¸éº»çƒ¦ï¼‰</li><li>æŒ‡ä»¤æµä¸­çš„æŒ‡ä»¤å¤§éƒ¨åˆ†æ˜¯é›¶åœ°å€æŒ‡ä»¤ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹ä¾èµ–äºæ“ä½œæ ˆã€‚æŒ‡ä»¤é›†æ›´å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°ã€‚</li><li>ä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œå¯ç§»æ¤æ€§æ›´å¥½ï¼Œæ›´å¥½å®ç°è·¨å¹³å°ã€‚ï¼ˆæ ˆä¸å†…å­˜äº¤äº’ï¼‰</li></ul></li><li>åŸºäºå¯„å­˜å™¨æ¶æ„çš„ç‰¹ç‚¹<ul><li>å…¸å‹çš„åº”ç”¨æ˜¯x86çš„äºŒè¿›åˆ¶æŒ‡ä»¤é›†ï¼šæ¯”å¦‚ä¼ ç»Ÿçš„PCä»¥åŠAndroidçš„Davlikè™šæ‹Ÿæœºã€‚</li><li><strong>æŒ‡ä»¤é›†æ¶æ„åˆ™å®Œå…¨ä¾èµ–ç¡¬ä»¶ï¼Œå¯ç§»æ¤æ€§å·®</strong></li><li><strong>æ€§èƒ½ä¼˜ç§€å’Œæ‰§è¡Œæ›´é«˜æ•ˆ</strong></li><li>èŠ±è´¹æ›´å°‘çš„æŒ‡ä»¤å»å®Œæˆä¸€é¡¹æ“ä½œã€‚</li><li>åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒåŸºäºå¯„å­˜å™¨æ¶æ„çš„æŒ‡ä»¤é›†å¾€å¾€éƒ½ä»¥ä¸€åœ°å€æŒ‡ä»¤ã€äºŒåœ°å€æŒ‡ä»¤å’Œä¸‰åœ°å€æŒ‡ä»¤ä¸ºä¸»ï¼Œè€ŒåŸºäºæ ˆå¼æ¶æ„çš„æŒ‡ä»¤é›†å´æ˜¯ä»¥é›¶åœ°å€æŒ‡ä»¤ä¸ºä¸»æ–¹æ°´æ´‹</li></ul></li></ul><h3 id="8-2-ç¤ºä¾‹"><a href="#8-2-ç¤ºä¾‹" class="headerlink" title="8.2 ç¤ºä¾‹"></a>8.2 ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackStructureTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// int i = 1+2;</span></span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> k = i+j;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘è¿è¡Œåï¼Œä¼šåœ¨é¡¹ç›®çš„outæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/out-complie.PNG" alt=""></p><p>åœ¨â€œchapter01â€ä¸‹æ‰“å¼€cmdæ‰§è¡Œä¸‹é¢è¯­å¥è¿›è¡Œåç¼–è¯‘ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> javap <span class="literal">-v</span> StackStructureTest<span class="class">.<span class="keyword">class</span></span></span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼šï¼ˆåŸºäºæ ˆçš„è®¡ç®—æµç¨‹ï¼ˆä»¥Javaè™šæ‹Ÿæœºä¸ºä¾‹ï¼‰ï¼‰</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  <span class="comment">#23 = Utf8               java/lang/Object</span></span><br><span class="line">&#123;</span><br><span class="line">  public com.chapter01.StackStructureTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial <span class="comment">#1                  // Method java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  this   Lcom/chapter01/StackStructureTest;</span><br><span class="line"></span><br><span class="line">  public <span class="keyword">static</span> void main(java.lang.String[]);</span><br><span class="line">    descriptor: ([<span class="type">Ljava</span>/<span class="type">lang</span>/<span class="built_in">String</span>;)<span class="type">V</span></span><br><span class="line">    <span class="type">flags</span>: <span class="type">ACC_PUBLIC</span>, <span class="type">ACC_STATIC</span></span><br><span class="line">    <span class="type">Code</span>:</span><br><span class="line">      <span class="type">stack</span>=<span class="number">2</span>, <span class="type">locals</span>=<span class="number">4</span>, <span class="type">args_size</span>=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: <span class="type">iconst_3</span>  // å®šä¹‰å¸¸é‡<span class="number">3</span></span><br><span class="line">         <span class="number">1</span>: <span class="type">istore_1</span>  // <span class="number">1</span>æ˜¯æ“ä½œæ•°æ ˆçš„ç´¢å¼•ä½ç½®ï¼Œå°†ä¸Šé¢å¸¸é‡ä¿å­˜åˆ°ç´¢å¼•ä¸º<span class="number">1</span>çš„æ“ä½œæ•°æ ˆä¸­</span><br><span class="line">         <span class="number">2</span>: <span class="type">iconst_4</span></span><br><span class="line">         <span class="number">3</span>: <span class="type">istore_2</span></span><br><span class="line">         <span class="number">4</span>: <span class="type">iload_1</span>   // å°†ç´¢å¼•<span class="number">1</span>åŠ è½½è¿›æ¥</span><br><span class="line">         <span class="number">5</span>: <span class="type">iload_2</span>   // åŠ è½½ç´¢å¼•<span class="number">2</span></span><br><span class="line">         <span class="number">6</span>: <span class="type">iadd</span>      // æ±‚å’Œæ“ä½œ</span><br><span class="line">         <span class="number">7</span>: <span class="type">istore_3</span>  // å°†ç»“æœå­˜åˆ°ç´¢å¼•ä¸º<span class="number">3</span>çš„æ“ä½œæ•°æ ˆä¸­</span><br><span class="line">         <span class="number">8</span>: <span class="type">return</span>    // <span class="number">8</span>è¡Œï¼Œå¯„å­˜å™¨çš„è¯</span><br><span class="line">      <span class="type">LineNumberTable</span>:</span><br><span class="line">        <span class="type">line</span> <span class="number">7</span>: <span class="number">0</span></span><br><span class="line">        <span class="type">line</span> <span class="number">8</span>: <span class="number">2</span></span><br><span class="line">        <span class="type">line</span> <span class="number">9</span>: <span class="number">4</span></span><br><span class="line">        <span class="type">line</span> <span class="number">10</span>: <span class="number">8</span></span><br><span class="line">      <span class="type">LocalVariableTable</span>:</span><br><span class="line">        <span class="type">Start</span>  <span class="type">Length</span>  <span class="type">Slot</span>  <span class="type">Name</span>   <span class="type">Signature</span></span><br><span class="line">            <span class="number">0</span>       <span class="number">9</span>     <span class="number">0</span>  <span class="type">args</span>   [<span class="type">Ljava</span>/<span class="type">lang</span>/<span class="built_in">String</span>;</span><br><span class="line">            <span class="number">2</span>       <span class="number">7</span>     <span class="number">1</span>     <span class="type">i</span>   <span class="type">I</span></span><br><span class="line">            <span class="number">4</span>       <span class="number">5</span>     <span class="number">2</span>     <span class="type">j</span>   <span class="type">I</span></span><br><span class="line">            <span class="number">8</span>       <span class="number">1</span>     <span class="number">3</span>     <span class="type">k</span>   <span class="type">I</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">SourceFile</span>: <span class="string">"StackStructureTest.java"</span></span><br></pre></td></tr></table></figure><p>è€ŒåŸºäºå¯„å­˜å™¨çš„è®¡ç®—æµç¨‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov eax,<span class="number">2</span> //å°†eaxå¯„å­˜å™¨çš„å€¼è®¾ä¸º<span class="number">1</span></span><br><span class="line">add eax,<span class="number">3</span> //ä½¿eaxå¯„å­˜å™¨çš„å€¼åŠ <span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="8-3-æ€»ç»“"><a href="#8-3-æ€»ç»“" class="headerlink" title="8.3 æ€»ç»“"></a>8.3 æ€»ç»“</h3><p><strong>ç”±äºè·¨å¹³å°æ€§çš„è®¾è®¡ï¼ŒJavaçš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ã€‚</strong>ä¸åŒå¹³å°CPUæ¶æ„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºå¯„å­˜å™¨çš„ã€‚ä¼˜ç‚¹æ˜¯è·¨å¹³å°ï¼ŒæŒ‡ä»¤é›†å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ä¸‹é™ï¼Œå®ç°åŒæ ·çš„åŠŸèƒ½éœ€è¦æ›´å¤šçš„æŒ‡ä»¤ã€‚</p><p>æ—¶è‡³ä»Šæ—¥ï¼Œå°½ç®¡åµŒå…¥å¼å¹³å°å·²ç»ä¸æ˜¯Javaç¨‹åºçš„ä¸»æµè¿è¡Œå¹³å°äº†ï¼ˆå‡†ç¡®æ¥è¯´åº”è¯¥æ˜¯HotSpot VMçš„å®¿ä¸»ç¯å¢ƒå·²ç»ä¸å±€é™äºåµŒå…¥å¼å¹³å°äº†ï¼‰ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸å°†æ¶æ„æ›´æ¢ä¸ºåŸºäºå¯„å­˜å™¨çš„æ¶æ„å‘¢ï¼Ÿ</p><p>æ ˆï¼šè·¨å¹³å°æ€§ã€æŒ‡ä»¤é›†å°ã€æŒ‡ä»¤å¤šï¼›æ‰§è¡Œæ€§èƒ½æ¯”å¯„å­˜å™¨å·®</p><h2 id="9ã€JVMçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#9ã€JVMçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="9ã€JVMçš„ç”Ÿå‘½å‘¨æœŸ"></a>9ã€JVMçš„ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="9-1-è™šæ‹Ÿæœºçš„å¯åŠ¨"><a href="#9-1-è™šæ‹Ÿæœºçš„å¯åŠ¨" class="headerlink" title="9.1 è™šæ‹Ÿæœºçš„å¯åŠ¨"></a>9.1 è™šæ‹Ÿæœºçš„å¯åŠ¨</h3><p>Javaè™šæ‹Ÿæœºçš„å¯åŠ¨æ˜¯é€šè¿‡å¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆbootstrap class loaderï¼‰åˆ›å»ºä¸€ä¸ªåˆå§‹ç±»ï¼ˆinitial classï¼‰æ¥å®Œæˆçš„ï¼Œè¿™ä¸ªç±»æ˜¯ç”±è™šæ‹Ÿæœºçš„å…·ä½“å®ç°æŒ‡å®šçš„ã€‚</p><p>è‡ªå®šä¹‰çš„ç±»é€šè¿‡ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½ï¼Œç»§æ‰¿è‡ªObjectï¼ŒObjectéœ€è¦è¢«å¼•å¯¼ç±»åŠ è½½å™¨åŠ è½½ï¼ŒObjectå¹¶ä¸æ˜¯åˆå§‹ç±»ï¼Œä¸€ä¸ªç®€å•ç±»çš„æ‰§è¡Œå°±éœ€è¦åŠ è½½å¾ˆå¤šç±»ï¼Œæ­¤æ—¶JVMå¯åŠ¨</p><h3 id="9-2-è™šæ‹Ÿæœºçš„æ‰§è¡Œ"><a href="#9-2-è™šæ‹Ÿæœºçš„æ‰§è¡Œ" class="headerlink" title="9.2 è™šæ‹Ÿæœºçš„æ‰§è¡Œ"></a>9.2 è™šæ‹Ÿæœºçš„æ‰§è¡Œ</h3><ul><li><p>ä¸€ä¸ªè¿è¡Œä¸­çš„Javaè™šæ‹Ÿæœºæœ‰ç€ä¸€ä¸ªæ¸…æ™°çš„ä»»åŠ¡ï¼šæ‰§è¡ŒJavaç¨‹åºã€‚</p></li><li><p>ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶ä»–æ‰è¿è¡Œï¼Œ<strong>ç¨‹åºç»“æŸæ—¶ä»–å°±åœæ­¢</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackStructureTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// int i = 1+2;</span></span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">int</span> k = i+j;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">6000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼Œè¶è¿˜æ²¡æœ‰ç»“æŸï¼Œåœ¨cmdä¸­è¾“å…¥ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> jps    // æ‰“å°å½“å‰æ‰§è¡Œç¨‹åºä¸­çš„è¿›ç¨‹</span><br><span class="line"><span class="number">22272</span> StackStructureTest   // <span class="number">22272</span>ç«¯å£å·</span><br><span class="line"><span class="number">22548</span></span><br><span class="line"><span class="number">24164</span> RemoteMavenServer36</span><br><span class="line"><span class="number">22024</span> Launcher</span><br><span class="line"><span class="number">21388</span> Jps   // JVMå°±é€€å‡ºäº†</span><br><span class="line"><span class="variable">$</span> jps    // ç»“æŸå</span><br><span class="line"><span class="number">22548</span></span><br><span class="line"><span class="number">24164</span> RemoteMavenServer36</span><br><span class="line"><span class="number">3188</span> Jps</span><br><span class="line"><span class="number">22024</span> Launcher</span><br></pre></td></tr></table></figure></li></ul><ul><li>æ‰§è¡Œä¸€ä¸ªæ‰€è°“çš„Javaç¨‹åºçš„æ—¶å€™ï¼ŒçœŸçœŸæ­£æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªå«åš<strong>Javaè™šæ‹Ÿæœºçš„è¿›ç¨‹</strong>ã€‚</li></ul><h3 id="9-3-è™šæ‹Ÿæœºçš„é€€å‡º"><a href="#9-3-è™šæ‹Ÿæœºçš„é€€å‡º" class="headerlink" title="9.3 è™šæ‹Ÿæœºçš„é€€å‡º"></a>9.3 è™šæ‹Ÿæœºçš„é€€å‡º</h3><p>æœ‰å¦‚ä¸‹çš„å‡ ç§æƒ…å†µï¼š</p><ul><li><p>ç¨‹åºæ­£å¸¸æ‰§è¡Œç»“æŸ</p></li><li><p>ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°äº†å¼‚å¸¸ï¼ˆæ²¡æœ‰å¤„ç†çš„å¼‚å¸¸ï¼‰æˆ–é”™è¯¯è€Œå¼‚å¸¸ç»ˆæ­¢</p></li><li><p>ç”±äºæ“ä½œç³»ç»Ÿç”¨ç°é”™è¯¯è€Œå¯¼è‡´Javaè™šæ‹Ÿæœºè¿›ç¨‹ç»ˆæ­¢</p></li><li><p>æŸçº¿ç¨‹è°ƒç”¨Runtimeç±»æˆ–systemç±»çš„exitæ–¹æ³•ï¼Œæˆ–Runtimeç±»çš„haltæ–¹æ³•ï¼Œå¹¶ä¸”Javaå®‰å…¨ç®¡ç†å™¨ä¹Ÿå…è®¸è¿™æ¬¡exitæˆ–haltæ“ä½œã€‚</p><p>ç¬¬6èŠ‚è¿è¡Œæ—¶æ•°æ®åŒºï¼Œå°±æ˜¯è¿è¡Œæ—¶ç¯å¢ƒï¼Œå¯¹åº”çš„ç±»å°±æ˜¯<code>java.lang.Runtime</code>ï¼Œè¿™ä¸ªç±»æ˜¯å•ä¾‹çš„</p></li><li><p>é™¤æ­¤ä¹‹å¤–ï¼ŒJNIï¼ˆJava Native Interfaceï¼‰è§„èŒƒæè¿°äº†ç”¨JNI Invocation APIæ¥åŠ è½½æˆ–å¸è½½ Javaè™šæ‹Ÿæœºæ—¶ï¼ŒJavaè™šæ‹Ÿæœºçš„é€€å‡ºæƒ…å†µã€‚</p></li></ul><h2 id="10ã€JVMå‘å±•å†ç¨‹"><a href="#10ã€JVMå‘å±•å†ç¨‹" class="headerlink" title="10ã€JVMå‘å±•å†ç¨‹"></a>10ã€JVMå‘å±•å†ç¨‹</h2><h3 id="10-1-Sun-Classic-VM"><a href="#10-1-Sun-Classic-VM" class="headerlink" title="10.1 Sun Classic VM"></a>10.1 Sun Classic VM</h3><ul><li><p>æ—©åœ¨1996å¹´Java1.0ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒSunå…¬å¸å‘å¸ƒäº†ä¸€æ¬¾åä¸ºsun classic VMçš„Javaè™šæ‹Ÿæœºï¼Œå®ƒåŒæ—¶ä¹Ÿæ˜¯<strong>ä¸–ç•Œä¸Šç¬¬ä¸€æ¬¾å•†ç”¨Javaè™šæ‹Ÿæœº</strong>ï¼ŒJDK1.4æ—¶å®Œå…¨è¢«æ·˜æ±°ã€‚</p></li><li><p>è¿™æ¬¾è™šæ‹Ÿæœºå†…éƒ¨åªæä¾›è§£é‡Šå™¨ã€‚</p><blockquote><p>ç°åœ¨è¿˜æœ‰åŠæ—¶ç¼–è¯‘å™¨ï¼Œå› æ­¤æ•ˆç‡æ¯”è¾ƒä½ï¼Œè€ŒåŠæ—¶ç¼–è¯‘å™¨ä¼šæŠŠçƒ­ç‚¹ä»£ç ç¼“å­˜èµ·æ¥ï¼Œé‚£ä¹ˆä»¥åä½¿ç”¨çƒ­ç‚¹ä»£ç çš„æ—¶å€™ï¼Œæ•ˆç‡å°±æ¯”è¾ƒé«˜ã€‚æå‡æ•ˆç‡å°±è¦ç”¨JITç¼–è¯‘å™¨ã€‚</p></blockquote></li><li><p>å¦‚æœä½¿ç”¨JITç¼–è¯‘å™¨ï¼Œå°±éœ€è¦è¿›è¡Œå¤–æŒ‚ã€‚ä½†æ˜¯ä¸€æ—¦ä½¿ç”¨äº†JITç¼–è¯‘å™¨ï¼ŒJITå°±ä¼šæ¥ç®¡è™šæ‹Ÿæœºçš„æ‰§è¡Œç³»ç»Ÿã€‚è§£é‡Šå™¨å°±ä¸å†å·¥ä½œã€‚è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ä¸èƒ½é…åˆå·¥ä½œã€‚</p><blockquote><p>è§£é‡Šå™¨å“åº”å¿«ï¼Œç¼–è¯‘å™¨å¯»æ‰¾çƒ­ç‚¹ä»£ç ï¼Œä¸ç”¨è§£é‡Šå™¨é€è¡Œç¼–è¯‘ã€‚å¦‚æœåªä½¿ç”¨é«˜æ€§èƒ½ç¼–è¯‘å™¨ï¼Œå“åº”æ—¶é—´æ…¢ï¼ŒåŠ ä¸Šé€è¡Œç¼–è¯‘æŒ‡ä»¤ï¼Œå°±ä¼šä½¿ç¨‹åºå¯åŠ¨æ—¶å“åº”æ—¶é—´è¿‡é•¿ï¼ˆå¡é¡¿ï¼‰ã€‚å…¶å®ç°ä»Šçš„Javaè™šæ‹Ÿæœºçš„æ‰§è¡Œé€Ÿåº¦ä»¥ä¸äºšäºCï¼Œæ›´å½¢è±¡åœ°ä¾‹å­ï¼Œè§£é‡Šå™¨ç›¸å½“äºæ­¥è¡Œï¼Œå‘½ä»¤å“å³å‡ºå‘ï¼Œç¼–è¯‘å™¨ç›¸å½“äºåå…¬äº¤è½¦ï¼Œå‘½ä»¤å“ç­‰å…¬äº¤æˆ–è½¬è½¦ï¼Œä¸¤è€…é…åˆæ›´ä¼˜ã€‚</p></blockquote></li><li><p>ç°åœ¨hotspotå†…ç½®äº†æ­¤è™šæ‹Ÿæœºã€‚</p></li></ul><h3 id="10-2-Exact-VM"><a href="#10-2-Exact-VM" class="headerlink" title="10.2 Exact VM"></a>10.2 Exact VM</h3><ul><li><p>ä¸ºäº†è§£å†³ä¸Šä¸€ä¸ªè™šæ‹Ÿæœºé—®é¢˜ï¼Œjdk1.2æ—¶ï¼Œsunæä¾›äº†æ­¤è™šæ‹Ÿæœºã€‚ Exact Memory Managementï¼šå‡†ç¡®å¼å†…å­˜ç®¡ç†</p><ul><li>ä¹Ÿå¯ä»¥å«Non-Conservative/Accurate Memory Management</li><li>è™šæ‹Ÿæœºå¯ä»¥çŸ¥é“å†…å­˜ä¸­æŸä¸ªä½ç½®çš„æ•°æ®å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ã€‚|</li></ul></li><li><p>å…·å¤‡ç°ä»£é«˜æ€§èƒ½è™šæ‹Ÿæœºçš„ç»´å½¢</p><ul><li>çƒ­ç‚¹æ¢æµ‹ï¼ˆå¯»æ‰¾å‡ºçƒ­ç‚¹ä»£ç è¿›è¡Œç¼“å­˜ï¼‰</li><li>ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨æ··åˆå·¥ä½œæ¨¡å¼</li></ul></li><li><p>åªåœ¨solariså¹³å°çŸ­æš‚ä½¿ç”¨ï¼Œå…¶ä»–å¹³å°ä¸Šè¿˜æ˜¯classic vmï¼Œè‹±é›„æ°”çŸ­ï¼Œç»ˆè¢«Hotspotè™šæ‹Ÿæœºæ›¿æ¢</p></li></ul><h3 id="10-3-HotSpot-VM"><a href="#10-3-HotSpot-VM" class="headerlink" title="10.3 HotSpot VM"></a>10.3 HotSpot VM</h3><ul><li><p>HotSpotå†å²</p><ul><li>æœ€åˆç”±ä¸€å®¶åä¸ºâ€œLongview Technologiesâ€çš„å°å…¬å¸è®¾è®¡</li><li>1997å¹´ï¼Œæ­¤å…¬å¸è¢«sunæ”¶è´­ï¼›2009å¹´ï¼ŒSunå…¬å¸è¢«ç”²éª¨æ–‡æ”¶è´­ã€‚</li><li>JDK1.3æ—¶ï¼ŒHotSpot VMæˆä¸ºé»˜è®¤è™šæ‹Ÿæœº</li></ul></li><li><p>ç›®å‰<strong>Hotspotå æœ‰ç»å¯¹çš„å¸‚åœºåœ°ä½ï¼Œç§°éœ¸æ­¦æ—</strong>ã€‚</p><ul><li>ä¸ç®¡æ˜¯ç°åœ¨ä»åœ¨å¹¿æ³›ä½¿ç”¨çš„JDK6ï¼Œè¿˜æ˜¯ä½¿ç”¨æ¯”ä¾‹è¾ƒå¤šçš„JDK8ä¸­ï¼Œé»˜è®¤çš„è™šæ‹Ÿæœºéƒ½æ˜¯HotSpot</li><li>Sun/oracle JDKå’ŒopenJDKçš„é»˜è®¤è™šæ‹Ÿæœº</li><li>å› æ­¤æœ¬è¯¾ç¨‹ä¸­é»˜è®¤ä»‹ç»çš„è™šæ‹Ÿæœºéƒ½æ˜¯HotSpotï¼Œç›¸å…³æœºåˆ¶ä¹Ÿä¸»è¦æ˜¯æŒ‡HotSpotçš„Gcæœºåˆ¶ã€‚ï¼ˆæ¯”å¦‚å…¶ä»–ä¸¤ä¸ªå•†ç”¨è™šæœºéƒ½æ²¡æœ‰æ–¹æ³•åŒºçš„æ¦‚å¿µï¼‰</li></ul></li><li><p>ä»æœåŠ¡å™¨ã€æ¡Œé¢åˆ°ç§»åŠ¨ç«¯ã€åµŒå…¥å¼éƒ½æœ‰åº”ç”¨ã€‚</p></li><li>åç§°ä¸­çš„HotSpotæŒ‡çš„å°±æ˜¯å®ƒçš„çƒ­ç‚¹ä»£ç æ¢æµ‹æŠ€æœ¯ã€‚<ul><li>é€šè¿‡è®¡æ•°å™¨æ‰¾åˆ°æœ€å…·ç¼–è¯‘ä»·å€¼ä»£ç ï¼Œè§¦å‘å³æ—¶ç¼–è¯‘æˆ–æ ˆä¸Šæ›¿æ¢</li><li>é€šè¿‡ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ååŒå·¥ä½œï¼Œåœ¨æœ€ä¼˜åŒ–çš„ç¨‹åºå“åº”æ—¶é—´ä¸æœ€ä½³æ‰§è¡Œæ€§èƒ½ä¸­å–å¾—å¹³è¡¡</li></ul></li></ul><h3 id="10-4-JRockit"><a href="#10-4-JRockit" class="headerlink" title="10.4 JRockit"></a>10.4 JRockit</h3><ul><li><p><strong>ä¸“æ³¨äºæœåŠ¡å™¨ç«¯åº”ç”¨</strong></p></li><li><p>å®ƒå¯ä»¥<strong>ä¸å¤ªå…³æ³¨ç¨‹åºå¯åŠ¨é€Ÿåº¦</strong>ï¼Œå› æ­¤<strong>JRockitå†…éƒ¨ä¸åŒ…å«è§£æå™¨å®ç°</strong>ï¼Œå…¨éƒ¨ä»£ç éƒ½é å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åæ‰§è¡Œã€‚</p></li><li><p>å¤§é‡çš„è¡Œä¸šåŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼Œ<strong>JRockit JVMæ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„JVM</strong>ã€‚</p></li><li><p>ä½¿ç”¨JRockitäº§å“ï¼Œå®¢æˆ·å·²ç»ä½“éªŒåˆ°äº†æ˜¾è‘—çš„æ€§èƒ½æé«˜ï¼ˆä¸€äº›è¶…è¿‡äº†70%ï¼‰å’Œç¡¬ä»¶æˆæœ¬çš„å‡å°‘ï¼ˆè¾¾50%ï¼‰ã€‚</p></li><li><p>ä¼˜åŠ¿ï¼šå…¨é¢çš„Javaè¿è¡Œæ—¶è§£å†³æ–¹æ¡ˆç»„åˆ</p><ul><li><p>JRockité¢å‘å»¶è¿Ÿæ•æ„Ÿå‹åº”ç”¨çš„è§£å†³æ–¹æ¡ˆJRockit Real Timeæä¾›ä»¥æ¯«ç§’æˆ–å¾®ç§’çº§çš„JVMå“åº”æ—¶é—´ï¼Œé€‚åˆè´¢åŠ¡ã€å†›äº‹æŒ‡æŒ¥ã€ç”µä¿¡ç½‘ç»œçš„éœ€è¦</p></li><li><p>MissionControlæœåŠ¡å¥—ä»¶ï¼Œå®ƒæ˜¯ä¸€ç»„ä»¥æä½çš„å¼€é”€æ¥ç›‘æ§ã€ç®¡ç†å’Œåˆ†æç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚</p><blockquote><p>å®˜ç½‘<a href="https://www.oracle.com/java/technologies/javase-downloads.html">JMC</a>ï¼Œç›‘æ§å†…å­˜æ³„éœ²ã€‚</p></blockquote></li></ul></li><li><p>åŸå±BEAå…¬å¸ï¼Œ2008å¹´ï¼ŒJRockitè¢«oracleæ”¶è´­ã€‚</p></li><li><p>oracleè¡¨è¾¾äº†æ•´åˆä¸¤å¤§ä¼˜ç§€è™šæ‹Ÿæœºçš„å·¥ä½œï¼Œå¤§è‡´åœ¨JDK8ä¸­å®Œæˆã€‚æ•´åˆçš„æ–¹å¼æ˜¯åœ¨HotSpotçš„åŸºç¡€ä¸Šï¼Œç§»æ¤JRockitçš„ä¼˜ç§€ç‰¹æ€§ã€‚</p></li><li><p>é«˜æ–¯æ—ï¼ˆJavaä¹‹çˆ¶ï¼‰ï¼šç›®å‰å°±èŒäºè°·æ­Œï¼Œç ”ç©¶äººå·¥æ™ºèƒ½å’Œæ°´ä¸‹æœºå™¨äºº</p></li></ul><h3 id="10-5-IBMçš„J9"><a href="#10-5-IBMçš„J9" class="headerlink" title="10.5 IBMçš„J9"></a>10.5 IBMçš„J9</h3><ul><li><p>å…¨ç§°ï¼šIBM Technology for Java Virtual Machineï¼Œç®€ç§°IT4Jï¼Œå†…éƒ¨ä»£å·ï¼šJ9</p></li><li><p>å¸‚åœºå®šä½ä¸HotSpotæ¥è¿‘ï¼ŒæœåŠ¡å™¨ç«¯ã€æ¡Œé¢åº”ç”¨ã€åµŒå…¥å¼ç­‰å¤šç”¨é€”VMå¹¿æ³›ç”¨äºIBMçš„å„ç§Javaäº§å“ã€‚</p></li><li><p><strong>ç›®å‰ï¼Œæœ‰å½±å“åŠ›çš„ä¸‰å¤§å•†ç”¨è™šæ‹Ÿæœºä¹‹ä¸€</strong>ï¼Œä¹Ÿå·ç§°æ˜¯ä¸–ç•Œä¸Šæœ€å¿«çš„Javaè™šæ‹Ÿæœºã€‚</p></li><li><p>2017å¹´å·¦å³ï¼ŒIBMå‘å¸ƒäº†å¼€æºJ9VMï¼Œå‘½åä¸ºopenJ9ï¼Œäº¤ç»™EClipseåŸºé‡‘ä¼šç®¡ç†ï¼Œä¹Ÿç§°ä¸ºEclipse OpenJ9</p></li></ul><h3 id="10-6-KVMå’ŒCDC-CLDC-Hotspot"><a href="#10-6-KVMå’ŒCDC-CLDC-Hotspot" class="headerlink" title="10.6 KVMå’ŒCDC / CLDC Hotspot"></a>10.6 KVMå’ŒCDC / CLDC Hotspot</h3><ul><li><p>oracleåœ¨Java MEäº§å“çº¿ä¸Šçš„ä¸¤æ¬¾è™šæ‹Ÿæœºä¸ºï¼šCDC/CLDC HotSpot Implementation VM KVMï¼ˆKilobyteï¼‰æ˜¯CLDC-HIæ—©æœŸäº§å“ç›®å‰ç§»åŠ¨é¢†åŸŸåœ°ä½å°´å°¬ï¼Œæ™ºèƒ½æœºè¢«Androidå’ŒioSäºŒåˆ†å¤©ä¸‹ã€‚</p></li><li><p>KVMç®€å•ã€è½»é‡ã€é«˜åº¦å¯ç§»æ¤ï¼Œé¢å‘æ›´ä½ç«¯çš„è®¾å¤‡ä¸Šè¿˜ç»´æŒè‡ªå·±çš„ä¸€ç‰‡å¸‚åœº</p><ul><li>æ™ºèƒ½æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨</li><li>è€äººæ‰‹æœºã€ç»æµæ¬ å‘è¾¾åœ°åŒºçš„åŠŸèƒ½æ‰‹æœº</li></ul></li><li><p>æ‰€æœ‰çš„è™šæ‹Ÿæœºçš„åŸåˆ™ï¼šä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€‚</p></li></ul><h3 id="10-7-Azul-VM"><a href="#10-7-Azul-VM" class="headerlink" title="10.7 Azul VM"></a>10.7 Azul VM</h3><ul><li>å‰é¢ä¸‰å¤§â€œé«˜æ€§èƒ½Javaè™šæ‹Ÿæœºâ€ä½¿ç”¨åœ¨é€šç”¨ç¡¬ä»¶å¹³å°ä¸Š</li><li><p>è¿™é‡ŒAzul VWå’ŒBEA Liquid VMæ˜¯<strong>ä¸ç‰¹å®šç¡¬ä»¶å¹³å°ç»‘å®šã€è½¯ç¡¬ä»¶é…åˆçš„ä¸“æœ‰è™šæ‹Ÿæœº</strong></p><ul><li>é«˜æ€§èƒ½Javaè™šæ‹Ÿæœºä¸­çš„æˆ˜æ–—æœºã€‚</li></ul></li><li><p>Azul VMæ˜¯Azul Systemså…¬å¸åœ¨HotSpotåŸºç¡€ä¸Šè¿›è¡Œå¤§é‡æ”¹è¿›ï¼Œè¿è¡ŒäºAzul Systemså…¬å¸çš„ä¸“æœ‰ç¡¬ä»¶Vegaç³»ç»Ÿä¸Šçš„avaè™šæ‹Ÿæœºã€‚</p></li><li><p><strong>æ¯ä¸ªAzul VMå®ä¾‹éƒ½å¯ä»¥ç®¡ç†è‡³å°‘æ•°åä¸ªCPUå’Œæ•°ç™¾GBå†…å­˜çš„ç¡¬ä»¶èµ„æºï¼Œå¹¶æä¾›åœ¨å·¨å¤§å†…å­˜èŒƒå›´å†…å®ç°å¯æ§çš„GCæ—¶é—´çš„åƒåœ¾æ”¶é›†å™¨ã€ä¸“æœ‰ç¡¬ä»¶ä¼˜åŒ–çš„çº¿ç¨‹è°ƒåº¦ç­‰ä¼˜ç§€ç‰¹æ€§</strong>ã€‚</p></li><li><p>2010å¹´ï¼ŒAzul Systemså…¬å¸å¼€å§‹ä»ç¡¬ä»¶è½¬å‘è½¯ä»¶ï¼Œå‘å¸ƒäº†è‡ªå·±çš„Zing JVMï¼Œå¯ä»¥åœ¨é€šç”¨x86å¹³å°ä¸Šæä¾›æ¥è¿‘äºVegaç³»ç»Ÿçš„ç‰¹æ€§ã€‚</p></li></ul><h3 id="10-8-Liquid-VM"><a href="#10-8-Liquid-VM" class="headerlink" title="10.8 Liquid VM"></a>10.8 Liquid VM</h3><ul><li><p>é«˜æ€§èƒ½Javaè™šæ‹Ÿæœºä¸­çš„æˆ˜æ–—æœºã€‚</p></li><li><p>BEAå…¬å¸å¼€å‘çš„ï¼Œç›´æ¥è¿è¡Œåœ¨è‡ªå®¶Hypervisorç³»ç»Ÿä¸ŠLiquid VMå³æ˜¯ç°åœ¨çš„JRockit VEï¼ˆVirtual Editionï¼‰ï¼Œ</p></li><li><p>Liquid VMå³æ˜¯ç°åœ¨çš„ JRockit VEï¼ˆVirtual Editionï¼‰ã€‚Liquid VMä¸éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼Œæˆ–è€…è¯´å®ƒè‡ªå·±æœ¬èº«å®ç°äº†ä¸€ä¸ªä¸“ç”¨æ“ä½œç³»ç»Ÿçš„å¿…è¦åŠŸèƒ½ï¼Œå¦‚çº¿ç¨‹è°ƒåº¦ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œæ”¯æŒç­‰ã€‚</p></li><li><p>éšç€JRockitè™šæ‹Ÿæœºç»ˆæ­¢å¼€å‘ï¼ŒLiquid vMé¡¹ç›®ä¹Ÿåœæ­¢äº†ã€‚</p></li></ul><h3 id="10-9Apache-Marmony"><a href="#10-9Apache-Marmony" class="headerlink" title="10. 9Apache Marmony"></a>10. 9Apache Marmony</h3><ul><li><p>Apacheä¹Ÿæ›¾ç»æ¨å‡ºè¿‡ä¸JDK1.5å’ŒJDK1.6å…¼å®¹çš„Javaè¿è¡Œå¹³å°Apache Harmonyã€‚</p></li><li><p>å®ƒæ˜¯IBMå’ŒIntelè”åˆå¼€å‘çš„å¼€æºJVMï¼Œå—åˆ°åŒæ ·å¼€æºçš„OpenJDKçš„å‹åˆ¶ï¼ŒSunåšå†³ä¸è®©Harmonyè·å¾—JCPè®¤è¯ï¼Œæœ€ç»ˆäº2011å¹´é€€å½¹ï¼ŒIBMè½¬è€Œå‚ä¸OpenJDK</p></li><li><p>è™½ç„¶ç›®å‰å¹¶æ²¡æœ‰Apache Harmonyè¢«å¤§è§„æ¨¡å•†ç”¨çš„æ¡ˆä¾‹ï¼Œä½†æ˜¯å®ƒçš„Javaç±»åº“ä»£ç å¸çº³è¿›äº†Android SDKã€‚</p></li></ul><h3 id="10-10-Micorsoft-JVM"><a href="#10-10-Micorsoft-JVM" class="headerlink" title="10.10 Micorsoft JVM"></a>10.10 Micorsoft JVM</h3><ul><li><p>å¾®è½¯ä¸ºäº†åœ¨IE3æµè§ˆå™¨ä¸­æ”¯æŒJava Appletsï¼Œå¼€å‘äº†Microsoft JVMã€‚</p></li><li><p>åªèƒ½åœ¨windowå¹³å°ä¸‹è¿è¡Œã€‚ä½†ç¡®æ˜¯å½“æ—¶Windowsä¸‹æ€§èƒ½æœ€å¥½çš„Java VMã€‚</p></li><li><p>1997å¹´ï¼Œsunä»¥ä¾µçŠ¯å•†æ ‡ã€ä¸æ­£å½“ç«äº‰ç½ªåæŒ‡æ§å¾®è½¯æˆåŠŸï¼Œèµ”äº†sunå¾ˆå¤šé’±ã€‚å¾®è½¯windowsXP SP3ä¸­æŠ¹æ‰äº†å…¶VMã€‚ç°åœ¨windowsä¸Šå®‰è£…çš„jdkéƒ½æ˜¯HotSpotã€‚</p></li></ul><h3 id="10-11-Taobao-JVM"><a href="#10-11-Taobao-JVM" class="headerlink" title="10.11 Taobao JVM"></a>10.11 Taobao JVM</h3><ul><li><p>ç”±Ali JVMå›¢é˜Ÿå‘å¸ƒã€‚é˜¿é‡Œï¼Œå›½å†…ä½¿ç”¨Javaæœ€å¼ºå¤§çš„å…¬å¸ï¼Œè¦†ç›–äº‘è®¡ç®—ã€é‡‘èã€ç‰©æµã€ç”µå•†ç­‰ä¼—å¤šé¢†åŸŸï¼Œéœ€è¦è§£å†³é«˜å¹¶å‘ã€é«˜å¯ç”¨ã€åˆ†å¸ƒå¼çš„å¤åˆé—®é¢˜ã€‚æœ‰å¤§é‡çš„å¼€æºäº§å“ã€‚</p></li><li><p><strong>åŸºäºOpenJDKå¼€å‘äº†è‡ªå·±çš„å®šåˆ¶ç‰ˆæœ¬AlibabaJDK</strong>ï¼Œç®€ç§°AJDKã€‚æ˜¯æ•´ä¸ªé˜¿é‡ŒJavaä½“ç³»çš„åŸºçŸ³ã€‚</p></li><li><p>åŸºäºOpenJDK Hotspot VMå‘å¸ƒçš„å›½å†…ç¬¬ä¸€ä¸ªä¼˜åŒ–ã€<strong>æ·±åº¦å®šåˆ¶ä¸”å¼€æºçš„é«˜æ€§èƒ½æœåŠ¡å™¨ç‰ˆJavaè™šæ‹Ÿæœºã€‚</strong></p><ul><li>åˆ›æ–°çš„GCIHï¼ˆGC invisible heapï¼‰æŠ€æœ¯å®ç°äº†off-heapï¼Œ<strong>å³å°†ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„Javaå¯¹è±¡ä»heapä¸­ç§»åˆ°heapä¹‹å¤–ï¼Œå¹¶ä¸”GCä¸èƒ½ç®¡ç†GCIHå†…éƒ¨çš„Javaå¯¹è±¡ï¼Œä»¥æ­¤è¾¾åˆ°é™ä½GCçš„å›æ”¶é¢‘ç‡å’Œæå‡GCçš„å›æ”¶æ•ˆç‡çš„ç›®çš„ã€‚</strong></li><li>GCIHä¸­çš„å¯¹è±¡è¿˜èƒ½å¤Ÿåœ¨å¤šä¸ªJavaè™šæ‹Ÿæœºè¿›ç¨‹ä¸­å®ç°å…±äº«</li><li>ä½¿ç”¨crc32æŒ‡ä»¤å®ç°JVM intrinsicé™ä½JNIçš„è°ƒç”¨å¼€é”€</li><li>PMU hardwareçš„Java profiling toolå’Œè¯Šæ–­ååŠ©åŠŸèƒ½</li><li>é’ˆå¯¹å¤§æ•°æ®åœºæ™¯çš„ZenGc</li></ul></li><li><p>taobao vmåº”ç”¨åœ¨é˜¿é‡Œäº§å“ä¸Šæ€§èƒ½é«˜ï¼Œç¡¬ä»¶ä¸¥é‡ä¾èµ–intelçš„cpuï¼ŒæŸå¤±äº†å…¼å®¹æ€§ï¼Œä½†æé«˜äº†æ€§èƒ½</p><ul><li>ç›®å‰å·²ç»åœ¨æ·˜å®ã€å¤©çŒ«ä¸Šçº¿ï¼ŒæŠŠOracleå®˜æ–¹JVMç‰ˆæœ¬å…¨éƒ¨æ›¿æ¢äº†ã€‚</li></ul></li></ul><h3 id="10-12-Dalvik-VM"><a href="#10-12-Dalvik-VM" class="headerlink" title="10.12 Dalvik VM"></a>10.12 Dalvik VM</h3><ul><li><p>è°·æ­Œå¼€å‘çš„ï¼Œåº”ç”¨äºAndroidç³»ç»Ÿï¼Œå¹¶åœ¨Android2.2ä¸­æä¾›äº†JITï¼Œå‘å±•è¿…çŒ›ã€‚</p></li><li><p><strong>Dalvik VMåªèƒ½ç§°ä½œè™šæ‹Ÿæœºï¼Œè€Œä¸èƒ½ç§°ä½œâ€œJavaè™šæ‹Ÿæœºâ€</strong>ï¼Œå®ƒæ²¡æœ‰éµå¾ª Javaè™šæ‹Ÿæœºè§„èŒƒ</p></li><li><p>ä¸èƒ½ç›´æ¥æ‰§è¡ŒJavaçš„Classæ–‡ä»¶</p></li><li><p>åŸºäºå¯„å­˜å™¨æ¶æ„ï¼Œä¸æ˜¯jvmçš„æ ˆæ¶æ„ã€‚</p></li><li><p>æ‰§è¡Œçš„æ˜¯ç¼–è¯‘ä»¥åçš„dexï¼ˆDalvik Executableï¼‰æ–‡ä»¶ã€‚æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚</p><ul><li>å®ƒæ‰§è¡Œçš„dexï¼ˆDalvik Executableï¼‰æ–‡ä»¶å¯ä»¥é€šè¿‡classæ–‡ä»¶è½¬åŒ–è€Œæ¥ï¼Œä½¿ç”¨Javaè¯­æ³•ç¼–å†™åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤§éƒ¨åˆ†çš„Java APIç­‰ã€‚</li></ul></li><li><p>Android 5.0ä½¿ç”¨æ”¯æŒæå‰ç¼–è¯‘ï¼ˆAhead of Time Compilationï¼ŒAOTï¼‰çš„ART VMæ›¿æ¢Dalvik VMã€‚</p></li></ul><h3 id="10-13-Graal-VM"><a href="#10-13-Graal-VM" class="headerlink" title="10.13 Graal VM"></a>10.13 Graal VM</h3><ul><li><p>2018å¹´4æœˆï¼ŒOracle Labså…¬å¼€äº†Graal VMï¼Œå·ç§° â€œ<strong>Run Programs Faster Anywhere</strong>â€œï¼Œå‹ƒå‹ƒé‡å¿ƒã€‚ä¸1995å¹´javaçš„â€write onceï¼Œrun anywhereâ€é¥ç›¸å‘¼åº”ã€‚</p></li><li><p>Graa VMåœ¨HotSpot VMåŸºç¡€ä¸Šå¢å¼ºè€Œæˆçš„<strong>è·¨è¯­è¨€å…¨æ ˆè™šæ‹Ÿæœºï¼Œå¯ä»¥ä½œä¸ºâ€œä»»ä½•è¯­è¨€â€ çš„è¿è¡Œå¹³å°ä½¿ç”¨</strong>ã€‚è¯­è¨€åŒ…æ‹¬ï¼šJavaã€Scalaã€Groovyã€Kotlinï¼›Cã€C++ã€Javascriptã€Rubyã€Pythonã€Rç­‰</p></li><li><p>æ”¯æŒä¸åŒè¯­è¨€ä¸­æ··ç”¨å¯¹æ–¹çš„æ¥å£å’Œå¯¹è±¡ï¼Œæ”¯æŒè¿™äº›è¯­è¨€ä½¿ç”¨å·²ç»ç¼–å†™å¥½çš„æœ¬åœ°åº“æ–‡ä»¶</p></li><li><p>å·¥ä½œåŸç†æ˜¯å°†è¿™äº›è¯­è¨€çš„æºä»£ç æˆ–æºä»£ç ç¼–è¯‘åçš„ä¸­é—´æ ¼å¼ï¼Œé€šè¿‡è§£é‡Šå™¨è½¬æ¢ä¸ºèƒ½è¢«Graal VMæ¥å—çš„ä¸­é—´è¡¨ç¤ºã€‚Graal VMæä¾›Truffleå·¥å…·é›†å¿«é€Ÿæ„å»ºé¢å‘ä¸€ç§æ–°è¯­è¨€çš„è§£é‡Šå™¨ã€‚åœ¨è¿è¡Œæ—¶è¿˜èƒ½è¿›è¡Œå³æ—¶ç¼–è¯‘ä¼˜åŒ–ï¼Œè·å¾—æ¯”åŸç”Ÿç¼–è¯‘å™¨æ›´ä¼˜ç§€çš„æ‰§è¡Œæ•ˆç‡ã€‚</p></li><li><p><strong>å¦‚æœè¯´HotSpotæœ‰ä¸€å¤©çœŸçš„è¢«å–ä»£ï¼ŒGraal VMå¸Œæœ›æœ€å¤§</strong>ã€‚ä½†æ˜¯Javaçš„è½¯ä»¶ç”Ÿæ€æ²¡æœ‰ä¸æ¯«å˜åŒ–ã€‚</p></li></ul><h3 id="10-14-æ€»ç»“"><a href="#10-14-æ€»ç»“" class="headerlink" title="10.14 æ€»ç»“"></a>10.14 æ€»ç»“</h3><p>å…·ä½“JVMçš„å†…å­˜ç»“æ„ï¼Œå…¶å®å–å†³äºå…¶å®ç°ï¼Œä¸åŒå‚å•†çš„JVMï¼Œæˆ–è€…åŒä¸€å‚å•†å‘å¸ƒçš„ä¸åŒç‰ˆæœ¬ï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨ä¸€å®šå·®å¼‚ã€‚ä¸»è¦ä»¥oracle HotSpot VMä¸ºé»˜è®¤è™šæ‹Ÿæœºã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#1ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;1ã€å‰è¨€&quot;&gt;&lt;/a&gt;1ã€å‰è¨€&lt;/h2&gt;&lt;h3 id=&quot;1-1-ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜&quot;&gt;&lt;a href=&quot;#1-1-ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;1.1 ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜?&quot;&gt;&lt;/a&gt;1.1 ä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜?&lt;/h3&gt;
    
    </summary>
    
    
      <category term="åŸç†" scheme="https://mysticalguest.github.io/categories/%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="Java" scheme="https://mysticalguest.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¸ç¼“å­˜</title>
    <link href="https://mysticalguest.github.io/2020/08/28/Spring/AdvancedSpringBootCache/"/>
    <id>https://mysticalguest.github.io/2020/08/28/Spring/AdvancedSpringBootCache/</id>
    <published>2020-08-28T04:02:16.963Z</published>
    <updated>2020-09-08T15:47:17.220Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€Spring-Bootä¸ç¼“å­˜"><a href="#1ã€Spring-Bootä¸ç¼“å­˜" class="headerlink" title="1ã€Spring Bootä¸ç¼“å­˜"></a>1ã€Spring Bootä¸ç¼“å­˜</h2><a id="more"></a><p>ç¼“å­˜åº”è¯¥æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½åº”è€ƒè™‘çš„åŠŸèƒ½ï¼Œç”¨æ¥åŠ é€Ÿç³»ç»Ÿçš„è®¿é—®ä»¥åŠæå‡ç³»ç»Ÿçš„æ€§èƒ½ï¼›</p><p>å¼•å…¥ç¼“å­˜ä¸­é—´ä»¶ï¼Œå°†é«˜é¢‘ä¿¡æ¯ä»æ•°æ®åº“å­˜å…¥ç¼“å­˜ï¼Œä»ç¼“å­˜æ‹¿æ•°æ®ï¼›å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåœ¨åˆ°æ•°æ®åº“ä¸­æŸ¥æ‰¾å—ï¼Œç»§ç»­æ”¾å…¥ç¼“å­˜ã€‚åº”ç”¨ç¨‹åºå’Œç¼“å­˜çš„äº¤äº’å¼éå¸¸å¿«çš„ã€‚</p><p>è¿˜æœ‰éªŒè¯ç è¿™äº›ä¸´æ—¶æ€§æ•°æ®å°±æ²¡æœ‰å¿…è¦å­˜åœ¨æ•°æ®åº“ä¸­äº†ï¼Œç¼“å­˜æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p><p>é‚£ä¹ˆä¸ºäº†ç»Ÿä¸€ç¼“å­˜çš„å¼€å‘è§„èŒƒä»¥åŠæå‡ç³»ç»Ÿçš„æ‰©å±•æ€§ï¼ŒJ2EEå‘å¸ƒäº†<strong>JSR-107è§„èŒƒ</strong>ï¼Œä½†ç”±äºæ•´åˆéš¾åº¦å¤§ï¼Œç”¨çš„æ¯”è¾ƒå°‘ã€‚JSR-107è§„èŒƒå®šä¹‰çš„éƒ½æ˜¯ä¸€äº›æ¥å£ï¼Œè¿™æ ·çš„å¥½å¤„å°±ç±»ä¼¼JDBCä¸€æ ·ï¼Œé¢å‘æ¥å£ç¼–ç¨‹ã€‚ä½†å¸‚é¢ä¸Šçš„ç»„ä»¶ä¸éƒ½æä¾›JSR-107çš„å®ç°ã€‚ä½†ä¸ºäº†ç®€åŒ–å¼€å‘ï¼ŒSpringæ›´å¤šä½¿ç”¨çš„æ˜¯è‡ªå·±çš„<strong>Springç¼“å­˜æŠ½è±¡</strong>ã€‚</p><h3 id="1-1-JSR107"><a href="#1-1-JSR107" class="headerlink" title="1.1 JSR107"></a>1.1 JSR107</h3><p>Java Cachingå®šä¹‰äº†5ä¸ªæ ¸å¿ƒæ¥å£ï¼Œåˆ†åˆ«æ˜¯<strong>CachingProvider</strong>, <strong>CacheManager</strong>, <strong>Cache</strong>, <strong>Entry</strong> å’Œ <strong>Expiry</strong>ã€‚</p><ul><li><p><strong>CachingProvider</strong>å®šä¹‰äº†åˆ›å»ºã€é…ç½®ã€è·å–ã€ç®¡ç†å’Œæ§åˆ¶å¤šä¸ª<strong>CacheManager</strong>ã€‚ä¸€ä¸ªåº”ç”¨å¯ä»¥åœ¨è¿è¡ŒæœŸè®¿é—®å¤šä¸ªCachingProviderã€‚</p></li><li><p><strong>CacheManager</strong>å®šä¹‰äº†åˆ›å»ºã€é…ç½®ã€è·å–ã€ç®¡ç†å’Œæ§åˆ¶å¤šä¸ªå”¯ä¸€å‘½åçš„<strong>Cache</strong>ï¼Œè¿™äº›Cacheå­˜åœ¨äºCacheManagerçš„ä¸Šä¸‹æ–‡ä¸­ã€‚ä¸€ä¸ªCacheManagerä»…è¢«ä¸€ä¸ªCachingProvideræ‰€æ‹¥æœ‰ã€‚</p></li><li><p><strong>Cache</strong>æ˜¯ä¸€ä¸ªç±»ä¼¼Mapçš„æ•°æ®ç»“æ„å¹¶ä¸´æ—¶å­˜å‚¨ä»¥Keyä¸ºç´¢å¼•çš„å€¼ã€‚ä¸€ä¸ªCacheä»…è¢«ä¸€ä¸ªCacheManageræ‰€æ‹¥æœ‰ã€‚</p></li><li><p><strong>Entry</strong>æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨Cacheä¸­çš„key-valueå¯¹ã€‚</p></li><li><p><strong>Expiry</strong> æ¯ä¸€ä¸ªå­˜å‚¨åœ¨Cacheä¸­çš„æ¡ç›®æœ‰ä¸€ä¸ªå®šä¹‰çš„æœ‰æ•ˆæœŸã€‚ä¸€æ—¦è¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œæ¡ç›®ä¸ºè¿‡æœŸçš„çŠ¶æ€ã€‚ä¸€æ—¦è¿‡æœŸï¼Œæ¡ç›®å°†ä¸å¯è®¿é—®ã€æ›´æ–°å’Œåˆ é™¤ã€‚ç¼“å­˜æœ‰æ•ˆæœŸå¯ä»¥é€šè¿‡ExpiryPolicyè®¾ç½®ã€‚</p></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/Advanced/JSR.png" alt="JSR" style="zoom:80%;" /></p><h3 id="1-2-Springç¼“å­˜æŠ½è±¡"><a href="#1-2-Springç¼“å­˜æŠ½è±¡" class="headerlink" title="1.2 Springç¼“å­˜æŠ½è±¡"></a>1.2 Springç¼“å­˜æŠ½è±¡</h3><p>Springä»3.1å¼€å§‹å®šä¹‰äº†org.springframework.cache.Cacheå’Œorg.springframework.cache.CacheManageræ¥å£æ¥ç»Ÿä¸€ä¸åŒçš„ç¼“å­˜æŠ€æœ¯ï¼›</p><p>å¹¶æ”¯æŒä½¿ç”¨JCacheï¼ˆJSR-107ï¼‰æ³¨è§£ç®€åŒ–æˆ‘ä»¬å¼€å‘ï¼›</p><ul><li><p>Cacheæ¥å£ä¸ºç¼“å­˜çš„ç»„ä»¶è§„èŒƒå®šä¹‰ï¼ŒåŒ…å«ç¼“å­˜çš„å„ç§æ“ä½œé›†åˆï¼›</p></li><li><p>Cacheæ¥å£ä¸‹Springæä¾›äº†å„ç§xxxCacheçš„å®ç°ï¼›å¦‚RedisCacheï¼ŒEhCacheCache , ConcurrentMapCacheç­‰ï¼›</p></li><li><p>æ¯æ¬¡è°ƒç”¨éœ€è¦ç¼“å­˜åŠŸèƒ½çš„æ–¹æ³•æ—¶ï¼ŒSpringä¼šæ£€æŸ¥æ£€æŸ¥æŒ‡å®šå‚æ•°çš„æŒ‡å®šçš„ç›®æ ‡æ–¹æ³•æ˜¯å¦å·²ç»è¢«è°ƒç”¨è¿‡ï¼›å¦‚æœæœ‰å°±ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ–¹æ³•è°ƒç”¨åçš„ç»“æœï¼Œå¦‚æœæ²¡æœ‰å°±è°ƒç”¨æ–¹æ³•å¹¶ç¼“å­˜ç»“æœåè¿”å›ç»™ç”¨æˆ·ã€‚ä¸‹æ¬¡è°ƒç”¨ç›´æ¥ä»ç¼“å­˜ä¸­è·å–ã€‚</p></li><li><p>ä½¿ç”¨Springç¼“å­˜æŠ½è±¡æ—¶æˆ‘ä»¬éœ€è¦å…³æ³¨ä»¥ä¸‹ä¸¤ç‚¹ï¼›</p><ul><li>ç¡®å®šæ–¹æ³•éœ€è¦è¢«ç¼“å­˜ä»¥åŠä»–ä»¬çš„ç¼“å­˜ç­–ç•¥</li><li>ä»ç¼“å­˜ä¸­è¯»å–ä¹‹å‰ç¼“å­˜å­˜å‚¨çš„æ•°æ®</li></ul></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/Advanced/CacheManager.png" alt="CacheManager" style="zoom:80%;" /></p><h3 id="1-3-å‡ ä¸ªé‡è¦æ¦‚å¿µ-amp-ç¼“å­˜æ³¨è§£"><a href="#1-3-å‡ ä¸ªé‡è¦æ¦‚å¿µ-amp-ç¼“å­˜æ³¨è§£" class="headerlink" title="1.3 å‡ ä¸ªé‡è¦æ¦‚å¿µ&amp;ç¼“å­˜æ³¨è§£"></a>1.3 å‡ ä¸ªé‡è¦æ¦‚å¿µ&amp;ç¼“å­˜æ³¨è§£</h3><div class="table-container"><table><thead><tr><th><strong>Cache</strong></th><th>ç¼“å­˜æ¥å£ï¼Œå®šä¹‰ç¼“å­˜æ“ä½œã€‚å®ç°æœ‰ï¼š<strong>RedisCache</strong>ã€<strong>EhCacheCache</strong>ã€<strong>ConcurrentMapCache</strong>ç­‰</th></tr></thead><tbody><tr><td><strong>CacheManager</strong></td><td><strong>ç¼“å­˜ç®¡ç†å™¨ï¼Œç®¡ç†å„ç§ç¼“å­˜ï¼ˆCacheï¼‰ç»„ä»¶</strong></td></tr><tr><td><strong>@Cacheable</strong></td><td><strong>ä¸»è¦é’ˆå¯¹æ–¹æ³•é…ç½®ï¼Œèƒ½å¤Ÿæ ¹æ®æ–¹æ³•çš„è¯·æ±‚å‚æ•°å¯¹å…¶ç»“æœè¿›è¡Œç¼“å­˜</strong></td></tr><tr><td><strong>@CacheEvict</strong></td><td><strong>æ¸…ç©ºç¼“å­˜</strong></td></tr><tr><td><strong>@CachePut</strong></td><td><strong>ä¿è¯æ–¹æ³•è¢«è°ƒç”¨ï¼Œåˆå¸Œæœ›ç»“æœè¢«ç¼“å­˜ã€‚</strong></td></tr><tr><td><strong>@EnableCaching</strong></td><td><strong>å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜</strong></td></tr><tr><td><strong>keyGenerator</strong></td><td><strong>ç¼“å­˜æ•°æ®æ—¶keyç”Ÿæˆç­–ç•¥</strong></td></tr><tr><td><strong>serialize</strong></td><td><strong>ç¼“å­˜æ•°æ®æ—¶valueåºåˆ—åŒ–ç­–ç•¥</strong></td></tr></tbody></table></div><p>éƒ½æ˜¯ä½œç”¨äºç¼“å­˜ï¼Œä¸ä½œç”¨äºæ•°æ®åº“ï¼Ÿ</p><h3 id="1-4-æ­å»ºåŸºæœ¬ç¯å¢ƒ"><a href="#1-4-æ­å»ºåŸºæœ¬ç¯å¢ƒ" class="headerlink" title="1.4 æ­å»ºåŸºæœ¬ç¯å¢ƒ"></a>1.4 æ­å»ºåŸºæœ¬ç¯å¢ƒ</h3><ul><li>åˆ›å»ºå‡ºdepartmentå’Œemployeeè¡¨</li></ul><ul><li>åˆ›å»ºjavaBeanå°è£…æ•°æ®</li></ul><ul><li>æ•´åˆMyBatisæ“ä½œæ•°æ®åº“<ul><li>é…ç½®æ•°æ®æºä¿¡æ¯</li><li>ä½¿ç”¨æ³¨è§£ç‰ˆçš„MyBatis</li><li>@MapperScanæŒ‡å®šéœ€è¦æ‰«æçš„mapperæ¥å£æ‰€åœ¨çš„åŒ…</li></ul></li></ul><h2 id="2ã€å¿«é€Ÿä½“éªŒç¼“å­˜"><a href="#2ã€å¿«é€Ÿä½“éªŒç¼“å­˜" class="headerlink" title="2ã€å¿«é€Ÿä½“éªŒç¼“å­˜"></a>2ã€å¿«é€Ÿä½“éªŒç¼“å­˜</h2><p>ç¼“å­˜SpELå¯ç”¨å…ƒæ•°æ®</p><div class="table-container"><table><thead><tr><th><strong>åå­—</strong></th><th><strong>ä½ç½®</strong></th><th><strong>æè¿°</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>methodName</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„æ–¹æ³•å</td><td>#root.methodName</td></tr><tr><td>method</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„æ–¹æ³•</td><td>#root.method.name</td></tr><tr><td>target</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡</td><td>#root.target</td></tr><tr><td>targetClass</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡ç±»</td><td>#root.targetClass</td></tr><tr><td>args</td><td>root object</td><td>å½“å‰è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</td><td>#root.args[0]</td></tr><tr><td>caches</td><td>root object</td><td>å½“å‰æ–¹æ³•è°ƒç”¨ä½¿ç”¨çš„ç¼“å­˜åˆ—è¡¨ï¼ˆå¦‚@Cacheable(value={â€œcache1â€,  â€œcache2â€})ï¼‰ï¼Œåˆ™æœ‰ä¸¤ä¸ªcache</td><td>#root.caches[0].name</td></tr><tr><td><em>argument name</em></td><td>evaluation context</td><td>æ–¹æ³•å‚æ•°çš„åå­—. å¯ä»¥ç›´æ¥ #å‚æ•°å ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ #p0æˆ–#a0 çš„å½¢å¼ï¼Œ0ä»£è¡¨å‚æ•°çš„ç´¢å¼•ï¼›</td><td>#iban ã€ #a0 ã€ #p0</td></tr><tr><td>result</td><td>evaluation context</td><td>æ–¹æ³•æ‰§è¡Œåçš„è¿”å›å€¼ï¼ˆä»…å½“æ–¹æ³•æ‰§è¡Œä¹‹åçš„åˆ¤æ–­æœ‰æ•ˆï¼Œå¦‚â€˜unlessâ€™ï¼Œâ€™cache putâ€™çš„è¡¨è¾¾å¼ â€™cache evictâ€™çš„è¡¨è¾¾å¼beforeInvocation=falseï¼‰</td><td>#result</td></tr></tbody></table></div><p>æ­¥éª¤ï¼š</p><h3 id="2-1-å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜-EnableCaching"><a href="#2-1-å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜-EnableCaching" class="headerlink" title="2.1 å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜ @EnableCaching"></a>2.1 å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜ @EnableCaching</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åŠ¨ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringinitializrApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Start..."</span>);</span><br><span class="line">    SpringApplication.run(SpringinitializrApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    System.out.println(<span class="string">"Success..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯"><a href="#2-2-æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯" class="headerlink" title="2.2 æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯"></a>2.2 æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯</h3><p>å°†æ–¹æ³•çš„è¿è¡Œç»“æœè¿›è¡Œç¼“å­˜ï¼›ä»¥åå†è¦ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œä¸ç”¨è°ƒç”¨æ–¹æ³•ï¼›</p><p>CacheManagerç®¡ç†å¤šä¸ªCacheç»„ä»¶çš„ï¼Œå¯¹ç¼“å­˜çš„çœŸæ­£CRUDæ“ä½œåœ¨Cacheç»„ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªç¼“å­˜ç»„ä»¶æœ‰è‡ªå·±å”¯ä¸€ä¸€ä¸ªåå­—ï¼›</p><h3 id="2-3-Cacheable"><a href="#2-3-Cacheable" class="headerlink" title="2.3 @Cacheable"></a>2.3 @Cacheable</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DepartmentController.java</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  DepartmentService departmentService;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/service/dept/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Department <span class="title">getDepart</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> departmentService.getDepartment(id);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-1-å‡ ä¸ªå±æ€§ï¼š"><a href="#2-3-1-å‡ ä¸ªå±æ€§ï¼š" class="headerlink" title="2.3.1 å‡ ä¸ªå±æ€§ï¼š"></a>2.3.1 å‡ ä¸ªå±æ€§ï¼š</h4><div class="table-container"><table><thead><tr><th>@Cacheableçš„å±æ€§</th><th>è¯¦æƒ…</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>cacheNames/value</td><td>æŒ‡å®šç¼“å­˜ç»„ä»¶çš„åå­—;å°†æ–¹æ³•çš„è¿”å›ç»“æœæ”¾åœ¨å“ªä¸ªç¼“å­˜ä¸­ï¼Œæ˜¯æ•°ç»„çš„æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªç¼“å­˜</td><td></td></tr><tr><td>key</td><td>ç¼“å­˜æ•°æ®ä½¿ç”¨çš„keyï¼›å¯ä»¥ç”¨å®ƒæ¥æŒ‡å®šã€‚é»˜è®¤æ˜¯ä½¿ç”¨æ–¹æ³•å‚æ•°çš„å€¼  1-æ–¹æ³•çš„è¿”å›å€¼</td><td>ç¼–å†™SpELï¼› #i d;å‚æ•°idçš„å€¼   #a0  #p0  #root.args[0]<br>getEmp[2]</td></tr><tr><td>keyGenerator</td><td>keyçš„ç”Ÿæˆå™¨ï¼›å¯ä»¥è‡ªå·±æŒ‡å®škeyçš„ç”Ÿæˆå™¨çš„ç»„ä»¶id</td><td>key/keyGeneratorï¼šäºŒé€‰ä¸€ä½¿ç”¨</td></tr><tr><td>cacheManager</td><td>æŒ‡å®šç¼“å­˜ç®¡ç†å™¨ï¼›æˆ–è€…cacheResolveræŒ‡å®šè·å–è§£æå™¨</td><td></td></tr><tr><td>condition</td><td>æŒ‡å®šç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹æ‰ç¼“å­˜ï¼›</td><td>condition = â€œ#id&gt;0â€<br/>condition = â€œ#a0&gt;1â€ï¼šç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼&gt;1çš„æ—¶å€™æ‰è¿›è¡Œç¼“å­˜</td></tr><tr><td>unless</td><td>å¦å®šç¼“å­˜ï¼›å½“unlessæŒ‡å®šçš„æ¡ä»¶ä¸ºtrueï¼Œæ–¹æ³•çš„è¿”å›å€¼å°±ä¸ä¼šè¢«ç¼“å­˜ï¼›å¯ä»¥è·å–åˆ°ç»“æœè¿›è¡Œåˆ¤æ–­</td><td>unless = â€œ#result == nullâ€<br>unless = â€œ#a0==2â€:å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯2ï¼Œç»“æœä¸ç¼“å­˜</td></tr><tr><td>sync</td><td>æ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ¨¡å¼</td></tr></tbody></table></div><h4 id="2-3-2-åº”ç”¨ä¸¾ä¾‹"><a href="#2-3-2-åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="2.3.2 åº”ç”¨ä¸¾ä¾‹"></a>2.3.2 åº”ç”¨ä¸¾ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DepartmentService.java</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  DepartmentMapper departmentMapper;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// @Cacheable(cacheNames = "dept", key = "#id")</span></span><br><span class="line">  <span class="comment">// @Cacheable(cacheNames = &#123;"dept", "tdept"&#125;, key = "#id") å¤šç¼“å­˜å</span></span><br><span class="line">  <span class="comment">// @Cacheable(cacheNames = "dept", key = "#root.args[0]", condition = "#id&gt;0")</span></span><br><span class="line">  <span class="comment">// @Cacheable(cacheNames = "dept", key = "#root.args[0]", unless = "#result == null")</span></span><br><span class="line">  <span class="meta">@Cacheable</span>(cacheNames = <span class="string">"dept"</span>, key = <span class="string">"#root.args[0]"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Department <span class="title">getDepartment</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æŸ¥è¯¢"</span>+id+<span class="string">"å·éƒ¨é—¨"</span>);</span><br><span class="line">    Department dept = departmentMapper.getDeptById(id);</span><br><span class="line">    <span class="keyword">return</span> dept;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-3-è¿è¡Œä¸»ç¨‹åº"><a href="#2-3-3-è¿è¡Œä¸»ç¨‹åº" class="headerlink" title="2.3.3 è¿è¡Œä¸»ç¨‹åº"></a>2.3.3 è¿è¡Œä¸»ç¨‹åº</h4><p>è®¿é—®<a href="http://localhost:8088/service/dept/1ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œç„¶ååœ¨åˆ·æ–°æµè§ˆå™¨å†æŸ¥çœ‹æ§åˆ¶å°ï¼Œå‘ç°åå°å¹¶ä¸æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼š">http://localhost:8088/service/dept/1ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œç„¶ååœ¨åˆ·æ–°æµè§ˆå™¨å†æŸ¥çœ‹æ§åˆ¶å°ï¼Œå‘ç°åå°å¹¶ä¸æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼š</a></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/Advanced/cacheable-test.PNG" alt="Cacheable"></p><h4 id="2-3-4-åˆ†æç¼“å­˜çš„å·¥ä½œåŸç†ä»¥åŠå·¥ä½œæ­¥éª¤"><a href="#2-3-4-åˆ†æç¼“å­˜çš„å·¥ä½œåŸç†ä»¥åŠå·¥ä½œæ­¥éª¤" class="headerlink" title="2.3.4 åˆ†æç¼“å­˜çš„å·¥ä½œåŸç†ä»¥åŠå·¥ä½œæ­¥éª¤"></a>2.3.4 åˆ†æç¼“å­˜çš„å·¥ä½œåŸç†ä»¥åŠå·¥ä½œæ­¥éª¤</h4><p>ç»“åˆä»¥ä¸Šä¾‹å­æ¥ï¼š</p><ul><li><p>è‡ªåŠ¨é…ç½®ç±»å…¥æ‰‹ï¼š<code>CacheAutoConfiguration.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;CacheManager<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnBean</span>(</span>&#123;CacheAspectSupport<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnMissingBean</span>(</span></span><br><span class="line"><span class="class">  <span class="title">value</span> </span>= &#123;CacheManager<span class="class">.<span class="keyword">class</span>&#125;,</span></span><br><span class="line"><span class="class">  <span class="title">name</span> </span>= &#123;<span class="string">"cacheResolver"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(&#123;CacheProperties<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureBefore</span>(</span>&#123;HibernateJpaAutoConfiguration<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureAfter</span>(</span>&#123;</span><br><span class="line">  CouchbaseAutoConfiguration<span class="class">.<span class="keyword">class</span>, </span></span><br><span class="line"><span class="class">  <span class="title">HazelcastAutoConfiguration</span>.<span class="title">class</span>, </span></span><br><span class="line"><span class="class">  <span class="title">RedisAutoConfiguration</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class">&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">Import</span>(</span>&#123;CacheAutoConfiguration.CacheConfigurationImportSelector<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">CacheAutoConfiguration</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> String VALIDATOR_BEAN_NAME = <span class="string">"cacheAutoConfigurationValidator"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">CacheAutoConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> CacheManagerCustomizers <span class="title">cacheManagerCustomizers</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    ObjectProvider&lt;List&lt;CacheManagerCustomizer&lt;?&gt;&gt;&gt; customizers</span></span></span><br><span class="line"><span class="function"><span class="params">  )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CacheManagerCustomizers((List)customizers.getIfAvailable());</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheConfigurationImportSelector</span> <span class="keyword">implements</span> <span class="title">ImportSelector</span> </span>&#123;</span><br><span class="line">    CacheConfigurationImportSelector() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">      CacheType[] types = CacheType.values();</span><br><span class="line">      String[] imports = <span class="keyword">new</span> String[types.length];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; types.length; ++i) &#123;</span><br><span class="line">        imports[i] = CacheConfigurations.getConfigurationClass(types[i]);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> imports;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¾äº†ä¸€äº›ç¼“å­˜ç®¡ç†çš„è‡ªå®šä¹‰å™¨ï¼ˆ<code>CacheManagerCustomizers</code>ï¼‰ç­‰ï¼›</p></li><li><p>å…³æ³¨ä¸€ä¸‹<code>@Import({CacheAutoConfiguration.CacheConfigurationImportSelector.class})</code>ï¼ŒæŸ¥çœ‹æºç æ¥åˆ°ä¸Šé¢ä»£ç ä¸­çš„<code>CacheConfigurationImportSelector</code>æ–¹æ³•ï¼›åœ¨æ–¹æ³•ä½“ä¸­è°ƒç”¨çš„<code>selectImports</code>æ‰“ä¸Šæ–­ç‚¹ï¼Œdebugæ¥æŸ¥çœ‹ç»™å®¹å™¨ä¸­å¯¼å…¥äº†å“ªäº›ç¼“å­˜ç»„ä»¶ï¼šç¼“å­˜çš„é…ç½®ç±»</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/Advanced/CacheConfigurationImportSelector.png" alt="CacheConfigurationImportSelector"></p></li><li><p>å“ªä¸ªé…ç½®ç±»é»˜è®¤ç”Ÿæ•ˆï¼Ÿé…ç½®æ–‡ä»¶åŠ å…¥ä»¥ä¸‹é…ç½®ï¼Œç„¶åè¿è¡Œ<strong>ä¸»ç¨‹åº</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€è‡ªåŠ¨é…ç½®æŠ¥å‘Š</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ§åˆ¶å°ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">=========================</span><br><span class="line">AUTO<span class="literal">-CONFIGURATION</span> REPORT</span><br><span class="line">=========================</span><br><span class="line"></span><br><span class="line">Positive matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   SimpleCacheConfiguration matched:</span><br><span class="line">      - Cache org.springframework.boot.autoconfigure.cache.SimpleCacheConfiguration </span><br><span class="line">            automatic cache type (CacheCondition)</span><br><span class="line">      - @ConditionalOnMissingBean (types: org.springframework.cache.CacheManager; </span><br><span class="line">            SearchStrategy: all) did not find any beans (OnBeanCondition)</span><br><span class="line">      </span><br><span class="line">   ...</span><br><span class="line">   </span><br><span class="line">Negative matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   ActiveMQAutoConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">         - @ConditionalOnClass </span><br><span class="line">            did not find required classes <span class="string">'javax.jms.ConnectionFactory'</span>, </span><br><span class="line">            <span class="string">'org.apache.activemq.ActiveMQConnectionFactory'</span> (OnClassCondition)</span><br><span class="line"></span><br><span class="line">   AopAutoConfiguration.CglibAutoProxyConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">            - @ConditionalOnProperty (spring.aop.proxy<span class="literal">-target</span><span class="literal">-class</span>=true) </span><br><span class="line">            did not find property <span class="string">'proxy-target-class'</span> (OnPropertyCondition)</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºæ˜¯<code>SimpleCacheConfiguration</code>é…ç½®ç±»ç”Ÿæ•ˆï¼›ç»™å®¹å™¨ä¸­æ³¨å†Œäº†ä¸€ä¸ª<code>CacheManager</code>ï¼š<code>ConcurrentMapCacheManager</code></p></li><li><p>å¯ä»¥è·å–å’Œåˆ›å»ºConcurrentMapCacheç±»å‹çš„ç¼“å­˜ç»„ä»¶ï¼›å…¶çš„ä½œç”¨å°†æ•°æ®ä¿å­˜åœ¨ConcurrentMapä¸­ï¼›</p></li></ul><h4 id="2-3-5-Cacheableè¿è¡Œæµç¨‹"><a href="#2-3-5-Cacheableè¿è¡Œæµç¨‹" class="headerlink" title="2.3.5 @Cacheableè¿è¡Œæµç¨‹"></a>2.3.5 @Cacheableè¿è¡Œæµç¨‹</h4><ul><li><p>æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå…ˆå»æŸ¥è¯¢Cacheï¼ˆç¼“å­˜ç»„ä»¶ï¼‰ï¼ŒæŒ‰ç…§cacheNamesæŒ‡å®šçš„åå­—è·å–ï¼›</p><p>ï¼ˆCacheManagerå…ˆè·å–ç›¸åº”çš„ç¼“å­˜ï¼‰ï¼Œç¬¬ä¸€æ¬¡è·å–ç¼“å­˜å¦‚æœæ²¡æœ‰Cacheç»„ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p></li><li><p>å»Cacheä¸­æŸ¥æ‰¾ç¼“å­˜çš„å†…å®¹ï¼Œä½¿ç”¨ä¸€ä¸ªkeyï¼Œé»˜è®¤å°±æ˜¯æ–¹æ³•çš„å‚æ•°ï¼›</p><p>keyæ˜¯æŒ‰ç…§æŸç§ç­–ç•¥ç”Ÿæˆçš„ï¼›é»˜è®¤æ˜¯ä½¿ç”¨keyGeneratorç”Ÿæˆçš„ï¼Œé»˜è®¤ä½¿ç”¨SimpleKeyGeneratorç”Ÿæˆkeyï¼›</p><p>SimpleKeyGeneratorç”Ÿæˆkeyçš„é»˜è®¤ç­–ç•¥ï¼›</p><ul><li>å¦‚æœæ²¡æœ‰å‚æ•°ï¼›key=new SimpleKey()ï¼›</li><li>å¦‚æœæœ‰ä¸€ä¸ªå‚æ•°ï¼škey=å‚æ•°çš„å€¼</li><li>å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼škey=new SimpleKey(params)ï¼›</li></ul></li><li><p>æ²¡æœ‰æŸ¥åˆ°ç¼“å­˜å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼›</p></li><li>å°†ç›®æ ‡æ–¹æ³•è¿”å›çš„ç»“æœï¼Œæ”¾è¿›ç¼“å­˜ä¸­</li></ul><blockquote><p>@Cacheableæ ‡æ³¨çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰å…ˆæ¥æ£€æŸ¥ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œé»˜è®¤æŒ‰ç…§å‚æ•°çš„å€¼ä½œä¸ºkeyå»æŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰å°±è¿è¡Œæ–¹æ³•å¹¶å°†ç»“æœæ”¾å…¥ç¼“å­˜ï¼›ä»¥åå†æ¥è°ƒç”¨å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</p></blockquote><p>æ ¸å¿ƒï¼š</p><ul><li>ä½¿ç”¨CacheManagerã€ConcurrentMapCacheManagerã€‘æŒ‰ç…§åå­—å¾—åˆ°Cacheã€ConcurrentMapCacheã€‘ç»„ä»¶</li><li>keyä½¿ç”¨keyGeneratorç”Ÿæˆçš„ï¼Œé»˜è®¤æ˜¯SimpleKeyGenerator</li></ul><h3 id="2-4-CacheEvict"><a href="#2-4-CacheEvict" class="headerlink" title="2.4 @CacheEvict"></a>2.4 @CacheEvict</h3><h3 id="2-5-CachePut"><a href="#2-5-CachePut" class="headerlink" title="2.5 @CachePut"></a>2.5 @CachePut</h3><p>é»˜è®¤ä½¿ç”¨çš„æ˜¯ConcurrentMapCacheManager==ConcurrentMapCacheï¼›å°†æ•°æ®ä¿å­˜åœ¨    ConcurrentMap<Object, Object>ä¸­</p><p>å¼€å‘ä¸­ä½¿ç”¨ç¼“å­˜ä¸­é—´ä»¶ï¼›redisã€memcachedã€ehcacheï¼›</p><p>ä¸‰ã€æ•´åˆredisä½œä¸ºç¼“å­˜</p><p>Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚</p><p>1ã€å®‰è£…redisï¼šä½¿ç”¨dockerï¼›</p><p>2ã€å¼•å…¥redisçš„starter</p><p>3ã€é…ç½®redis</p><p>4ã€æµ‹è¯•ç¼“å­˜</p><p>åŸç†ï¼šCacheManager===Cache ç¼“å­˜ç»„ä»¶æ¥å®é™…ç»™ç¼“å­˜ä¸­å­˜å–æ•°æ®</p><p>1ï¼‰ã€å¼•å…¥redisçš„starterï¼Œå®¹å™¨ä¸­ä¿å­˜çš„æ˜¯ RedisCacheManagerï¼›</p><p>2ï¼‰ã€RedisCacheManager å¸®æˆ‘ä»¬åˆ›å»º RedisCache æ¥ä½œä¸ºç¼“å­˜ç»„ä»¶ï¼›RedisCacheé€šè¿‡æ“ä½œredisç¼“å­˜æ•°æ®çš„</p><p>3ï¼‰ã€é»˜è®¤ä¿å­˜æ•°æ® k-v éƒ½æ˜¯Objectï¼›åˆ©ç”¨åºåˆ—åŒ–ä¿å­˜ï¼›å¦‚ä½•ä¿å­˜ä¸ºjson</p><p>1ã€å¼•å…¥äº†redisçš„starterï¼ŒcacheManagerå˜ä¸º RedisCacheManagerï¼›</p><p>2ã€é»˜è®¤åˆ›å»ºçš„ RedisCacheManager æ“ä½œredisçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ RedisTemplate<Object, Object></p><p>3ã€RedisTemplate<Object, Object> æ˜¯ é»˜è®¤ä½¿ç”¨jdkçš„åºåˆ—åŒ–æœºåˆ¶</p><p>4ï¼‰ã€è‡ªå®šä¹‰CacheManagerï¼›</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€Spring-Bootä¸ç¼“å­˜&quot;&gt;&lt;a href=&quot;#1ã€Spring-Bootä¸ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;1ã€Spring Bootä¸ç¼“å­˜&quot;&gt;&lt;/a&gt;1ã€Spring Bootä¸ç¼“å­˜&lt;/h2&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootè‡ªå®šä¹‰starter</title>
    <link href="https://mysticalguest.github.io/2020/08/28/Spring/SpringBootCustomStarters/"/>
    <id>https://mysticalguest.github.io/2020/08/28/Spring/SpringBootCustomStarters/</id>
    <published>2020-08-28T02:20:52.976Z</published>
    <updated>2020-09-10T09:47:26.563Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€SpringBootè‡ªå®šä¹‰starters"><a href="#1ã€SpringBootè‡ªå®šä¹‰starters" class="headerlink" title="1ã€SpringBootè‡ªå®šä¹‰starters"></a>1ã€SpringBootè‡ªå®šä¹‰starters</h2><a id="more"></a><p>SpringBootçš„å¼ºå¤§ç‚¹å°±æ˜¯æŠŠæ‰€æœ‰çš„åœºæ™¯æŠ½è±¡æˆstarteråœºæ™¯å¯åŠ¨å™¨ã€‚</p><p>å°½ç®¡å·²ç»å®šä¹‰å¥½äº†ï¼Œä½†ä¾ç„¶å¯èƒ½æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><h3 id="1-1-starterï¼š"><a href="#1-1-starterï¼š" class="headerlink" title="1.1 starterï¼š"></a>1.1 starterï¼š</h3><ul><li><p>è¿™ä¸ªåœºæ™¯éœ€è¦ä½¿ç”¨åˆ°çš„ä¾èµ–æ˜¯ä»€ä¹ˆï¼Ÿ</p></li><li><p>å¦‚ä½•ç¼–å†™è‡ªåŠ¨é…ç½®</p><p>ä»¥<code>WebMvcAutoConfiguration.class</code>ä¸ºä¾‹ï¼›</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//æŒ‡å®šè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ConditionalOnXXX</span>  <span class="comment">//åœ¨æŒ‡å®šæ¡ä»¶æˆç«‹çš„æƒ…å†µä¸‹è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter</span>  <span class="comment">//æŒ‡å®šè‡ªåŠ¨é…ç½®ç±»çš„é¡ºåº</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span>  <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationPropertie</span>ç»“åˆç›¸å…³xxxPropertiesç±»æ¥ç»‘å®šç›¸å…³çš„é…ç½®</span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span> <span class="comment">//è®©xxxPropertiesç”Ÿæ•ˆåŠ å…¥åˆ°å®¹å™¨ä¸­</span></span><br></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨é…ç½®ç±»è¦èƒ½åŠ è½½</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†éœ€è¦å¯åŠ¨å°±åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé…ç½®åœ¨META-INF/spring.factories</span></span><br><span class="line"><span class="meta">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">\</span></span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br></pre></td></tr></table></figure><ul><li><p>æ¨¡å¼ï¼š</p><blockquote><p>å¯åŠ¨å™¨åªç”¨æ¥åšä¾èµ–å¯¼å…¥ï¼›</p><p>ä¸“é—¨æ¥å†™ä¸€ä¸ªè‡ªåŠ¨é…ç½®æ¨¡å—ï¼›</p><p>å¯åŠ¨å™¨ä¾èµ–è‡ªåŠ¨é…ç½®ï¼›åˆ«äººåªéœ€è¦å¼•å…¥å¯åŠ¨å™¨ï¼ˆstarterï¼‰</p><p>mybatis-spring-boot-starterï¼›è‡ªå®šä¹‰å¯åŠ¨å™¨å-spring-boot-starter</p></blockquote></li></ul><h3 id="1-2-æ­¥éª¤"><a href="#1-2-æ­¥éª¤" class="headerlink" title="1.2 æ­¥éª¤"></a>1.2 æ­¥éª¤</h3><ul><li>é¦–å…ˆåœ¨IDEAåˆ›å»ºä¸¤ä¸ªåŸºç¡€Mavené¡¹ç›®ï¼šstarterå’Œautoconfigurationå·¥ç¨‹</li><li>å¯åŠ¨å™¨æ¨¡å—</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">  http://maven.apache.org/POM/4.0.0 </span></span></span><br><span class="line"><span class="tag"><span class="string">  http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.custom.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>custom-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--å¯åŠ¨å™¨--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥è‡ªåŠ¨é…ç½®æ¨¡å—--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.custom.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>custom-spring-boot-starter-autoconfiguration<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨é…ç½®æ¨¡å—</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">  http://maven.apache.org/POM/4.0.0 </span></span></span><br><span class="line"><span class="tag"><span class="string">  http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.custom.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>custom-spring-boot-starter-autoconfiguration<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>custom-spring-boot-starter-autoconfiguration<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥spring-boot-starterï¼›æ‰€æœ‰starterçš„åŸºæœ¬é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™å¯é…ç½®å±æ€§</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"custom.hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String prefix;</span><br><span class="line">  <span class="keyword">private</span> String suffix;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getPrefix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> prefix;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrefix</span><span class="params">(String prefix)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.prefix = prefix;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getSuffix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> suffix;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuffix</span><span class="params">(String suffix)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.suffix = suffix;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™åœºæ™¯</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  HelloProperties helloProperties;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> HelloProperties <span class="title">getHelloProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> helloProperties;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHelloProperties</span><span class="params">(HelloProperties helloProperties)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.helloProperties = helloProperties;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> helloProperties.getPrefix()+<span class="string">"-"</span> +name + helloProperties.getSuffix();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™å±æ€§ç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span> <span class="comment">//webåº”ç”¨æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(HelloProperties<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">HelloServiceAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  HelloProperties helloProperties;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> HelloService <span class="title">helloService</span><span class="params">()</span></span>&#123;</span><br><span class="line">    HelloService service = <span class="keyword">new</span> HelloService();</span><br><span class="line">    service.setHelloProperties(helloProperties);</span><br><span class="line">    <span class="keyword">return</span> service;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŒæ ·ï¼Œæƒ³è¦é…ç½®ç±»ç”Ÿæ•ˆï¼Œå°±è¦åœ¨resources/META-INF/spring.factoriesç¼–å†™è·¯å¾„</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">\</span></span><br><span class="line"><span class="attr">com.custom.starter.HelloServiceAutoConfiguration</span></span><br></pre></td></tr></table></figure><ul><li>æœ€åå°†è¿™2ä¸ªé¡¹ç›®éƒ½å®‰è£…åˆ°Mavenä»“åº“ä¸­ï¼Œç‚¹å‡»IDEAå³è¾¹<strong>Maven Projects</strong>ï¼Œåœ¨ä¸¤ä¸ªé¡¹ç›®çš„<strong>Lifecycle</strong>ä¸‹ç‚¹å‡»<strong>install</strong>å®‰è£…å³å¯ã€‚</li></ul><h3 id="1-3-æµ‹è¯•"><a href="#1-3-æµ‹è¯•" class="headerlink" title="1.3 æµ‹è¯•"></a>1.3 æµ‹è¯•</h3><p>åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œæµ‹è¯•ä¸Šé¢æˆ‘ä»¬è‡ªå®šä¹‰çš„starters</p><ul><li>åœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ï¼Œè‡ªå®šä¹‰starters</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥è‡ªå®šä¹‰çš„starter--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.custom.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>atguigu-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ§åˆ¶ç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  HelloService helloService;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> helloService.sayHello(<span class="string">"starter"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">custom.hello.prefix</span>=<span class="string">CUSTOM</span></span><br><span class="line"><span class="meta">custom.hello.suffix</span>=<span class="string">HELLO WORLD</span></span><br></pre></td></tr></table></figure><h2 id="2ã€æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹"><a href="#2ã€æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹" class="headerlink" title="2ã€æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹"></a>2ã€æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹</h2><p><a href="https://github.com/spring-projects/spring-framework">GitHubç¤ºä¾‹</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€SpringBootè‡ªå®šä¹‰starters&quot;&gt;&lt;a href=&quot;#1ã€SpringBootè‡ªå®šä¹‰starters&quot; class=&quot;headerlink&quot; title=&quot;1ã€SpringBootè‡ªå®šä¹‰starters&quot;&gt;&lt;/a&gt;1ã€SpringBootè‡ªå®šä¹‰starters&lt;/h2&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootå¯åŠ¨é…ç½®åŸç†</title>
    <link href="https://mysticalguest.github.io/2020/08/27/Spring/SpringBootStartupConfigPrinciple/"/>
    <id>https://mysticalguest.github.io/2020/08/27/Spring/SpringBootStartupConfigPrinciple/</id>
    <published>2020-08-27T09:56:02.101Z</published>
    <updated>2020-09-10T05:09:44.225Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€å¯åŠ¨é…ç½®åŸç†"><a href="#1ã€å¯åŠ¨é…ç½®åŸç†" class="headerlink" title="1ã€å¯åŠ¨é…ç½®åŸç†"></a>1ã€å¯åŠ¨é…ç½®åŸç†</h2><h3 id="1-1-å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶"><a href="#1-1-å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶" class="headerlink" title="1.1 å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶"></a>1.1 å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶</h3><a id="more"></a><p>é…ç½®åœ¨META-INF/spring.factories</p><p><strong>ApplicationContextInitializer</strong></p><p><strong>SpringApplicationRunListener</strong></p><p>åªéœ€è¦æ”¾åœ¨iocå®¹å™¨ä¸­</p><p><strong>ApplicationRunner</strong></p><p><strong>CommandLineRunner</strong></p><p>åœ¨ä¸»ç¨‹åºç±»ä¸­æ‰“ä¸Šæ–­ç‚¹ï¼ŒDebugï¼Œè¿›è¡Œç ”ç©¶ã€‚</p><h3 id="1-2-å¯åŠ¨æµç¨‹ï¼š"><a href="#1-2-å¯åŠ¨æµç¨‹ï¼š" class="headerlink" title="1.2 å¯åŠ¨æµç¨‹ï¼š"></a>1.2 å¯åŠ¨æµç¨‹ï¼š</h3><ul><li>åˆ›å»ºSpringApplicationå¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SpringApplication.class</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(Object source, String... args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> run(<span class="keyword">new</span> Object[]&#123;source&#125;, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(Object[] sources, String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">new</span> SpringApplication(sources)).run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨<code>initialize(sources);</code>æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(Object[] sources)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä¿å­˜ä¸»é…ç½®ç±»</span></span><br><span class="line">  <span class="keyword">if</span> (sources != <span class="keyword">null</span> &amp;&amp; sources.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.sources.addAll(Arrays.asList(sources));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­å½“å‰æ˜¯å¦ä¸€ä¸ªwebåº”ç”¨, å³æ˜¯å¦å¯¼å…¥webæ¨¡å—</span></span><br><span class="line">  <span class="keyword">this</span>.webEnvironment = deduceWebEnvironment();</span><br><span class="line">  <span class="comment">// ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°META-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationContextInitializer</span></span><br><span class="line">  <span class="comment">// ç„¶åä¿å­˜èµ·æ¥, ä¸ç€æ€¥ç”¨</span></span><br><span class="line">  setInitializers((Collection) getSpringFactoriesInstances(</span><br><span class="line">      ApplicationContextInitializer<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">  <span class="comment">// ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°ETA-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationListener</span></span><br><span class="line">  setListeners((Collection) getSpringFactoriesInstances(ApplicationListener<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">  <span class="comment">// ä»å¤šä¸ªé…ç½®ç±»ä¸­æ‰¾åˆ°æœ‰mainæ–¹æ³•çš„ä¸»é…ç½®ç±»</span></span><br><span class="line">  <span class="keyword">this</span>.mainApplicationClass = deduceMainApplicationClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°ApplicationContextInitializerï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/initializer.png" alt="initializer"></p><p>æ‰¾åˆ°çš„Listenerï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/listener.png" alt="listener"></p><ul><li>è¿è¡Œrunæ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">  StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">  stopWatch.start();</span><br><span class="line">  ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">  FailureAnalyzers analyzers = <span class="keyword">null</span>;</span><br><span class="line">  configureHeadlessProperty();</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//è·å–SpringApplicationRunListenersï¼›ä»ç±»è·¯å¾„ä¸‹META-INF/spring.factories</span></span><br><span class="line">  SpringApplicationRunListeners listeners = getRunListeners(args);</span><br><span class="line">  <span class="comment">//å›è°ƒæ‰€æœ‰çš„è·å–SpringApplicationRunListener.starting()æ–¹æ³•</span></span><br><span class="line">  listeners.starting();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//å°è£…å‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line">    ApplicationArguments applicationArguments = <span class="keyword">new</span> DefaultApplicationArguments(</span><br><span class="line">          args);</span><br><span class="line">    <span class="comment">//å‡†å¤‡ç¯å¢ƒ</span></span><br><span class="line">    ConfigurableEnvironment environment = prepareEnvironment(listeners,</span><br><span class="line">          applicationArguments);</span><br><span class="line">    <span class="comment">//åˆ›å»ºç¯å¢ƒå®Œæˆåå›è°ƒSpringApplicationRunListener.environmentPrepared()ï¼›è¡¨ç¤ºç¯å¢ƒå‡†å¤‡å®Œæˆ</span></span><br><span class="line">      </span><br><span class="line">    Banner printedBanner = printBanner(environment);</span><br><span class="line">      </span><br><span class="line">    <span class="comment">//åˆ›å»ºApplicationContextï¼›å†³å®šåˆ›å»ºwebçš„iocè¿˜æ˜¯æ™®é€šçš„ioc</span></span><br><span class="line">    context = createApplicationContext();</span><br><span class="line">      </span><br><span class="line">    analyzers = <span class="keyword">new</span> FailureAnalyzers(context);</span><br><span class="line">    <span class="comment">//å‡†å¤‡ä¸Šä¸‹æ–‡ç¯å¢ƒ;å°†environmentä¿å­˜åˆ°iocä¸­ï¼›è€Œä¸”applyInitializers()ï¼›</span></span><br><span class="line">    <span class="comment">//applyInitializers()ï¼šå›è°ƒä¹‹å‰ä¿å­˜çš„æ‰€æœ‰çš„ApplicationContextInitializerçš„initializeæ–¹æ³•</span></span><br><span class="line">    <span class="comment">//å›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextPrepared()ï¼›</span></span><br><span class="line">    prepareContext(context, environment, listeners, applicationArguments,</span><br><span class="line">          printedBanner);</span><br><span class="line">    <span class="comment">//prepareContextè¿è¡Œå®Œæˆä»¥åå›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextLoaded()ï¼›</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">//såˆ·æ–°å®¹å™¨ï¼›iocå®¹å™¨åˆå§‹åŒ–ï¼ˆå¦‚æœæ˜¯webåº”ç”¨è¿˜ä¼šåˆ›å»ºåµŒå…¥å¼çš„Tomcatï¼‰ï¼›Springæ³¨è§£ç‰ˆ</span></span><br><span class="line">    <span class="comment">//æ‰«æï¼Œåˆ›å»ºï¼ŒåŠ è½½æ‰€æœ‰ç»„ä»¶çš„åœ°æ–¹ï¼›ï¼ˆé…ç½®ç±»ï¼Œç»„ä»¶ï¼Œè‡ªåŠ¨é…ç½®ï¼‰</span></span><br><span class="line">    refreshContext(context);</span><br><span class="line">    <span class="comment">//ä»iocå®¹å™¨ä¸­è·å–æ‰€æœ‰çš„ApplicationRunnerå’ŒCommandLineRunnerè¿›è¡Œå›è°ƒ</span></span><br><span class="line">    <span class="comment">//ApplicationRunnerå…ˆå›è°ƒï¼ŒCommandLineRunnerå†å›è°ƒ</span></span><br><span class="line">    afterRefresh(context, applicationArguments);</span><br><span class="line">    <span class="comment">//æ‰€æœ‰çš„SpringApplicationRunListenerå›è°ƒfinishedæ–¹æ³•</span></span><br><span class="line">    listeners.finished(context, <span class="keyword">null</span>);</span><br><span class="line">    stopWatch.stop();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line">        <span class="keyword">new</span> StartupInfoLogger(<span class="keyword">this</span>.mainApplicationClass)</span><br><span class="line">              .logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ•´ä¸ªSpringBootåº”ç”¨å¯åŠ¨å®Œæˆä»¥åè¿”å›å¯åŠ¨çš„iocå®¹å™¨ï¼›</span></span><br><span class="line">    <span class="keyword">return</span> context;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">    handleRunFailure(context, listeners, analyzers, ex);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(ex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2ã€äº‹ä»¶ç›‘å¬æœºåˆ¶"><a href="#2ã€äº‹ä»¶ç›‘å¬æœºåˆ¶" class="headerlink" title="2ã€äº‹ä»¶ç›‘å¬æœºåˆ¶"></a>2ã€äº‹ä»¶ç›‘å¬æœºåˆ¶</h2><p>æ¥å®ç°ä¸€ä¸‹1.1èŠ‚ä¸­æåˆ°çš„4ä¸ªç»„ä»¶ï¼›</p><h3 id="2-1-å®ç°è‡ªå®šä¹‰ApplicationContextInitializer"><a href="#2-1-å®ç°è‡ªå®šä¹‰ApplicationContextInitializer" class="headerlink" title="2.1 å®ç°è‡ªå®šä¹‰ApplicationContextInitializer"></a>2.1 å®ç°è‡ªå®šä¹‰ApplicationContextInitializer</h3><p>Ctrl+næœç´¢ApplicationContextInitializerï¼Œé€‰æ‹©ApplicationContextInitializerï¼ŒCtrl+hæŸ¥çœ‹SpringBootå·²ç»å®ç°çš„æ‰€æœ‰Initializerï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/ApplicationContextInitializer.PNG" alt="ApplicationContextInitializer"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HelloApplicationContextInitializer.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloApplicationContextInitializer</span> <span class="keyword">implements</span> </span></span><br><span class="line"><span class="class">    <span class="title">ApplicationContextInitializer</span>&lt;<span class="title">ConfigurableApplicationContext</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¥ç›‘å¬iocå®¹å™¨çš„å¯åŠ¨</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"ApplicationContextInitializer...initialize..."</span>+applicationContext);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-å®ç°è‡ªå®šä¹‰SpringApplicationRunListener"><a href="#2-2-å®ç°è‡ªå®šä¹‰SpringApplicationRunListener" class="headerlink" title="2. 2 å®ç°è‡ªå®šä¹‰SpringApplicationRunListener"></a>2. 2 å®ç°è‡ªå®šä¹‰SpringApplicationRunListener</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HelloSpringApplicationRunListener.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloSpringApplicationRunListener</span> <span class="keyword">implements</span> <span class="title">SpringApplicationRunListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¿…é¡»æœ‰çš„æ„é€ å™¨, ä¼ è¿‡æ¥Springåº”ç”¨å’Œå‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">HelloSpringApplicationRunListener</span><span class="params">(SpringApplication application, String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç›‘å¬å®¹å™¨å¼€å§‹</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">starting</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"SpringApplicationRunListener...starting..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">environmentPrepared</span><span class="params">(ConfigurableEnvironment configurableEnvironment)</span> </span>&#123;</span><br><span class="line">      Object o = configurableEnvironment.getSystemProperties().get(<span class="string">"os.name"</span>);</span><br><span class="line">      System.out.println(<span class="string">"SpringApplicationRunListener...environmentPrepared.."</span>+o);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextPrepared</span><span class="params">(ConfigurableApplicationContext configurableApplicationContext)</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"SpringApplicationRunListener...contextPrepared..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®¹å™¨ç¯å¢ƒåŠ è½½å®Œæˆ</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoaded</span><span class="params">(ConfigurableApplicationContext configurableApplicationContext)</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"SpringApplicationRunListener...contextLoaded..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finished</span><span class="params">(ConfigurableApplicationContext configurableApplicationContext, </span></span></span><br><span class="line"><span class="function"><span class="params">      Throwable throwable)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"SpringApplicationRunListener...finished..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šä¸¤ä¸ªç»„ä»¶æƒ³è¦èµ·ä½œç”¨ï¼Œå¿…é¡»é…ç½®ï¼ˆMETA-INF/spring.factoriesï¼‰ï¼›åœ¨æˆ‘ä»¬å¼•å…¥çš„æ¯ä¸ªJaråŒ…é‡Œï¼Œç‚¹å¼€å…¶ç›®å½•ç»“æ„ä¸­éƒ½æœ‰META-INFæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸ªspring.factoriesæ–‡ä»¶ï¼›</p><p>æˆ‘ä»¬å°±è¦åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºMETA-INF/spring.factoriesï¼Œå¹¶å†™å…¥ï¼š</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">//</span> <span class="string">copy Reference</span></span><br><span class="line"><span class="meta">org.springframework.context.ApplicationContextInitializer</span>=<span class="string">\</span></span><br><span class="line"><span class="attr">com.initializr.initializer.HelloApplicationContextInitializer</span></span><br><span class="line"></span><br><span class="line"><span class="meta">org.springframework.boot.SpringApplicationRunListener</span>=<span class="string">\</span></span><br><span class="line"><span class="attr">com.initializr.listener.HelloSpringApplicationRunListener</span></span><br></pre></td></tr></table></figure><h3 id="2-3-å®ç°è‡ªå®šä¹‰ApplicationRunner"><a href="#2-3-å®ç°è‡ªå®šä¹‰ApplicationRunner" class="headerlink" title="2.3 å®ç°è‡ªå®šä¹‰ApplicationRunner"></a>2.3 å®ç°è‡ªå®šä¹‰ApplicationRunner</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦æ”¾åœ¨å®¹å™¨ä¸­çš„</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloApplicationRunner</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments applicationArguments)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"ApplicationRunner...run...."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-å®ç°è‡ªå®šä¹‰CommandLineRunner"><a href="#2-4-å®ç°è‡ªå®šä¹‰CommandLineRunner" class="headerlink" title="2.4 å®ç°è‡ªå®šä¹‰CommandLineRunner"></a>2.4 å®ç°è‡ªå®šä¹‰CommandLineRunner</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦æ”¾åœ¨å®¹å™¨ä¸­çš„</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloCommandLineRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... strings)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"CommandLineRunner...run..."</span>+ Arrays.asList(strings));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡ŒæŸ¥çœ‹æ§åˆ¶å°æœ‰å®šä¹‰è¾“å‡ºå³å¯ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/custom-listener.PNG" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€å¯åŠ¨é…ç½®åŸç†&quot;&gt;&lt;a href=&quot;#1ã€å¯åŠ¨é…ç½®åŸç†&quot; class=&quot;headerlink&quot; title=&quot;1ã€å¯åŠ¨é…ç½®åŸç†&quot;&gt;&lt;/a&gt;1ã€å¯åŠ¨é…ç½®åŸç†&lt;/h2&gt;&lt;h3 id=&quot;1-1-å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶&quot;&gt;&lt;a href=&quot;#1-1-å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;1.1 å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶&quot;&gt;&lt;/a&gt;1.1 å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶&lt;/h3&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸æ•°æ®è®¿é—®</title>
    <link href="https://mysticalguest.github.io/2020/08/18/Spring/SpringBootDataAccess/"/>
    <id>https://mysticalguest.github.io/2020/08/18/Spring/SpringBootDataAccess/</id>
    <published>2020-08-18T15:27:51.497Z</published>
    <updated>2020-09-10T09:45:34.431Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº"><a href="#1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº" class="headerlink" title="1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº"></a>1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº</h2><h3 id="1-1-Springå®˜ç½‘æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚"><a href="#1-1-Springå®˜ç½‘æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚" class="headerlink" title="1.1 Springå®˜ç½‘æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚"></a>1.1 Spring<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/using-boot-build-systems.html#using-boot-starter">å®˜ç½‘</a>æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚</h3><a id="more"></a><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.15.22:3306/jdbc</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœï¼š</strong></p><ul><li>é»˜è®¤æ˜¯ç”¨org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºæ•°æ®æº</li><li>æ•°æ®æºçš„ç›¸å…³é…ç½®éƒ½åœ¨DataSourcePropertiesé‡Œé¢</li></ul><h3 id="1-2-è‡ªåŠ¨é…ç½®åŸç†"><a href="#1-2-è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="1.2 è‡ªåŠ¨é…ç½®åŸç†"></a>1.2 è‡ªåŠ¨é…ç½®åŸç†</h3><p><code>org.springframework.boot.autoconfigure.jdbc</code></p><ul><li>å‚è€ƒDataSourceConfigurationï¼Œæ ¹æ®é…ç½®åˆ›å»ºæ•°æ®æºï¼Œé»˜è®¤ä½¿ç”¨Tomcatè¿æ¥æ± ï¼›å¯ä»¥ä½¿ç”¨spring.datasource.typeæŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼›</li><li>SpringBooté»˜è®¤å¯ä»¥æ”¯æŒä»¥ä¸‹æ•°æ®æºï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">org.apache.tomcat.jdbc.pool.DataSource</span><br><span class="line">HikariDataSource</span><br><span class="line">BasicDataSource</span><br></pre></td></tr></table></figure><ul><li>è‡ªå®šä¹‰æ•°æ®æºç±»å‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(&#123;DataSource<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnProperty</span>(</span></span><br><span class="line"><span class="class">  <span class="title">name</span> </span>= &#123;<span class="string">"spring.datasource.type"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Generic</span> </span>&#123;</span><br><span class="line">  Generic() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">(DataSourceProperties properties)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨DataSourceBuilderåˆ›å»ºæ•°æ®æºï¼Œåˆ©ç”¨åå°„åˆ›å»ºå“åº”typeçš„æ•°æ®æºï¼Œå¹¶ä¸”ç»‘å®šç›¸å…³å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> properties.initializeDataSourceBuilder().build();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>åœ¨<code>DataSourceAutoConfiguration.class</code>ä¸­ï¼Œæœ‰<code>DataSourceInitializer</code>ç»§æ‰¿è‡ª<code>ApplicationListener</code></p><p>ä½œç”¨ï¼š</p><ul><li><p>runSchemaScripts()ï¼›è¿è¡Œå»ºè¡¨è¯­å¥</p></li><li><p>runDataScripts()ï¼›è¿è¡Œæ’å…¥æ•°æ®çš„sqlè¯­å¥</p></li><li><p>é»˜è®¤åªéœ€è¦å°†æ–‡ä»¶å‘½åä¸ºï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">schema-*.sqlã€data-*.sql</span></span><br><span class="line"><span class="attr">é»˜è®¤è§„åˆ™ï¼šå¿…é¡»å‘½åschema.sqlï¼Œschema-all.sqlï¼›</span></span><br></pre></td></tr></table></figure></li><li><p>å¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶æŒ‡å®šä½ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.15.22:3306/jdbc</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">schema:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">classpath:department.sql</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ“ä½œæ•°æ®åº“ï¼šè‡ªåŠ¨é…ç½®äº†JdbcTemplateæ“ä½œæ•°æ®åº“</p></li></ul><h2 id="2ã€æ•´åˆDruidæ•°æ®æº"><a href="#2ã€æ•´åˆDruidæ•°æ®æº" class="headerlink" title="2ã€æ•´åˆDruidæ•°æ®æº"></a>2ã€æ•´åˆDruidæ•°æ®æº</h2><p>åœ¨Maven<a href="https://mvnrepository.com/">å…¬å…±åº“</a>ä¸­æœç´¢Druidï¼Œæ‰¾åˆ°å…¶Mavenä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥é…ç½®ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># æ•°æ®æºåŸºæœ¬é…ç½®</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment"># ä¸DataSourceProperties.classä¸‹çš„å±æ€§ä¸€ä¸€å¯¹åº”</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.8.156:3306/jdbc</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment">#    schema:</span></span><br><span class="line"><span class="comment">#      - classpath:department.sql</span></span><br><span class="line">    <span class="comment"># æ•°æ®æºå…¶ä»–é…ç½®, åº•éƒ¨è¿™ç§é¢œè‰²æ˜¯å› ä¸ºDataSourceProperties.classä¸‹æ²¡æœ‰è¿™äº›å±æ€§,</span></span><br><span class="line">    <span class="comment"># å¹¶ä¸èƒ½ç»‘å®šåˆ°æ•°æ®åº“çš„é…ç½®é‡Œ</span></span><br><span class="line">    <span class="comment"># ä½†DruidDataSource.javaä¸­æœ‰è¿™äº›å±æ€§</span></span><br><span class="line">    <span class="comment"># æƒ³è¦ç”Ÿæ•ˆ, è‡ªå·±é…ç½®, config.DruidConfig</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">#   é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ'wall'ç”¨äºé˜²ç«å¢™</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure><p>æƒ³è¦é…ç½®ç”Ÿæ•ˆï¼Œå¯¼å…¥druidæ•°æ®æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource"</span>)</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DataSource <span class="title">druid</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é…ç½®Druidçš„ç›‘æ§</span></span><br><span class="line">  <span class="comment">//1ã€é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ServletRegistrationBean bean = <span class="keyword">new</span> ServletRegistrationBean(</span><br><span class="line">      <span class="keyword">new</span> StatViewServlet(), </span><br><span class="line">      <span class="string">"/druid/*"</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    Map&lt;String,String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    initParams.put(<span class="string">"loginUsername"</span>,<span class="string">"admin"</span>);</span><br><span class="line">    initParams.put(<span class="string">"loginPassword"</span>,<span class="string">"123456"</span>);</span><br><span class="line">    initParams.put(<span class="string">"allow"</span>,<span class="string">""</span>);<span class="comment">// é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">    initParams.put(<span class="string">"deny"</span>,<span class="string">"192.168.15.21"</span>);</span><br><span class="line"></span><br><span class="line">    bean.setInitParameters(initParams);</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2ã€é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">webStatFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">    bean.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line"></span><br><span class="line">    Map&lt;String,String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    initParams.put(<span class="string">"exclusions"</span>,<span class="string">"*.js,*.css,/druid/*"</span>); <span class="comment">// æ’é™¤æ‹¦æˆª</span></span><br><span class="line"></span><br><span class="line">    bean.setInitParameters(initParams);</span><br><span class="line"></span><br><span class="line">    bean.setUrlPatterns(Arrays.asList(<span class="string">"/*"</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  bean;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¹‹å‰å†™çš„<code>SpringinitializrApplicationTests</code>ç±»çš„<code>testJDBC()</code>æ–¹æ³•ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(dataSource.getClass());</span><br></pre></td></tr></table></figure><p>è¯­å¥æ‰“ä¸Šæ–­ç‚¹ï¼Œdebugæµ‹è¯•æ–¹æ³•ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/druid_config.PNG" alt="druid config"></p><h2 id="3ã€æ•´åˆMyBatis"><a href="#3ã€æ•´åˆMyBatis" class="headerlink" title="3ã€æ•´åˆMyBatis"></a>3ã€æ•´åˆMyBatis</h2><p>åŒæ ·åœ¨Maven<a href="https://mvnrepository.com/">å…¬å…±åº“</a>ä¸­æœç´¢MyBatis Spring Boot Starterï¼Œæ‰¾åˆ°å…¶Mavenä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-1-MyBatis-Spring-Boot-Starter-ç®€ä»‹"><a href="#3-1-MyBatis-Spring-Boot-Starter-ç®€ä»‹" class="headerlink" title="3.1 MyBatis-Spring-Boot-Starter ç®€ä»‹"></a>3.1 MyBatis-Spring-Boot-Starter ç®€ä»‹</h3><p>MyBatis-Spring-Boot-Starterç±»ä¼¼ä¸€ä¸ªä¸­é—´ä»¶ï¼Œé“¾æ¥Spring Bootå’ŒMyBatisï¼Œæ„å»ºåŸºäºSpring Bootçš„MyBatisåº”ç”¨ç¨‹åºã€‚</p><p>MyBatis-Spring-Boot-Starter å½“å‰ç‰ˆæœ¬æ˜¯ 2.1.3ï¼Œå‘å¸ƒäº2020å¹´6æœˆ</p><p>MyBatis-Spring-Boot-Starteræ˜¯ä¸ªé›†æˆåŒ…ï¼Œå› æ­¤å¯¹MyBatisã€MyBatis-Springå’ŒSpringBootçš„jaråŒ…éƒ½å­˜åœ¨ä¾èµ–ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="table-container"><table><thead><tr><th>MyBatis-Spring-Boot-Starter</th><th>MyBatis-Spring</th><th>Spring Boot</th><th>Java</th></tr></thead><tbody><tr><td><strong>2.1</strong></td><td>2.0 (need 2.0.2+ for enable all features)</td><td>2.1 or higher</td><td>8 or higher</td></tr><tr><td><strong>1.3</strong></td><td>1.3</td><td>1.5</td><td>6 or higher</td></tr></tbody></table></div><h3 id="3-2-åˆ†æä¾èµ–"><a href="#3-2-åˆ†æä¾èµ–" class="headerlink" title="3.2 åˆ†æä¾èµ–"></a>3.2 åˆ†æä¾èµ–</h3><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/mybatis.png" alt="mybatis"></p><p>ä¾èµ–ä¼šå¼•å…¥<code>spring-boot-starter-jdbc</code>ï¼Œ<code>mybatis</code>çš„jaråŒ…ï¼Œ<code>mybatis-spring</code>ä¸­é—´æ•´åˆåŒ…ä»¥åŠ<code>mybatis-spring-boot-autoconfigure</code>è‡ªåŠ¨é…ç½®åŒ…ã€‚</p><h3 id="3-3-ä½¿ç”¨æ­¥éª¤"><a href="#3-3-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="3.3 ä½¿ç”¨æ­¥éª¤"></a>3.3 ä½¿ç”¨æ­¥éª¤</h3><ul><li>é…ç½®æ•°æ®æºç›¸å…³å±æ€§</li><li>ç»™æ•°æ®åº“å»ºè¡¨</li><li>åˆ›å»ºJavaBean</li><li>æ³¨è§£ç‰ˆ</li></ul><h3 id="3-4-æ³¨è§£ç‰ˆ"><a href="#3-4-æ³¨è§£ç‰ˆ" class="headerlink" title="3.4 æ³¨è§£ç‰ˆ"></a>3.4 æ³¨è§£ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DepartmentMapper.java</span></span><br><span class="line"><span class="comment">// æŒ‡å®šè¿™æ˜¯ä¸€ä¸ªæ“ä½œæ•°æ®åº“çš„mapper</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DepartmentMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"select * from department where id=#&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Department <span class="title">getDeptById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Delete</span>(<span class="string">"delete from department where id=#&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteDeptById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  useGeneratedKeys = true: ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®</span></span><br><span class="line"><span class="comment">  keyProperty = "id": æŒ‡æ˜ä¸»é”®å­—æ®µ, idå±æ€§å¼ç”¨æ¥å°è£…ä¸»é”®çš„</span></span><br><span class="line"><span class="comment">  æ’å…¥çš„departmentå, ä¸»é”®ä¼šé‡æ–°å°è£…è¿›æ¥, æ‰ä¼šæœ‰å€¼</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Options</span>(useGeneratedKeys = <span class="keyword">true</span>, keyProperty = <span class="string">"id"</span>)</span><br><span class="line">  <span class="meta">@Insert</span>(<span class="string">"insert into department(departmentName) values(#&#123;departmentName&#125;)"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertDept</span><span class="params">(Department department)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Update</span>(<span class="string">"update department set departmentName=#&#123;departmentName&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateDept</span><span class="params">(Department department)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®æ–¹å¼ï¼š</p><ul><li>æ’å…¥ï¼š<a href="http://localhost:8088/dept?departmentName=AA">http://localhost:8088/dept?departmentName=AA</a></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/insert_department.PNG" alt="insert department"></p><ul><li>æŸ¥è¯¢ï¼š<a href="http://localhost:8088/dept/1">http://localhost:8088/dept/1</a></li></ul><p>é—®é¢˜ï¼šè‡ªå®šä¹‰MyBatisçš„é…ç½®è§„åˆ™ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªConfigurationCustomizerï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyBatisConfig.java</span></span><br><span class="line"><span class="comment">// ç”±äºä¸Šé¢çš„org.apache.ibatis.session.Configuration, æ‰€ä»¥è¿™é‡Œä½¿ç”¨å…¨ç±»å</span></span><br><span class="line"><span class="meta">@org</span>.springframework.context.annotation.Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* ä½¿ç”¨æ³¨è§£ç‰ˆMyBatisæ—¶, æœ¬æ¥æ•°æ®åº“departmentè¡¨ä¸­å­—æ®µæ˜¯departmentName,</span></span><br><span class="line"><span class="comment">  å¦‚æœå°†å…¶æ”¹ä¸ºdepartment_nameå, å°±å–ä¸åˆ°å€¼äº†, å¦‚æœä¸ä½¿ç”¨æ³¨è§£ç‰ˆ, å¯ä»¥ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®é©¼å³°å‘½åè§„åˆ™,</span></span><br><span class="line"><span class="comment">  ä½†ç°åœ¨åªèƒ½ä½¿ç”¨é…ç½®ç±»äº†</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ConfigurationCustomizer <span class="title">configurationCustomizer</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ConfigurationCustomizer()&#123;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(Configuration configuration)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¼€å¯é©¼å³°å‘½åæ³•è§„åˆ™</span></span><br><span class="line">        configuration.setMapUnderscoreToCamelCase(<span class="keyword">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ï¼Œå½“æˆ‘ä»¬å®ä½“ç±»å¢å¤šï¼Œæ¯ä¸ªæ˜ å°„æ–‡ä»¶éƒ½éœ€è¦<code>@Mapper</code>æ³¨è§£ï¼Ÿå¯ä»¥åœ¨<strong>å¯åŠ¨ç±»ä¸­</strong>ä½¿ç”¨<code>MapperScan</code>æ‰¹é‡æ‰«ææ‰€æœ‰çš„Mapperæ¥å£ï¼›</p><p>ç‚¹å‡»<code>MapperScan</code>æŸ¥çœ‹æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;MapperScannerRegistrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">MapperScan</span> </span>&#123;</span><br><span class="line">  String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  String[] basePackages() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  Class&lt;?&gt;[] basePackageClasses() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  Class&lt;? extends BeanNameGenerator&gt; nameGenerator() <span class="keyword">default</span> BeanNameGenerator<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">  Class&lt;? extends Annotation&gt; annotationClass() <span class="keyword">default</span> Annotation<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">  Class&lt;?&gt; markerInterface() <span class="keyword">default</span> Class<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">String <span class="title">sqlSessionTemplateRef</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">String <span class="title">sqlSessionFactoryRef</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line"></span><br><span class="line">  Class&lt;? extends MapperFactoryBean&gt; factoryBean() <span class="keyword">default</span> MapperFactoryBean<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡Œé¢å¯ä»¥é…ç½®<code>basePackages()</code>å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.initializr.mapper"</span>)</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringinitializrApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Start..."</span>);</span><br><span class="line">    SpringApplication.run(SpringinitializrApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    System.out.println(<span class="string">"Success..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5-é…ç½®æ–‡ä»¶ç‰ˆ"><a href="#3-5-é…ç½®æ–‡ä»¶ç‰ˆ" class="headerlink" title="3.5 é…ç½®æ–‡ä»¶ç‰ˆ"></a>3.5 é…ç½®æ–‡ä»¶ç‰ˆ</h3><p>MyBatisä»£ç éƒ½æ‰˜ç®¡åˆ°äº†GitHubï¼Œå»<a href="https://github.com/mybatis/mybatis-3">GitHub</a>æŸ¥çœ‹é…ç½®æ–‡ä»¶å†™æ³•ï¼Œ<a href="http://www.mybatis.org/mybatis-3/">å®˜æ–¹æ–‡æ¡£</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis/mybatis-config.xml</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šsqlæ˜ å°„æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šä½¿ç”¨å‚ç…§<a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="4ã€æ•´åˆSpringDataçš„JPAæ¨¡å—"><a href="#4ã€æ•´åˆSpringDataçš„JPAæ¨¡å—" class="headerlink" title="4ã€æ•´åˆSpringDataçš„JPAæ¨¡å—"></a>4ã€æ•´åˆSpringDataçš„JPAæ¨¡å—</h2><h3 id="4-1-SpringDataç®€ä»‹"><a href="#4-1-SpringDataç®€ä»‹" class="headerlink" title="4.1 SpringDataç®€ä»‹"></a>4.1 SpringDataç®€ä»‹</h3><p>SpringData<a href="https://spring.io/projects/spring-data">å®˜æ–¹æ–‡æ¡£</a></p><p>Spring Dataé¡¹ç›®çš„ç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–æ„å»ºåŸºäºSpringæ¡†æ¶åº”ç”¨çš„æ•°æ®è®¿é—®æŠ€æœ¯ï¼ŒåŒ…æ‹¬éå…³ç³»æ•°æ®åº“ã€Map-Reduceæ¡†æ¶ã€äº‘æ•°æ®æœåŠ¡ç­‰ç­‰ï¼›å¦å¤–ä¸€ä½åŒ…å«å¯¹å…³ç³»æ•°æ®åº“çš„è®¿é—®æ”¯æŒã€‚</p><ul><li><p>Spring DataåŒ…å«å¤šä¸ªå­é¡¹ç›®ï¼š</p><ul><li><a href="https://github.com/spring-projects/spring-data-commons">Spring Data Commons</a></li><li><a href="https://spring.io/projects/spring-data-jdbc">Spring Data JDBC</a></li><li><a href="https://spring.io/projects/spring-data-jdbc-ext">Spring Data JDBC Ext</a></li><li><a href="https://spring.io/projects/spring-data-jpa">Spring Data JPA</a></li><li><a href="https://github.com/spring-projects/spring-data-keyvalue">Spring Data KeyValue</a></li><li><a href="https://spring.io/projects/spring-data-ldap">Spring Data LDAP</a></li><li><a href="https://spring.io/projects/spring-data-mongodb">Spring Data MongoDB</a></li><li><a href="https://spring.io/projects/spring-data-redis">Spring Data Redis</a></li><li><a href="https://spring.io/projects/spring-data-rest">Spring Data REST</a></li><li>â€¦â€¦</li><li><a href="https://spring.io/projects/spring-data-solr">Spring Data for Apache Solr</a></li><li><a href="https://spring.io/projects/spring-data-neo4j">Spring Data Neo4j</a></li></ul></li><li><p>Spring Dataç‰¹ç‚¹</p><p>SpringDataä¸ºæˆ‘ä»¬æä¾›ä½¿ç”¨ç»Ÿä¸€çš„APIæ¥å¯¹æ•°æ®è®¿é—®å±‚è¿›è¡Œæ“ä½œï¼›è¿™ä¸»è¦æ˜¯ Spring Data Commonsé¡¹ç›®æ¥å®ç°çš„ã€‚Spring Data Commonsè®©æˆ‘ä»¬åœ¨ä½¿ç”¨å…³ç³»å‹æˆ–è€…éå…³ç³»å‹æ•°æ®è®¿é—®æŠ€æœ¯æ—¶éƒ½åŸºäºSpringæä¾›çš„ç»Ÿä¸€æ ‡å‡†ï¼Œæ ‡å‡†åŒ…å«äº†CRUD(åˆ›å»ºã€è·å–ã€æ›´æ–°ã€åˆ é™¤)ã€æŸ»è¯¢ã€æ’åºå’Œåˆ†é¡µçš„ç›¸å…³æ“ä½œã€‚</p></li><li><p>ç»Ÿä¸€çš„Repositoryæ¥å£</p><ul><li><code>Repository&lt;T, ID extends Serializable&gt;</code>ï¼šç»Ÿä¸€æ¥å£</li><li><code>RevisionRepository&lt;T, ID extends Serializable, N extends Number&amp; Comparable&lt;N&gt;&gt;</code>ï¼šåŸºäºä¹è§‚é”æœºåˆ¶</li><li><code>CrudRepository&lt;T, ID extends Serializable&gt;</code>ï¼šåŸºæœ¬CRUDæ“ä½œ</li><li><code>PagingAndSortingRepository&lt;T, ID extends Serializable&gt;</code>ï¼šåŸºæœ¬CRUDåŠåˆ†é¡µ</li></ul></li><li><p>æä¾›æ•°æ®è®¿é—®æ¨¡æ¿ç±»xxxTemplate</p><ul><li>å¦‚ï¼šMongoTemplateã€RedisTemplateç­‰</li></ul></li><li>JPA (Java Persistence APIï¼ŒJavaæŒä¹…å±‚API) ä¸Spring Data<ul><li>JpaRepositoryåŸºæœ¬åŠŸèƒ½</li><li>å®šä¹‰ç¬¦åˆè§„èŒƒçš„æ–¹æ³•å‘½å</li><li>@Queryè‡ªå®šä¹‰æŸ¥è¯¢ï¼Œå®šåˆ¶æŸ¥è¯¢SQL</li><li>SpecificationæŸ¥è¯¢ï¼ˆSpring Data JPAæ”¯æŒJPA2.0çš„CriteriaæŸ¥è¯¢ï¼‰</li></ul></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/JPA.png" alt="JPA" style="zoom:80%;" /></p><p>åº”ç”¨é¢å‘Spring Dataç¼–ç¨‹ï¼Œä½¿ç”¨å…¶æä¾›æ¨¡æ¿ã€‚</p><h3 id="4-2-æ•´åˆSpringData-JPA"><a href="#4-2-æ•´åˆSpringData-JPA" class="headerlink" title="4.2 æ•´åˆSpringData JPA"></a>4.2 æ•´åˆSpringData JPA</h3><p>å¼•å…¥å¯åŠ¨å™¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥JPA --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è§†å›¾ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/starter-data-jpa.PNG" alt="starter-data-jpa" style="zoom:80%;" /></p><ul><li>å¯ä»¥çœ‹å‡ºï¼Œå…¶å¯¼å…¥äº†å¾ˆå¤šSpringä¸šåŠ¡åŠŸèƒ½æ¨¡å—ï¼Œæ¯”å¦‚AOPå’Œäº‹åŠ¡ï¼ˆSpring-txï¼‰ç­‰ï¼›</li><li>è¿˜å¯ä»¥çœ‹å‡ºå…¶åº•å±‚æ˜¯ç”¨hibernateå®ç°çš„ï¼Œå…¶ä¸­ä½¿ç”¨<code>hibernate-entitymanager</code>ç®¡ç†<code>hibernate-jpa-*-ap</code>ï¼Œè¿›è¡Œæ“ä½œã€‚</li></ul><p>ä¾ç„¶éœ€è¦é…ç½®æ•°æ®æºï¼Œç”¨JPAæ“ä½œæ•°æ®åº“ã€‚</p><p>JPAï¼šORMï¼ˆObject Relational Mappingï¼‰ï¼›</p><ul><li>ç¼–å†™ä¸€ä¸ªå®ä½“ç±»ï¼ˆbeanï¼‰å’Œæ•°æ®è¡¨è¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”é…ç½®å¥½æ˜ å°„å…³ç³»ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨JPAæ³¨è§£é…ç½®æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">//å‘Šè¯‰JPAè¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼ˆå’Œæ•°æ®è¡¨æ˜ å°„çš„ç±»ï¼‰</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"tbl_user"</span>) <span class="comment">//@Tableæ¥æŒ‡å®šå’Œå“ªä¸ªæ•°æ®è¡¨å¯¹åº”;å¦‚æœçœç•¥é»˜è®¤è¡¨åå°±æ˜¯userï¼›</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Id</span> <span class="comment">//è¿™æ˜¯ä¸€ä¸ªä¸»é”®</span></span><br><span class="line">  <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)<span class="comment">//è‡ªå¢ä¸»é”®</span></span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(name = <span class="string">"last_name"</span>,length = <span class="number">50</span>) <span class="comment">//è¿™æ˜¯å’Œæ•°æ®è¡¨å¯¹åº”çš„ä¸€ä¸ªåˆ—</span></span><br><span class="line">  <span class="keyword">private</span> String lastName;</span><br><span class="line">  <span class="meta">@Column</span> <span class="comment">//çœç•¥é»˜è®¤åˆ—åå°±æ˜¯å±æ€§å</span></span><br><span class="line">  <span class="keyword">private</span> String email;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// getter and setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™ä¸€ä¸ªDaoæ¥å£æ¥æ“ä½œå®ä½“ç±»å¯¹åº”çš„æ•°æ®è¡¨ï¼ˆç§°ä¸ºRepositoryï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿JpaRepositoryæ¥å®Œæˆå¯¹æ•°æ®åº“çš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>,<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŸºæœ¬çš„é…ç½®JpaProperties</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span>  </span><br><span class="line"> <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">hibernate:</span></span><br><span class="line">      <span class="comment"># æ›´æ–°æˆ–è€…åˆ›å»ºæ•°æ®è¡¨ç»“æ„</span></span><br><span class="line">      <span class="attr">ddl-auto:</span> <span class="string">update</span></span><br><span class="line">      <span class="comment"># æ§åˆ¶å°æ˜¾ç¤ºSQL</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™controllerç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserController.java</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/user/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">    User user = userRepository.findOne(id);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> User <span class="title">insertUser</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    <span class="comment">// æœ‰è‡ªå¢ç»„ä»¶</span></span><br><span class="line">    User save = userRepository.save(user);</span><br><span class="line">    <span class="keyword">return</span> save;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™äº†ä¸¤ä¸ªç®€å•çš„æ–¹æ³•ç”¨æ¥åšæµ‹éªŒ</p><ul><li><p>å¯åŠ¨ä¸»ç¨‹åºæŸ¥çœ‹æ§åˆ¶å°ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/JPA-table-not-found.PNG" alt="JPA-table-not-found"></p><p>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬çš„é…ç½®<code>ddl-auto: update</code>ç”Ÿæ•ˆäº†ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¯åŠ¨é¡¹ç›®ï¼Œæ•°æ®åº“ä¸­æ²¡æœ‰userè¡¨æ—¶ï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºçš„ã€‚</p><p>ç„¶åä¾æ¬¡è®¿é—®ï¼š<a href="http://localhost:8088/user/1">http://localhost:8088/user/1</a></p><p>å’Œ<a href="http://localhost:8088/user?lastName=Tom&amp;email=tom@vip.com">http://localhost:8088/user?lastName=Tom&amp;email=tom@vip.com</a></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/JPA-test.PNG" alt="JPA-test"></p><p>æŸ¥çœ‹æ§åˆ¶å°ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/JPA-console.PNG" alt="JPA-console"></p><p>æœ€åè¿”å›æ•°æ®åº“æ˜¯ç”±æ•°æ®çš„ã€‚</p></li></ul><p>æµ‹è¯•æˆåŠŸå•¦ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº&quot;&gt;&lt;a href=&quot;#1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº&quot; class=&quot;headerlink&quot; title=&quot;1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº&quot;&gt;&lt;/a&gt;1ã€æ•´åˆåŸºæœ¬JDBCä¸æ•°æ®æº&lt;/h2&gt;&lt;h3 id=&quot;1-1-Springå®˜ç½‘æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚&quot;&gt;&lt;a href=&quot;#1-1-Springå®˜ç½‘æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚&quot; class=&quot;headerlink&quot; title=&quot;1.1 Springå®˜ç½‘æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚&quot;&gt;&lt;/a&gt;1.1 Spring&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/using-boot-build-systems.html#using-boot-starter&quot;&gt;å®˜ç½‘&lt;/a&gt;æŸ¥çœ‹å„ç§åœºæ™¯JDBCæœ‰å…³çš„åœºæ™¯å¯åŠ¨å™¨ã€‚&lt;/h3&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>ç”µå­å•†åŠ¡è¯¾ç¨‹å¤ä¹ </title>
    <link href="https://mysticalguest.github.io/2020/08/18/CSharp/CSharpReview/"/>
    <id>https://mysticalguest.github.io/2020/08/18/CSharp/CSharpReview/</id>
    <published>2020-08-18T09:44:24.536Z</published>
    <updated>2020-09-02T08:16:27.945Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬1ç« -è®¡ç®—æœºã€Internetä¸Visual-C-ç®€ä»‹"><a href="#ç¬¬1ç« -è®¡ç®—æœºã€Internetä¸Visual-C-ç®€ä»‹" class="headerlink" title="ç¬¬1ç«  è®¡ç®—æœºã€Internetä¸Visual C#ç®€ä»‹"></a>ç¬¬1ç«  è®¡ç®—æœºã€Internetä¸Visual C#ç®€ä»‹</h2><a id="more"></a><h3 id="è¯¾åä¹ é¢˜"><a href="#è¯¾åä¹ é¢˜" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="1-1-å¡«ç©ºé¢˜"><a href="#1-1-å¡«ç©ºé¢˜" class="headerlink" title="1.1 å¡«ç©ºé¢˜"></a>1.1 å¡«ç©ºé¢˜</h4><ul><li>è®¡ç®—æœºåªèƒ½ç›´æ¥ç†è§£å…¶æœ¬èº«çš„<strong>æœºå™¨</strong>è¯­è¨€ï¼Œè¿™ç§è¯­è¨€æ˜¯ç”±1å’Œ0æ„æˆçš„ã€‚</li><li>è®¡ç®—æœºå¤„ç†æ•°æ®æ—¶ç”±ä¸€ç»„æŒ‡ä»¤æ§åˆ¶ï¼Œè¿™ç»„æŒ‡ä»¤ç§°ä¸ºè®¡ç®—æœº<strong>ç¨‹åº</strong>ã€‚</li><li>æœ¬ç« ä»‹ç»çš„3ç§è¯­è¨€æ˜¯æœºå™¨è¯­è¨€ã€<strong>æ±‡ç¼–è¯­è¨€</strong>å’Œ<strong>é«˜çº§è¯­è¨€</strong>ã€‚</li><li>å°†é«˜çº§è¯­è¨€ç¨‹åºå˜æˆæœºå™¨è¯­è¨€ç¨‹åºç§°ä¸º<strong>ç¼–è¯‘å™¨</strong>ã€‚</li><li>Visual Studioæ˜¯å¼€å‘C#ç¨‹åºçš„<strong>é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰</strong>ã€‚</li><li>Cè¯­è¨€æ˜¯ä½œä¸º<strong>UNIX</strong>æ“ä½œç³»ç»Ÿçš„å¼€å‘è¯­è¨€è€Œè‘—ç§°çš„ã€‚</li><li>WebæœåŠ¡åˆ†åˆ«ç”¨<strong>XML</strong>å’Œ<strong>SOAP</strong>åœ¨Internetä¸Šæ ‡è®°å’Œå‘é€æ¶ˆæ¯ã€‚</li></ul><h4 id="2-2-åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰"><a href="#2-2-åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰" class="headerlink" title="2.2 åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰"></a>2.2 åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰</h4><ul><li>UMLä¸»è¦ç”¨äºè®¾è®¡é¢å‘å¯¹è±¡ç³»ç»Ÿã€‚</li><li>C#æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ã€‚</li><li>C#æ˜¯å¤šä¸ª.NETè¯­è¨€ä¹‹ä¸€ï¼ˆè¿˜æœ‰Visual Basicä¸Visual C++ï¼‰ã€‚</li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆé’ˆå¯¹äº‹æƒ…ï¼‰æ˜¯æ¯”è¿‡ç¨‹å¼ç¼–ç¨‹æ›´è‡ªç„¶çš„å»ºæ¨¡æ–¹å¼ã€‚</li><li>è®¡ç®—æœºåªèƒ½ç›´æ¥ç†è§£å…¶æœºå™¨è¯­è¨€ã€‚</li><li>MSILæ˜¯å…¬å…±ä¸­é—´æ ¼å¼ï¼Œä¸ç®¡åŸ.NETè¯­è¨€æ˜¯ä»€ä¹ˆï¼Œæ‰€æœ‰.NETç¨‹åºéƒ½è¦ç¼–è¯‘æˆè¿™ç§æ ¼å¼ã€‚</li><li>.NETæ¡†æ¶å¯ä»¥ç§»æ¤åˆ°éWindowså¹³å°</li></ul><h2 id="ç¬¬2ç« -Visual-C-2008-Expressç®€ä»‹"><a href="#ç¬¬2ç« -Visual-C-2008-Expressç®€ä»‹" class="headerlink" title="ç¬¬2ç«  Visual C# 2008 Expressç®€ä»‹"></a>ç¬¬2ç«  Visual C# 2008 Expressç®€ä»‹</h2><h3 id="è¯¾åä¹ é¢˜-1"><a href="#è¯¾åä¹ é¢˜-1" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="2-1-å¡«ç©ºé¢˜"><a href="#2-1-å¡«ç©ºé¢˜" class="headerlink" title="2.1 å¡«ç©ºé¢˜"></a>2.1 å¡«ç©ºé¢˜</h4><ul><li><strong>å¯è§†åŒ–ç¼–ç¨‹</strong>æŠ€æœ¯å¯ä»¥åˆ›å»ºGUIè€Œä¸ç”¨ç¼–å†™ä»»ä½•ä»£ç ã€‚</li><li><strong>æ–¹æ¡ˆ</strong>æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå·¥ç¨‹ï¼Œä¸€èµ·å½¢æˆVisual C#ç¨‹åºã€‚</li><li><strong>è‡ªåŠ¨éšè—</strong>ç‰¹æ€§åœ¨é¼ æ ‡æŒ‡é’ˆç§»åˆ°çª—å£åŒºå¤–æ—¶éšè—çª—å£ã€‚</li><li><strong>å·¥å…·æç¤º</strong>åœ¨é¼ æ ‡æŒ‡é’ˆæ”¾åˆ°å›¾æ ‡ä¸Šæ—¶æ˜¾ç¤ºã€‚</li><li><strong>Solution Explorer</strong>çª—å£å¯ä»¥æµè§ˆæ–¹æ¡ˆæ–‡ä»¶ã€‚</li><li>åŠ å·æ¡†è¡¨ç¤ºSolution Explorerä¸­çš„æ ‘å¯ä»¥<strong>å±•å¼€</strong>ã€‚</li><li>å±æ€§çª—å£çš„å±æ€§æŒ‰<strong>å­—æ¯é¡ºåº</strong>æˆ–<strong>ç±»åˆ«</strong>æ’åº</li><li>çª—ä½“çš„<strong>Text</strong>å±æ€§æŒ‡å®šçª—ä½“æ ‡é¢˜æ ä¸­æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚</li><li><strong>å·¥å…·æ </strong>å¯ä»¥ç›´è§‚åœ°å°†æ§ä»¶åŠ è¿›çª—ä½“ä¸­ã€‚</li><li>ç”¨<strong>åŠ¨æ€å¸®åŠ©</strong>æ ¹æ®å½“å‰ä¸Šä¸‹æ–‡æ˜¾ç¤ºç›¸å…³å¸®åŠ©æ–‡ç« ã€‚</li><li><strong>TextAlign</strong>å±æ€§æŒ‡å®šæ–‡æœ¬åœ¨å·æ ‡è¾¹ç•Œä¸­çš„å¯¹é½æ–¹å¼ã€‚</li></ul><h4 id="2-2-åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰-1"><a href="#2-2-åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰-1" class="headerlink" title="2.2 åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰"></a>2.2 åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰</h4><ul><li>æ ‡é¢˜æ æ˜¾ç¤ºIDEçš„æ–¹å¼ã€‚</li><li>å›¾é’‰å›¾æ ‡åˆ‡æ¢ï¼Œè‡ªåŠ¨éšè—ï¼Œè€ŒXæ¡†å…³é—­çª—å£ã€‚</li><li>å·¥å…·æ å›¾æ ‡è¡¨ç¤ºå„ç§èœå•å‘½ä»¤ã€‚</li><li>å·¥å…·ç®±åŒ…æ‹¬è¡¨ç¤ºæ§ä»¶çš„å›¾æ ‡ã€‚</li><li>çª—ä½“æœ‰æ ‡é¢˜æ ï¼Œå·æ ‡æ²¡æœ‰ï¼ˆä½†æœ‰å·æ ‡æ–‡æœ¬ï¼‰ã€‚</li><li>æ§åˆ¶å±æ€§å¯ä»¥ç”¨å±æ€§çª—å£ä¿®æ”¹ã€‚ </li><li>å›¾å½¢æ¡†é€šå¸¸æ˜¾ç¤ºå›¾å½¢ã€‚</li><li>Visual C#æ–‡ä»¶æ‰©å±•åä¸º.csã€‚</li><li>çª—ä½“èƒŒæ™¯é¢œè‰²ç”¨BackColorå±æ€§è®¾ç½®ã€‚</li></ul><h2 id="ç¬¬3ç« -C-ç¨‹åºç®€ä»‹"><a href="#ç¬¬3ç« -C-ç¨‹åºç®€ä»‹" class="headerlink" title="ç¬¬3ç«  C#ç¨‹åºç®€ä»‹"></a>ç¬¬3ç«  C#ç¨‹åºç®€ä»‹</h2><p>ç®€å•ç¨‹åºï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//console.WriteLine()å’Œconsole.Write()åŒºåˆ«åœ¨äºæœ€åæ˜¯å¦æœ‰æ¢è¡Œã€‚</span></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Welcome</span> &#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span> &#123;</span><br><span class="line">    Console.WriteLine(<span class="string">"Hello world!"</span>);</span><br><span class="line">    <span class="comment">//ä½¿ç”¨formating</span></span><br><span class="line">    Console.WriteLine(<span class="string">"&#123;0&#125;\n&#123;1&#125;"</span>,<span class="string">"Welcome to"</span>, <span class="string">"C# Programming!"</span>);</span><br><span class="line">    <span class="comment">//è¯»å…¥åŠ è½¬æ¢</span></span><br><span class="line">    Convert.ToInt32(Console.ReadLine());</span><br><span class="line">    <span class="comment">//è¾“å‡ºæŒ‡å®šé•¿åº¦,å¦‚æœéœ€è¦åœ¨å·¦ä¾§åˆ™ä½¿ç”¨&#123;0ï¼Œ-20&#125;è¡¨ç¤º</span></span><br><span class="line">    Console.WriteLine(<span class="string">"&#123;0,4&#125;&#123;1,20:C&#125;"</span>, year, acc ount);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯¾åä¹ é¢˜-2"><a href="#è¯¾åä¹ é¢˜-2" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="3-1-å¡«ç©ºé¢˜"><a href="#3-1-å¡«ç©ºé¢˜" class="headerlink" title="3.1 å¡«ç©ºé¢˜"></a>3.1 å¡«ç©ºé¢˜</h4><ul><li><strong>å·¦èŠ±æ‹¬å·ï¼ˆ { ï¼‰</strong>å¼€å§‹æ–¹æ³•ä½“ï¼Œ<strong>å³èŠ±æ‹¬å·ï¼ˆ } ï¼‰</strong>ç»“æŸæ–¹æ³•ä½“ã€‚</li><li>æ¯æ¡è¯­å¥ä»¥<strong>åˆ†å·</strong>ç»“æŸã€‚</li><li><strong>if</strong>æ˜¯å†³ç­–è¯­å¥ã€‚</li><li>å•è¡Œæ³¨é‡Šä»¥<strong>//</strong>å¼€å§‹ã€‚</li><li><strong>ç©ºè¡Œã€ç©ºæ ¼</strong>å’Œ<strong>åˆ¶è¡¨ç¬¦</strong>ç§°ä¸ºç©ºç™½ç¬¦ï¼Œæ–°è¡Œç¬¦ä¹Ÿæ˜¯ç©ºç™½ç¬¦ã€‚</li><li><strong>å…³é”®å­—</strong>ä¿ç•™ç»™C#ä½¿ç”¨ã€‚</li><li>C#ç¨‹åºä»<strong>Main</strong>æ–¹æ³•å¼€å§‹æ‰§è¡Œã€‚</li><li>æ–¹æ³•<strong>Console.WriteLine()</strong>å’Œ<strong>Console.Write()</strong>åœ¨æ§åˆ¶å°çª—å£æ˜¾ç¤ºä¿¡æ¯ã€‚</li></ul><h4 id="3-2-åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰"><a href="#3-2-åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰" class="headerlink" title="3.2 åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰"></a>3.2 åˆ¤æ–­é¢˜ï¼ˆæ›´æ­£è¿‡çš„ï¼‰</h4><ul><li>æ³¨é‡Šä¸åœ¨ç¨‹åºæ‰§è¡Œæ—¶å¯¼è‡´æ“ä½œï¼Œè€Œæ˜¯å»ºæ¡£ç¨‹åºå’Œæ”¹è¿›å…¶å¯è¯»æ€§ã€‚</li><li>C#æ˜¯å¤§å°å†™ç›¸å…³çš„ï¼Œæ‰€ä»¥numberå’ŒNuMbEræ˜¯ä¸åŒå˜é‡ã€‚</li><li>æ±‚ä½™è¿ç®—ç¬¦ï¼ˆ%ï¼‰ä¹Ÿå¯ä»¥åœ¨C#ä¸­å¤„ç†éæ•´æ•°ç®—å­ã€‚</li><li>*ã€/å’Œ%åŒä¸€ä¼˜å…ˆçº§ï¼Œè€Œ+å’Œ-ä½ä¸€çº§ã€‚</li></ul><h2 id="ç¬¬4ç« -ç±»ä¸å¯¹è±¡ç®€ä»‹"><a href="#ç¬¬4ç« -ç±»ä¸å¯¹è±¡ç®€ä»‹" class="headerlink" title="ç¬¬4ç«  ç±»ä¸å¯¹è±¡ç®€ä»‹"></a>ç¬¬4ç«  ç±»ä¸å¯¹è±¡ç®€ä»‹</h2><p>Mainæ˜¯ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œåœ¨ç¨‹åºæ‰§è¡Œæ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œä½†å¤§å¤šæ•°æ–¹æ³•å¹¶ä¸è‡ªåŠ¨è°ƒç”¨ã€‚</p><p>ä¹ æƒ¯ä¸Šï¼Œæ–¹æ³•åä»å¤§å†™å­—æ¯å¼€å§‹ï¼Œåç»­å•è¯é¦–å­—æ¯å¤§å†™ã€‚</p><p>getå’Œsetæ–¹æ³•çš„ä½¿ç”¨ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GradeBook</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">string</span> courseName;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">GradeBook</span>(<span class="params"><span class="keyword">string</span> name</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    CourseName = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ä¹‹åç›´æ¥ä½¿ç”¨CourseNameè·å–åˆ°å…¶å˜é‡</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> CourseName</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">return</span> courseName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">    courseName = <span class="keyword">value</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*æ›´å¥½çš„getå’Œsetæ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">  *public string CourseName&#123;get; set;&#125;</span></span><br><span class="line"><span class="comment">  *ç§°ä¸ºï¼šè‡ªå®ç°å±æ€§</span></span><br><span class="line"><span class="comment">  *ç›´æ¥å†™å‡ºæ¥ï¼Œå£°æ˜+å®ç°ä¸€èµ·å‡ºç°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayMessage</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    Console.WriteLine(<span class="string">"Hello\n&#123;0&#125;"</span>, CourseName)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mainæ–¹æ³•</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GradeBookTest</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params">String[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    GradeBook myGradeBook = <span class="keyword">new</span> GradeBook();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®©Mainæ–¹æ³•æ‰§è¡Œç¨‹åºçš„å…³é”®éƒ¨åˆ†æ˜¯staticå…³é”®å­—ï¼Œè¡¨ç¤ºè¿™ä¸ªMainæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œè°ƒç”¨æ˜¯ä¸å¿…å…ˆåˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ã€‚</p><p>å¯ä»¥åœ¨éœ€è¦æ—¶å£°æ˜æ–°çš„ç±»ç±»å‹ï¼Œå› æ­¤C#ç§°ä¸ºå¯æ‰©å±•è¯­è¨€ã€‚</p><h3 id="å…³äºusingæŒ‡ä»¤"><a href="#å…³äºusingæŒ‡ä»¤" class="headerlink" title="å…³äºusingæŒ‡ä»¤"></a>å…³äºusingæŒ‡ä»¤</h3><p>æ³¨æ„ä¸Šé¢çš„ç¨‹åºï¼Œè¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ç¼–è¯‘å™¨ç¨‹åºä½¿ç”¨Systemåå­—ç©ºé—´ä¸­çš„ç±»ï¼Œå¦‚Consoleç±»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGradeBookç±»å’ŒGradeBookTestç±»åœ¨ç›¸åŒåå­—ç©ºé—´ï¼Œä¸€ä¸ªç±»ä½¿ç”¨åŒä¸€åå­—ç©ºé—´çš„å¦ä¸€ä¸ªç±»ï¼Œä¸éœ€è¦usingæŒ‡ä»¤ã€‚</p><p>æ²¡æœ‰æ˜¾å¼æ”¾è¿›ä¸€ä¸ªåå­—ç©ºé—´çš„ç±»éšå¼æ”¾è¿›å…¨å±€åå­—ç©ºå£ã€‚</p><p>å®é™…ä¸Šä¹Ÿå¯ä»¥ä¸ç”¨usingæŒ‡ä»¤ï¼Œä½¿ç”¨ç±»çš„<strong>å®Œå…¨é™å®šç±»å</strong>ï¼ŒåŒ…æ‹¬å®Œå…¨åå­—ç©ºé—´å’Œç±»åï¼ŒSystem.Console.WriteLine();</p><h3 id="GradeBookç±»å¸¦å®ä¾‹å˜é‡ä¸å±æ€§"><a href="#GradeBookç±»å¸¦å®ä¾‹å˜é‡ä¸å±æ€§" class="headerlink" title="GradeBookç±»å¸¦å®ä¾‹å˜é‡ä¸å±æ€§"></a>GradeBookç±»å¸¦å®ä¾‹å˜é‡ä¸å±æ€§</h3><p>GradeBookç±»çš„æ¯ä¸ªå®ä¾‹åŒ…å«æ¯ä¸ªå®ä¾‹å˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚</p><h3 id="è®¿é—®ä¿®é¥°ç¬¦publicä¸private"><a href="#è®¿é—®ä¿®é¥°ç¬¦publicä¸private" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦publicä¸private"></a>è®¿é—®ä¿®é¥°ç¬¦publicä¸private</h3><p>ç”¨privateå£°æ˜çš„å˜é‡ä¸æ–¹æ³•åªèƒ½åœ¨å£°æ˜è¿™ä¸ªæ–¹æ³•çš„ç±»ä¸­è®¿é—®ã€‚</p><p>ç”¨privateå£°æ˜çš„å®ä¾‹å˜é‡ç§°ä¸ºä¿¡æ¯éšè—ã€‚åœ¨GradeBookç±»ä¸­ï¼Œå±æ€§CourseNameæ“çºµå®ä¾‹å˜é‡courseNameã€‚</p><h3 id="è®¾ç½®ä¸è¯»å–ä¸“ç”¨å®ä¾‹å˜é‡ã€å±æ€§"><a href="#è®¾ç½®ä¸è¯»å–ä¸“ç”¨å®ä¾‹å˜é‡ã€å±æ€§" class="headerlink" title="è®¾ç½®ä¸è¯»å–ä¸“ç”¨å®ä¾‹å˜é‡ã€å±æ€§"></a>è®¾ç½®ä¸è¯»å–ä¸“ç”¨å®ä¾‹å˜é‡ã€å±æ€§</h3><p><strong>å±æ€§ï¼ˆPropertyï¼‰</strong> æ˜¯ç±»ï¼ˆclassï¼‰ã€ç»“æ„ï¼ˆstructureï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰çš„å‘½åï¼ˆnamedï¼‰æˆå‘˜ã€‚ç±»æˆ–ç»“æ„ä¸­çš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•ç§°ä¸º <strong>åŸŸï¼ˆFieldï¼‰</strong>ã€‚å±æ€§ï¼ˆPropertyï¼‰æ˜¯åŸŸï¼ˆFieldï¼‰çš„æ‰©å±•ï¼Œä¸”å¯ä½¿ç”¨ç›¸åŒçš„è¯­æ³•æ¥è®¿é—®ã€‚å®ƒä»¬ä½¿ç”¨ <strong>è®¿é—®å™¨ï¼ˆaccessorsï¼‰</strong> è®©ç§æœ‰åŸŸçš„å€¼å¯è¢«è¯»å†™æˆ–æ“ä½œã€‚</p><p>å°½ç®¡å¯ä»¥å®šä¹‰getå’Œsetæ–¹æ³•ï¼Œä½†C#<strong>å±æ€§</strong>æ›´æ–¹ä¾¿ã€‚</p><p>ä¸Šé¢ç¨‹åºGradeBookç±»ä¸­çš„CourseNameå°±æ˜¯å±æ€§ã€‚å±æ€§å£°æ˜å¯ä»¥æœ‰getè®¿é—®å‡½æ•°ã€setè®¿é—®å‡½æ•°æˆ–ä¸¤è€…çš†æœ‰ã€‚</p><p>å®šä¹‰å±æ€§åï¼Œå¯ä»¥åœ¨ä»£ç ä¸­åƒå˜é‡ä¸€æ ·ä½¿ç”¨ã€‚å¯ä»¥ç”¨èµ‹å€¼è¿ç®—ç¬¦å¯¹å±æ€§èµ‹å€¼ï¼Œå…¶æ‰§è¡Œå±æ€§setå‡½æ•°ä»£ç ã€‚</p><h3 id="getå’Œsetè®¿é—®æ–¹æ³•"><a href="#getå’Œsetè®¿é—®æ–¹æ³•" class="headerlink" title="getå’Œsetè®¿é—®æ–¹æ³•"></a>getå’Œsetè®¿é—®æ–¹æ³•</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String name = gradeBook.CourseName;</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·ä¸èƒ½ç›´æ¥æ“çºµå®ä¾‹å˜é‡courseNameï¼Œå› ä¸ºå®ƒæ˜¯ä¸“ç”¨çš„ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradeBook.CourseBook = <span class="string">"OS"</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶æ–‡æœ¬â€œOSâ€ä¼ å…¥éšå¼å‚æ•°valueï¼Œæ‰§è¡Œsetè®¿é—®æ–¹æ³•ã€‚æ³¨æ„valueåœ¨setè®¿é—®æ–¹æ³•ä¸­éšå¼å£°æ˜å’Œåˆå§‹åŒ–ï¼Œåœ¨setæ–¹æ³•ä½“ä¸­å£°æ˜å±€éƒ¨å˜é‡valueä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚setæ–¹æ³•å®Œæˆä»»åŠ¡åä¸è¿”å›ä»»ä½•æ•°æ®ã€‚</p><p>å£°æ˜é¡ºåºä¸åšè¦æ±‚ã€‚</p><p>åœ¨å…¬ç”¨å±æ€§ä¸­ï¼Œgetæ–¹æ³•å¯ä»¥æ˜¯å…¬ç”¨çš„ï¼Œsetæ–¹æ³•å¯ä»¥æ˜¯ä¸“ç”¨çš„ã€‚</p><h3 id="å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹"><a href="#å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹" class="headerlink" title="å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹"></a>å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹</h3><p>C#è¯­è¨€çš„ç±»å‹åˆ†ä¸ºä¸¤ç±»â€”â€”å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹ã€‚C#çš„ç®€å•ç±»å‹éƒ½æ˜¯å€¼ç±»å‹ã€‚å€¼ç±»å‹çš„å˜é‡ï¼ˆå¦‚intï¼‰åªåŒ…å«è¿™ä¸ªç±»å‹çš„å€¼ã€‚ä¾‹å¦‚ï¼š<code>int count = 7</code>è¡¨ç¤ºï¼šintç±»å‹çš„å˜é‡countï¼Œåªèƒ½åŒ…å«åƒ7è¿™æ ·çš„æ•´æ•°ã€‚</p><p>å¼•ç”¨ç±»å‹çš„å˜é‡ï¼ˆä¹Ÿç§°ä¸ºå¼•ç”¨ï¼‰åŒ…å«å­˜å‚¨å˜é‡æ‰€å¼•ç”¨æ•°æ®çš„å†…å­˜åœ°å€ã€‚è¿™ä¸ªå˜é‡åœ¨ç¨‹åºä¸­ç§°ä¸ºå¼•ç”¨ä¸€ä¸ªå¯¹è±¡ã€‚å³å¼•ç”¨ç±»å‹ï¼ˆGradeBookï¼‰çš„å˜é‡ï¼ˆgradeBookï¼‰åŒ…å«è¯¥ç±»å‹å¯¹è±¡çš„å¼•ç”¨ï¼ˆå†…å­˜åœ°å€ï¼‰ã€‚</p><p>å¼•ç”¨ç±»å‹å®ä¾‹å˜é‡é»˜è®¤åˆå§‹åŒ–ä¸ºnullã€‚stringæ˜¯ä¸ªå¼•ç”¨ç±»å‹å®ä¾‹å˜é‡ã€‚</p><p>å€¼ä¸ºnullçš„å­—ç¬¦ä¸²å˜é‡ä¸æ˜¯ç©ºä¸²ã€‚ç©ºä¸²è¡¨ç¤ºâ€â€æˆ–string.Emptyã€‚nullè¡¨ç¤ºå¼•ç”¨çš„ä¸æ˜¯å¯¹è±¡ã€‚ç©ºä¸²æ˜¯ä¸å«å­—ç¬¦çš„stringå¯¹è±¡ã€‚</p><h3 id="ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡"><a href="#ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡" class="headerlink" title="ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡"></a>ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨åœ¨æ²¡æœ‰æ˜¾å¼æä¾›æ„é€ å‡½æ•°çš„ç±»ä¸­æä¾›ä¸€ä¸ªæ²¡æœ‰å˜å…ƒçš„é»˜è®¤æ„é€ æ–¹æ³•ï¼Œå› æ­¤ä»»ä½•ç±»éƒ½æœ‰å‡½æ•°ã€‚é»˜è®¤æ„é€ æ–¹æ³•ä¸ä¿®æ”¹å®ä¾‹å˜é‡çš„é»˜è®¤å€¼ã€‚å¦‚æœå£°æ˜ç±»çš„ä»»ä½•æ„é€ å‡½æ•°ï¼Œåˆ™C#ä¸å¯¹è¿™ä¸ªç±»åˆ›å»ºé»˜è®¤æ„é€ å‡½æ•°ã€‚</p><p>æ„é€ å‡½æ•°åå¿…é¡»ä¸ç±»åç›¸åŒã€‚ä¸æ–¹æ³•ä¸åŒï¼Œæ„é€ å‡½æ•°ä¸æŒ‡å®šè¿”å›ç±»å‹ï¼ˆè¿voidä¹Ÿæ²¡æœ‰ï¼‰ã€‚</p><h3 id="æµ®ç‚¹æ•°ä¸decimalç±»å‹"><a href="#æµ®ç‚¹æ•°ä¸decimalç±»å‹" class="headerlink" title="æµ®ç‚¹æ•°ä¸decimalç±»å‹"></a>æµ®ç‚¹æ•°ä¸decimalç±»å‹</h3><p>floatã€doubleå’Œdecimalå¯ä»¥åœ¨å†…å­˜ä¸­å­˜å‚¨å®æ•°ã€‚floatå’Œdoubleç±»å‹ç§°ä¸ºæµ®ç‚¹ç±»å‹ï¼Œå®ƒä»¬ä¸decimalçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼šdecimalå˜é‡ç²¾ç¡®å­˜å‚¨æœ‰é™èŒƒå›´çš„å®æ•°ï¼Œè€Œæµ®ç‚¹æ•°åªå­˜å‚¨å®æ•°çš„è¿‘ä¼¼å€¼ï¼Œä½†å–å€¼èŒƒå›´å¤§å¾—å¤šã€‚</p><div class="table-container"><table><thead><tr><th>ç®€å•ç±»å‹</th><th></th><th>æœ‰æ•ˆä½</th><th></th><th></th></tr></thead><tbody><tr><td>float</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>7</td><td></td><td></td></tr><tr><td>double</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>15~16</td><td></td><td>ç²¾åº¦æ˜¯floatçš„2å€</td></tr><tr><td>decimal</td><td></td><td>28~29</td><td>7.33Mæˆ–7.33m</td><td>éœ€è¦doubleå˜é‡2å€å†…å­˜</td></tr></tbody></table></div><p>æ•´æ•°ç›´æ¥èµ‹å€¼ç»™ä¸Šé¢3ç§ç±»å‹ï¼Œéšå¼è½¬æ¢æˆè¿™äº›ç±»å‹ã€‚</p><p>æ ¼å¼é¡¹{0:C}å°†æ•°æ®æ ¼å¼åŒ–ä¸ºé‡‘é¢å€¼ï¼š$3.3</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/format.PNG" alt=""></p><h3 id="è¯¾åä¹ é¢˜-3"><a href="#è¯¾åä¹ é¢˜-3" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="4-1-å¡«ç©ºé¢˜"><a href="#4-1-å¡«ç©ºé¢˜" class="headerlink" title="4.1 å¡«ç©ºé¢˜"></a>4.1 å¡«ç©ºé¢˜</h4><ul><li>æˆ¿å­çš„è“å›¾å°±åƒå¯¹è±¡çš„ç±»ã€‚</li><li>è¿ç®—ç¬¦newåˆ›å»ºå…³é”®å­—å³è¾¹æ‰€æŒ‡å®šçš„å¯¹è±¡ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æ˜¾å¼åœ¨åå­—ç©ºé—´ä¸­å£°æ˜çš„ç±»éšå¼æ”¾åœ¨å…¨å±€åå­—ç©ºé—´ã€‚</li><li>ç±»çš„æ¯ä¸ªå¯¹è±¡ç»´æŠ¤å±æ€§å¤åˆ¶æ—¶ï¼Œè¡¨ç¤ºå±æ€§çš„å­—æ®µä¹Ÿç§°ä¸ºå®ä¾‹å˜é‡ã€‚</li><li>Convertæ–¹æ³•ToDecimalè¿”å›decimalå€¼ã€‚</li><li>Consoleæ–¹æ³•ReadLineè¯»å–å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°æ–°è¡Œç¬¦ï¼Œç„¶åç”¨stringè¿”å›è¿™äº›å­—ç¬¦ï¼ˆä¸åŒ…å«æ–°è¡Œç¬¦ï¼‰ã€‚</li><li>å¯¹äºè‡ªå®ç°å±æ€§ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆä¸“ç”¨å®ä¾‹å˜é‡åŠå…¶getä¸setæ–¹æ³•ã€‚</li></ul><h4 id="4-2-åˆ¤æ–­é¢˜"><a href="#4-2-åˆ¤æ–­é¢˜" class="headerlink" title="4.2 åˆ¤æ–­é¢˜"></a>4.2 åˆ¤æ–­é¢˜</h4><ul><li>æ–¹æ³•å’Œå±æ€§ä½“ç”¨å·¦å³èŠ±æ‹¬å·å®šç•Œã€‚</li><li>å®ä¾‹å˜é‡é»˜è®¤åˆå§‹åŒ–ï¼Œå±€éƒ¨å˜é‡ä¸æ˜¯ã€‚</li><li>æºä»£ç ä¸­çš„å®æ•°å€¼ç§°ä¸ºæµ®ç‚¹æ•°ç›´æ¥è¾“ï¼Œé»˜è®¤ç±»å‹ä¸ºfloatã€‚</li></ul><h2 id="ç¬¬5ç« -æ§åˆ¶è¯­å¥ï¼šç¬¬ä¸€éƒ¨åˆ†"><a href="#ç¬¬5ç« -æ§åˆ¶è¯­å¥ï¼šç¬¬ä¸€éƒ¨åˆ†" class="headerlink" title="ç¬¬5ç«  æ§åˆ¶è¯­å¥ï¼šç¬¬ä¸€éƒ¨åˆ†"></a>ç¬¬5ç«  æ§åˆ¶è¯­å¥ï¼šç¬¬ä¸€éƒ¨åˆ†</h2><h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><p>è§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼ˆprocedureï¼‰ç§°ä¸ºç®—æ³•ï¼ˆalgorithmï¼‰ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>æ‰§è¡Œçš„æ“ä½œï¼ˆactionï¼‰</li><li>æ‰§è¡Œçš„æ“ä½œçš„é¡ºåºï¼ˆorderï¼‰</li></ul><h3 id="ä¼ªä»£ç "><a href="#ä¼ªä»£ç " class="headerlink" title="ä¼ªä»£ç "></a>ä¼ªä»£ç </h3><p>ä¼ªä»£ç æ˜¯äººä¸ºçš„éæ­£å¼è¯­è¨€ï¼Œå¸®åŠ©ç¨‹åºå‘˜å¼€å‘ç®—æ³•ã€‚</p><h3 id="æ§åˆ¶ç»“æ„"><a href="#æ§åˆ¶ç»“æ„" class="headerlink" title="æ§åˆ¶ç»“æ„"></a>æ§åˆ¶ç»“æ„</h3><p>ç¨‹åºä¸­çš„è¯­å¥æŒ‰ç¼–å†™çš„é¡ºåºä¸€æ¡ä¸€æ¡åœ°æ‰§è¡Œï¼Œç§°ä¸ºé¡ºåºæ‰§è¡Œã€‚</p><p>æŒ‡å®šä¸‹ä¸€ä¸ªæ‰§è¡Œçš„è¯­å¥ä¸æ˜¯ç´§é‚»å…¶åçš„è¯­å¥ï¼Œè¿™ç§°ä¸ºæ§åˆ¶è½¬ç§»ã€‚</p><p>ç»“æ„åŒ–ç¼–ç¨‹æ›´æ¸…æ™°ã€æ›´æ˜“è°ƒè¯•ä¸ä¿®æ”¹å¹¶ä¸”ä¸å®¹æ˜“å‡ºé”™ã€‚</p><p>ç ”ç©¶è¡¨æ˜ï¼Œæ‰€æœ‰ç¨‹åºéƒ½å¯ä»¥åªç”¨ä¸‰ç§æ§åˆ¶ç»“æ„ï¼Œå³é¡ºåºç»“æ„ã€é€‰æ‹©ç»“æ„å’Œé‡å¤ç»“æ„ã€‚</p><p><strong>é¡ºåºç»“æ„</strong>æ˜¯C#å†…ç½®çš„ï¼Œé™¤éå¦å¤–æŒ‡å®šï¼Œè®¡ç®—æœºæ€»æ˜¯æŒ‰ç¼–å†™çš„é¡ºåºä¸€æ¡ä¸€æ¡åœ°æ‰§è¡Œã€‚</p><p><strong>é€‰æ‹©ç»“æ„</strong>æœ‰ä¸‰ç§ï¼Œç§°ä¸ºé€‰æ‹©è¯­å¥ã€‚</p><p>ifè¯­å¥ç§°ä¸ºå•é€‰æ‹©è¯­å¥ï¼Œifâ€¦elseè¯­å¥ç§°ä¸ºåŒé€‰æ‹©è¯­å¥ï¼Œswitchè¯­å¥ç§°ä¸ºå¤šé€‰æ‹©è¯­å¥ã€‚</p><p>C#æä¾›å››ç§é‡å¤ç»“æ„ï¼Œç§°ä¸ºé‡å¤è¯­å¥ï¼ˆä¹Ÿç§°ä¸ºè¿­ä»£è¯­å¥æˆ–å¾ªç¯ï¼‰ï¼Œé‡å¤è¯­å¥æœ‰whileã€doâ€¦whileã€forä¸foreachã€‚</p><p><strong>æ§åˆ¶è¯­å¥å°ç»“</strong>ï¼šC#åªæœ‰ä¸‰ç§æ§åˆ¶è¯­å¥ï¼Œåˆ†åˆ«æ˜¯é¡ºåºç»“æ„ã€é€‰æ‹©ç»“æ„ï¼ˆä¸‰ç§ï¼‰å’Œé‡å¤è¯­å¥ï¼ˆå››ç§ï¼‰ã€‚</p><p>C#æä¾›æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ? :ï¼‰ï¼Œå¯ä»¥ä»£æ›¿ifâ€¦elseè¯­å¥ã€‚æ˜¯C#ä¸­å”¯ä¸€çš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆternary operatorï¼‰ï¼Œæ“ä½œæ•°å’Œæ¡ä»¶è¿ç®—ç¬¦ä¸€èµ·å½¢æˆæ¡ä»¶è¡¨è¾¾å¼ï¼ˆconditional expressionï¼‰ã€‚</p><p><strong>å‚æ‚¬elseé—®é¢˜</strong>ï¼šC#ç¼–è¯‘å™¨æ€»æ˜¯å°†elseä¸æœ€æ¥è¿‘çš„ifç›¸å…³è”ï¼Œé™¤éç”¨èŠ±æ‹¬å·æŒ‡å®šã€‚ï¼ˆå°±è¿‘åŸåˆ™ï¼‰</p><p>æ”¾åœ¨èŠ±æ‹¬å·ä¸­çš„ä¸€ç»„è¯­å¥ç§°ä¸º<strong>å—</strong>ã€‚</p><p><strong>ç®€å•ç±»å‹é—´çš„æ˜¾å¼å’Œéšå¼è½¬æ¢</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> average;</span><br><span class="line"><span class="keyword">int</span> total,gradeCounter;</span><br><span class="line">average = (<span class="keyword">double</span>)total / gradeCounter;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨doubleç±»å‹è½¬æ¢ç¬¦ç§°ä¸ºæ˜¾å¼è½¬æ¢ï¼Œè¿™æ˜¯çš„è®¡ç®—å¼æµ®ç‚¹æ•°é™¤ä»¥æ•´æ•°ï¼Œè¦ä¿è¯æ“ä½œæ•°çš„æ•°æ®ç±»å‹ä¸€è‡´ï¼ŒC#å°†intæ“ä½œæ•°æå‡ä¸ºdoubleï¼ˆæå‡æ“ä½œï¼Œä¹Ÿç§°ä¸ºéšå¼è½¬æ¢ï¼‰ã€‚</p><p><strong>C#æ”¯æŒå¤åˆèµ‹å€¼è¿ç®—ç¬¦</strong></p><p>åˆ†åˆ«ä¸ºï¼š+=ï¼Œ-=ï¼Œ*=ï¼Œ/=å’Œ%=</p><p><strong>ä¹Ÿæ”¯æŒè‡ªå¢è‡ªå‡</strong>ï¼Œå‰ç½®å’Œåç½®</p><p>C#ä¹Ÿæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå³è¦æ±‚æ‰€æœ‰å˜é‡éƒ½å…·æœ‰ç±»å‹ã€‚</p><h3 id="è¯¾åä¹ é¢˜-4"><a href="#è¯¾åä¹ é¢˜-4" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="5-1-å¡«ç©ºé¢˜"><a href="#5-1-å¡«ç©ºé¢˜" class="headerlink" title="5.1 å¡«ç©ºé¢˜"></a>5.1 å¡«ç©ºé¢˜</h4><ul><li>å°†ä¸€ç»„æŒ‡ä»¤é‡å¤ç‰¹å®šæ¬¡æ•°ç§°ä¸º<strong>è®¡æ•°å™¨æ§åˆ¶æˆ–ç¡®å®š</strong>é‡å¤ã€‚</li><li>äº‹å…ˆä¸çŸ¥é“ä¸€ç»„æŒ‡ä»¤çš„é‡å¤æ¬¡æ•°ï¼Œå¯ä»¥ç”¨æ ‡è®°ï¼ˆè®°å·ï¼Œæ ‡å¿—æˆ–å“‘å…ƒï¼‰å€¼ç»ˆæ­¢é‡å¤ã€‚</li></ul><h4 id="5-2-åˆ¤æ–­é¢˜"><a href="#5-2-åˆ¤æ–­é¢˜" class="headerlink" title="5.2 åˆ¤æ–­é¢˜"></a>5.2 åˆ¤æ–­é¢˜</h4><ul><li>æŒ‡å®šè®¡ç®—æœºç¨‹åºæ‰§è¡Œè¯­å¥çš„é¡ºåºç§°ä¸ºç¨‹åºæ§åˆ¶ã€‚</li></ul><h2 id="ç¬¬6ç« -æ§åˆ¶è¯­å¥ï¼šç¬¬äºŒéƒ¨åˆ†"><a href="#ç¬¬6ç« -æ§åˆ¶è¯­å¥ï¼šç¬¬äºŒéƒ¨åˆ†" class="headerlink" title="ç¬¬6ç«  æ§åˆ¶è¯­å¥ï¼šç¬¬äºŒéƒ¨åˆ†"></a>ç¬¬6ç«  æ§åˆ¶è¯­å¥ï¼šç¬¬äºŒéƒ¨åˆ†</h2><p><strong>forå¾ªç¯è¯­å¥</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>( <span class="keyword">int</span> counter = <span class="number">1</span>; counter &lt;= <span class="number">10</span>; counter++, total += counter )</span><br><span class="line">&#123;</span><br><span class="line">  statement/empty statement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>switchå¤šé€‰æ‹©è¯­å¥</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(grade / <span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">  <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">    ++aCount;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    ++bCount;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>breakè¯­å¥</p><p>continueè¯­å¥åœ¨å¾ªç¯ç»“æ„ä¸­æ‰§è¡Œæ—¶è·³è¿‡è¯¥ç»“æ„ä½“çš„å…¶ä½™è¯­å¥ï¼Œè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚</p><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><p>æœ‰&amp;&amp;ï¼ˆæ¡ä»¶ä¸ï¼‰ã€||ï¼ˆæ¡ä»¶æˆ–ï¼‰ã€&amp;ï¼ˆå¸ƒå°”é€»è¾‘ä¸ï¼‰ã€|ï¼ˆå¸ƒå°”é€»è¾‘æˆ–ï¼‰ã€^ï¼ˆå¸ƒå°”é€»è¾‘å¼‚æˆ–ï¼‰å’Œ!ï¼ˆé€»è¾‘éï¼‰ã€‚</p><p>åªæœ‰é€»è¾‘éæ˜¯ä¸€å…ƒè¿ç®—ç¬¦ã€‚</p><p>çŸ­è·¯æ±‚å€¼ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gender == <span class="string">'F'</span>) &amp;&amp; (++age &gt;= <span class="number">65</span>)</span><br></pre></td></tr></table></figure><p>å°†åœ¨genderä¸ç­‰äºâ€œFâ€æ—¶ç«‹å³åœæ­¢ï¼ˆæ•´ä¸ªè¡¨è¾¾å¼ä¸ºå‡ï¼‰ã€‚</p><p>å¸ƒå°”é€»è¾‘ï¼ˆ&amp;å’Œ|ï¼‰ä¸è¿›è¡ŒçŸ­è·¯æ±‚å€¼ï¼Œæ‰€ä»¥å¦‚æœç”¨å¸ƒå°”è¡¨è¾¾å¼++age&gt;=ä¼šæ‰§è¡Œï¼Œageå€¼ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><h3 id="è¯¾åä¹ é¢˜-5"><a href="#è¯¾åä¹ é¢˜-5" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="6-1-å¡«ç©ºé¢˜"><a href="#6-1-å¡«ç©ºé¢˜" class="headerlink" title="6.1 å¡«ç©ºé¢˜"></a>6.1 å¡«ç©ºé¢˜</h4><ul><li>é€šå¸¸ï¼Œforè¯­å¥ç”¨äºè®¡æ•°å™¨æ§åˆ¶å¾ªç¯ï¼Œwhileè¯­å¥ç”¨äºæ ‡è®°æ§åˆ¶å¾ªç¯ã€‚</li></ul><h4 id="6-2-åˆ¤æ–­é¢˜"><a href="#6-2-åˆ¤æ–­é¢˜" class="headerlink" title="6.2 åˆ¤æ–­é¢˜"></a>6.2 åˆ¤æ–­é¢˜</h4><ul><li>switché€‰æ‹©ç»“æ„çš„æ¯ä¸ªcaseä¸­å¯ä»¥ä½¿ç”¨breakè¯­å¥é€€å‡ºå½“å‰caseç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨returnè¯­å¥ã€‚</li></ul><h2 id="ç¬¬7ç« -æ–¹æ³•è¯¦è¿°"><a href="#ç¬¬7ç« -æ–¹æ³•è¯¦è¿°" class="headerlink" title="ç¬¬7ç«  æ–¹æ³•è¯¦è¿°"></a>ç¬¬7ç«  æ–¹æ³•è¯¦è¿°</h2><p>åˆ†æ²»æ³•ï¼ˆdivide and conquerï¼‰ï¼šç»éªŒè¡¨æ˜ï¼Œè¦å¼€å‘å’Œç»´æŠ¤å¤§ç¨‹åºï¼Œæœ€å¥½çš„åŠæ³•æ˜¯ä»æ›´å®¹æ˜“ç®¡ç†çš„å°å—å’Œå°ç»„ä»¶å¼€å§‹ã€‚</p><h3 id="C-ä»£ç åŒ…è£…"><a href="#C-ä»£ç åŒ…è£…" class="headerlink" title="C#ä»£ç åŒ…è£…"></a>C#ä»£ç åŒ…è£…</h3><p>ä»£ç åŒ…è£…çš„ä¸‰ç§å¸¸è§é€”å¾„æ˜¯æ–¹æ³•ã€ç±»å’Œåå­—ç©ºé—´ã€‚</p><p>æ–¹æ³•ï¼ˆå‡½æ•°ã€è¿‡ç¨‹ï¼‰å¯ä»¥å°†ç¨‹åºæ¨¡å—åŒ–ï¼Œç”¨æˆ·å®šä¹‰æ–¹æ³•ã€‚åˆ†æ²»ï¼Œå¤ç”¨ã€‚</p><h3 id="é™æ€æ–¹æ³•ï¼Œé™æ€å˜é‡å’ŒMathç±»"><a href="#é™æ€æ–¹æ³•ï¼Œé™æ€å˜é‡å’ŒMathç±»" class="headerlink" title="é™æ€æ–¹æ³•ï¼Œé™æ€å˜é‡å’ŒMathç±»"></a>é™æ€æ–¹æ³•ï¼Œé™æ€å˜é‡å’ŒMathç±»</h3><p>æ‰€æœ‰Mathæ–¹æ³•éƒ½æ˜¯é™æ€çš„ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine( Math.Sqrt( a + b * c ) )</span><br></pre></td></tr></table></figure><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/Math.PNG" alt="Math"></p><p><strong>é™æ€å¸¸é‡</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Math.PI</span><br><span class="line">Math.E</span><br></pre></td></tr></table></figure><p>è¿™äº›å˜é‡åœ¨Mathç±»ä¸­å£°æ˜ï¼Œä¿®é¥°ç¬¦ä¸ºpublicä¸constã€‚ä»»ä½•ç”¨å…³é”®å­—constå£°æ˜çš„å˜é‡éƒ½æ˜¯å¸¸é‡ï¼Œå£°æ˜ä¹‹åä¸èƒ½æ”¹å˜æ•°å€¼ã€‚</p><p>å‰é¢æåˆ°ï¼Œå±æ€§çš„å˜é‡ä¹Ÿç§°ä¸ºå®ä¾‹å˜é‡ï¼Œç±»çš„æ¯ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­æœ‰è¿™ä¸ªå˜é‡çš„ä¸åŒå®ä¾‹ã€‚ä½†é™æ€å˜é‡ï¼Œç±»çš„æ¯ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­æ²¡æœ‰è¿™ä¸ªå˜é‡çš„ä¸åŒå®ä¾‹ã€‚ç±»çš„å¯¹è±¡åŒ…å«é™æ€å˜é‡æ—¶ï¼Œè¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«é™æ€å˜é‡çš„åŒä¸€å¤‡ä»½ã€‚</p><p><strong>ä¸ºä»€ä¹ˆMainæ–¹æ³•å£°æ˜ä¸ºstaticï¼Ÿ</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span> args[]</span>)</span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mainæ–¹æ³•å£°æ˜ä¸ºstaticæ˜¯æ‰§è¡Œç¯å¢ƒå¯ä»¥è°ƒç”¨Mainæ–¹æ³•è€Œä¸å¿…åˆ›å»ºç±»çš„å®ä¾‹ã€‚</p><p>string args[]å¯ä»¥çœç•¥ï¼Œpublicä¹Ÿå¯ä»¥çœç•¥ï¼Œvoidä¹Ÿå¯æ›¿æ¢ä¸ºint</p><p><strong>ç”¨å­—ç¬¦ä¸²æ¥åˆç»„è£…å­—ç¬¦ä¸²</strong></p><p>C#ä¸­ç”Ÿæˆstringå¯¹è±¡æ—¶å¯ä»¥ç”¨è¿ç®—ç¬¦+ï¼ˆæˆ–å¤åˆèµ‹å€¼è¿ç®—ç¬¦+=ï¼‰å°†å°å­—ç¬¦ä¸²ç»„è£…æˆå¤§å­—ç¬¦ä¸²ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> result = <span class="number">9.35000</span>;</span><br><span class="line">Console.WriteLine(<span class="string">"Maximum is: "</span> + result);</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡ºä¸ºï¼šMaximum is: 9.35</p><p>å¸ƒå°”å€¼ä¹Ÿä¼šéšå¼è½¬æ¢æˆstringã€‚</p><h3 id="å…³äºæ–¹æ³•çš„å£°æ˜ä¸ä½¿ç”¨"><a href="#å…³äºæ–¹æ³•çš„å£°æ˜ä¸ä½¿ç”¨" class="headerlink" title="å…³äºæ–¹æ³•çš„å£°æ˜ä¸ä½¿ç”¨"></a>å…³äºæ–¹æ³•çš„å£°æ˜ä¸ä½¿ç”¨</h3><p>å¯ä»¥ç”¨ä¸‰ç§æ–¹å¼è°ƒç”¨æ–¹æ³•ã€‚</p><h3 id="æ–¹æ³•è°ƒç”¨å †æ ˆäº‘æ¿€æ´»è®°å½•"><a href="#æ–¹æ³•è°ƒç”¨å †æ ˆäº‘æ¿€æ´»è®°å½•" class="headerlink" title="æ–¹æ³•è°ƒç”¨å †æ ˆäº‘æ¿€æ´»è®°å½•"></a>æ–¹æ³•è°ƒç”¨å †æ ˆäº‘æ¿€æ´»è®°å½•</h3><p>å †æ ˆæ˜¯åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰æ•°æ®ç»“æ„ã€‚</p><p>ç¨‹åºè°ƒç”¨æ–¹æ³•æ˜¯ï¼Œè¢«è°ƒçš„æ–¹æ³•è¦çŸ¥é“å¦‚ä½•æ”¾å›è°ƒç”¨è€…ï¼Œå› æ­¤æŠŠè°ƒç”¨è€…çš„è¿”å›åœ°å€å‹å…¥ç¨‹åºæ‰§è¡Œå †æ ˆï¼ˆä¹Ÿç§°æ–¹æ³•è°ƒç”¨å †æ ˆï¼‰ã€‚</p><p>ç¨‹åºæ‰§è¡Œå †æ ˆè¿˜åŒ…å«ç¨‹åºæ‰§è¡ŒæœŸé—´æ¯ä¸ªæ–¹æ³•è°ƒç”¨ä½¿ç”¨çš„å±€éƒ¨å˜é‡ã€‚è¿™ä¸ªæ•°æ®å­˜æ”¾æˆç¨‹åºæ‰§è¡Œå †æ ˆçš„ä¸€éƒ¨åˆ†ï¼Œç§°ä¸ºæ–¹æ³•è°ƒç”¨çš„æ¿€æ´»è®°å½•( activation record)æˆ–å †æ ˆå¸§( stack frame)ã€‚è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ¿€æ´»è®°å½•å‹è¿›ç¨‹åºæ‰§è¡Œå †æ ˆã€‚æ–¹æ³•è¿”å›è°ƒç”¨è€…æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ¿€æ´»è®°å½•å‡ºæ ˆï¼Œç¨‹åºä¸å†çŸ¥é“è¿™äº›å±€éƒ¨å˜é‡ã€‚å¦‚æœå±€éƒ¨å˜é‡ä¿å­˜å¯¹è±¡å¼•ç”¨ï¼Œæ˜¯å…·æœ‰è¯¥å¯¹è±¡å¼•ç”¨çš„ç¨‹åºä¸­å”¯ä¸€å˜é‡ï¼Œåˆ™åŒ…å«è¿™ä¸ªå±€éƒ¨å˜é‡çš„æ¿€æ´»è®°å½•å‡ºæ ˆæ—¶ï¼Œç¨‹åºä¸èƒ½å†è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼Œæœ€ç»ˆä¼šåœ¨â€œå†…å­˜å›æ”¶â€æ—¶ä»å†…å­˜ä¸­åˆ é™¤ã€‚<br>å½“ç„¶ï¼Œè®¡ç®—æœºçš„å†…å­˜é‡æœ‰é™,å› æ­¤åªèƒ½ç”¨ä¸€å®šé‡çš„å†…å­˜å­˜å‚¨ç¨‹åºæ‰§è¡Œå †æ ˆä¸­çš„æ¿€æ´»è®°å½•ã€‚å¦‚æœå‘ç”Ÿçš„æ–¹æ³•è°ƒç”¨å¤ªå¤šï¼Œç¨‹åºæ‰§è¡Œå †æ ˆæ— æ³•å­˜å‚¨å…¶æ¿€æ´»è®°å½•,åˆ™ä¼šå‘ç”Ÿå †æ ˆæº¢å‡ºé”™è¯¯ã€‚</p><h3 id="å˜å…ƒæå‡ä¸ç±»å‹è½¬æ¢"><a href="#å˜å…ƒæå‡ä¸ç±»å‹è½¬æ¢" class="headerlink" title="å˜å…ƒæå‡ä¸ç±»å‹è½¬æ¢"></a>å˜å…ƒæå‡ä¸ç±»å‹è½¬æ¢</h3><p>æ–¹æ³•è°ƒç”¨çš„å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯å˜å…ƒæå‡â€”â€”éšå¼åœ°å°†å˜å…ƒå€¼å˜æˆæ–¹æ³•å‚æ•°æ‰€éœ€è¦çš„ç±»å‹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine( Math.Sqrt( <span class="number">4</span> ) );</span><br></pre></td></tr></table></figure><p>è™½ç„¶Sqrtæ–¹æ³•è¦æ±‚doubleå˜å…ƒï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨æ•´å‹å€¼ï¼Œæ‰“å°æ•°å€¼2.0ã€‚æ–¹æ³•å£°æ˜çš„å‚æ•°è¡¨ä½¿C#å°†intå€¼4è½¬æ¢æˆdoubleå€¼4.0ï¼Œç„¶åä¼ å…¥Sqrtæ–¹æ³•ã€‚</p><p>éšå¼è½¬æ¢è¦æ±‚æ»¡è¶³å‡çº§è§„åˆ™ï¼Œå¦åˆ™å¿…é¡»æ˜¾å¼è½¬æ¢ã€‚</p><p>æ‰€æœ‰ç®€å•ç±»å‹éƒ½å¯ä»¥éšå¼è½¬æ¢ä¸ºobjectç±»å‹ã€‚</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/Implicit.PNG" alt="Implicit"></p><h3 id="NETæ¡†æ¶ç±»åº“"><a href="#NETæ¡†æ¶ç±»åº“" class="headerlink" title=".NETæ¡†æ¶ç±»åº“"></a>.NETæ¡†æ¶ç±»åº“</h3><p>è®¸å¤šé¢„å®šä¹‰ç±»ç»„æˆç›¸å…³ç±»çš„åå­—ç©ºé—´ã€‚åå­—ç©ºé—´ç»„æˆ.NETæ¡†æ¶ç±»åº“ï¼ˆå³FCLï¼‰ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br></pre></td></tr></table></figure><p>ç¨‹åºå¯ä»¥ä½¿ç”¨Systemåå­—ç©ºé—´çš„ç±»åï¼Œä¸å¿…ç”¨å®Œå…¨é™å®šåã€‚</p><p>C#çš„ä¸€ä¸ªå¼ºå¤§ä¹‹å¤„æ˜¯FCLçš„åå­—ç©ºé—´ä¸­æœ‰è®¸å¤šç±»ã€‚</p><p align="center">  <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/FCL_namespace.PNG">  <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/FCL_namespace_next.PNG" alt="FCL"></p><h3 id="éšæœºæ•°ç”Ÿæˆ"><a href="#éšæœºæ•°ç”Ÿæˆ" class="headerlink" title="éšæœºæ•°ç”Ÿæˆ"></a>éšæœºæ•°ç”Ÿæˆ</h3><p>å¯ä»¥ç”¨éšæœºæ•°ç”Ÿæˆå™¨<strong>å¯¹è±¡</strong>äº§ç”Ÿéšæœºbyteã€intä¸doubleå€¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Random randomNumbers = <span class="keyword">new</span> Random();</span><br><span class="line"><span class="comment">// Nextæ–¹æ³•äº§ç”Ÿå€¼ï¼š0&lt;=randomValue&lt;=+2147483646</span></span><br><span class="line"><span class="keyword">int</span> randomValue = randomNumber.Next();</span><br><span class="line"><span class="comment">// è¿”å›0ã€1ã€2ã€3ã€4ã€5ã€‚å˜å…ƒ6ç§°ä¸ºæ¯”ä¾‹å› å­ï¼Œè¡¨ç¤ºNextè¦äº§ç”Ÿçš„æ•°å€¼çš„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">int</span> randomValue = randomNumber.Next( <span class="number">6</span> );</span><br><span class="line"><span class="comment">// è¿”å›1ã€2ã€3ã€4ã€5ã€6</span></span><br><span class="line"><span class="keyword">int</span> randomValue = <span class="number">1</span> + randomNumber.Next( <span class="number">6</span> );</span><br><span class="line"><span class="comment">// è¿”å›1ã€2ã€3ã€4ã€5ã€6</span></span><br><span class="line"><span class="keyword">int</span> randomValue = randomNumber.Next( <span class="number">1</span>, <span class="number">7</span> );</span><br></pre></td></tr></table></figure><p>Nextè¿”å›çš„å€¼å®é™…ä¸Šæ˜¯ä¼ªéšæœºæ•°â€”â€”é€šè¿‡å¤æ‚æ•°å­¦è®¡ç®—äº§ç”Ÿçš„æ•°å€¼åºåˆ—ã€‚ç”¨å½“å‰æ—¶é—´ä½œä¸ºç§å­ã€‚</p><h3 id="æ¯”ä¾‹ç¼©æ”¾ä¸ç§»åŠ¨éšæœºæ•°"><a href="#æ¯”ä¾‹ç¼©æ”¾ä¸ç§»åŠ¨éšæœºæ•°" class="headerlink" title="æ¯”ä¾‹ç¼©æ”¾ä¸ç§»åŠ¨éšæœºæ•°"></a>æ¯”ä¾‹ç¼©æ”¾ä¸ç§»åŠ¨éšæœºæ•°</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¿”å›<span class="number">2</span>ã€<span class="number">5</span>ã€<span class="number">8</span>ã€<span class="number">11</span>ã€<span class="number">14</span></span><br><span class="line"><span class="keyword">int</span> number = <span class="number">2</span> + <span class="number">3</span> * randomNumber.Next( <span class="number">5</span> )</span><br></pre></td></tr></table></figure><h3 id="éšæœºæ•°å¯é‡å¤æ€§ä¸æµ‹è¯•-è°ƒè¯•"><a href="#éšæœºæ•°å¯é‡å¤æ€§ä¸æµ‹è¯•-è°ƒè¯•" class="headerlink" title="éšæœºæ•°å¯é‡å¤æ€§ä¸æµ‹è¯•/è°ƒè¯•"></a>éšæœºæ•°å¯é‡å¤æ€§ä¸æµ‹è¯•/è°ƒè¯•</h3><p>è¦ä¿è¯è¿è¡Œå’Œè°ƒè¯•æ˜¯éšæœºæ•°ä¸€è‡´</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Random randomNumbers = <span class="keyword">new</span> Random( seedValue );</span><br></pre></td></tr></table></figure><p>seedValueå˜å…ƒï¼ˆintç±»å‹ï¼‰æä¾›éšæœºæ•°è®¡ç®—çš„ç§å­ã€‚å¦‚æœæ¯æ¬¡ä½¿ç”¨ç›¸åŒçš„seedValueï¼Œåˆ™Randomå¯¹è±¡äº§ç”Ÿç›¸åŒçš„éšæœºæ•°åˆ—ã€‚</p><h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">enum</span> Status &#123; CONTINUE, WON, LOST &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">enum</span> DiceNames</span><br><span class="line">&#123;</span><br><span class="line">  SNAKE_EYES = <span class="number">2</span>,</span><br><span class="line">  ...</span><br><span class="line">  TREY = <span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜ä½œç”¨åŸŸ"><a href="#å£°æ˜ä½œç”¨åŸŸ" class="headerlink" title="å£°æ˜ä½œç”¨åŸŸ"></a>å£°æ˜ä½œç”¨åŸŸ</h3><ul><li><p>å‚æ•°å£°æ˜çš„ä½œç”¨åŸŸæ˜¯å£°æ˜æ‰€åœ¨çš„æ–¹æ³•ä½“ã€‚</p></li><li><p>å±€éƒ¨å˜é‡å£°æ˜çš„ä½œç”¨åŸŸä»å£°æ˜ç‚¹å¼€å§‹ï¼Œåˆ°å£°æ˜æ‰€åœ¨å—ç»“æŸä¸ºæ­¤ã€‚</p></li><li><p>forè¯­å¥é¦–éƒ¨åˆå§‹åŒ–éƒ¨åˆ†å‡ºç°çš„å±€éƒ¨å˜é‡å£°æ˜çš„ä½œç”¨åŸŸæ˜¯forè¯­å¥ä½“å’Œé¦–éƒ¨çš„å…¶ä»–è¡¨è¾¾å¼ã€‚</p></li><li><p>ç±»çš„æ–¹æ³•ã€å±æ€§ã€å­—æ®µçš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªç±»ä½“ã€‚è¿™å°±ä½¿ç±»çš„éé™æ€æ–¹æ³•ä¸å±æ€§å¯ä»¥ä½¿ç”¨ç±»çš„ä»»ä½•æ–¹æ³•ã€å±æ€§ã€å­—æ®µï¼Œä¸ç®¡å£°æ˜é¡ºåºå¦‚ä½•ã€‚åŒæ ·ï¼Œ<strong>é™æ€å±æ€§ä¸æ–¹æ³•å¯ä»¥ä½¿ç”¨ç±»çš„ä»»ä½•é™æ€æˆå‘˜</strong>ã€‚</p></li></ul><h3 id="æ–¹æ³•é‡è½½"><a href="#æ–¹æ³•é‡è½½" class="headerlink" title="æ–¹æ³•é‡è½½"></a>æ–¹æ³•é‡è½½</h3><p>ä¸€ä¸ªç±»ä¸­å¯ä»¥å£°æ˜åŒåæ–¹æ³•ï¼Œåªè¦å…¶å‚æ•°é›†ä¸åŒï¼ˆå‚æ•°ä¸ªæ•°ã€ç±»å‹å’Œé¡ºåºï¼‰ï¼Œç§°ä¸ºæ–¹æ³•é‡è½½ã€‚</p><p><strong>åŒºåˆ«é‡è½½æ–¹æ³•</strong></p><p>ç¼–è¯‘å™¨æ ¹æ®ç­¾ååŒºåˆ«é‡è½½æ–¹æ³•ï¼Œç­¾åæ˜¯æ–¹æ³•åå’Œå‚æ•°ä¸ªæ•°ã€ç±»å‹ä¸é¡ºåºåœ°ç»„åˆã€‚</p><p><strong>é‡è½½æ–¹æ³•çš„è¿”å›ç±»å‹</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Square</span>(<span class="params"> <span class="keyword">int</span> x </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">Square</span>(<span class="params"> <span class="keyword">int</span> y </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> y * y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢2ä¸ªæ–¹æ³•<strong>ç­¾åç›¸åŒ</strong>ï¼Œè¿”å›å€¼ç±»å‹ä¸åŒï¼Œä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">Factorial</span>(<span class="params"> <span class="keyword">long</span> number </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// base case</span></span><br><span class="line">  <span class="keyword">if</span>(number &lt;= <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> number * Factorial( number <span class="number">-1</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‰å€¼ä¸æŒ‰å¼•ç”¨ä¼ é€’å˜å…ƒ"><a href="#æŒ‰å€¼ä¸æŒ‰å¼•ç”¨ä¼ é€’å˜å…ƒ" class="headerlink" title="æŒ‰å€¼ä¸æŒ‰å¼•ç”¨ä¼ é€’å˜å…ƒ"></a>æŒ‰å€¼ä¸æŒ‰å¼•ç”¨ä¼ é€’å˜å…ƒ</h3><p>å‚æ•°å£°æ˜ä¸­ä½¿ç”¨å…³é”®å­—refå¯ä»¥æŒ‰å¼•ç”¨å°†å˜é‡ä¼ é€’ç»™æ–¹æ³•â€”â€”è¢«è°ƒæ–¹æ³•å¯ä»¥ä¿®æ”¹è°ƒç”¨è€…çš„åŸå˜é‡ã€‚refå…³é”®å­—ç”¨äºè°ƒç”¨æ–¹æ³•ä¸­å·²ç»åˆå§‹åŒ–çš„å˜é‡ã€‚</p><p>åœ¨å‚æ•°å‰é¢åŠ ä¸Šå…³é”®å­—outå¯ä»¥å»ºç«‹è¾“å‡ºå‚æ•°ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜å…ƒæŒ‰å¼•ç”¨ä¼ å…¥è¢«è°ƒæ–¹æ³•ï¼Œè¢«è°ƒæ–¹æ³•å¯¹è°ƒç”¨è€…çš„åŸå˜é‡èµ‹å€¼ã€‚å¦‚æœæ–¹æ³•ä¸­æ²¡æœ‰åœ¨æ¯ä¸ªæ‰§è¡Œè·¯å¾„ä¸Šå¯¹è¾“å‡ºå‚æ•°èµ‹å€¼ï¼Œåˆ™ç¼–è¯‘å™¨æŠ¥é”™ã€‚</p><p>ä¸€ä¸ªæ–¹æ³•åªèƒ½é€šè¿‡returnè¯­å¥å‘è°ƒç”¨è€…è¿”å›ä¸€ä¸ªå€¼ï¼Œä½†æŒ‡å®šå¤šä¸ªè¾“å‡ºå‚æ•°ï¼ˆrefæˆ–outï¼‰å¯ä»¥è¿”å›å¤šä¸ªå€¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ReferenceAndOutParameters</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> y = <span class="number">5</span>; <span class="comment">// initialize y to 5</span></span><br><span class="line">  <span class="keyword">int</span> z; <span class="comment">// declare z, but does not initilize it</span></span><br><span class="line">  </span><br><span class="line">  SquareRef(<span class="keyword">ref</span> y);</span><br><span class="line">  SquareOut(<span class="keyword">out</span> z);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SquareRef</span>(<span class="params"><span class="keyword">ref</span> <span class="keyword">int</span> x</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  x = x * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SquareOut</span>(<span class="params"><span class="keyword">out</span> <span class="keyword">int</span> x</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  x = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯¾åä¹ é¢˜-6"><a href="#è¯¾åä¹ é¢˜-6" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="7-1-å¡«ç©ºé¢˜"><a href="#7-1-å¡«ç©ºé¢˜" class="headerlink" title="7.1 å¡«ç©ºé¢˜"></a>7.1 å¡«ç©ºé¢˜</h4><ul><li>æ•°æ®åªèƒ½ä»å †æ ˆ<strong>é¡¶</strong>å¢åŠ å’Œå–å‡ºã€‚</li><li>å°†æ§åˆ¶ä»è¢«è°ƒæ–¹æ³•è¿”å›è°ƒç”¨è€…çš„ä¸‰ç§æ–¹æ³•æ˜¯ï¼š<strong>return</strong>ï¼Œ<strong>return expression</strong>æˆ–<strong>æ–¹æ³•å³èŠ±æ‹¬å·å¤„</strong></li><li>ç¨‹åºæ‰§è¡Œå †æ ˆåŒ…å«ç¨‹åºæ‰§è¡ŒæœŸé—´æ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶å±€éƒ¨å˜é‡çš„å†…å­˜ã€‚è¿™ä¸ªæ•°æ®å­˜æ”¾åœ¨ç¨‹åºæ‰§è¡Œå †æ ˆä¸­ï¼Œç§°ä¸ºæ–¹æ³•è°ƒç”¨çš„<strong>æ´»åŠ¨è®°å½•</strong>æˆ–<strong>å †æ ˆé¡¶</strong>ã€‚</li></ul><h2 id="ç¬¬8ç« -æ•°ç»„"><a href="#ç¬¬8ç« -æ•°ç»„" class="headerlink" title="ç¬¬8ç«  æ•°ç»„"></a>ç¬¬8ç«  æ•°ç»„</h2><p>å‰é¢è¯´è¿‡ï¼Œç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç±»â€”â€”å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ã€‚</p><p>æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šçš„æ•°ç»„å®é™…ä¸Šæ˜¯å†…å­˜ä¸­æ•°ç»„å®ä¾‹çš„å¼•ç”¨ã€‚</p><p>æ•°ç»„çš„å…ƒç´ å¯ä»¥æ˜¯å€¼ç±»å‹æˆ–å¼•ç”¨ç±»å‹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">5</span>;</span><br><span class="line">b=<span class="number">6</span>;</span><br><span class="line"><span class="comment">// ç´¢å¼•åº”ä¸ºéè´Ÿæ•´æ•°æˆ–æ•´å‹è¡¨è¾¾å¼</span></span><br><span class="line">c[a + b] +=<span class="number">2</span>;</span><br><span class="line"><span class="comment">// å°†å…ƒç´ c[11]åŠ 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ•°ç»„çš„Lengthå±æ€§ç¡®å®šæ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="comment">// æ³¨æ„æ•°ç»„çš„Lengthå±æ€§ä¸èƒ½æ”¹å˜ï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•</span></span><br><span class="line">c.Length</span><br></pre></td></tr></table></figure><p>æ•°ç»„ç´¢å¼•å€¼åº”ä¸ºintã€uintã€longã€ulongç±»å‹æˆ–å¯ä»¥éšå¼å‡çº§ä¸ºè¿™äº›ç±»å‹çš„å€¼ã€‚</p><p><strong>å£°æ˜ä¸åˆ›å»ºæ•°ç»„</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span>[] array2;</span><br><span class="line">array2 = <span class="keyword">new</span> <span class="keyword">string</span>[<span class="number">12</span>];</span><br><span class="line"><span class="comment">// æ¯ä¸ªå…ƒç´ æ¥æ”¶é»˜è®¤å€¼, æ•°ç»„ç®€å•ç±»å‹å…ƒç´ ä¸º0, å¸ƒå°”å…ƒç´ ä¸ºfalse, å¼•ç”¨ä¸ºnull</span></span><br></pre></td></tr></table></figure><p><strong>æ”¹å˜æ•°ç»„é•¿åº¦</strong></p><p>è™½ç„¶æ•°ç»„æ˜¯å®šé•¿å®ä½“ï¼Œä½†å¯ä»¥ç”¨é™æ€Arrayæ–¹æ³•Resizeæ”¹å˜æ•°ç»„é•¿åº¦ã€‚è¿™ä¸ªæ–¹æ³•åˆ›å»ºæŒ‡å®šé•¿åº¦çš„æ–°æ•°ç»„ï¼Œå°†åŸæ•°ç»„å†…å®¹å¤åˆ¶åˆ°æ–°æ•°ç»„ï¼Œå¹¶<strong>å°†æ”¶åˆ°çš„å˜é‡è®¾ç½®ä¸ºå¼•ç”¨æ–°æ•°ç»„çš„ç¬¬ä¸€ä¸ª</strong>ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array3 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">Array.Resize( <span class="keyword">ref</span> array3, <span class="number">10</span> );</span><br></pre></td></tr></table></figure><p>å¦‚æœæ–°æ•°ç»„æ¯”æ—§æ•°ç»„å°ï¼Œåˆ™åé¢çš„å†…å®¹è¢«æˆªå°¾ã€‚</p><p><strong>ä½¿ç”¨æ•°ç»„åˆå§‹åŒ–å™¨</strong></p><p>é€—å·åˆ†éš”çš„è¡¨è¾¾å¼æ¸…å•ï¼ˆç§°ä¸ºåˆå§‹åŒ–æ¸…å•ï¼‰ï¼Œæ”¾åœ¨èŠ±æ‹¬å·ä¸­ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array4 = &#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨é‡åˆ°åŒ…æ‹¬åˆå§‹åŒ–æ¸…å•çš„æ•°ç»„å£°æ˜æ—¶ï¼Œé¦–å…ˆè®¡ç®—æ¸…å•ä¸­çš„åˆå§‹åŒ–å™¨ä¸ªæ•°ï¼Œç¡®å®šæ•°ç»„é•¿åº¦ï¼Œç„¶ååœ¨â€œå¹•åâ€å»ºç«‹ç›¸åº”çš„newæ“ä½œã€‚</p><p>å£°æ˜å¸¸é‡å…¨éƒ¨ç”¨å¤§å†™å­—æ¯ã€‚</p><p><strong>ç”¨æ•°ç»„å…ƒç´ ä½œä¸ºè®¡æ•°å™¨</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RollDie</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"> <span class="keyword">string</span>[] args </span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    Random randomNumbers = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="keyword">int</span>[] frequency = <span class="keyword">new</span> <span class="keyword">int</span>[ <span class="number">7</span> ];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> roll = <span class="number">1</span>; roll &lt;= <span class="number">6000</span>; roll++)</span><br><span class="line">      ++frequency[ randomNumber.Next(<span class="number">1</span>, <span class="number">7</span>) ];</span><br><span class="line">    </span><br><span class="line">    Console.writeLine(<span class="string">"&#123;0&#125;&#123;1, 10&#125;"</span>, <span class="string">"Face"</span>, <span class="string">"Frequency"</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> face = <span class="number">1</span>; face &lt; frequency.Length; face++)</span><br><span class="line">      Console.writeLine(<span class="string">"&#123;0, 4&#125;&#123;1, 10&#125;"</span>, face, frequency[face]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Face Frequency</span><br><span class="line">   1       956</span><br><span class="line">   2       981</span><br><span class="line">   3      1001</span><br><span class="line">   4      1030</span><br><span class="line">   5      1035</span><br><span class="line">   6       997</span><br></pre></td></tr></table></figure><p><strong>foreachè¯­å¥</strong></p><p>foreachè¯­å¥åªèƒ½è®¿é—®æ•°ç»„å…ƒç´ ï¼Œä¸èƒ½ä¿®æ”¹å…ƒç´ ã€‚å¦åˆ™ç¼–è¯‘é”™è¯¯ã€‚</p><p><strong>éšå¼ç±»å‹å±€éƒ¨å˜é‡</strong></p><p>C#æä¾›äº†éšå¼ç±»å‹å±€éƒ¨å˜é‡ç‰¹æ€§ï¼Œæ˜¯ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å˜é‡åˆå§‹åŒ–å€¼ç±»å‹æ¨å‡ºå±€éƒ¨å˜é‡çš„ç±»å‹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="number">7</span>; <span class="comment">// ç¼–è¯‘å™¨æ¨å‡ºå˜é‡xç±»å‹ä¸ºintï¼Œå› ä¸ºç¼–è¯‘å™¨è®¤ä¸º7ä¹‹ç±»çš„æ•´æ•°æ˜¯intç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> <span class="number">-123.45</span>; <span class="comment">// double</span></span><br><span class="line"><span class="keyword">var</span> array5 = <span class="keyword">new</span>[] (<span class="number">32</span>, <span class="number">27</span>, <span class="number">64</span>, <span class="number">18</span>, <span class="number">95</span>, <span class="number">14</span>);</span><br></pre></td></tr></table></figure><p><strong>å°†æ•°ç»„ä¸æ•°ç»„å…ƒç´ ä¼ å…¥æ–¹æ³•</strong></p><p>æŒ‡å®šä¸å¸¦æ–¹æ‹¬å·çš„æ•°ç»„åã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ModifyArray</span>(<span class="params"><span class="keyword">double</span>[] a</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•è°ƒç”¨è¯­å¥</span></span><br><span class="line"><span class="keyword">double</span>[] array6 = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">24</span>];</span><br><span class="line">ModifyArray( array6 );</span><br><span class="line"><span class="comment">// æ¥æ”¶doubleæ•°ç»„çš„å¼•ç”¨, aä¸array6æ˜¯ç›¸åŒå¯¹è±¡</span></span><br></pre></td></tr></table></figure><p><strong>æŒ‰å€¼ä¸æŒ‰å¼•ç”¨ä¼ é€’æ•°ç»„</strong></p><p>C#ä¸­â€œå­˜å‚¨â€æ•°ç»„ä¹‹ç±»å¯¹è±¡çš„å˜é‡å¹¶ä¸å®é™…å­˜å‚¨å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯å­˜å‚¨å¯¹è±¡çš„å¼•ç”¨ï¼ˆå³å­˜å‚¨å¯¹è±¡çš„è®¡ç®—æœºå†…å­˜åœ°å€ï¼‰ã€‚</p><h3 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h3><p>äºŒç»´çš„å¤šç»´æ•°ç»„ä¹Ÿç§°ä¸ºæ•°å€¼è¡¨ï¼ŒæŠŠä¿¡æ¯æ”¾åœ¨è¡Œå’Œåˆ—ä¸­ã€‚</p><p>c#æ”¯æŒä¸¤ç§äºŒç»´æ•°ç»„â€”â€”çŸ©å½¢æ•°ç»„å’Œé½¿çŠ¶æ•°ç»„ã€‚</p><p><strong>çŸ©å½¢æ•°ç»„</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[ , ] array7 = &#123; &#123;<span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>&#125; &#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨åœ¨æ¯è¡Œçš„åˆå§‹åŒ–å™¨ä¸ªæ•°ä¸åŒæ—¶äº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºçŸ©å½¢æ•°ç»„çš„æ¯ä¸€è¡Œè¦é•¿åº¦ç›¸åŒã€‚</p><p><strong>é½¿çŠ¶æ•°ç»„</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] jagged = &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">2</span>&#125;,</span><br><span class="line">  <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">3</span>&#125;,</span><br><span class="line">  <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ•°ç»„jaggedæœ¬èº«æ˜¯ä¸‰ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå„å¼•ç”¨ä¸€ä¸ªintå€¼çš„ä¸€ç»´æ•°ç»„ã€‚</p><p>æ³¨æ„çŸ©å½¢æ•°ç»„ä¸é½¿çŠ¶æ•°ç»„çš„æ•°ç»„ç”Ÿæˆè¡¨è¾¾å¼å·®åˆ«ã€‚jaggedæ•°ç»„åé¢æ˜¯ä¸¤ç»„æ–¹æ‹¬å·ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸ªintæ•°ç»„çš„æ•°ç»„ã€‚åœ¨æ•°ç»„åˆå§‹åŒ–å™¨ä¸­ï¼ŒC#è¦æ±‚ç”¨newå…³é”®å­—åˆ›å»ºæ¯ä¸€è¡Œçš„æ•°ç»„å¯¹è±¡ã€‚</p><p><strong>ç”¨æ•°ç»„ç”Ÿæˆè¡¨è¾¾å¼åˆ›å»ºäºŒç»´æ•°ç»„</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[,] array8;</span><br><span class="line">array8 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>, <span class="number">4</span>]; <span class="comment">// 3è¡Œ4åˆ—</span></span><br><span class="line"><span class="comment">// é½¿çŠ¶æ•°ç»„ä¸èƒ½å¦‚æ­¤</span></span><br><span class="line"><span class="keyword">int</span>[][] array9 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">5</span>]; <span class="comment">// error</span></span><br><span class="line"><span class="comment">// è€Œæ˜¯</span></span><br><span class="line"><span class="keyword">int</span>[][] a;</span><br><span class="line">a = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][]; <span class="comment">// 2è¡Œ</span></span><br><span class="line">a[<span class="number">0</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">a[<span class="number">1</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</span><br></pre></td></tr></table></figure><p><strong>æ¸¸é•¿å˜å…ƒè¡¨ï¼ˆVariable-length argument listsï¼‰</strong></p><p>å¯ä»¥åˆ›å»ºæ¥æ”¶ä»»æ„ä¸ªå˜å…ƒçš„æ–¹æ³•ã€‚</p><p>ä¸€ç»´æ•°ç»„å‹å˜å…ƒå‰é¢åŠ ä¸Šå…³é”®å­—paramsåœ¨æ–¹æ³•å‚æ•°è¡¨ä¸­ï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä»»æ„ä¸ªå˜å…ƒï¼Œç±»å‹ä¸ºæ•°ç»„<strong>å…ƒç´ </strong>ç±»å‹ã€‚paramsä¿®é¥°ç¬¦çš„è¿™ä¸ªç”¨æ³•åªèƒ½åœ¨å‚æ•°è¡¨æœ€åä¸€ä¸ªé¡¹ç›®ä¸­å‡ºç°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">Average</span>(<span class="params"><span class="keyword">params</span> <span class="keyword">double</span>[] numbers</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">double</span> total = <span class="number">0.0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">foreach</span>(<span class="keyword">double</span> d <span class="keyword">in</span> numbers)</span><br><span class="line">    total += d;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> total / numbers.Length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params">String[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">double</span> d1 = <span class="number">10.0</span>;</span><br><span class="line">  <span class="keyword">double</span> d2 = <span class="number">10.0</span>;</span><br><span class="line">  <span class="keyword">double</span> d3 = <span class="number">10.0</span>;</span><br><span class="line">  </span><br><span class="line">  Console.WriteLine( Average(d1, d2) ); <span class="comment">// 15.0</span></span><br><span class="line">  Console.WriteLine( Average(d1, d2, d3) ); <span class="comment">// 20.0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å‘½ä»¤è¡Œå˜å…ƒ</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ArgTest</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params">String[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">if</span>(args.Length == <span class="number">0</span>)</span><br><span class="line">      Console.WriteLine(<span class="string">"The number of arg is 0!"</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">foreach</span>(<span class="keyword">var</span> arg <span class="keyword">in</span> args)</span><br><span class="line">        Console.WriteLine(arg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ArgTest.exe 1 2 3</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="è¯¾åä¹ é¢˜-7"><a href="#è¯¾åä¹ é¢˜-7" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="8-1-å¡«ç©ºé¢˜"><a href="#8-1-å¡«ç©ºé¢˜" class="headerlink" title="8.1 å¡«ç©ºé¢˜"></a>8.1 å¡«ç©ºé¢˜</h4><ul><li>æ¸…å•ä¸æ•°å€¼è¡¨å¯ä»¥å­˜æ”¾åœ¨<strong>æ•°ç»„</strong>ä¸­ã€‚</li><li>å‘½ä»¤è¡Œå˜å…ƒå­˜æ”¾åœ¨<strong>stringsæ•°ç»„ï¼Œé€šå¸¸ç§°args</strong>ä¸­ã€‚</li></ul><h2 id="ç¬¬9ç« -LINQä¸æ³›å‹é›†åˆç®€ä»‹"><a href="#ç¬¬9ç« -LINQä¸æ³›å‹é›†åˆç®€ä»‹" class="headerlink" title="ç¬¬9ç«  LINQä¸æ³›å‹é›†åˆç®€ä»‹"></a>ç¬¬9ç«  LINQä¸æ³›å‹é›†åˆç®€ä»‹</h2><p>ä¸€ç»„é¢„åŒ…è£…æ•°æ®ç»“æ„â€”â€”.NETæ¡†æ¶é›†åˆç±»ã€‚</p><p>LINQï¼ˆlanguage Integrated Queryï¼Œè¯­è¨€é›†æˆæŸ¥è¯¢è¡¨è¾¾å¼ï¼‰ã€‚åˆ©ç”¨LINQå¯ä»¥ç¼–å†™ä¸SQLæŸ¥è¯¢ç›¸è¯†çš„æŸ¥è¯¢è¡¨è¾¾å¼ï¼Œä»å„ç§æ•°æ®æºï¼Œä¸é™äºæ•°æ®åº“ï¼Œè¿˜æœ‰æ•°ç»„å’Œlisté©±åŠ¨ä¿¡æ¯ï¼Œé€‰æ‹©ç¬¦åˆä¸€ç»„æ¡ä»¶çš„å…ƒç´ ï¼Œç§°ä¸ºç­›é€‰ã€‚</p><p>å£°æ˜å¼ç¼–ç¨‹ï¼šLINQæŒ‡å®šçš„ä¸æ˜¯è¯»å–ç»“æœæ‰€è¦çš„<strong>æ­¥éª¤</strong>ï¼Œè€Œæ˜¯æ‰€é€‰å…ƒç´ è¦æ»¡è¶³çš„<strong>æ¡ä»¶</strong>ã€‚</p><p>æŒ‡å®šå¼ç¼–ç¨‹ï¼šæŒ‡å®šæ‰§è¡Œä»»åŠ¡æ‰€æœ‰çš„æ­¥éª¤ï¼Œé¢å‘å¯¹è±¡æ˜¯æŒ‡ç¤ºå¼ç¼–ç¨‹çš„å­é›†ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">LINQWithArray</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">int</span>[] values = &#123;<span class="number">2</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> filtered = </span><br><span class="line">      <span class="keyword">from</span> <span class="keyword">value</span> <span class="keyword">in</span> values</span><br><span class="line">      <span class="keyword">where</span> <span class="keyword">value</span> &gt; <span class="number">4</span></span><br><span class="line">      <span class="keyword">select</span> <span class="keyword">value</span>;</span><br><span class="line">    </span><br><span class="line">    Display(filtered); <span class="comment">// 9 5 7 8 5</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> sorted = </span><br><span class="line">      <span class="keyword">from</span> <span class="keyword">value</span> <span class="keyword">in</span> values</span><br><span class="line">      <span class="keyword">orderby</span> <span class="keyword">value</span></span><br><span class="line">      <span class="keyword">select</span> <span class="keyword">value</span>;</span><br><span class="line">    </span><br><span class="line">    Display(sorted); <span class="comment">// 0 1 2 3 4 5 7 8 9</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> sortedAndfiltered = </span><br><span class="line">      <span class="keyword">from</span> <span class="keyword">value</span> <span class="keyword">in</span> values</span><br><span class="line">      <span class="keyword">where</span> <span class="keyword">value</span> &gt; <span class="number">4</span></span><br><span class="line">      <span class="keyword">orderby</span> <span class="keyword">value</span></span><br><span class="line">      <span class="comment">// orderby value desending éƒ½æ˜¯é™åº</span></span><br><span class="line">      <span class="keyword">select</span> <span class="keyword">value</span>; <span class="comment">// </span></span><br><span class="line">    </span><br><span class="line">    Display(sortedAndfiltered); <span class="comment">// 9 8 7 5 5</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// IEnumerable&lt;int&gt;æ˜¯ä¸ªæ¥å£ï¼Œæè¿°çš„å¯¹è±¡å¯è¿­ä»£</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Display</span>(<span class="params">IEnumerable&lt;<span class="keyword">int</span>&gt; results</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="keyword">var</span> element <span class="keyword">in</span> results)</span><br><span class="line">      Console.WriteLine(<span class="string">" &#123;0&#125;"</span>, element);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç”¨æ³›å‹æ–¹æ³•æ˜¾ç¤ºLINQæŸ¥è¯¢ç»“æœ</strong></p><p>æ³›å‹æ–¹æ³•ï¼ŒæŒ‡å®šä¸€ä¸ªç±»å‹å‚æ•°è¡¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> Display&lt;T&gt;(IEnumerable&lt;T&gt; results)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">foreach</span>(T element <span class="keyword">in</span> results)</span><br><span class="line">    Console.WriteLine(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Employee[] employees;</span><br><span class="line"><span class="keyword">int</span>[] array;</span><br><span class="line"></span><br><span class="line">Display(employees);</span><br><span class="line">Display(array);</span><br></pre></td></tr></table></figure><p>Tæ˜¯ç±»å‹å˜å…ƒçš„å ä½ç¬¦ã€‚è°ƒç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œç¼–è¯‘å™¨æ ¹æ®è°ƒç”¨ä¸­çš„å˜å…ƒæŒ‡å®šæ¯ä¸ªç±»å‹è¡¨ç¤ºçš„ç±»å‹ã€‚</p><p>Tå¯ä»¥åœ¨å‚æ•°è¡¨å’Œæ–¹æ³•ä½“ä¸­å¤šæ¬¡å‡ºç°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼ã€‚</p><h3 id="é›†åˆç®€ä»‹"><a href="#é›†åˆç®€ä»‹" class="headerlink" title="é›†åˆç®€ä»‹"></a>é›†åˆç®€ä»‹</h3><p>.NETæ¡†æ¶ç±»åº“æä¾›äº†å‡ ä¸ªç±»ï¼ˆç§°ä¸ºé›†åˆï¼‰ï¼Œå¯ä»¥å­˜å‚¨ç›¸å…³å¯¹è±¡é›†åˆã€‚</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/List.PNG" alt="List"></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collection.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ListCollection</span></span><br><span class="line">&#123;</span><br><span class="line">  List&lt;<span class="keyword">string</span>&gt; items = <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;();</span><br><span class="line">  </span><br><span class="line">  items.Add(<span class="string">"red"</span>);</span><br><span class="line">  items.Insert(<span class="number">0</span>, <span class="string">"yellow"</span>); <span class="comment">// yellow, red</span></span><br><span class="line">  items.Add(<span class="string">"yellow"</span>); <span class="comment">// yellow, red, yellow</span></span><br><span class="line">  items.Remove(<span class="string">"yellow"</span>); <span class="comment">// red, yellow</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨LINQæŸ¥è¯¢æ³›å‹é›†åˆ"><a href="#ç”¨LINQæŸ¥è¯¢æ³›å‹é›†åˆ" class="headerlink" title="ç”¨LINQæŸ¥è¯¢æ³›å‹é›†åˆ"></a>ç”¨LINQæŸ¥è¯¢æ³›å‹é›†åˆ</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Collection.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LINQListCollection</span></span><br><span class="line">&#123;</span><br><span class="line">  List&lt;<span class="keyword">string</span>&gt; items = <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;();</span><br><span class="line">  </span><br><span class="line">  items.Add(<span class="string">"aQua"</span>);</span><br><span class="line">  items.Add(<span class="string">"RusT"</span>);</span><br><span class="line">  items.Add(<span class="string">"yElLow"</span>);</span><br><span class="line">  items.Add(<span class="string">"rEd"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// List&lt;string&gt; items = new List&lt;string&gt;&#123;"aQua", "RusT", "yElLow", "rEd"&#125;;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> startWithR = </span><br><span class="line">    <span class="keyword">from</span> item <span class="keyword">in</span> items</span><br><span class="line">    <span class="keyword">let</span> uppercasedString = item.ToUpper()</span><br><span class="line">    <span class="keyword">where</span> uppercasedString.StartsWith(<span class="string">"R"</span>)</span><br><span class="line">    <span class="keyword">orderby</span> uppercasedString</span><br><span class="line">    <span class="keyword">select</span> uppercasedString;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">foreach</span>(<span class="keyword">var</span> item <span class="keyword">in</span> startWithR)</span><br><span class="line">    Console.Write(<span class="string">"&#123;0&#125; "</span>, item); <span class="comment">// RED RUST</span></span><br><span class="line">  </span><br><span class="line">  items.Add(<span class="string">"rUby"</span>);</span><br><span class="line">  items.Add(<span class="string">"SaFfRon"</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">foreach</span>(<span class="keyword">var</span> item <span class="keyword">in</span> startWithR)</span><br><span class="line">    Console.Write(<span class="string">"&#123;0&#125; "</span>, item); <span class="comment">// RED RUBY RUST </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>æŸ¥è¯¢åªåˆ›å»ºä¸€æ¬¡ï¼Œä½†å¯¹ç»“æœè¿­ä»£å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„åˆ—è¡¨ã€‚è¿™é‡Œæ¼”ç¤ºäº†LINQçš„å»¶è¿Ÿæ‰§è¡Œâ€”â€”æŸ¥è¯¢<strong>åªåœ¨è®¿é—®ç»“æœæ—¶æ‰æ‰§è¡Œ</strong>ï¼Œè€Œä¸æ˜¯åœ¨å®šä¹‰æŸ¥è¯¢æ—¶æ‰§è¡Œã€‚ä¸€æ¬¡åˆ›å»ºï¼Œå¤šæ¬¡æ‰§è¡Œï¼Œæ•°æ®æ”¹å˜ï¼Œè¿”å›ç»“æœã€‚</p></blockquote><h3 id="è¯¾åä¹ é¢˜-8"><a href="#è¯¾åä¹ é¢˜-8" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="9-1-å¡«ç©ºé¢˜"><a href="#9-1-å¡«ç©ºé¢˜" class="headerlink" title="9.1 å¡«ç©ºé¢˜"></a>9.1 å¡«ç©ºé¢˜</h4><ul><li>é›†åˆç±»ä¸“é—¨ç”¨äºå­˜å‚¨å¯¹è±¡ç»„å’Œæä¾›ç»„ç»‡ã€å­˜å‚¨ä¸è¯»å–å¯¹è±¡çš„æ–¹æ³•ã€‚</li></ul><h2 id="ç¬¬10ç« -å†è®ºç±»ä¸å¯¹è±¡"><a href="#ç¬¬10ç« -å†è®ºç±»ä¸å¯¹è±¡" class="headerlink" title="ç¬¬10ç«  å†è®ºç±»ä¸å¯¹è±¡"></a>ç¬¬10ç«  å†è®ºç±»ä¸å¯¹è±¡</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span>.Format(<span class="string">"&#123;0:D2&#125;:&#123;1:D2&#125;:&#123;2:D2&#125;"</span>, hour, minute, second);</span><br></pre></td></tr></table></figure><p>Format()è¿”å›æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯åœ¨æ§åˆ¶å°æ˜¾ç¤ºã€‚</p><h3 id="ç”¨thiså¼•ç”¨è®¿é—®å½“å‰å¯¹è±¡æˆå‘˜"><a href="#ç”¨thiså¼•ç”¨è®¿é—®å½“å‰å¯¹è±¡æˆå‘˜" class="headerlink" title="ç”¨thiså¼•ç”¨è®¿é—®å½“å‰å¯¹è±¡æˆå‘˜"></a>ç”¨thiså¼•ç”¨è®¿é—®å½“å‰å¯¹è±¡æˆå‘˜</h3><p>æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥ç”¨å…³é”®å­—thiså¼•ç”¨è‡ªå·±ã€‚è°ƒç”¨ç‰¹ç‚¹å¯¹è±¡çš„éé™æ€æ–¹æ³•æ—¶ï¼Œæ–¹æ³•ä½“éšå¼ç”¨å…³é”®å­—thiså¼•ç”¨è¿™ä¸ªå¯¹è±¡çš„å®ä¾‹å˜é‡å’Œå…¶ä»–æˆå‘˜ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SimpleTime</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> hour;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SimpleTime</span>(<span class="params"><span class="keyword">int</span> hour</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">this</span>.hour = hour;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">BuildString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">this</span>.ToString();</span><br><span class="line">    ToString();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">ToString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    reutrn <span class="keyword">string</span>.Format(<span class="string">"0:D2"</span>, <span class="keyword">this</span>.hour);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç´¢å¼•å™¨"><a href="#ç´¢å¼•å™¨" class="headerlink" title="ç´¢å¼•å™¨"></a>ç´¢å¼•å™¨</h3><p>ç±»å¯ä»¥ç”¨å…³é”®å­—thiså®šä¹‰å±æ€§å¼çš„ç±»æˆå‘˜ï¼Œç§°ä¸ºç´¢å¼•å™¨ï¼Œå¯ä»¥åƒæ•°ç»„ä¸€æ ·ç”¨ç´¢å¼•è®¿é—®å…ƒç´ æ¸…å•ã€‚ç´¢å¼•å™¨çš„å¥½å¤„æ˜¯å¯ä»¥å®šä¹‰æ•´æ•°ç´¢å¼•å’Œéæ•´æ•°ç´¢å¼•ã€‚</p><p>ç´¢å¼•å™¨åœ¨ç±»ä¸­åƒå±æ€§ä¸€æ ·å®šä¹‰ï¼Œç”¨å…³é”®å­—thiså®šä¹‰ï¼Œä¸èƒ½ç”¨staticä¿®é¥°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Box</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">string</span>[] names = &#123;<span class="string">"length"</span>, <span class="string">"width"</span>, <span class="string">"height"</span>&#125;;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span>[] dimensions = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">3</span>];</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Box</span>(<span class="params"><span class="keyword">double</span> length, <span class="keyword">double</span> width, <span class="keyword">double</span> heght</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    dimensions[<span class="number">0</span>] = length;</span><br><span class="line">    dimensions[<span class="number">1</span>] = width;</span><br><span class="line">    dimensions[<span class="number">2</span>] = height;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">double</span> <span class="keyword">this</span>[<span class="keyword">int</span> index]</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span>( (index&lt;<span class="number">0</span>) || (index&gt;=dimensions.Length) )</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> dimensions[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span>( (index&gt;=<span class="number">0</span>) || (index&lt;dimensions.Length) )</span><br><span class="line">        dimensions[index] = vlaue;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">double</span> <span class="keyword">this</span>[<span class="keyword">string</span> name]</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span>((i&lt;names.Length) &amp;&amp; (name.ToLower()!=names[i]))</span><br><span class="line">        ++i;</span><br><span class="line">      <span class="keyword">return</span> (i == naems.Length) ? <span class="number">-1</span> : dimensions[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">while</span>((i&lt;names.Length) &amp;&amp; (name.ToLower()!=names[i]))</span><br><span class="line">        ++i;</span><br><span class="line">      <span class="keyword">if</span>(i != names.Length)</span><br><span class="line">        dimensions[i] = <span class="keyword">value</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BoxTest.cs</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BoxTest</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params">String[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    Box box = <span class="keyword">new</span> Box(<span class="number">30</span>, <span class="number">30</span> ,<span class="number">30</span>);</span><br><span class="line">    <span class="comment">// box[0] 30</span></span><br><span class="line">    <span class="comment">// box[1] 30</span></span><br><span class="line">    <span class="comment">// box[2] 30</span></span><br><span class="line">    box[<span class="number">0</span>]=<span class="number">10</span>;</span><br><span class="line">    box[<span class="string">"width"</span>]=<span class="number">20</span>;</span><br><span class="line">    <span class="comment">// box[0] 10</span></span><br><span class="line">    <span class="comment">// box[1] 20</span></span><br><span class="line">    <span class="comment">// box[2] 30</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç´¢å¼•å™¨å¯ä»¥é‡è½½ã€‚</p><h3 id="é‡è½½æ„é€ å‡½æ•°"><a href="#é‡è½½æ„é€ å‡½æ•°" class="headerlink" title="é‡è½½æ„é€ å‡½æ•°"></a>é‡è½½æ„é€ å‡½æ•°</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Time</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> hour;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> minute;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Time</span>(<span class="params"></span>) : <span class="title">this</span>(<span class="params"><span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span>)</span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Time</span>(<span class="params"><span class="keyword">int</span> h</span>) : <span class="title">this</span>(<span class="params">h, <span class="number">0</span>, <span class="number">0</span></span>)</span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Time</span>(<span class="params"><span class="keyword">int</span> h, <span class="keyword">int</span> m</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    SetTime(h ,m);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Time</span>(<span class="params">Time time</span>) : <span class="title">this</span>(<span class="params">time.Hour, time.Minute</span>)</span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SetTime</span>(<span class="params"><span class="keyword">int</span> h, <span class="keyword">int</span> m</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    Hour = h;</span><br><span class="line">    Minute = m;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">int</span> Hour</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">return</span> hour;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªç±»å¤–ä¸èƒ½ä½¿ç”¨setæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">set</span></span><br><span class="line">    &#123;</span><br><span class="line">      hour = ((<span class="keyword">value</span>&gt;=<span class="number">0</span> &amp;&amp; <span class="keyword">value</span>&lt;<span class="number">24</span>) ? <span class="keyword">value</span> : <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">int</span> Minute</span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„thiså¼•ç”¨ç”¨æ³•ç§°ä¸ºæ„é€ å‡½æ•°åˆå§‹åŒ–å™¨ï¼Œæ˜“ç»´æŠ¤ã€‚</p><h3 id="é»˜è®¤ä¸æ— å‚æ•°æ„é€ å‡½æ•°"><a href="#é»˜è®¤ä¸æ— å‚æ•°æ„é€ å‡½æ•°" class="headerlink" title="é»˜è®¤ä¸æ— å‚æ•°æ„é€ å‡½æ•°"></a>é»˜è®¤ä¸æ— å‚æ•°æ„é€ å‡½æ•°</h3><p>æ³¨æ„ä¸Šé¢Timeæ— å‚æ„é€ å‡½æ•°ï¼Œæ˜¾å¼åˆå§‹åŒ–Timeå¯¹è±¡ï¼Œä¸ºæ¯ä¸ªå‚æ•°ä¼ é€’ä¸‰ä¸ªå‚æ•°0ã€‚å¦‚æœçœç•¥æ— å‚æ„é€ å‡½æ•°ï¼Œåˆ™æ— æ³•ç”¨è¡¨è¾¾å¼<code>new Time()</code>åˆ›å»ºå¯¹è±¡ï¼Œä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p><h3 id="åˆæˆ"><a href="#åˆæˆ" class="headerlink" title="åˆæˆ"></a>åˆæˆ</h3><p>ç±»å¯ä»¥å¼•ç”¨å…¶ä»–ç±»çš„å¯¹è±¡ï¼Œä½œä¸ºæˆå‘˜ã€‚è¿™ä¸ªåŠŸèƒ½ç§°ä¸ºåˆæˆï¼Œä¹Ÿç§°ä¸ºâ€œæœ‰â€ï¼ˆhas-aï¼‰å…³ç³»ã€‚</p><p>Employeeç±»ä¸­å¼•ç”¨å…¶ä»–å¯¹è±¡</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Employee</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> Date birthDate;</span><br><span class="line">  <span class="keyword">private</span> Date hireDate;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å†…å­˜å›æ”¶ä¸ææ„å‡½æ•°"><a href="#å†…å­˜å›æ”¶ä¸ææ„å‡½æ•°" class="headerlink" title="å†…å­˜å›æ”¶ä¸ææ„å‡½æ•°"></a>å†…å­˜å›æ”¶ä¸ææ„å‡½æ•°</h3><p>Garbage Collection and Destructors</p><p>å¦‚æœç®¡ç†èµ„æºçš„å¯¹è±¡å¤±å»æ‰€æœ‰å¼•ç”¨ï¼Œè€Œè¿˜æ²¡æœ‰æ˜¾å¼é‡Šæ”¾èµ„æºï¼Œåˆ™ç¨‹åºä¸èƒ½å†è®¿é—®å’Œé‡Šæ”¾è¿™ä¸ªèµ„æºã€‚è¿™å°±äº§ç”Ÿäº†èµ„æºæ³„éœ²ã€‚</p><p>å…¬å…±è¯­è¨€è¿è¡Œç¯å¢ƒï¼ˆCLRï¼‰è¿›è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œç”¨å†…å­˜å›æ”¶å•å…ƒï¼ˆGarbage Collectionï¼‰é‡Šæ”¾å¯¹è±¡ä¸å†éœ€è¦çš„å†…å­˜ï¼Œå…¶ä»–å¯¹è±¡å¯ä»¥ä½¿ç”¨è¿™ä¸ªå†…å­˜ã€‚</p><p>å¯¹è±¡å¤±å»æ‰€æœ‰å¼•ç”¨æ—¶ï¼Œæˆä¸ºå¯ææ„å¯¹è±¡ã€‚æ¯ä¸ªå¯¹è±¡æœ‰ä¸ªç‰¹æ®Šæˆå‘˜ï¼Œç§°ä¸ºææ„å‡½æ•°ã€‚</p><p>ææ„å‡½æ•°ç”±å†…å­˜å›æ”¶å•å…ƒè°ƒç”¨ï¼Œåœ¨å†…å­˜å›æ”¶å•å…ƒé‡Šæ”¾å¯¹è±¡å†…å­˜ä¹‹å‰ç”¨äºè¿›è¡Œå¯¹è±¡çš„ç»ˆæ­¢æ•´ç†å·¥ä½œã€‚</p><h3 id="é™æ€ç±»æˆå‘˜"><a href="#é™æ€ç±»æˆå‘˜" class="headerlink" title="é™æ€ç±»æˆå‘˜"></a>é™æ€ç±»æˆå‘˜</h3><p>static Class Members</p><p>æŸäº›æƒ…å†µä¸‹ï¼Œç±»çš„æ‰€æœ‰å¯¹è±¡è¦å…±äº«æŸä¸ªå˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™æ—¶å°±è¦ä½¿ç”¨é™æ€å˜é‡ã€‚é™æ€å˜é‡è¡¨ç¤ºç±»ä¿¡æ¯ï¼Œç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€æ•°æ®ã€‚é™æ€å˜é‡çš„ä½œç”¨åŸŸæ˜¯ç±»ä½“ã€‚</p><ul><li>ç±»çš„å…¬ç”¨é™æ€æˆå‘˜è®¿é—®æ–¹æ³•ï¼š<strong>ç±»å</strong>å’Œç‚¹å·è¿ç®—ç¬¦<code>Math.PI</code>ï¼›</li><li>ç±»çš„ä¸“ç”¨é™æ€æˆå‘˜åªèƒ½é€šè¿‡ç±»çš„æ–¹æ³•å’Œå±æ€§è®¿é—®ã€‚</li></ul><p>å¦‚æœæ²¡æœ‰Employeeç±»çš„å¯¹è±¡ï¼Œåˆ™æˆå‘˜countä»»ç„¶å¯ä»¥å¼•ç”¨ï¼Œå¼¹è¯é€šè¿‡é™æ€å±æ€§Countï¼Œå¦‚<code>Employee.Count</code>C#çš„å­—ç¬¦ä¸²å¯¹è±¡åˆ›å»ºåä¸èƒ½ä¿®æ”¹ã€‚</p><p>å£°æ˜ä¸ºé™æ€çš„æ–¹æ³•ä¸èƒ½ç›´æ¥è®¿é—®éé™æ€ç±»æˆå‘˜ï¼Œå› ä¸ºå³ä½¿ç±»å¯¹è±¡ä¸å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚é™æ€æ–¹æ³•ä¹Ÿä¸èƒ½ä½¿ç”¨thiså¼•ç”¨ï¼Œthiså¼•ç”¨è¦å¼•ç”¨ç‰¹å®šç±»å¯¹è±¡ã€‚</p><h3 id="åªè¯»å®ä¾‹å˜é‡"><a href="#åªè¯»å®ä¾‹å˜é‡" class="headerlink" title="åªè¯»å®ä¾‹å˜é‡"></a>åªè¯»å®ä¾‹å˜é‡</h3><p>readonly Instance Variables</p><p>C#æä¾›äº†readonlyå…³é”®å­—ï¼Œå¯ä»¥æŒ‡å®šå¯¹è±¡çš„å®ä¾‹å˜é‡ä¸èƒ½ä¿®æ”¹ï¼Œæƒ³ä¿®æ”¹ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p><p>æ„é€ å‡½æ•°å¯ä»¥å¤šæ¬¡å¯¹readonlyå®ä¾‹å˜é‡èµ‹å€¼ã€‚</p><p>å£°æ˜ä¸ºconstçš„æˆå‘˜è¦åœ¨ç¼–è¯‘æ—¶èµ‹å€¼ï¼Œå¸¸é‡æˆå‘˜çš„å€¼ä¸èƒ½åœ¨ç¼–è¯‘æ—¶ç¡®å®šè¦ç”¨readonlyå…³é”®å­—å£°æ˜ã€‚å¦‚æœæ„é€ å‡½æ•°ä¸åˆå§‹åŒ–readonlyå£°æ˜çš„æˆå‘˜ï¼Œåˆ™ç¼–è¯‘å™¨äº§ç”Ÿä¸€ä¸ªè­¦å‘Šã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Increment</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="keyword">int</span> INCREMENT;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Increment</span>(<span class="params"><span class="keyword">int</span> incrementValue</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    INCREMENT = incrementValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è½¯ä»¶å¤ç”¨æ€§"><a href="#è½¯ä»¶å¤ç”¨æ€§" class="headerlink" title="è½¯ä»¶å¤ç”¨æ€§"></a>è½¯ä»¶å¤ç”¨æ€§</h3><p>Software Reusability</p><p>ç±»åº“ï¼Œå¿«é€Ÿç¨‹åºå¼€å‘ï¼ˆRADï¼‰ï¼ŒFCLï¼ŒCLR</p><h3 id="æ•°æ®æŠ½è±¡ä¸å°è£…"><a href="#æ•°æ®æŠ½è±¡ä¸å°è£…" class="headerlink" title="æ•°æ®æŠ½è±¡ä¸å°è£…"></a>æ•°æ®æŠ½è±¡ä¸å°è£…</h3><p>Data Abstraction and Encapsulation</p><p>ä¿¡æ¯éšè—ï¼šç±»é€šå¸¸å¯¹ç±»çš„å®¢æˆ·éšè—å…¶å®ç°ç»†èŠ‚ã€‚</p><p>æ•°æ®æŠ½è±¡ï¼šæè¿°ç±»çš„åŠŸèƒ½è€Œä¸ç®¡å…¶å®ç°ç»†èŠ‚ã€‚</p><p>intã€doubleä¸charç±»çš„ç±»å‹ï¼Œè¿˜æœ‰é˜Ÿåˆ—éƒ½æ˜¯æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰ã€‚æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰å®é™…ä¸ŠåŒ…å«ä¸¤ä¸ªæ¦‚å¿µï¼Œå³æ•°æ®è¡¨è¾¾å’Œè¯¥æ•°æ®å…è®¸çš„æ“ä½œã€‚</p><h3 id="internal-Access"><a href="#internal-Access" class="headerlink" title="internal Access"></a>internal Access</h3><p>ç›®å‰ä¸ºæ­¢æˆ‘ä»¬æ‰€å®šä¹‰çš„ç±»ï¼Œåªèƒ½ç”¨ä¸¤ä¸ªè®¿é—®ä¿®é¥°ç¬¦å£°æ˜ï¼špublicä¸internalã€‚é¡¶çº§ç±»ã€‚C#æ”¯æŒåµŒå¥—ç±»â€”â€”å®šä¹‰åœ¨å…¶ä»–ç±»ä¸­çš„ç±»ã€‚é™¤äº†publicä¸internalï¼Œç±»è¿˜å¯ä»¥å£°æ˜ä¸ºprivateæˆ–protectedã€‚å¦‚æœç±»å£°æ˜æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦ï¼Œé»˜è®¤internalè®¿é—®ã€‚å£°æ˜ä¸ºinternalçš„æ–¹æ³•ã€‚å®ä¾‹å˜é‡å’Œå…¶ä»–æˆå‘˜å¯ä»¥è®©åŒä¸€æ±‡ç¼–ä¸­çš„æ‰€æœ‰ä»£ç è®¿é—®ï¼Œè€Œå…¶ä»–æ±‡ç¼–ä¸­çš„ä»£ç åˆ™ä¸è¡Œã€‚åŒä¸€æ±‡ç¼–ä¸­ï¼Œinternalç›¸å½“äºpublicã€‚</p><h3 id="Class-View-and-Object-Browser"><a href="#Class-View-and-Object-Browser" class="headerlink" title="Class View and Object Browser"></a>Class View and Object Browser</h3><p>ä½¿ç”¨Class Viewçª—å£</p><p>ä½¿ç”¨Object Browser</p><h3 id="å¯¹è±¡åˆå§‹åŒ–å™¨"><a href="#å¯¹è±¡åˆå§‹åŒ–å™¨" class="headerlink" title="å¯¹è±¡åˆå§‹åŒ–å™¨"></a>å¯¹è±¡åˆå§‹åŒ–å™¨</h3><p>Object Initializers</p><p>åˆ›å»ºå¯¹è±¡å¹¶åœ¨åŒä¸€è¯­å¥ä¸­å°†å…¶å±æ€§åˆå§‹åŒ–ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">ObjectInitialzerTest</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    Time aTime = <span class="keyword">new</span> Time&#123;Hour=<span class="number">14</span>, Minutre=<span class="number">145</span>, Second=<span class="number">12</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    Time anotherTime = <span class="keyword">new</span> Time&#123;Minute=<span class="number">45</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç†delegate"><a href="#ä»£ç†delegate" class="headerlink" title="ä»£ç†delegate"></a>ä»£ç†delegate</h3><p>ä»£ç†å¯¹è±¡ä¿å­˜ä¸€ä¸ªæ–¹æ³•çš„å¼•ç”¨ã€‚ä»£ç†å¯ä»¥æŠŠæ–¹æ³•çœ‹æˆæ•°æ®ï¼Œé€šè¿‡ä»£ç†å¯ä»¥å°†æ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå°†è¿™ä¸ªæ–¹æ³•ä¸å…¶ä»–æ–¹æ³•ç›¸äº’ä¼ é€’ã€‚</p><p>ä»£ç†ç±»å‹åªæ˜¯æè¿°ä¸€ç»„å…·æœ‰ç‰¹å®šå‚æ•°å’Œç‰¹å®šè¿”å›ç±»å‹çš„æ–¹æ³•ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Delegates</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// å§”æ‰˜ä¸€ä¸ªæ¥æ”¶intå¹¶è¿”å›å¸ƒå°”å€¼çš„å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">delegate</span> <span class="keyword">bool</span> <span class="title">NumberPredicate</span>(<span class="params"><span class="keyword">int</span> number</span>)</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> ,<span class="number">10</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºNumberPredicateå§”æ‰˜ç±»å‹çš„å®ä¾‹</span></span><br><span class="line">    NumberPredicate evenPredicate = IsEven;</span><br><span class="line">    </span><br><span class="line">    List&lt;<span class="keyword">int</span>&gt; evenNumbers = FilterArray(numbers, evenPredicate);</span><br><span class="line">    <span class="comment">// evenNumber: 2 4 6 8 10</span></span><br><span class="line">    </span><br><span class="line">    List&lt;<span class="keyword">int</span>&gt; oddNumbers = FilterArray(numbers, IsOdd);</span><br><span class="line">    <span class="comment">// oddNumber: 1 3 5 7 9</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> list&lt;<span class="keyword">int</span>&gt; <span class="title">FilterArray</span>(<span class="params"><span class="keyword">int</span>[] intArray, NumberPredicate predicate</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      List&lt;<span class="keyword">int</span>&gt; result = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">      <span class="keyword">foreach</span>(<span class="keyword">int</span> item <span class="keyword">in</span> inArray)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span>(predicate(item))</span><br><span class="line">          result.Add(item);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">IsEven</span>(<span class="params"><span class="keyword">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      <span class="keyword">return</span> (number%<span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">IsOdd</span>(<span class="params"><span class="keyword">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      <span class="keyword">return</span> (number%<span class="number">2</span> == <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç”±äºIsEvenæ–¹æ³•çš„ç­¾åä¸NumberPredicateä»£ç†çš„ç­¾ååŒ¹é…</strong>ï¼Œå› æ­¤å¯ä»¥ç”¨NumberPredicateç±»å‹çš„å˜é‡å¼•ç”¨IsEvenæ–¹æ³•ã€‚</p><h3 id="Lambda-Expressions"><a href="#Lambda-Expressions" class="headerlink" title="Lambda Expressions"></a>Lambda Expressions</h3><p>lambdaè¡¨è¾¾å¼é¦–å…ˆæ˜¯ä¸ªå‚æ•°è¡¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Lambda</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">delegate</span> <span class="keyword">bool</span> <span class="title">NumberPredicate</span>(<span class="params"><span class="keyword">int</span> number</span>)</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> ,<span class="number">10</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    NumberPredicate evenPredicate = number =&gt; (number%<span class="number">2</span> == <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    evenPredicate(<span class="number">4</span>); <span class="comment">// True</span></span><br><span class="line">    </span><br><span class="line">    List&lt;<span class="keyword">int</span>&gt; evenNumbers = FilterArray(numbers, evenPredicate);</span><br><span class="line">    <span class="comment">// evenNumber: 2 4 6 8 10</span></span><br><span class="line">    </span><br><span class="line">    List&lt;<span class="keyword">int</span>&gt; oddNumbers = FilterArray(numbers, (<span class="keyword">int</span> number) =&gt; (number%<span class="number">2</span> == <span class="number">1</span>));</span><br><span class="line">    <span class="comment">// evenNumber: 1 3 5 7 9</span></span><br><span class="line">    </span><br><span class="line">    List&lt;<span class="keyword">int</span>&gt; numberOver5 = FilterArray(numbers, number =&gt; &#123;<span class="keyword">return</span> number&gt;<span class="number">5</span>; &#125; );</span><br><span class="line">    <span class="comment">// 6 7 8 9 10</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> list&lt;<span class="keyword">int</span>&gt; <span class="title">FilterArray</span>(<span class="params"><span class="keyword">int</span>[] intArray, NumberPredicate predicate</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      List&lt;<span class="keyword">int</span>&gt; result = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">      <span class="keyword">foreach</span>(<span class="keyword">int</span> item <span class="keyword">in</span> inArray)</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">if</span>(predicate(item))</span><br><span class="line">          result.Add(item);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•°è¡¨åé¢æ˜¯lambdaè¿ç®—ç¬¦ï¼ˆ=&gt;ï¼Œè¯»ä½œgo toï¼‰å’Œä¸€ä¸ªè¡¨ç¤ºå‡½æ•°ä½“çš„è¡¨è¾¾å¼ã€‚</p><p>æ²¡æœ‰æŒ‡å®šè¿”å›ç±»å‹ï¼Œè¿”å›ç±»å‹å¯ä»¥ä»è¿”å›å€¼æˆ–ä»£ç†çš„è¿”å›å€¼æ¨å®šã€‚</p><p>åŒæ ·ï¼Œlambdaè¡¨è¾¾å¼å®šä¹‰çš„æ–¹æ³•è¦ä¸ä»£ç†ç±»å‹å®šä¹‰çš„æ–¹æ³•æœ‰ç›¸åŒç­¾åã€‚</p><h3 id="åŒ¿åç±»å‹"><a href="#åŒ¿åç±»å‹" class="headerlink" title="åŒ¿åç±»å‹"></a>åŒ¿åç±»å‹</h3><p>Anonymous Typeså¯ä»¥åˆ›å»ºç®€å•ç±»ï¼Œç”¨äºå­˜å‚¨æ•°æ®ï¼Œä¸å¿…ç¼–å†™ç±»å®šä¹‰ã€‚</p><p>åŒ¿åç±»å‹çš„å±æ€§éƒ½æ˜¯å…¬ç”¨å’Œä¸å¯å˜çš„ã€‚åŒ¿åç±»å‹æ˜¯åªè¯»çš„ï¼Œåˆ›å»ºå¯¹è±¡ä¹‹åä¸èƒ½ä¿®æ”¹å±æ€§å€¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Lambda</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">delegate</span> <span class="keyword">bool</span> <span class="title">NumberPredicate</span>(<span class="params"><span class="keyword">int</span> number</span>)</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">var</span> bob1 = <span class="keyword">new</span> &#123;Name = <span class="string">"Bob Smith"</span>, Age = <span class="number">37</span>&#125;;</span><br><span class="line">    bob.ToString(); <span class="comment">// &#123;Name = Bob Smith, Age = 37&#125;</span></span><br><span class="line">    <span class="keyword">var</span> bob2 = <span class="keyword">new</span> &#123;Name = <span class="string">"Bob Smith"</span>, Age = <span class="number">37</span>&#125;;</span><br><span class="line">    bob1.Equals(bob2); <span class="comment">// True</span></span><br><span class="line">    <span class="comment">// ä¸¤è€…å±æ€§å€¼ç›¸åŒï¼Œå£°æ˜é¡ºåºç›¸åŒ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>LINQä¸­çš„åŒ¿åç±»å‹</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = </span><br><span class="line">  <span class="keyword">from</span> e <span class="keyword">in</span> employees</span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">new</span> &#123;e.FirstName, Last = e.LastName&#125;;</span><br></pre></td></tr></table></figure><h3 id="è¯¾åä¹ é¢˜-9"><a href="#è¯¾åä¹ é¢˜-9" class="headerlink" title="è¯¾åä¹ é¢˜"></a>è¯¾åä¹ é¢˜</h3><h4 id="10-1-å¡«ç©ºé¢˜"><a href="#10-1-å¡«ç©ºé¢˜" class="headerlink" title="10.1 å¡«ç©ºé¢˜"></a>10.1 å¡«ç©ºé¢˜</h4><ul><li><strong>æœ€ä½æƒé™åŸåˆ™</strong>è¦æ±‚ä»£ç åªèƒ½åˆ†é…å®ŒæˆæŒ‡å®šä»»åŠ¡æ‰€éœ€çš„è®¿é—®é‡ã€‚</li><li>ç¼–è¯‘å™¨å°†ç±»åº“å·¥ç¨‹ç›‘ç†åœ¨æ‰€è°“<strong>åŠ¨æ€é“¾æ¥åº“</strong>çš„æ±‡ç¼–ä¸­ã€‚</li></ul><h4 id="10-2-åˆ¤æ–­é¢˜"><a href="#10-2-åˆ¤æ–­é¢˜" class="headerlink" title="10.2 åˆ¤æ–­é¢˜"></a>10.2 åˆ¤æ–­é¢˜</h4><ul><li>lambdaè¡¨è¾¾å¼å¿…é¡»è¿”å›ä¸€ä¸ªå€¼ã€‚</li></ul><h2 id="ç¬¬11ç« -é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šç»§æ‰¿"><a href="#ç¬¬11ç« -é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šç»§æ‰¿" class="headerlink" title="ç¬¬11ç«  é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šç»§æ‰¿"></a>ç¬¬11ç«  é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šç»§æ‰¿</h2><h3 id="åŸºç±»å’Œæ´¾ç”Ÿç±»"><a href="#åŸºç±»å’Œæ´¾ç”Ÿç±»" class="headerlink" title="åŸºç±»å’Œæ´¾ç”Ÿç±»"></a>åŸºç±»å’Œæ´¾ç”Ÿç±»</h3><p>Base Classes and Derived Classes</p><p>ç»§æ‰¿å½¢æˆäº†æ ‘çŠ¶å±‚æ¬¡ç»“æ„ã€‚</p><p>å¹¶éæ¯ä¸ªç±»å…³ç³»éƒ½æ˜¯ç»§æ‰¿å…³ç³»ã€‚â€œæœ‰â€å…³ç³»ï¼Œç±»çš„æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡çš„å¼•ç”¨ã€‚</p><h3 id="protectedæˆå‘˜"><a href="#protectedæˆå‘˜" class="headerlink" title="protectedæˆå‘˜"></a>protectedæˆå‘˜</h3><p>protectedä»‹äºå…¬ç”¨ä¸ä¸“ç”¨ä¹‹é—´ï¼ŒåŸºç±»çš„protectedæˆå‘˜å¯ä»¥è®©åŸºç±»æˆå‘˜å’Œæ´¾ç”Ÿç±»æˆå‘˜è®¿é—®ã€‚æ‰€æœ‰éä¸“ç”¨åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä¿æŒåŸè®¿é—®ä¿®é¥°ç¬¦ã€‚</p><h3 id="åŸºç±»å’Œæ´¾ç”Ÿç±»çš„å…³ç³»"><a href="#åŸºç±»å’Œæ´¾ç”Ÿç±»çš„å…³ç³»" class="headerlink" title="åŸºç±»å’Œæ´¾ç”Ÿç±»çš„å…³ç³»"></a>åŸºç±»å’Œæ´¾ç”Ÿç±»çš„å…³ç³»</h3><p>C#ä¸­é™¤objectä»¥å¤–çš„æ¯ä¸ªç±»éƒ½æ‰©å±•ç°æœ‰ç±»ã€‚objectæ˜¯å”¯ä¸€æ²¡æœ‰åŸºç±»çš„ç±»ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CommissionEmployeeç±»æ˜¾å¼æ‰©å±•ï¼ˆç»§æ‰¿è‡ªï¼‰objectç±»ï¼ˆFCLä¸­çš„System.Objectï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CommissionEmployee</span> : <span class="title">object</span></span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">string</span> <span class="title">ToString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°ä¸ç»§æ‰¿ï¼Œä½†éšå¼è°ƒç”¨objectç±»çš„æ„é€ å‡½æ•°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseCommissionEmployee</span> : <span class="title">CommissionEmployee</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">decimal</span> baseSalary;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•°åˆå§‹åŒ–å™¨å’Œå…³é”®å­—baseè°ƒç”¨åŸºç±»æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">BaseCommissionEmployee</span>(<span class="params"><span class="keyword">string</span> name, <span class="keyword">decimal</span> sales, <span class="keyword">decimal</span> salary</span>): <span class="title">base</span>(<span class="params">name, sales</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    BaseSalary = salary;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">decimal</span> BaseSalary&#123;<span class="keyword">get</span>; <span class="keyword">set</span>&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">decimal</span> <span class="title">Earnings</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é”®å­—virtualä¸abstractè¡¨ç¤ºæ´¾ç”Ÿç±»ä¸­å¯ä»¥è¦†ç›–åŸºç±»æ–¹æ³•ã€‚</p><p>ä½¿ç”¨çˆ¶ç±»privateå®ä¾‹å˜é‡</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BaseCommissionEmployee</span> : <span class="title">CommissionEmployee</span></span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">decimal</span> <span class="title">Earnings</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">return</span> BaseSalary + <span class="keyword">base</span>.Earnings();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°"><a href="#æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°" class="headerlink" title="æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°"></a>æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°</h3><p>Constructors in Derived Classes</p><p>æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åœ¨æ‰§è¡Œè‡ªå·±çš„ä»»åŠ¡ä¹‹å‰è¦æ˜¾ç¤ºï¼ˆé€šè¿‡baseå¼•ç”¨å’Œæ„é€ å‡½æ•°åˆå§‹åŒ–å™¨ï¼‰æˆ–éšå¼ï¼ˆè°ƒç”¨åŸºç±»é»˜è®¤æ„é€ å‡½æ•°æˆ–æ— å‚æ„é€ å‡½æ•°ï¼‰è°ƒç”¨ç›´æ¥åŸºç±»çš„æ„é€ å‡½æ•°ã€‚é“¾ä¸­æœ€åä¸€ä¸ªè°ƒç”¨çš„æ„é€ å‡½æ•°æ€»æ˜¯objectç±»çš„æ„é€ å‡½æ•°ã€‚</p><h3 id="ç»§æ‰¿å’Œè½¯ä»¶å·¥ç¨‹"><a href="#ç»§æ‰¿å’Œè½¯ä»¶å·¥ç¨‹" class="headerlink" title="ç»§æ‰¿å’Œè½¯ä»¶å·¥ç¨‹"></a>ç»§æ‰¿å’Œè½¯ä»¶å·¥ç¨‹</h3><p>Software Engineering with Inheritance</p><h3 id="Objectç±»"><a href="#Objectç±»" class="headerlink" title="Objectç±»"></a>Objectç±»</h3><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/object.PNG" alt="object"></p><h2 id="ç¬¬12ç« -å¤šæ€ã€æ¥å£ä¸è¿ç®—ç¬¦é‡è½½"><a href="#ç¬¬12ç« -å¤šæ€ã€æ¥å£ä¸è¿ç®—ç¬¦é‡è½½" class="headerlink" title="ç¬¬12ç«  å¤šæ€ã€æ¥å£ä¸è¿ç®—ç¬¦é‡è½½"></a>ç¬¬12ç«  å¤šæ€ã€æ¥å£ä¸è¿ç®—ç¬¦é‡è½½</h2><h3 id="å¤šæ€ä¸¾ä¾‹"><a href="#å¤šæ€ä¸¾ä¾‹" class="headerlink" title="å¤šæ€ä¸¾ä¾‹"></a>å¤šæ€ä¸¾ä¾‹</h3><p>ç¨‹åºé€šè¿‡åŸºç±»å˜é‡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå‘ç”Ÿå¤šæ€â€”â€”æ‰§è¡Œæ—¶ï¼Œæ ¹æ®å¼•ç”¨å¯¹è±¡çš„ç±»å‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ­£ç¡®æ´¾ç”Ÿç±»ç‰ˆæœ¬ã€‚</p><p>ç¨‹åºé€šè¿‡å‘ä¸‹è½¬æ¢æŠ€æœ¯æ˜¾å¼å°†åŸºç±»å¼•ç”¨è½¬æ¢ä¸ºæ´¾ç”Ÿç±»ç±»å‹ï¼Œç¨‹åºå¯ä»¥è°ƒç”¨åŸºç±»ä¸­æ²¡æœ‰çš„æ´¾ç”Ÿç±»æ–¹æ³•ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PolymorphismTest</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    BaseCommissionEmployee baseCommissionEmployee = <span class="keyword">new</span> BaseCommissionEmployee(<span class="string">"Bob"</span>, <span class="number">5000</span>, <span class="number">300</span>);</span><br><span class="line">    </span><br><span class="line">    CommissionEmployee commissionEmployee = baseCommissionEmployee;</span><br><span class="line">    </span><br><span class="line">    CommissionEmployee.ToString();</span><br><span class="line">    CommissionEmployee.Earnings();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŠ½è±¡ç±»ä¸æ–¹æ³•"><a href="#æŠ½è±¡ç±»ä¸æ–¹æ³•" class="headerlink" title="æŠ½è±¡ç±»ä¸æ–¹æ³•"></a>æŠ½è±¡ç±»ä¸æ–¹æ³•</h3><p>å®šä¹‰ä¸å®ä¾‹åŒ–ä¸ºä»»ä½•å¯¹è±¡çš„ç±»ï¼ŒæŠ½è±¡ç±»ã€‚æŠ½è±¡åŸºç±»ã€‚</p><p>æŠ½è±¡ç±»ç”¨å…³é”®å­—abstractå£°æ˜ã€‚æŠ½è±¡ç±»é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å‡ ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</p><p>æŠ½è±¡å±æ€§å£°æ˜å½¢å¼å¦‚ä¸‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> property</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">get</span>;</span><br><span class="line">  <span class="keyword">set</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°å’Œé™æ€æ–¹æ³•ä¸èƒ½å£°æ˜ä¸ºabstractã€‚æ´¾ç”Ÿç±»ä¸èƒ½è¦†ç›–é™æ€æ–¹æ³•ã€‚</p><p>ä¸èƒ½å®ä¾‹åŒ–æŠ½è±¡åŸºç±»çš„å¯¹è±¡ï¼Œä½†å¯ä»¥ç”¨æŠ½è±¡åŸºç±»å£°æ˜å˜é‡ï¼Œä¿å­˜è¿™äº›æŠ½è±¡ç±»æ´¾ç”Ÿçš„ä»»ä½•å…·ä½“ç±»çš„å¯¹è±¡å¼•ç”¨ã€‚ç¨‹åºé€šå¸¸ç”¨è¿™ç§å˜é‡å¤šæ€æ“çºµæ´¾ç”Ÿç±»å¯¹è±¡ã€‚å¯ä»¥ç”¨æŠ½è±¡åŸºç±»åè°ƒç”¨æŠ½è±¡åŸºç±»ä¸­å£°æ˜çš„é™æ€æ–¹æ³•ã€‚</p><p>asè¿ç®—ç¬¦è¿›è¡Œå‘ä¸‹è½¬æ¢</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> employee = currentEmployee <span class="keyword">as</span> BaseCommissionEmployee;</span><br></pre></td></tr></table></figure><h3 id="sealedæ–¹æ³•ä¸ç±»"><a href="#sealedæ–¹æ³•ä¸ç±»" class="headerlink" title="sealedæ–¹æ³•ä¸ç±»"></a>sealedæ–¹æ³•ä¸ç±»</h3><p>åŸºç±»ä¸­å£°æ˜ä¸ºsealedçš„æ–¹æ³•ä¸èƒ½åœ¨æ´¾ç”Ÿç±»ä¸­è¦†ç›–ï¼Œå£°æ˜ä¸ºstaticå’Œprivateçš„æ–¹æ³•éšå«sealedï¼Œå› ä¸ºæ´¾ç”Ÿç±»ä¸­ä¸èƒ½è¦†ç›–ï¼ˆä½†æ´¾ç”Ÿç±»å¯ä»¥å£°æ˜ä¸åŸºç±»ä¸­ä¸“ç”¨æ–¹æ³•åŒåçš„æ–°æ–¹æ³•ï¼‰ã€‚åŒæ—¶å£°æ˜overrideä¸sealedçš„æ´¾ç”Ÿæ–¹æ³•å¯ä»¥è¦†ç›–åŸºç±»æ–¹æ³•ã€‚</p><p>å£°æ˜ä¸ºsealedçš„ç±»ä¸èƒ½ä½œä¸ºåŸºç±»ï¼ˆä¸èƒ½æ‰©å±•ï¼‰ã€‚</p><h3 id="åˆ›å»ºä¸ä½¿ç”¨æ¥å£"><a href="#åˆ›å»ºä¸ä½¿ç”¨æ¥å£" class="headerlink" title="åˆ›å»ºä¸ä½¿ç”¨æ¥å£"></a>åˆ›å»ºä¸ä½¿ç”¨æ¥å£</h3><p>Creating and Using Interfaces</p><p>æ¥å£å®šä¹‰å’Œæ ‡å‡†åŒ–äººä¸ç³»ç»Ÿäº¤äº’çš„æ–¹å¼ã€‚</p><p>è½¯ä»¶å¯¹è±¡ä¹Ÿæ˜¯é€šè¿‡æ¥å£é€šä¿¡ã€‚</p><p>æ‰€æœ‰æ¥å£æˆå‘˜éšå¼å£°æ˜ä¸ºpublicä¸abstractã€‚</p><p>æ¯ä¸ªæ¥å£å¯ä»¥æ‰©å±•ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–æ¥å£ã€‚</p><p>å®ç°è¿™ä¸ªæ¥å£çš„å…·ä½“ç±»è¦å£°æ˜æ¥å£ä¸­æŒ‡å®šäº†ç­¾åçš„æ¯ä¸ªæ¥å£æˆå‘˜ã€‚å®ç°æ¥å£è€Œä¸å®ç°å…¶æ‰€æœ‰æˆå‘˜çš„ç±»æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œè¦å£°æ˜ä¸ºabstractï¼Œæ¯ä¸ªæœªå®ç°çš„æ¥å£æˆå‘˜è¦åŒ…å«ä¸€ä¸ªabstractå£°æ˜ã€‚</p><p>å’Œå…¬ç”¨æŠ½è±¡ç±»ä¸€æ ·ï¼Œæ¥å£é€šå¸¸ä¸ºå…¬ç”¨ç±»å‹ï¼Œå› æ­¤é€šå¸¸åœ¨å•ç‹¬æ–‡ä»¶ä¸­å£°æ˜ï¼Œæ–‡ä»¶åä¸æ¥å£åç›¸åŒï¼Œæ–‡ä»¶æ‰©å±•åä¸º.csã€‚</p><p><strong>å£°æ˜æ¥å£IPayable</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IPayable.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IPayable</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">decimal</span> <span class="title">GetPaymentAmount</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºInvoiceç±»</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Invoice.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Invoice</span> : <span class="title">IPayable</span></span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">decimal</span> <span class="title">GetPaymentAmount</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹Employeeç±»ï¼Œå®ç°IPayableæ¥å£</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Employee.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Employee</span> : <span class="title">IPayable</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Name &#123;<span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>;&#125;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">decimal</span> <span class="title">GetPaymentAmount</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>.NETæ¡†æ¶ç±»åº“å…¬å…±æ¥å£</strong></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/interface.PNG" alt=""></p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/interface_next.PNG" alt="interface"></p><h3 id="è¿ç®—ç¬¦é‡è½½"><a href="#è¿ç®—ç¬¦é‡è½½" class="headerlink" title="è¿ç®—ç¬¦é‡è½½"></a>è¿ç®—ç¬¦é‡è½½</h3><p>ä½¿è¿ç®—ç¬¦é€‚ç”¨äºç±»å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè¿ç®—ç¬¦é‡è½½ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ComplexNumber.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ComplexNumber</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">double</span> Real &#123;<span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>;&#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">double</span> Imaginary &#123;<span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ComplexNumber</span>(<span class="params"><span class="keyword">double</span> a, <span class="keyword">double</span> b</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    Real = a;</span><br><span class="line">    Imaginary = b;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">string</span> <span class="title">ToString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">string</span>.Format( <span class="string">"&#123;0&#125; &#123;1&#125; &#123;2&#125;i"</span>,</span><br><span class="line">                        Real, (Imaginary &lt; <span class="number">0</span> ? <span class="string">"-"</span>:<span class="string">"+"</span>), Math.Abs(Imaginary))</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> ComplexNumber <span class="keyword">operator</span> +(ComplexNumber x, ComplexNumber y)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="function">reutrn new <span class="title">ComplexNumber</span>(<span class="params">x.Real+y.Real, x.Imaginary+y.Imaginary</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// OperatorOverloading.cs</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ComplexTest</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    ComplexNumber x, y;</span><br><span class="line">    x = <span class="keyword">new</span> ComplexNumber(<span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">    y = <span class="keyword">new</span> ComplexNumber(<span class="number">4</span>, <span class="number">-2</span>);</span><br><span class="line">    </span><br><span class="line">    x+y; <span class="comment">// (2+4i)+(4-2i)=(6+2i)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¬¬13ç« -å¼‚å¸¸å¤„ç†"><a href="#ç¬¬13ç« -å¼‚å¸¸å¤„ç†" class="headerlink" title="ç¬¬13ç«  å¼‚å¸¸å¤„ç†"></a>ç¬¬13ç«  å¼‚å¸¸å¤„ç†</h2><p>å¼‚å¸¸å°±æ˜¯ç¨‹åºæ‰§è¡ŒæœŸé—´å‘ç”Ÿçš„é—®é¢˜ã€‚</p><p>å¼‚å¸¸å¤„ç†ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿè§£å†³å¼‚å¸¸ã€‚å¼‚å¸¸å¤„ç†å¯å®ç°æ¸…æ™°ï¼Œå¥å£®å’Œæ›´å¤šå®¹é”™çš„ç¨‹åºã€‚</p><h3 id="å¼‚å¸¸å¤„ç†æ¦‚è¿°"><a href="#å¼‚å¸¸å¤„ç†æ¦‚è¿°" class="headerlink" title="å¼‚å¸¸å¤„ç†æ¦‚è¿°"></a>å¼‚å¸¸å¤„ç†æ¦‚è¿°</h3><p>Exception Handling Overview</p><p>ç¨‹åºå‘˜å¯ä»¥å†³å®šå¤„ç†ä»»ä½•å¼‚å¸¸â€”â€”æ‰€æœ‰å¼‚å¸¸ï¼ŒæŸç§ç±»å‹çš„æ‰€æœ‰å¼‚å¸¸æˆ–ç›¸å…³ç±»å‹çš„æ‰€æœ‰å¼‚å¸¸ã€‚</p><h3 id="ä¾‹å­ï¼šé™¤æ•°ä¸º0ä¸ç”¨å¼‚å¸¸å¤„ç†"><a href="#ä¾‹å­ï¼šé™¤æ•°ä¸º0ä¸ç”¨å¼‚å¸¸å¤„ç†" class="headerlink" title="ä¾‹å­ï¼šé™¤æ•°ä¸º0ä¸ç”¨å¼‚å¸¸å¤„ç†"></a>ä¾‹å­ï¼šé™¤æ•°ä¸º0ä¸ç”¨å¼‚å¸¸å¤„ç†</h3><p>å…¶ä»–ä¿¡æ¯ï¼ˆç§°ä¸ºå †æ ˆè·Ÿè¸ªï¼‰æ˜¾ç¤ºå¼‚å¸¸åç§°å’Œå¯¼è‡´å¼‚å¸¸çš„æ‰§è¡Œè·¯å¾„ã€‚</p><p>å †æ ˆè·Ÿè¸ªä¸­çš„æ¯ä¸€è¡Œâ€œ atâ€éƒ½è¡¨ç¤ºå‘ç”Ÿå¼‚å¸¸æ—¶æ­£åœ¨æ‰§è¡Œçš„ç‰¹å®šæ–¹æ³•ä¸­çš„ä¸€è¡Œä»£ç ã€‚è¯¥ä¿¡æ¯è¯´æ˜å¼‚å¸¸çš„èµ·æºï¼Œä»¥åŠè¾¾åˆ°è¯¥ç‚¹ä¹‹å‰è¿›è¡Œäº†å“ªäº›æ–¹æ³•è°ƒç”¨ã€‚</p><p>å½“Convertæ–¹æ³•ToInt32æ¥æ”¶åˆ°ä¸ä»£è¡¨æœ‰æ•ˆæ•´æ•°çš„å­—ç¬¦ä¸²æ—¶ï¼Œå°†å‘ç”Ÿ<code>FormatException</code>ã€‚å³ä½¿å‘ç”Ÿå¼‚å¸¸å¹¶ä¸”å·²æ‰“å°å †æ ˆè·Ÿè¸ªï¼Œç¨‹åºä¹Ÿå¯èƒ½ç»§ç»­æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯çš„ç»“æœã€‚</p><h3 id="ä½¿ç”¨å¼‚å¸¸å¤„ç†"><a href="#ä½¿ç”¨å¼‚å¸¸å¤„ç†" class="headerlink" title="ä½¿ç”¨å¼‚å¸¸å¤„ç†"></a>ä½¿ç”¨å¼‚å¸¸å¤„ç†</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DivideByZeroTest.cs</span></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Windows.Forms;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">DivideByZeroTest</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">DivideByZeroTestForm</span> : <span class="title">Form</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DivideByZeroTestForm</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      InitializeComponent();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä»ç”¨æˆ·é‚£é‡Œè·å¾—2ä¸ªæ•´æ•°</span></span><br><span class="line">    <span class="comment">// å°†åˆ†å­é™¤ä»¥åˆ†æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">divideButton_click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      outputLabel.Text = <span class="string">""</span>; <span class="comment">// æ¸…é™¤æ ‡ç­¾OutputLabel</span></span><br><span class="line">      </span><br><span class="line">      <span class="keyword">try</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="keyword">int</span> numerator = Convert.ToInt32( numeratorTextBox.Text );</span><br><span class="line">        <span class="keyword">int</span> denominator = Convert.ToInt32( denominatorTextBox.Text );</span><br><span class="line">        <span class="keyword">int</span> result = numerator / denominator;</span><br><span class="line">        outputLabel.Text = result.ToString();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span>(FormatException)</span><br><span class="line">      &#123;</span><br><span class="line">        MessageBox.Show( <span class="string">"You must enter two integers."</span>,</span><br><span class="line">                          <span class="string">"Invalid Number Format"</span>, MessageBoxButtons.OK,</span><br><span class="line">                          MessageBoxIcon.Error );                                   </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> ( DivideByZeroException divideByZeroExceptionParameter )</span><br><span class="line">      &#123;</span><br><span class="line">        MessageBox.Show( divideByZeroExceptionParameter.Message,</span><br><span class="line">                          <span class="string">"Attempted to Divide by Zero"</span>, MessageBoxButtons.OK,</span><br><span class="line">                          MessageBoxIcon.Error );                                  </span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/divide.PNG" alt="DivideByZeroTest.cs"></p><p>å¦ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ï¼š</p><p><code>Int32.TryParse</code>æ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºintå€¼ã€‚è¯¥æ–¹æ³•éœ€è¦ä¸¤ä¸ªå‚æ•°-ä¸€ä¸ªæ˜¯è¦è§£æçš„å­—ç¬¦ä¸²ï¼Œå¦ä¸€ä¸ªæ˜¯è¦å°†è½¬æ¢åçš„å€¼å­˜å‚¨åœ¨å…¶ä¸­çš„å˜é‡ã€‚å¦‚æœæˆåŠŸè§£æäº†å­—ç¬¦ä¸²ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›trueã€‚å¦‚æœæ— æ³•è½¬æ¢å­—ç¬¦ä¸²ï¼Œåˆ™å°†å€¼0åˆ†é…ç»™ç¬¬äºŒä¸ªå‚æ•°ã€‚</p><p><strong>Enclosing Code in a try Blockï¼ˆç”¨tryå—ç•Œå®šä»£ç ï¼‰</strong></p><p>tryå—åŒ…å«å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç ä»¥åŠå‘ç”Ÿå¼‚å¸¸æ—¶è¢«è·³è¿‡çš„ä»£ç ã€‚</p><p>catchå—è‡³å¤šåªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ã€‚</p><p><strong>Catching Exceptionsï¼ˆæ•è·å¼‚å¸¸ï¼‰</strong></p><p>å½“tryå—ä¸­å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç›¸åº”çš„catchå—å°†æ•è·è¯¥å¼‚å¸¸å¹¶è¿›è¡Œå¤„ç†ã€‚ä¸€ä¸ªtryå—ä¹‹åå¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªcatchå—ã€‚catchå—æŒ‡å®šä¸€ä¸ªå¼‚å¸¸å‚æ•°ï¼Œè¯¥å‚æ•°è¡¨ç¤ºcatchå—å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚catchå—ä¹Ÿå¯ä»¥ä¸æŒ‡å®šå¼‚å¸¸ç±»å‹æˆ–æ ‡è¯†ç¬¦ï¼Œè¿™ç§catchå—ï¼ˆç§°ä¸ºé€šç”¨catchå­å¥ï¼‰ï¼Œæ•è·æ‰€æœ‰å¼‚å¸¸ç±»å‹ã€‚</p><p><strong>æœªæ•è·å¼‚å¸¸</strong></p><p>æœªæ•è·çš„å¼‚å¸¸ï¼ˆæˆ–æœªå¤„ç†çš„å¼‚å¸¸ï¼‰æ˜¯æ²¡æœ‰åŒ¹é…çš„catchå—çš„å¼‚å¸¸ã€‚</p><p><strong>Termination Model of Exception Handlingï¼ˆå¼‚å¸¸å¤„ç†çš„ç»ˆæ­¢æ¨¡å‹ï¼‰</strong></p><p>å½“ç¨‹åºæˆ–CLRä¸­è°ƒç”¨çš„æ–¹æ³•æ£€æµ‹åˆ°é—®é¢˜æ—¶ï¼Œè¯¥æ–¹æ³•æˆ–CLRä¼šå¼•å‘å¼‚å¸¸ã€‚å‘ç”Ÿå¼‚å¸¸çš„ç‚¹ç§°ä¸ºæŠ›å‡ºç‚¹ã€‚å¦‚æœtryå—ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™tryå—ç«‹å³ç»ˆæ­¢ï¼Œç¨‹åºæ§åˆ¶å°†ç«‹å³è½¬ç§»åˆ°åé¢ç¬¬ä¸€ä¸ªå¼‚å¸¸å‚æ•°ç±»å‹ä¸æ‰€æœ‰æŠ›å‡ºç±»å‹åŒ¹é…çš„catchå—ä¸­ã€‚å¤„ç†å¼‚å¸¸åï¼Œç¨‹åºæ§åˆ¶åœ¨æœ€åä¸€ä¸ªcatchå—ä¹‹åæ¢å¤ã€‚è¿™ç§°ä¸ºå¼‚å¸¸å¤„ç†çš„ç»ˆæ­¢æ¨¡å‹</p><h3 id="NET-Exceptionå±‚æ¬¡"><a href="#NET-Exceptionå±‚æ¬¡" class="headerlink" title=".NET Exceptionå±‚æ¬¡"></a>.NET Exceptionå±‚æ¬¡</h3><p>C#ä¸­çš„å¼‚å¸¸å¤„ç†æœºåˆ¶åªèƒ½æŠ›å‡ºå’Œæ•è·Exceptionç±»ï¼ˆå‘½åç©ºé—´Systemï¼‰åŠå…¶æ´¾ç”Ÿç±»çš„å¯¹è±¡ã€‚</p><p>å…¶ä»–.NETè¯­è¨€ï¼ˆå¦‚C++ï¼‰å¼•å‘çš„å¼‚å¸¸å¯ä»¥é€šè¿‡å¸¸è§„catchå­å¥æ•è·ã€‚</p><p><strong>SystemExceptionç±»</strong></p><p>Exceptionç±»æ˜¯.NETå¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„çš„åŸºç±»ã€‚ä»Exceptionæ´¾ç”Ÿçš„ä¸€ä¸ªæœ€é‡è¦çš„ç±»æ˜¯SystemExceptionã€‚CLRäº§ç”ŸSystemExceptionï¼Œå¯ä»¥åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´çš„ä»»ä½•æ—¶å€™å‘ç”Ÿã€‚</p><p>å¦‚æœç¨‹åºå°è¯•è®¿é—®è¶…å‡ºèŒƒå›´çš„æ•°ç»„ç´¢å¼•ï¼Œåˆ™CLRä¼šå¼•å‘IndexOutOfRangeExceptionç±»å‹çš„å¼‚å¸¸ã€‚å°è¯•ä½¿ç”¨ç©ºå¼•ç”¨ä¼šå¯¼è‡´NullReferenceExceptionã€‚</p><p>catchå—å¯ä»¥ä½¿ç”¨åŸºç±»ç±»å‹æ¥æ•è·ç›¸å…³å¼‚å¸¸çš„å±‚æ¬¡ç»“æ„ã€‚æŒ‡å®šå¼‚å¸¸ç±»å‹å‚æ•°çš„catchå—å¯ä»¥æ•è·æ‰€æœ‰å¼‚å¸¸ã€‚ä»…å½“åŸºç±»å’Œæ‰€æœ‰æ´¾ç”Ÿç±»çš„å¤„ç†è¡Œä¸ºç›¸åŒæ—¶ï¼Œæ­¤æŠ€æœ¯æ‰æœ‰æ„ä¹‰ã€‚</p><p><strong>ç¡®å®šæ–¹æ³•æŠ›å‡ºä»€ä¹ˆå¼‚å¸¸ï¼ˆDetermining Which Exceptions a Method Throwsï¼‰</strong></p><h3 id="finallyå—"><a href="#finallyå—" class="headerlink" title="finallyå—"></a>finallyå—</h3><p>ç¨‹åºç»å¸¸åŠ¨æ€åœ°è¯·æ±‚å’Œé‡Šæ”¾èµ„æºã€‚æ“ä½œç³»ç»Ÿé€šå¸¸ä¼šé˜»æ­¢å¤šä¸ªç¨‹åºå¤„ç†æ–‡ä»¶ã€‚å› æ­¤ï¼Œè¯¥ç¨‹åºåº”å…³é—­æ–‡ä»¶ï¼ˆå³é‡Šæ”¾èµ„æºï¼‰ï¼Œä»¥ä¾¿å…¶ä»–ç¨‹åºå¯ä»¥ä½¿ç”¨å®ƒã€‚å¦‚æœæœªå…³é—­æ–‡ä»¶ï¼Œåˆ™ä¼šå‘ç”Ÿèµ„æºæ³„æ¼ã€‚</p><p>å¤„ç†èµ„æºæ—¶ç»å¸¸ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚æ— è®ºç¨‹åºæ˜¯å¦é‡åˆ°å¼‚å¸¸ï¼Œè¯¥ç¨‹åºéƒ½åº”åœ¨ä¸å†éœ€è¦è¯¥æ–‡ä»¶æ—¶å°†å…¶å…³é—­ã€‚<strong>C#æä¾›äº†finallyå—ï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œè¯¥å—éƒ½å¯ä»¥ä¿è¯æ‰§è¡Œ</strong>ã€‚<br>è¿™ä½¿å¾—finallyå—éå¸¸é€‚åˆä»ç›¸åº”çš„tryå—ä¸­é‡Šæ”¾èµ„æºã€‚</p><p>tryå—ä¸­çš„å±€éƒ¨å˜é‡æ— æ³•åœ¨ç›¸åº”çš„finallyå—ä¸­è®¿é—®ï¼Œå› æ­¤å¿…é¡»åœ¨tryå—ä¹‹å‰å£°æ˜å¿…é¡»åœ¨ä¸¤è€…ä¸­è®¿é—®çš„å˜é‡ã€‚</p><p><strong>usingè¯­å¥</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span>(ExampleObject e = <span class="keyword">new</span> ExampleObject())</span><br><span class="line">&#123;</span><br><span class="line">  e.SomeMethod&#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç®€åŒ–å–å¾—èµ„æºã€åœ¨tryå—ä¸­ä½¿ç”¨èµ„æºå’Œåœ¨ç›¸åº”finallyä¸­é‡Šæ”¾èµ„æºçš„ä»£ç ã€‚æ–‡ä»¶å¤„ç†ç¨‹åºï¼Œä¿è¯æ–‡ä»¶ä¸å†ä½¿ç”¨æ—¶æ­£ç¡®å…³é—­ã€‚</p><p>usingè¯­å¥ä»£ç ç­‰æ•ˆäº</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ExampleObject e = <span class="keyword">new</span> ExampleObject();</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    e.SomeMethod();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">finally</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> ( e != <span class="literal">null</span> )</span><br><span class="line">      ( ( IDisposable ) e ).Dispose();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Exception Properties</strong></p><p>ç±»Exceptionçš„å±æ€§ç”¨äºåˆ¶å®šé”™è¯¯æ¶ˆæ¯ï¼ŒæŒ‡ç¤ºæ•è·åˆ°çš„å¼‚å¸¸ã€‚å±æ€§Messageå­˜å‚¨ä¸Exceptionå¯¹è±¡å…³è”çš„é”™è¯¯æ¶ˆæ¯ã€‚å±æ€§StackTraceåŒ…å«ä¸€ä¸ªè¡¨ç¤ºæ–¹æ³•è°ƒç”¨å †æ ˆçš„å­—ç¬¦ä¸²</p><p>å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç¨‹åºå‘˜å¯èƒ½ä¼šä½¿ç”¨å…¶ä»–é”™è¯¯æ¶ˆæ¯æˆ–æŒ‡ç¤ºæ–°çš„å¼‚å¸¸ç±»å‹ã€‚åŸå§‹å¼‚å¸¸å¯¹è±¡å­˜å‚¨åœ¨InnerExceptionå±æ€§ä¸­ã€‚</p><p><strong>ç±»å¼‚å¸¸æä¾›å…¶ä»–å±æ€§ï¼š</strong></p><ul><li>HelpLinkæŒ‡å®šæè¿°é—®é¢˜çš„å¸®åŠ©æ–‡ä»¶çš„ä½ç½®ã€‚</li><li>SourceæŒ‡å®šå¼•èµ·å¼‚å¸¸çš„åº”ç”¨ç¨‹åºæˆ–å¯¹è±¡çš„åç§°ã€‚</li><li>TargetSiteæŒ‡å®šå¼‚å¸¸å‘ç”Ÿçš„æ–¹æ³•ã€‚</li></ul><p>æœ€è¿‘è°ƒç”¨çš„æ–¹æ³•å‡ºç°åœ¨å †æ ˆçš„é¡¶éƒ¨ã€‚ç¬¬ä¸€ç§æ–¹æ³•ï¼ˆMainï¼‰å‡ºç°åœ¨åº•éƒ¨ã€‚</p><p>StackTraceè¡¨ç¤ºæŠ›å‡ºç‚¹å¤„æ–¹æ³•è°ƒç”¨å †æ ˆçš„çŠ¶æ€ã€‚å†…éƒ¨å¼‚å¸¸ä¿¡æ¯åŒ…æ‹¬å†…éƒ¨å¼‚å¸¸å †æ ˆè·Ÿè¸ªã€‚</p><h3 id="ç”¨æˆ·å®šä¹‰å¼‚å¸¸ç±»ï¼ˆUser-Defined-Exception-Classesï¼‰"><a href="#ç”¨æˆ·å®šä¹‰å¼‚å¸¸ç±»ï¼ˆUser-Defined-Exception-Classesï¼‰" class="headerlink" title="ç”¨æˆ·å®šä¹‰å¼‚å¸¸ç±»ï¼ˆUser-Defined Exception Classesï¼‰"></a>ç”¨æˆ·å®šä¹‰å¼‚å¸¸ç±»ï¼ˆUser-Defined Exception Classesï¼‰</h3><p>ç”¨æˆ·å®šä¹‰çš„å¼‚å¸¸ç±»åº”ç›´æ¥æˆ–é—´æ¥ä»åç§°ç©ºé—´Systemçš„Exceptionç±»æ´¾ç”Ÿã€‚</p><p>ç”¨æˆ·å®šä¹‰çš„å¼‚å¸¸åº”å®šä¹‰ä¸‰ä¸ªæ„é€ å‡½æ•°ï¼š</p><ul><li>æ— å‚æ•°æ„é€ å‡½æ•°</li><li>æ¥æ”¶å­—ç¬¦ä¸²å‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆé”™è¯¯æ¶ˆæ¯ï¼‰</li><li>æ¥æ”¶å­—ç¬¦ä¸²å‚æ•°å’ŒExceptionå‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆé”™è¯¯æ¶ˆæ¯å’Œå†…éƒ¨å¼‚å¸¸å¯¹è±¡ï¼‰</li></ul><h2 id="ç¬¬14ç« -å›¾å½¢ç”¨æˆ·ç•Œé¢æ¦‚å¿µï¼šç¬¬ä¸€éƒ¨åˆ†"><a href="#ç¬¬14ç« -å›¾å½¢ç”¨æˆ·ç•Œé¢æ¦‚å¿µï¼šç¬¬ä¸€éƒ¨åˆ†" class="headerlink" title="ç¬¬14ç«  å›¾å½¢ç”¨æˆ·ç•Œé¢æ¦‚å¿µï¼šç¬¬ä¸€éƒ¨åˆ†"></a>ç¬¬14ç«  å›¾å½¢ç”¨æˆ·ç•Œé¢æ¦‚å¿µï¼šç¬¬ä¸€éƒ¨åˆ†</h2><p>å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰å…è®¸ç”¨æˆ·åœ¨è§†è§‰ä¸Šä¸ç¨‹åºè¿›è¡Œäº¤äº’ã€‚</p><p>GUIæ§ä»¶æ˜¯å¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¿¡æ¯æˆ–ä½¿ç”¨æˆ·èƒ½å¤Ÿä¸åº”ç”¨ç¨‹åºäº¤äº’çš„å¯¹è±¡ã€‚</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/CSharp/controller.PNG" alt="controller"></p><h3 id="Windows-Forms"><a href="#Windows-Forms" class="headerlink" title="Windows Forms"></a>Windows Forms</h3><p>Formæ˜¯å‡ºç°åœ¨è®¡ç®—æœºæ¡Œé¢ä¸Šçš„å›¾å½¢å…ƒç´ ï¼› å®ƒå¯ä»¥æ˜¯å¯¹è¯æ¡†ï¼Œçª—å£æˆ–MDIçª—å£ã€‚ç»„ä»¶æ˜¯å®ç°IComponentæ¥å£çš„ç±»çš„å®ä¾‹ï¼Œè¯¥æ¥å£å®šä¹‰äº†ç»„ä»¶å¿…é¡»å®ç°çš„è¡Œä¸ºï¼Œä¾‹å¦‚å¦‚ä½•åŠ è½½ç»„ä»¶ã€‚è¯¸å¦‚æŒ‰é’®æˆ–æ ‡ç­¾çš„æ§ä»¶åœ¨è¿è¡Œæ—¶å…·æœ‰å›¾å½¢è¡¨ç¤ºã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç¬¬1ç« -è®¡ç®—æœºã€Internetä¸Visual-C-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç¬¬1ç« -è®¡ç®—æœºã€Internetä¸Visual-C-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬1ç«  è®¡ç®—æœºã€Internetä¸Visual C#ç®€ä»‹&quot;&gt;&lt;/a&gt;ç¬¬1ç«  è®¡ç®—æœºã€Internetä¸Visual C#ç®€ä»‹&lt;/h2&gt;
    
    </summary>
    
    
      <category term="ç§¯ç´¯" scheme="https://mysticalguest.github.io/categories/%E7%A7%AF%E7%B4%AF/"/>
    
    
      <category term="C#" scheme="https://mysticalguest.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¸Docker</title>
    <link href="https://mysticalguest.github.io/2020/08/18/Spring/SpringBootDocker/"/>
    <id>https://mysticalguest.github.io/2020/08/18/Spring/SpringBootDocker/</id>
    <published>2020-08-18T01:10:32.096Z</published>
    <updated>2020-09-07T09:03:39.904Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€Dockerç®€ä»‹"><a href="#1ã€Dockerç®€ä»‹" class="headerlink" title="1ã€Dockerç®€ä»‹"></a>1ã€Dockerç®€ä»‹</h2><p>ç±»ä¼¼äºè™šæ‹ŸæœºæŠ€æœ¯ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå´å®ç°äº†è™šæ‹ŸæœºæŠ€æœ¯é‡Œçš„èµ„æºéš”ç¦»ï¼Œæ€§èƒ½è¿œè¿œé«˜äºè™šæ‹Ÿæœºã€‚<br><a id="more"></a></p><p><strong>Docker</strong>æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼›æ˜¯ä¸€ä¸ªè½»é‡çº§å®¹å™¨æŠ€æœ¯ï¼›</p><p>å¦‚å›¾ï¼Œå°†ç”¨ä¸€ä¸ªå®ä¾‹æ¥è®²è¿°Dockerçš„æ¥æºï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/docker-story.png" alt="Docker" style="zoom:80%;" /></p><p>ç”¨æˆ·Aä½¿ç”¨çš„ç”µè„‘æ˜¯WindowsåŸç”Ÿç³»ç»Ÿï¼Œéœ€è¦è‡ªå·±å®‰è£…é©±åŠ¨å’Œè½¯ä»¶ç­‰ï¼Œä½†å¦‚æœç”¨æˆ·Bä¹Ÿä½¿ç”¨åŒæ ·æ–¹æ³•ï¼Œå°±ä¹Ÿå¾—è‡ªå·±å†è£…ä¸€éï¼Œå…¶ä»–äººä¹Ÿä¸€æ ·ï¼Œè¿‡äºéº»çƒ¦ã€‚</p><p>é‚£ä¹ˆå°±æœ‰äº†Windowsé•œåƒç³»ç»Ÿï¼Œç”¨æˆ·AæŠŠç³»ç»Ÿè£…å¥½åï¼ŒåŒ…æ‹¬å®‰è£…å¥½çš„é©±åŠ¨å’Œè½¯ä»¶ç­‰ï¼Œæ‰“åŒ…æˆé•œåƒï¼Œå…¶ä»–ç”¨æˆ·ä¹Ÿå°±æœ‰äº†ã€‚</p><p>Dockerå°±ç±»ä¼¼äºè¿™ç§é•œåƒæœºåˆ¶ã€‚</p><p>Dockeræ”¯æŒå°†è½¯ä»¶ç¼–è¯‘æˆä¸€ä¸ªé•œåƒï¼›ç„¶ååœ¨é•œåƒä¸­å„ç§è½¯ä»¶åšå¥½é…ç½®ï¼Œå°†é•œåƒå‘å¸ƒå‡ºå»ï¼Œå…¶ä»–ä½¿ç”¨è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒï¼›</p><p>è¿è¡Œä¸­çš„è¿™ä¸ªé•œåƒç§°ä¸ºå®¹å™¨ï¼Œå®¹å™¨å¯åŠ¨æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚</p><h2 id="2ã€æ ¸å¿ƒæ¦‚å¿µ"><a href="#2ã€æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2ã€æ ¸å¿ƒæ¦‚å¿µ"></a>2ã€æ ¸å¿ƒæ¦‚å¿µ</h2><ul><li>dockerä¸»æœº(Host)ï¼šå®‰è£…äº†d ockerç¨‹åºçš„æœºå™¨ï¼ˆDockerç›´æ¥å®‰è£…åœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼‰</li><li>dockerå®¢æˆ·ç«¯(Client)ï¼šè¿æ¥dockerä¸»æœºè¿›è¡Œæ“ä½œ</li><li>dockerä»“åº“(Registry)ï¼šç”¨æ¥ä¿å­˜å„ç§æ‰“åŒ…å¥½çš„è½¯ä»¶é•œåƒï¼›å…¬å…±ã€ç§äººä»“åº“</li><li>dockeré•œåƒ(Images)ï¼šè½¯ä»¶æ‰“åŒ…å¥½çš„é•œåƒï¼›æ”¾åœ¨dockerä»“åº“ä¸­</li><li>dockerå®¹å™¨(Container)ï¼šé•œåƒå¯åŠ¨åçš„å®ä¾‹ç§°ä¸ºä¸€ä¸ªå®¹å™¨ï¼›å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨</li></ul><p>ä½¿ç”¨Dockerçš„æ­¥éª¤ï¼š</p><ul><li>å®‰è£…Docker</li><li>å»Dockerä»“åº“æ‰¾åˆ°è¿™ä¸ªè½¯ä»¶å¯¹åº”çš„é•œåƒ</li><li>ä½¿ç”¨Dockerè¿è¡Œè¿™ä¸ªé•œåƒï¼Œè¿™ä¸ªé•œåƒå°±ä¼šç”Ÿæˆä¸€ä¸ªDockerå®¹å™¨</li><li>å¯¹å®¹å™¨çš„å¯åŠ¨åœæ­¢å°±æ˜¯å¯¹è½¯ä»¶çš„å¯åŠ¨åœæ­¢</li></ul><h2 id="3ã€å®‰è£…Docker"><a href="#3ã€å®‰è£…Docker" class="headerlink" title="3ã€å®‰è£…Docker"></a>3ã€å®‰è£…Docker</h2><h3 id="3-1-å®‰è£…linuxè™šæ‹Ÿæœº"><a href="#3-1-å®‰è£…linuxè™šæ‹Ÿæœº" class="headerlink" title="3.1 å®‰è£…linuxè™šæ‹Ÿæœº"></a>3.1 å®‰è£…linuxè™šæ‹Ÿæœº</h3><ul><li>VMWareã€VirtualBox</li><li>åˆ›å»ºæ–°è™šæ‹Ÿæœºæˆ–æ‰“å¼€å·²åˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œè¿™é‡Œé€‰æ‹©CentOS</li></ul><h3 id="3-2-åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…dockerï¼Œæ­¥éª¤"><a href="#3-2-åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…dockerï¼Œæ­¥éª¤" class="headerlink" title="3.2 åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…dockerï¼Œæ­¥éª¤"></a>3.2 åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…dockerï¼Œæ­¥éª¤</h3><ul><li>æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯3.10åŠä»¥ä¸Š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> uname -r</span></span><br></pre></td></tr></table></figure><ul><li>ä¸æ˜¯3.10åŠä»¥ä¸Šçš„ï¼Œä½¿ç”¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum update</span></span><br></pre></td></tr></table></figure><ul><li>å®‰è£…ä¾èµ–</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ è½¯ä»¶æºï¼ˆè®¾ç½®yumæºï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç‰¹å®šç‰ˆæœ¬å®‰è£…</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum list docker-ce --showduplicates | sort -r</span></span><br></pre></td></tr></table></figure><ul><li>å®‰è£…docker</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install &lt;FQPN&gt;  <span class="comment"># ä¾‹å¦‚ï¼šsudo yum install docker-ce-18.03.1.ce</span></span></span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨docker</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> systemctl start docker</span></span><br></pre></td></tr></table></figure><ul><li>éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼ˆæœ‰clientå’Œserviceä¸¤éƒ¨åˆ†è¡¨ç¤ºdockerå®‰è£…å¯åŠ¨éƒ½æˆåŠŸäº†ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker version</span></span><br></pre></td></tr></table></figure><ul><li>åœæ­¢docker</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> systemctl stop docker</span></span><br></pre></td></tr></table></figure><ul><li>å¼€æœºå¯åŠ¨docker</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">enable</span> docker</span></span><br></pre></td></tr></table></figure><ul><li><p>æ›´æ¢dockerçš„é•œåƒæº</p><ul><li><p>ä¿®æ”¹æˆ–åˆ›å»ºdaemon.jsonæ–‡ä»¶ï¼š<code>vi /etc/docker/daemon.json</code>å°†ä»¥ä¸‹é…ç½®å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œä¿å­˜å¹¶é€€å‡ºï¼ˆä¸ä¼šæ“ä½œçš„ç™¾åº¦ä¸‹viå‘½ä»¤å§ï¼‰ï¼š</p></li><li><p>Dockerä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [<span class="string">"https://registry.docker-cn.com"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸­ç§‘å¤§é•œåƒåŠ é€Ÿ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [<span class="string">"https://docker.mirrors.ustc.edu.cn"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç½‘æ˜“163é•œåƒåŠ é€Ÿ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [<span class="string">"http://hub-mirror.c.163.com"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é˜¿é‡Œäº‘è·Ÿdaocloudé•œåƒåŠ é€Ÿéœ€è¦æ³¨å†Œè´¦å·ï¼Œé˜¿é‡Œäº‘<a href="https://www.aliyun.com/">å®˜ç½‘</a>ï¼Œç™»å½•ä¹‹åé€‰æ‹©æ§åˆ¶å°ï¼Œæ‰¾åˆ°<strong>å®¹å™¨é•œåƒæœåŠ¡</strong>ï¼Œåœ¨é•œåƒåŠ é€Ÿå™¨ä¸‹æœ‰ä¸ªåŠ é€Ÿåœ°å€ï¼Œå¤åˆ¶æ·»åŠ ä¸Šå³å¯</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [<span class="string">"https://xxxxxxxx.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯dockerï¼š<code>systemctl restart docker</code></p></li></ul></li></ul><h2 id="4ã€Dockerå¸¸ç”¨å‘½ä»¤-amp-æ“ä½œ"><a href="#4ã€Dockerå¸¸ç”¨å‘½ä»¤-amp-æ“ä½œ" class="headerlink" title="4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ"></a>4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ</h2><h3 id="4-1-é•œåƒæ“ä½œ"><a href="#4-1-é•œåƒæ“ä½œ" class="headerlink" title="4.1 é•œåƒæ“ä½œ"></a>4.1 é•œåƒæ“ä½œ</h3><div class="table-container"><table><thead><tr><th>æ“ä½œ</th><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ£€ç´¢</td><td>docker  search å…³é”®å­—  egï¼šdocker  search redis</td><td>æˆ‘ä»¬ç»å¸¸å»docker  hubä¸Šæ£€ç´¢é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚é•œåƒçš„TAGã€‚</td></tr><tr><td>æ‹‰å–</td><td>docker pull é•œåƒå:tag</td><td>:tagæ˜¯å¯é€‰çš„ï¼Œtagè¡¨ç¤ºæ ‡ç­¾ï¼Œå¤šä¸ºè½¯ä»¶çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯latest</td></tr><tr><td>åˆ—è¡¨</td><td>docker images</td><td>æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°é•œåƒ</td></tr><tr><td>åˆ é™¤</td><td>docker rmi image-id</td><td>åˆ é™¤æŒ‡å®šçš„æœ¬åœ°é•œåƒ</td></tr></tbody></table></div><p>Docker Hub<a href="https://hub.docker.com/">ä»“åº“</a></p><h3 id="4-2-å®¹å™¨æ“ä½œ"><a href="#4-2-å®¹å™¨æ“ä½œ" class="headerlink" title="4.2 å®¹å™¨æ“ä½œ"></a>4.2 å®¹å™¨æ“ä½œ</h3><p>è½¯ä»¶é•œåƒï¼ˆä¾‹ï¼šQQå®‰è£…ç¨‹åºï¼‰â€”â€”è¿è¡Œé•œåƒâ€”â€”äº§ç”Ÿä¸€ä¸ªå®¹å™¨ï¼ˆæ­£åœ¨è¿è¡Œçš„è½¯ä»¶ï¼Œè¿è¡Œçš„QQï¼‰</p><p>æ­¥éª¤ï¼š</p><ul><li>æœç´¢é•œåƒ</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker search tomcat</span><br></pre></td></tr></table></figure><ul><li>æ‹‰å–é•œåƒ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull tomcat</span></span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®é•œåƒå¯åŠ¨å®¹å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// --nameç»™å®¹å™¨èµ·å</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run --name mytomcat -d tomcat:latest</span></span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps</span></span><br></pre></td></tr></table></figure><ul><li>åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker stop &lt;å®¹å™¨çš„id&gt;/&lt;å®¹å™¨çš„name&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨ï¼ˆåŒ…æ‹¬è¿è¡Œä¸­å’Œå·²åœæ­¢çš„ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a</span></span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨å®¹å™¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker start &lt;å®¹å™¨id&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤ä¸€ä¸ªå®¹å™¨ï¼ˆæ³¨æ„å’Œåˆ é™¤é•œåƒçš„åŒºåˆ«ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker rm å®¹å™¨id</span></span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨ä¸€ä¸ªåšäº†ç«¯å£æ˜ å°„çš„tomcatï¼ˆå¯ä»¥ä¸ç”¨èµ·åï¼‰ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åš</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 8888:8080 tomcat</span></span><br></pre></td></tr></table></figure><blockquote><p>-dï¼šåå°è¿è¡Œ<br>-pï¼šå°†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ä¸€ä¸ªç«¯å£    ä¸»æœºç«¯å£:å®¹å™¨å†…éƒ¨çš„ç«¯å£</p></blockquote><ul><li>æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker logs &lt;container-name&gt;/&lt;container-id&gt;</span></span><br></pre></td></tr></table></figure><p>æ›´å¤šå‘½ä»¤ï¼Œå¯ä»¥å‚è€ƒæ¯ä¸€ä¸ªé•œåƒçš„<a href="https://docs.docker.com/engine/reference/commandline/docker/">æ–‡æ¡£</a></p><h2 id="5ã€å®‰è£…MySQLç¤ºä¾‹"><a href="#5ã€å®‰è£…MySQLç¤ºä¾‹" class="headerlink" title="5ã€å®‰è£…MySQLç¤ºä¾‹"></a>5ã€å®‰è£…MySQLç¤ºä¾‹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull mysql</span></span><br></pre></td></tr></table></figure><ul><li>é”™è¯¯çš„å¯åŠ¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name mysql01 -d mysql</span></span><br></pre></td></tr></table></figure><p>ç”¨<code>docker ps</code>è§‚å¯Ÿåˆ°ï¼Œmysqlé€€å‡ºäº†ï¼›ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä½¿ç”¨<code>docker logs &lt;mysqlçš„id&gt;</code>ï¼Œå¾—åˆ°é”™è¯¯æ—¥å¿—ï¼šä¸‰ä¸ªå‚æ•°å¿…é¡»æŒ‡å®šä¸€ä¸ª</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">error: database is uninitialized and password option is not specified </span><br><span class="line">  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and </span><br><span class="line">MYSQL_RANDOM_ROOT_PASSWORD</span><br></pre></td></tr></table></figure><ul><li>æ­£ç¡®çš„å¯åŠ¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span></span><br></pre></td></tr></table></figure><ul><li>è¿˜åº”åšç«¯å£æ˜ å°„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span></span><br></pre></td></tr></table></figure><ul><li>å‡ ä¸ªå…¶ä»–çš„é«˜çº§æ“ä½œ</li></ul><p>-vï¼šæŠŠä¸»æœºçš„/conf/mysqlæ–‡ä»¶å¤¹æŒ‚è½½åˆ° mysqldockerå®¹å™¨çš„/etc/mysql/conf.dæ–‡ä»¶å¤¹é‡Œé¢</p><p>æ”¹mysqlçš„é…ç½®æ–‡ä»¶å°±åªéœ€è¦æŠŠmysqlé…ç½®æ–‡ä»¶æ”¾åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸‹ï¼ˆ/conf/mysqlï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw </span></span><br><span class="line">-d mysql:tag</span><br></pre></td></tr></table></figure><p>ä¸ç”¨é…ç½®æ–‡ä»¶ï¼ŒæŒ‡å®šmysqlçš„ä¸€äº›é…ç½®å‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character</span></span><br><span class="line">-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€Dockerç®€ä»‹&quot;&gt;&lt;a href=&quot;#1ã€Dockerç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1ã€Dockerç®€ä»‹&quot;&gt;&lt;/a&gt;1ã€Dockerç®€ä»‹&lt;/h2&gt;&lt;p&gt;ç±»ä¼¼äºè™šæ‹ŸæœºæŠ€æœ¯ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œå´å®ç°äº†è™šæ‹ŸæœºæŠ€æœ¯é‡Œçš„èµ„æºéš”ç¦»ï¼Œæ€§èƒ½è¿œè¿œé«˜äºè™šæ‹Ÿæœºã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¸Servlet</title>
    <link href="https://mysticalguest.github.io/2020/08/16/Spring/SpringBootServlet/"/>
    <id>https://mysticalguest.github.io/2020/08/16/Spring/SpringBootServlet/</id>
    <published>2020-08-16T04:18:39.084Z</published>
    <updated>2020-09-10T09:34:43.420Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨"><a href="#1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨" class="headerlink" title="1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨"></a>1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨</h2><p>SpringBooté»˜è®¤ä½¿ç”¨Tomcatä½œä¸ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›</p><a id="more"></a><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/tomcat-pom.png" alt="tomcat"></p><p>é—®é¢˜ï¼Ÿ</p><h3 id="1-1-å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›"><a href="#1-1-å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›" class="headerlink" title="1.1 å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›"></a>1.1 å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</h3><ul><li>ä¿®æ”¹å’Œserveræœ‰å…³çš„é…ç½®ï¼ˆServerProperties{ä¹Ÿæ˜¯EmbeddedServletContainerCustomizer}ï¼‰ï¼›</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">8088</span></span><br><span class="line"><span class="meta">server.context-path</span>=<span class="string">/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">server.tomcat.uri-encoding</span>=<span class="string">UTF-8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">//é€šç”¨çš„Servletå®¹å™¨è®¾ç½®</span></span><br><span class="line"><span class="attr">server.xxx</span></span><br><span class="line"><span class="attr">//Tomcatçš„è®¾ç½®</span></span><br><span class="line"><span class="attr">server.tomcat.xxx</span></span><br></pre></td></tr></table></figure><ul><li>ç¼–å†™ä¸€ä¸ª<code>EmbeddedServletContainerCustomizer</code>ï¼šåµŒå…¥å¼çš„Servletå®¹å™¨çš„å®šåˆ¶å™¨ï¼›æ¥ä¿®æ”¹Servletå®¹å™¨çš„é…ç½®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>  <span class="comment">//ä¸€å®šè¦å°†è¿™ä¸ªå®šåˆ¶å™¨åŠ å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> EmbeddedServletContainerCustomizer <span class="title">embeddedServletContainerCustomizer</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> EmbeddedServletContainerCustomizer() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šåˆ¶åµŒå…¥å¼çš„Servletå®¹å™¨ç›¸å…³çš„è§„åˆ™</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(ConfigurableEmbeddedServletContainer container)</span> </span>&#123;</span><br><span class="line">      container.setPort(<span class="number">8083</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ï¼ˆServletã€Filterã€Listenerï¼‰"><a href="#1-2-æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ï¼ˆServletã€Filterã€Listenerï¼‰" class="headerlink" title="1.2 æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ï¼ˆServletã€Filterã€Listenerï¼‰"></a>1.2 æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ï¼ˆServletã€Filterã€Listenerï¼‰</h3><p>ç”±äºSpringBooté»˜è®¤æ˜¯ä»¥jaråŒ…çš„æ–¹å¼å¯åŠ¨åµŒå…¥å¼çš„Servletå®¹å™¨æ¥å¯åŠ¨SpringBootçš„webåº”ç”¨ï¼Œæ²¡æœ‰web.xmlæ–‡ä»¶ã€‚</p><p>æ³¨å†Œä¸‰å¤§ç»„ä»¶ç”¨ä»¥ä¸‹æ–¹å¼</p><ul><li>ServletRegistrationBean</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å†Œä¸‰å¤§ç»„ä»¶</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">myServlet</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  ServletRegistrationBean registrationBean = <span class="keyword">new</span> ServletRegistrationBean(</span><br><span class="line">    <span class="keyword">new</span> CustomServlet(),</span><br><span class="line">    <span class="string">"/myServlet"</span></span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>FilterRegistrationBean</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">myFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">  FilterRegistrationBean registrationBean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">  registrationBean.setFilter(<span class="keyword">new</span> CustomFilter());</span><br><span class="line">  registrationBean.setUrlPatterns(Arrays.asList(<span class="string">"/hello"</span>,<span class="string">"/myServlet"</span>));</span><br><span class="line">  <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ServletListenerRegistrationBean</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean <span class="title">myListener</span><span class="params">()</span></span>&#123;</span><br><span class="line">  ServletListenerRegistrationBean&lt;CustomListener&gt; registrationBean = </span><br><span class="line"><span class="keyword">new</span> ServletListenerRegistrationBean&lt;&gt;(<span class="keyword">new</span> CustomListener());</span><br><span class="line">  <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SpringBootå¸®æˆ‘ä»¬è‡ªåŠ¨SpringMVCçš„æ—¶å€™ï¼Œè‡ªåŠ¨çš„æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼›DIspatcherServletï¼›</p><p>DispatcherServletAutoConfigurationä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>(</span><br><span class="line">  name = &#123;<span class="string">"dispatcherServletRegistration"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="meta">@ConditionalOnBean</span>(</span><br><span class="line">  value = &#123;DispatcherServlet<span class="class">.<span class="keyword">class</span>&#125;,</span></span><br><span class="line"><span class="class">  <span class="title">name</span> </span>= &#123;<span class="string">"dispatcherServlet"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">dispatcherServletRegistration</span><span class="params">(DispatcherServlet </span></span></span><br><span class="line"><span class="function"><span class="params">  dispatcherServlet)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  ServletRegistrationBean registration = <span class="keyword">new</span> ServletRegistrationBean(</span><br><span class="line">    dispatcherServlet, </span><br><span class="line">    <span class="keyword">new</span> String[]&#123;<span class="keyword">this</span>.serverProperties.getServletMapping()&#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é»˜è®¤æ‹¦æˆªï¼š /  æ‰€æœ‰è¯·æ±‚ï¼›åŒ…é™æ€èµ„æºï¼Œä½†æ˜¯ä¸æ‹¦æˆªjspè¯·æ±‚ï¼›   /*ä¼šæ‹¦æˆªjsp</span></span><br><span class="line">  <span class="comment">//å¯ä»¥é€šè¿‡server.servletPathæ¥ä¿®æ”¹SpringMVCå‰ç«¯æ§åˆ¶å™¨é»˜è®¤æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">  registration.setName(<span class="string">"dispatcherServlet"</span>);</span><br><span class="line">  registration.setLoadOnStartup(<span class="keyword">this</span>.webMvcProperties.getServlet().getLoadOnStartup());</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.multipartConfig != <span class="keyword">null</span>) &#123;</span><br><span class="line">    registration.setMultipartConfig(<span class="keyword">this</span>.multipartConfig);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> registration;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2ã€SpringBootèƒ½ä¸èƒ½æ”¯æŒå…¶ä»–çš„Servletå®¹å™¨ï¼Ÿ"><a href="#2ã€SpringBootèƒ½ä¸èƒ½æ”¯æŒå…¶ä»–çš„Servletå®¹å™¨ï¼Ÿ" class="headerlink" title="2ã€SpringBootèƒ½ä¸èƒ½æ”¯æŒå…¶ä»–çš„Servletå®¹å™¨ï¼Ÿ"></a>2ã€SpringBootèƒ½ä¸èƒ½æ”¯æŒå…¶ä»–çš„Servletå®¹å™¨ï¼Ÿ</h2><p>åœ¨ä¹‹å‰å†™å®šåˆ¶åµŒå…¥å¼çš„Servletå®¹å™¨ç›¸å…³çš„è§„åˆ™é…ç½®ç±»çš„æ—¶å€™</p><p>åœ¨<code>ServletConfig.class</code>ä¸­ç”¨çš„<code>ConfigurableEmbeddedServletContainer</code>å£°æ˜çš„å˜é‡ï¼Œé€‰ä¸­ï¼Œç‚¹å‡»Ctrl+hï¼Œä¼šåœ¨å³ä¾§æ˜¾ç¤ºå®ƒçš„ç»§æ‰¿æ ‘ï¼š</p><p>å¯é…ç½®çš„åµŒå…¥å¼å®¹å™¨å·¥ç¨‹</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/other-servlet.PNG" alt="other servlet"></p><h2 id="3ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨"><a href="#3ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨" class="headerlink" title="3ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨"></a>3ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨</h2><p>é»˜è®¤æ”¯æŒï¼š</p><h3 id="3-1-Tomcatï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰"><a href="#3-1-Tomcatï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰" class="headerlink" title="3.1 Tomcatï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰"></a>3.1 Tomcatï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--å¼•å…¥webæ¨¡å—é»˜è®¤å°±æ˜¯ä½¿ç”¨åµŒå…¥å¼çš„Tomcatä½œä¸ºServletå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-Jettyï¼ˆé•¿é“¾æ¥ï¼Œä¾‹å¦‚èŠå¤©ï¼‰"><a href="#3-2-Jettyï¼ˆé•¿é“¾æ¥ï¼Œä¾‹å¦‚èŠå¤©ï¼‰" class="headerlink" title="3.2 Jettyï¼ˆé•¿é“¾æ¥ï¼Œä¾‹å¦‚èŠå¤©ï¼‰"></a>3.2 Jettyï¼ˆé•¿é“¾æ¥ï¼Œä¾‹å¦‚èŠå¤©ï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥é™¤Tomcatå¤–çš„å…¶ä»–Servlet: jetty --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-Undertowï¼ˆä¸æ”¯æŒJSPï¼‰"><a href="#3-3-Undertowï¼ˆä¸æ”¯æŒJSPï¼‰" class="headerlink" title="3.3 Undertowï¼ˆä¸æ”¯æŒJSPï¼‰"></a>3.3 Undertowï¼ˆä¸æ”¯æŒJSPï¼‰</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥é™¤Tomcatå¤–çš„å…¶ä»–Servlet: undertow --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†"><a href="#3-4-åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="3.4 åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†"></a>3.4 åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†</h3><p>åœ¨è‡ªåŠ¨é…ç½®åŒ…é‡Œçš„<code>EmbeddedServletContainerAutoConfiguration.class</code>ï¼šåµŒå…¥å¼çš„Servletå®¹å™¨è‡ªåŠ¨é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfigureOrder</span>(-<span class="number">2147483648</span>)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;EmbeddedServletContainerAutoConfiguration.BeanPostProcessorsRegistrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">// å¯¼å…¥<span class="title">BeanPostProcessorsRegistrar</span></span>; ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶</span><br><span class="line"><span class="comment">// å¯¼å…¥äº†EmbeddedServletContainerCustomizerBeanPostProcessor</span></span><br><span class="line"><span class="comment">// åç½®å¤„ç†å™¨: beanåˆå§‹åŒ–å‰åï¼ˆåˆ›å»ºå®Œå¯¹è±¡ï¼Œè¿˜æ²¡èµ‹å€¼èµ‹å€¼ï¼‰æ‰§è¡Œåˆå§‹åŒ–å·¥ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedServletContainerAutoConfiguration</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>, <span class="title">Undertow</span>.<span class="title">class</span>, <span class="title">SslClientAuthMode</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">  @<span class="title">ConditionalOnMissingBean</span>(</span></span><br><span class="line"><span class="class">    <span class="title">value</span> </span>= &#123;EmbeddedServletContainerFactory<span class="class">.<span class="keyword">class</span>&#125;,</span></span><br><span class="line"><span class="class">    <span class="title">search</span> </span>= SearchStrategy.CURRENT</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedUndertow</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedUndertow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UndertowEmbeddedServletContainerFactory <span class="title">undertowEmbeddedServletContainerFactory</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> UndertowEmbeddedServletContainerFactory();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>, <span class="title">Server</span>.<span class="title">class</span>, <span class="title">Loader</span>.<span class="title">class</span>, <span class="title">WebAppContext</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">  @<span class="title">ConditionalOnMissingBean</span>(</span></span><br><span class="line"><span class="class">    <span class="title">value</span> </span>= &#123;EmbeddedServletContainerFactory<span class="class">.<span class="keyword">class</span>&#125;,</span></span><br><span class="line"><span class="class">    <span class="title">search</span> </span>= SearchStrategy.CURRENT</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedJetty</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedJetty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JettyEmbeddedServletContainerFactory <span class="title">jettyEmbeddedServletContainerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> JettyEmbeddedServletContainerFactory();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­å½“å‰æ˜¯å¦å¼•å…¥äº†Tomcatä¾èµ–</span></span><br><span class="line">  <span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>, <span class="title">Tomcat</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line">  // åˆ¤æ–­å½“å‰å®¹å™¨æ²¡æœ‰ç”¨æˆ·è‡ªå·±å®šä¹‰EmbeddedServletContainerFactory: åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚</span><br><span class="line">  <span class="comment">// ä½œç”¨: åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">    value = &#123;EmbeddedServletContainerFactory<span class="class">.<span class="keyword">class</span>&#125;,</span></span><br><span class="line"><span class="class">    <span class="title">search</span> </span>= SearchStrategy.CURRENT</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedTomcat</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EmbeddedTomcat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TomcatEmbeddedServletContainerFactory <span class="title">tomcatEmbeddedServletContainerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> TomcatEmbeddedServletContainerFactory();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>EmbeddedServletContainerFactoryï¼ˆåµŒå…¥å¼Servletå®¹å™¨å·¥å‚ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmbeddedServletContainerFactory</span> </span>&#123;</span><br><span class="line">  <span class="comment">// è·å–åµŒå…¥å¼çš„Servletå®¹å™¨</span></span><br><span class="line">  <span class="function">EmbeddedServletContainer <span class="title">getEmbeddedServletContainer</span><span class="params">(ServletContextInitializer... var1)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/EmbeddedServletContainerFactory.PNG" alt="EmbeddedServletContainerFactory"></p><ul><li>EmbeddedServletContainerï¼ˆåµŒå…¥å¼çš„Servletå®¹å™¨ï¼‰</li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/EmbeddedServletContainer.PNG" alt="EmbeddedServletContainer"></p><ul><li>ä»¥<strong>TomcatEmbeddedServletContainerFactory</strong>ä¸ºä¾‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> EmbeddedServletContainer <span class="title">getEmbeddedServletContainer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  ServletContextInitializer... initializers)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºä¸€ä¸ªTomcat</span></span><br><span class="line">  Tomcat tomcat = <span class="keyword">new</span> Tomcat();</span><br><span class="line">  <span class="comment">// é…ç½®Tomcatçš„åŸºæœ¬ç¯é•œ</span></span><br><span class="line">  File baseDir = </span><br><span class="line"><span class="keyword">this</span>.baseDirectory != <span class="keyword">null</span> ? <span class="keyword">this</span>.baseDirectory : <span class="keyword">this</span>.createTempDir(<span class="string">"tomcat"</span>);</span><br><span class="line">  tomcat.setBaseDir(baseDir.getAbsolutePath());</span><br><span class="line">  Connector connector = <span class="keyword">new</span> Connector(<span class="keyword">this</span>.protocol);</span><br><span class="line">  tomcat.getService().addConnector(connector);</span><br><span class="line">  <span class="keyword">this</span>.customizeConnector(connector);</span><br><span class="line">  tomcat.setConnector(connector);</span><br><span class="line">  tomcat.getHost().setAutoDeploy(<span class="keyword">false</span>);</span><br><span class="line">  <span class="keyword">this</span>.configureEngine(tomcat.getEngine());</span><br><span class="line">  Iterator var5 = <span class="keyword">this</span>.additionalTomcatConnectors.iterator();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(var5.hasNext()) &#123;</span><br><span class="line">      Connector additionalConnector = (Connector)var5.next();</span><br><span class="line">      tomcat.getService().addConnector(additionalConnector);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.prepareContext(tomcat.getHost(), initializers);</span><br><span class="line">  <span class="comment">// å°†é…ç½®å¥½çš„Tomcatä¼ å…¥è¿›å»ï¼Œè¿”å›ä¸€ä¸ªEmbeddedServletContainerï¼›å¹¶ä¸”å¯åŠ¨TomcatæœåŠ¡å™¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.getTomcatEmbeddedServletContainer(tomcat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬å¯¹åµŒå…¥å¼å®¹å™¨çš„é…ç½®ä¿®æ”¹æ˜¯æ€ä¹ˆç”Ÿæ•ˆï¼Ÿ</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="attr">ServerProperties</span></span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®ç±»</span></span><br><span class="line">EmbeddedServletContainerCustomizer()</span><br></pre></td></tr></table></figure><p><strong>EmbeddedServletContainerCustomizer</strong>ï¼šå®šåˆ¶å™¨å¸®æˆ‘ä»¬ä¿®æ”¹äº†Servletå®¹å™¨çš„é…ç½®ï¼Ÿ</p><p>æ€ä¹ˆä¿®æ”¹çš„åŸç†ï¼Ÿ</p><ul><li>å®¹å™¨ä¸­å¯¼å…¥äº†<strong>EmbeddedServletContainerCustomizerBeanPostProcessor</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ä¹‹å‰</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> </span></span><br><span class="line"><span class="function">BeansException </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœå½“å‰åˆå§‹åŒ–çš„æ˜¯ä¸€ä¸ªConfigurableEmbeddedServletContainerç±»å‹çš„ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> ConfigurableEmbeddedServletContainer) &#123;</span><br><span class="line">    <span class="keyword">this</span>.postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer)bean);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postProcessBeforeInitialization</span><span class="params">(ConfigurableEmbeddedServletContainer bean)</span> </span>&#123;</span><br><span class="line">    Iterator var2 = <span class="keyword">this</span>.getCustomizers().iterator();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå®šåˆ¶å™¨çš„customizeæ–¹æ³•æ¥ç»™Servletå®¹å™¨è¿›è¡Œå±æ€§èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">    EmbeddedServletContainerCustomizer customizer = </span><br><span class="line">      (EmbeddedServletContainerCustomizer)var2.next();</span><br><span class="line"></span><br><span class="line">    customizer.customize(bean);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> Collection&lt;EmbeddedServletContainerCustomizer&gt; <span class="title">getCustomizers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.customizers == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="comment">// ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰è¿™è‘›ç±»å‹çš„ç»„ä»¶: EmbeddedServletContainerCustomizer</span></span><br><span class="line">      <span class="comment">// å®šåˆ¶Servletå®¹å™¨ï¼Œç»™å®¹å™¨ä¸­å¯ä»¥æ·»åŠ ä¸€ä¸ªEmbeddedServletContainerCustomizerç±»å‹çš„ç»„ä»¶</span></span><br><span class="line">      <span class="keyword">this</span>.customizers = </span><br><span class="line">        <span class="keyword">new</span> ArrayList(</span><br><span class="line">          <span class="keyword">this</span>.beanFactory.getBeansOfType(</span><br><span class="line">            EmbeddedServletContainerCustomizer<span class="class">.<span class="keyword">class</span>, <span class="title">false</span>, <span class="title">false</span>).<span class="title">values</span>()</span></span><br><span class="line"><span class="class">        )</span>;</span><br><span class="line"></span><br><span class="line">      Collections.sort(<span class="keyword">this</span>.customizers, AnnotationAwareOrderComparator.INSTANCE);</span><br><span class="line">      <span class="keyword">this</span>.customizers = Collections.unmodifiableList(<span class="keyword">this</span>.customizers);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.customizers;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ServerPropertiesä¹Ÿæ˜¯å®šåˆ¶å™¨ï¼Œæ­¥éª¤ï¼š<ul><li>SpringBootæ ¹æ®å¯¼å…¥çš„ä¾èµ–æƒ…å†µï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç›¸åº”çš„åµŒå…¥å¼å®¹å™¨å·¥å‚ï¼ŒEmbeddedServletContainerFactory[TomcatEmbeddedServletContainerFactory]</li><li>å®¹å™¨ä¸­æŸä¸ªç»„ä»¶è¦åˆ›å»ºå¯¹è±¡å°±ä¼šæƒŠåŠ¨åç½®å¤„ç†å™¨ï¼›EmbeddedServletContainerCustomizerBeanPostProcessorï¼›åªè¦æ˜¯åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼Œåç½®å¤„ç†å™¨å°±å·¥ä½œï¼›</li><li>åç½®å¤„ç†å™¨ï¼Œä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„<strong>EmbeddedServletContainerCustomizer</strong>ï¼Œè°ƒç”¨å®šåˆ¶å™¨çš„å®šåˆ¶æ–¹æ³•</li></ul></li></ul><h2 id="4ã€åµŒå…¥å¼Servletå®¹å™¨å¯åŠ¨åŸç†"><a href="#4ã€åµŒå…¥å¼Servletå®¹å™¨å¯åŠ¨åŸç†" class="headerlink" title="4ã€åµŒå…¥å¼Servletå®¹å™¨å¯åŠ¨åŸç†"></a>4ã€åµŒå…¥å¼Servletå®¹å™¨å¯åŠ¨åŸç†</h2><p>ä»€ä¹ˆæ—¶å€™åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼Ÿä»€ä¹ˆæ—¶å€™è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å¹¶å¯åŠ¨Tomcatï¼Ÿ</p><p>è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼š</p><ul><li>SpringBootåº”ç”¨å¯åŠ¨è¿è¡Œrunæ–¹æ³•</li><li>refreshContext(context)ï¼›SpringBootåˆ·æ–°IOCå®¹å™¨ã€åˆ›å»ºIOCå®¹å™¨å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å®¹å™¨ï¼Œåˆ›å»ºå®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶ã€‘ï¼›å¦‚æœæ˜¯webåº”ç”¨åˆ›å»º<strong>AnnotationConfigEmbeddedWebApplicationContext</strong>ï¼Œå¦åˆ™ï¼š<strong>AnnotationConfigApplicationContext</strong></li><li>refresh(context)ï¼Œ<strong>åˆ·æ–°åˆšæ‰åˆ›å»ºå¥½çš„iocå®¹å™¨ï¼›</strong>æŸ¥çœ‹<code>AbstractApplicationContext.class</code>æºç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">  <span class="keyword">synchronized</span>(<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">    <span class="keyword">this</span>.prepareRefresh();</span><br><span class="line">    ConfigurableListableBeanFactory beanFactory = <span class="keyword">this</span>.obtainFreshBeanFactory();</span><br><span class="line">    <span class="keyword">this</span>.prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.postProcessBeanFactory(beanFactory);</span><br><span class="line">      <span class="keyword">this</span>.invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line">      <span class="keyword">this</span>.registerBeanPostProcessors(beanFactory);</span><br><span class="line">      <span class="keyword">this</span>.initMessageSource();</span><br><span class="line">      <span class="keyword">this</span>.initApplicationEventMulticaster();</span><br><span class="line">      <span class="keyword">this</span>.onRefresh();</span><br><span class="line">      <span class="keyword">this</span>.registerListeners();</span><br><span class="line">      <span class="keyword">this</span>.finishBeanFactoryInitialization(beanFactory);</span><br><span class="line">      <span class="keyword">this</span>.finishRefresh();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (BeansException var9) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.logger.isWarnEnabled()) &#123;</span><br><span class="line">        <span class="keyword">this</span>.logger.warn(</span><br><span class="line">          <span class="string">"Exception encountered during context initialization - cancelling refresh attempt: "</span> </span><br><span class="line">          + var9</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.destroyBeans();</span><br><span class="line">      <span class="keyword">this</span>.cancelRefresh(var9);</span><br><span class="line">      <span class="keyword">throw</span> var9;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.resetCommonCaches();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>onRefresh()ï¼Œwebçš„iocå®¹å™¨é‡å†™äº†onRefreshæ–¹æ³•</p></li><li><p>webiocå®¹å™¨ä¼šåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›<strong>createEmbeddedServletContainer</strong>();</p></li><li>è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼š**</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory();</span><br></pre></td></tr></table></figure><p>ä»iocå®¹å™¨ä¸­è·å–EmbeddedServletContainerFactory ç»„ä»¶ï¼›<strong>TomcatEmbeddedServletContainerFactory</strong>åˆ›å»ºå¯¹è±¡ï¼Œåç½®å¤„ç†å™¨ä¸€çœ‹æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå°±è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨æ¥å…ˆå®šåˆ¶Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</p><ul><li><strong>ä½¿ç”¨å®¹å™¨å·¥å‚è·å–åµŒå…¥å¼çš„Servletå®¹å™¨</strong>ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.embeddedServletContainer = </span><br><span class="line">  containerFactory.getEmbeddedServletContainer(getSelfInitializer());</span><br></pre></td></tr></table></figure><ul><li>åµŒå…¥å¼çš„Servletå®¹å™¨åˆ›å»ºå¯¹è±¡å¹¶å¯åŠ¨Servletå®¹å™¨ï¼›</li></ul><p><strong>å…ˆå¯åŠ¨åµŒå…¥å¼çš„Servletå®¹å™¨ï¼Œå†å°†iocå®¹å™¨ä¸­å‰©ä¸‹æ²¡æœ‰åˆ›å»ºå‡ºçš„å¯¹è±¡è·å–å‡ºæ¥ï¼›</strong></p><p><strong>IOCå®¹å™¨å¯åŠ¨åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨</strong></p><h2 id="5ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨"><a href="#5ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨" class="headerlink" title="5ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨"></a>5ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨</h2><p>åµŒå…¥å¼Servletå®¹å™¨ï¼šåº”ç”¨æ‰“æˆå¯æ‰§è¡Œçš„jar</p><p>ä¼˜ç‚¹ï¼šç®€å•ã€ä¾¿æºï¼›</p><p>ç¼ºç‚¹ï¼šé»˜è®¤ä¸æ”¯æŒJSPã€ä¼˜åŒ–å®šåˆ¶æ¯”è¾ƒå¤æ‚ï¼ˆä½¿ç”¨å®šåˆ¶å™¨{ServerPropertiesã€è‡ªå®šä¹‰EmbeddedServletContainerCustomizer}ï¼Œè‡ªå·±ç¼–å†™åµŒå…¥å¼Servletå®¹å™¨çš„åˆ›å»ºå·¥å‚{EmbeddedServletContainerFactory}ï¼‰ï¼›</p><p>å¤–ç½®çš„Servletå®¹å™¨ï¼šå¤–é¢å®‰è£…Tomcatâ€”-åº”ç”¨waråŒ…çš„æ–¹å¼æ‰“åŒ…ï¼›</p><h3 id="5-1-åˆ›å»ºJSPwebé¡¹ç›®æ•™ç¨‹ï¼š"><a href="#5-1-åˆ›å»ºJSPwebé¡¹ç›®æ•™ç¨‹ï¼š" class="headerlink" title="5.1 åˆ›å»ºJSPwebé¡¹ç›®æ•™ç¨‹ï¼š"></a>5.1 åˆ›å»ºJSPwebé¡¹ç›®æ•™ç¨‹ï¼š</h3><ul><li>ä½¿ç”¨Spring Initializræ–°å»ºé¡¹ç›®ï¼š</li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/jspweb.PNG" alt="jsp web"></p><ul><li>å‰©ä¸‹éƒ½æ˜¯Nextï¼Œå¾—åˆ°é¡¹ç›®ç»“æ„ï¼š</li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/jsp-project-structure.PNG" alt="Structure"></p><ul><li>ç”Ÿæˆwebappæ–‡ä»¶å¤¹ï¼ˆå¯æ‰‹åŠ¨åˆ›å»ºï¼Œä¹Ÿå¯ç”¨ä»¥ä¸‹æ–¹æ³•ï¼‰ï¼š</li></ul><p>ç‚¹å‡»ç¼–è¯‘å™¨å³ä¸Šçš„Project StructureæŒ‰é’®â€”&gt;Modulesâ€”&gt;é¡¹ç›®å±•å¼€â€”&gt;Webâ€”&gt;Web Resource Directories</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/webapp.png" alt="webapp"></p><p>åŒå‡»Web Resource Directoryä¸‹çš„è·¯å¾„ï¼Œå¼¹å‡ºå¯¹è¯æ¡†ï¼š</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/webapp-dialog.PNG" alt="webapp dialog"></p><p>ç‚¹å‡»OKï¼Œç„¶ååœ¨å¼¹å‡ºå¯¹è¯æ¡†ç‚¹Yeså³å¯ï¼›</p><ul><li>éƒ¨ç½²æè¿°å›¾ç”ŸæˆXMLæ–‡ä»¶ï¼š</li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/deployment-webxml.png" alt="web.xml"></p><p>å°†é»˜è®¤çš„è·¯å¾„<code>...\WEB-INF\web.xml</code>æ”¹ä¸º<code>...\src\main\webapp\WEB-INF\web.xml</code>ï¼Œç‚¹å‡»OKå³å¯ï¼Œæœ€åApplyâ€”&gt;OK</p><p>å¦‚ä½•å¯åŠ¨ï¼Ÿ</p><ul><li>æœåŠ¡å™¨æ•´åˆè¿›IDEA</li></ul><p>ç¼–è¯‘å™¨ä¸Šæ–¹Edit Configurationsâ€¦</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/tomcat.png" alt="tomcat"></p><p>æ·»åŠ æœ¬åœ°Tomcaté…ç½®å³å¯ï¼š</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/mytomcat.PNG" alt="tomcat"></p><p>é…ç½®å®Œåæ·»åŠ éƒ¨ç½²é¡¹ç›®ï¼š</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/deployment-tomcat-project.png" alt="deploy"></p><p>å‡ºç°å¯¹è¯æ¡†ï¼Œé€‰æ‹©ç¬¬äºŒä¸ªæš´éœ²çš„å°±è¡Œ</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/select-artifacts-to-deploy.PNG" alt="select artifacts to deploy"></p><p>æœ€åApplyâ€”&gt;OKã€‚è¿è¡ŒTomcatå³å¯</p><h3 id="5-2-æ­¥éª¤"><a href="#5-2-æ­¥éª¤" class="headerlink" title="5.2 æ­¥éª¤"></a>5.2 æ­¥éª¤</h3><ul><li>å¿…é¡»åˆ›å»ºä¸€ä¸ªwaré¡¹ç›®ï¼›ï¼ˆåˆ©ç”¨IDEAåˆ›å»ºå¥½ç›®å½•ç»“æ„ï¼‰</li><li>å°†åµŒå…¥å¼çš„TomcatæŒ‡å®šä¸ºprovidedï¼›</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¿…é¡»ç¼–å†™ä¸€ä¸ª<strong>SpringBootServletInitializer</strong>çš„å­ç±»ï¼Œå¹¶è°ƒç”¨configureæ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletInitializer</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder application)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¼ å…¥SpringBootåº”ç”¨çš„ä¸»ç¨‹åº</span></span><br><span class="line">    <span class="keyword">return</span> application.sources(SpringBootWebJspApplication<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨ã€‚</li></ul><h3 id="5-3-åŸç†"><a href="#5-3-åŸç†" class="headerlink" title="5.3 åŸç†"></a>5.3 åŸç†</h3><ul><li><p>jaråŒ…ï¼šæ‰§è¡ŒSpringBootä¸»ç±»çš„mainæ–¹æ³•ï¼Œå¯åŠ¨iocå®¹å™¨ï¼Œåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›</p></li><li><p>waråŒ…ï¼šå¯åŠ¨æœåŠ¡å™¨ï¼Œ<strong>æœåŠ¡å™¨å¯åŠ¨SpringBootåº”ç”¨</strong>{SpringBootServletInitializer}ï¼Œå¯åŠ¨iocå®¹å™¨ï¼›</p></li></ul><p>servlet3.0ï¼ˆè§„èŒƒæ–‡æ¡£ï¼‰</p><h3 id="5-4-æŸ¥çœ‹8-2-4-Shared-libraries-runtimes-pluggabilityæ¡å†…å®¹ï¼š"><a href="#5-4-æŸ¥çœ‹8-2-4-Shared-libraries-runtimes-pluggabilityæ¡å†…å®¹ï¼š" class="headerlink" title="5.4 æŸ¥çœ‹8.2.4 Shared libraries / runtimes pluggabilityæ¡å†…å®¹ï¼š"></a>5.4 æŸ¥çœ‹<code>8.2.4 Shared libraries / runtimes pluggability</code>æ¡å†…å®¹ï¼š</h3><p>è§„åˆ™ï¼š</p><ul><li>æœåŠ¡å™¨å¯åŠ¨ï¼ˆwebåº”ç”¨å¯åŠ¨ï¼‰ä¼šåˆ›å»ºå½“å‰webåº”ç”¨é‡Œé¢æ¯ä¸€ä¸ªjaråŒ…é‡Œé¢ServletContainerInitializerå®ä¾‹ï¼›</li><li>ServletContainerInitializerçš„å®ç°æ”¾åœ¨jaråŒ…çš„META-INF/servicesæ–‡ä»¶å¤¹ä¸‹ï¼Œæœ‰ä¸€ä¸ªåä¸ºjavax.servlet.ServletContainerInitializerçš„æ–‡ä»¶ï¼Œå†…å®¹å°±æ˜¯ServletContainerInitializerçš„å®ç°ç±»çš„å…¨ç±»å</li><li>è¿˜å¯ä»¥ä½¿ç”¨@HandlesTypesï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™åŠ è½½æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç±»</li></ul><h3 id="5-5-æµç¨‹"><a href="#5-5-æµç¨‹" class="headerlink" title="5.5 æµç¨‹"></a>5.5 æµç¨‹</h3><ul><li><p>å¯åŠ¨Tomcat</p></li><li><p>org\springframework\spring-web\4.3.14.RELEASE\spring-web-4.3.14.RELEASE.jar!\META-INF\services\javax.servlet.ServletContainerInitializerï¼š</p><p>Springçš„webæ¨¡å—é‡Œé¢æœ‰è¿™ä¸ªæ–‡ä»¶ï¼š<strong>org.springframework.web.SpringServletContainerInitializer</strong></p></li><li><p>SpringServletContainerInitializerå°†<code>@HandlesTypes(WebApplicationInitializer.class)</code>æ ‡æ³¨çš„æ‰€æœ‰è¿™ä¸ªç±»å‹çš„ç±»éƒ½ä¼ å…¥åˆ°onStartupæ–¹æ³•çš„Set<Class<?>&gt;ï¼›ä¸ºè¿™äº›WebApplicationInitializerç±»å‹çš„ç±»åˆ›å»ºå®ä¾‹ï¼›</p></li><li><p>æ¯ä¸€ä¸ªWebApplicationInitializeréƒ½è°ƒç”¨è‡ªå·±çš„onStartupï¼›</p></li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/WebApplicationInitializer.PNG" alt="WebApplicationInitializer"></p><ul><li>ç›¸å½“äºæˆ‘ä»¬çš„SpringBootServletInitializerçš„ç±»ä¼šè¢«åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ‰§è¡ŒonStartupæ–¹æ³•</li><li>SpringBootServletInitializerå®ä¾‹æ‰§è¡ŒonStartupçš„æ—¶å€™ä¼šcreateRootApplicationContextï¼›åˆ›å»ºå®¹å™¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SpringBootServletInitializer.class</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createRootApplicationContext</span><span class="params">(ServletContext servletContext)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 1ã€åˆ›å»ºSpringApplicationBuilder</span></span><br><span class="line">  SpringApplicationBuilder builder = <span class="keyword">this</span>.createSpringApplicationBuilder();</span><br><span class="line">  StandardServletEnvironment environment = <span class="keyword">new</span> StandardServletEnvironment();</span><br><span class="line">  environment.initPropertySources(servletContext, (ServletConfig)<span class="keyword">null</span>);</span><br><span class="line">  builder.environment(environment);</span><br><span class="line">  builder.main(<span class="keyword">this</span>.getClass());</span><br><span class="line">  ApplicationContext parent = <span class="keyword">this</span>.getExistingRootWebApplicationContext(servletContext);</span><br><span class="line">  <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.logger.info(<span class="string">"Root context already created (using as parent)."</span>);</span><br><span class="line">    servletContext.setAttribute(</span><br><span class="line">      WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, </span><br><span class="line">      (Object)<span class="keyword">null</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    builder.initializers(</span><br><span class="line">      <span class="keyword">new</span> ApplicationContextInitializer[]&#123;</span><br><span class="line">        <span class="keyword">new</span> ParentContextApplicationContextInitializer(parent)</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  builder.initializers(</span><br><span class="line">    <span class="keyword">new</span> ApplicationContextInitializer[]&#123;</span><br><span class="line">      <span class="keyword">new</span> ServletContextApplicationContextInitializer(servletContext)</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  builder.contextClass(AnnotationConfigEmbeddedWebApplicationContext<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  <span class="comment">// è°ƒç”¨configureæ–¹æ³•ï¼Œå­ç±»é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°†SpringBootçš„ä¸»ç¨‹åºç±»ä¼ å…¥äº†è¿›æ¥</span></span><br><span class="line">  builder = <span class="keyword">this</span>.configure(builder);</span><br><span class="line">  <span class="comment">// ä½¿ç”¨builderåˆ›å»ºä¸€ä¸ªSpringåº”ç”¨</span></span><br><span class="line">  SpringApplication application = builder.build();</span><br><span class="line">  <span class="keyword">if</span> (application.getSources().isEmpty() &amp;&amp; </span><br><span class="line">AnnotationUtils.findAnnotation(<span class="keyword">this</span>.getClass(), Configuration<span class="class">.<span class="keyword">class</span>) !</span>= <span class="keyword">null</span>) &#123;</span><br><span class="line">    application.getSources().add(<span class="keyword">this</span>.getClass());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Assert.state(</span><br><span class="line">    !application.getSources().isEmpty(), </span><br><span class="line">    <span class="string">"No SpringApplication sources have been defined.</span></span><br><span class="line"><span class="string">      Either override the configure method or add an @Configuration annotation"</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.registerErrorPageFilter) &#123;</span><br><span class="line">    application.getSources().add(ErrorPageFilterConfiguration<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å¯åŠ¨Springåº”ç”¨</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.run(application);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Springçš„åº”ç”¨å°±å¯åŠ¨å¹¶ä¸”åˆ›å»ºIOCå®¹å™¨</li></ul><p>æŸ¥çœ‹ä¸Šé¢runæ–¹æ³•æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">  StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">  stopWatch.start();</span><br><span class="line">  ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">  FailureAnalyzers analyzers = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">this</span>.configureHeadlessProperty();</span><br><span class="line">  SpringApplicationRunListeners listeners = <span class="keyword">this</span>.getRunListeners(args);</span><br><span class="line">  listeners.starting();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    ApplicationArguments applicationArguments = <span class="keyword">new</span> DefaultApplicationArguments(args);</span><br><span class="line">    ConfigurableEnvironment environment = </span><br><span class="line">      <span class="keyword">this</span>.prepareEnvironment(listeners, applicationArguments);</span><br><span class="line"></span><br><span class="line">    Banner printedBanner = <span class="keyword">this</span>.printBanner(environment);</span><br><span class="line">    context = <span class="keyword">this</span>.createApplicationContext();</span><br><span class="line">    <span class="keyword">new</span> FailureAnalyzers(context);</span><br><span class="line">    <span class="keyword">this</span>.prepareContext(context, environment, listeners, applicationArguments, printedBanner);</span><br><span class="line">    <span class="comment">//åˆ·æ–°IOCå®¹å™¨</span></span><br><span class="line">    <span class="keyword">this</span>.refreshContext(context);</span><br><span class="line">    <span class="keyword">this</span>.afterRefresh(context, applicationArguments);</span><br><span class="line">    listeners.finished(context, (Throwable)<span class="keyword">null</span>);</span><br><span class="line">    stopWatch.stop();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line">      (<span class="keyword">new</span> StartupInfoLogger(<span class="keyword">this</span>.mainApplicationClass)).logStarted(</span><br><span class="line">        <span class="keyword">this</span>.getApplicationLog(), </span><br><span class="line">        stopWatch</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> context;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (Throwable var9) &#123;</span><br><span class="line">    <span class="keyword">this</span>.handleRunFailure(context, listeners, (FailureAnalyzers)analyzers, var9);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(var9);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¯åŠ¨Servletå®¹å™¨ï¼Œå†å¯åŠ¨SpringBootåº”ç”¨</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨&quot;&gt;&lt;a href=&quot;#1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨&quot; class=&quot;headerlink&quot; title=&quot;1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨&quot;&gt;&lt;/a&gt;1ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨&lt;/h2&gt;&lt;p&gt;SpringBooté»˜è®¤ä½¿ç”¨Tomcatä½œä¸ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›&lt;/p&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Booté”™è¯¯æœºåˆ¶</title>
    <link href="https://mysticalguest.github.io/2020/08/15/Spring/SpringBootError/"/>
    <id>https://mysticalguest.github.io/2020/08/15/Spring/SpringBootError/</id>
    <published>2020-08-15T13:55:49.569Z</published>
    <updated>2020-09-10T09:41:57.894Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€é”™è¯¯å¤„ç†æœºåˆ¶"><a href="#1ã€é”™è¯¯å¤„ç†æœºåˆ¶" class="headerlink" title="1ã€é”™è¯¯å¤„ç†æœºåˆ¶"></a>1ã€é”™è¯¯å¤„ç†æœºåˆ¶</h2><h3 id="1-1-SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶"><a href="#1-1-SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶" class="headerlink" title="1.1 SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶"></a>1.1 SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶</h3><a id="more"></a><p>é»˜è®¤æ•ˆæœï¼š</p><ul><li>æµè§ˆå™¨ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„é”™è¯¯é¡µé¢</li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/error-page.PNG" alt="error page" style="zoom: 80%;"></p><p>æµè§ˆå™¨å‘é€è¯·æ±‚çš„è¯·æ±‚å¤´ï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/chrome-header.png" alt="chrome header" style="zoom: 90%;"></p><ul><li>å¦‚æœæ˜¯å…¶ä»–å®¢æˆ·ç«¯ï¼Œé»˜è®¤å“åº”ä¸€ä¸ªjsonæ•°æ®</li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/json-error.PNG" alt="json"></p><p>å®¢æˆ·ç«¯çš„è¯·æ±‚å¤´ï¼š</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/postman-header.PNG" alt="postman header"></p><h3 id="1-2-åŸç†ï¼š"><a href="#1-2-åŸç†ï¼š" class="headerlink" title="1.2 åŸç†ï¼š"></a>1.2 åŸç†ï¼š</h3><ul><li><p>å¯ä»¥å‚ç…§<code>ErrorMvcAutoConfiguration</code>ï¼›é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®ï¼›æŸ¥çœ‹è¿™ä¸ªç±»çš„æºç </p></li><li><p>è¿™ä¸ªé…ç½®ç±»ç»™å®¹å™¨ä¸­æ·»åŠ äº†ä»¥ä¸‹ç»„ä»¶ï¼š</p><ul><li><code>DefaultErrorAttributes</code>ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¸®æˆ‘ä»¬åœ¨é¡µé¢å…±äº«ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(RequestAttributes requestAttributes,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">boolean</span> includeStackTrace)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  Map&lt;String, Object&gt; errorAttributes = <span class="keyword">new</span> LinkedHashMap&lt;String, Object&gt;();</span><br><span class="line">  errorAttributes.put(<span class="string">"timestamp"</span>, <span class="keyword">new</span> Date());</span><br><span class="line">  addStatus(errorAttributes, requestAttributes);</span><br><span class="line">  addErrorDetails(errorAttributes, requestAttributes, includeStackTrace);</span><br><span class="line">  addPath(errorAttributes, requestAttributes);</span><br><span class="line">  <span class="keyword">return</span> errorAttributes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>BasicErrorController</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicErrorController</span> <span class="keyword">extends</span> <span class="title">AbstractErrorController</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// äº§ç”Ÿhtmlç±»å‹çš„æ•°æ®ï¼›æµè§ˆå™¨å‘é€çš„è¯·æ±‚æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç†</span></span><br><span class="line">  <span class="meta">@RequestMapping</span>(produces = <span class="string">"text/html"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">errorHtml</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">      HttpServletResponse response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(</span><br><span class="line">      request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));</span><br><span class="line">      </span><br><span class="line">    response.setStatus(status.value());</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// å»å“ªä¸ªé¡µé¢ä½œä¸ºé”™è¯¯é¡µé¢ï¼›åŒ…å«é¡µé¢åœ°å€å’Œé¡µé¢å†…å®¹</span></span><br><span class="line">    ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br><span class="line">    <span class="keyword">return</span> (modelAndView == <span class="keyword">null</span> ? <span class="keyword">new</span> ModelAndView(<span class="string">"error"</span>, model) : modelAndView);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// äº§ç”Ÿjsonæ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç†</span></span><br><span class="line">  <span class="meta">@RequestMapping</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) &#123;</span><br><span class="line">    Map&lt;String, Object&gt; body = getErrorAttributes(request,</span><br><span class="line">        isIncludeStackTrace(request, MediaType.ALL));</span><br><span class="line">    HttpStatus status = getStatus(request);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>ErrorPageCustomizer</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorProperties</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"$&#123;error.path:/error&#125;"</span>)</span><br><span class="line">  <span class="keyword">private</span> String path = <span class="string">"/error"</span>;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>DefaultErrorViewResolver</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpStatus status,</span></span></span><br><span class="line"><span class="function"><span class="params">    Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">  ModelAndView modelAndView = resolve(String.valueOf(status), model);</span><br><span class="line">  <span class="keyword">if</span> (modelAndView == <span class="keyword">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) &#123;</span><br><span class="line">    modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//é»˜è®¤SpringBootå¯ä»¥å»æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ï¼Ÿ  error/404</span></span><br><span class="line">  String errorViewName = <span class="string">"error/"</span> + viewName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ¨¡æ¿å¼•æ“å¯ä»¥è§£æè¿™ä¸ªé¡µé¢åœ°å€å°±ç”¨æ¨¡æ¿å¼•æ“è§£æ</span></span><br><span class="line">  TemplateAvailabilityProvider provider = </span><br><span class="line">    <span class="keyword">this</span>.templateAvailabilityProviders.getProvider(errorViewName, <span class="keyword">this</span>.applicationContext);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (provider != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ¿å¼•æ“å¯ç”¨çš„æƒ…å†µä¸‹è¿”å›åˆ°errorViewNameæŒ‡å®šçš„è§†å›¾åœ°å€</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(errorViewName, model);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æ¨¡æ¿å¼•æ“ä¸å¯ç”¨ï¼Œå°±åœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾errorViewNameå¯¹åº”çš„é¡µé¢   error/404.html</span></span><br><span class="line">  <span class="keyword">return</span> resolveResource(errorViewName, model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-3-æ­¥éª¤"><a href="#1-3-æ­¥éª¤" class="headerlink" title="1.3 æ­¥éª¤"></a>1.3 æ­¥éª¤</h3><p>ä¸€ä½†ç³»ç»Ÿå‡ºç°4xxæˆ–è€…5xxä¹‹ç±»çš„é”™è¯¯ï¼›ErrorPageCustomizerå°±ä¼šç”Ÿæ•ˆï¼ˆå®šåˆ¶é”™è¯¯çš„å“åº”è§„åˆ™ï¼‰ï¼›å°±ä¼šæ¥åˆ°/errorè¯·æ±‚ï¼›å°±ä¼šè¢«<strong>BasicErrorController</strong>å¤„ç†ï¼›</p><ul><li>å“åº”é¡µé¢ï¼›å»å“ªä¸ªé¡µé¢æ˜¯ç”±<strong>DefaultErrorViewResolver</strong>è§£æå¾—åˆ°çš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">  HttpServletResponse response, </span></span></span><br><span class="line"><span class="function"><span class="params">  HttpStatus status, </span></span></span><br><span class="line"><span class="function"><span class="params">  Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ‰€æœ‰çš„ErrorViewResolverå¾—åˆ°ModelAndView</span></span><br><span class="line">  <span class="keyword">for</span> (ErrorViewResolver resolver : <span class="keyword">this</span>.errorViewResolvers) &#123;</span><br><span class="line">    ModelAndView modelAndView = resolver.resolveErrorView(request, status, model);</span><br><span class="line">    <span class="keyword">if</span> (modelAndView != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2ã€å¦‚ä½•å®šåˆ¶é”™è¯¯å“åº”ï¼š"><a href="#2ã€å¦‚ä½•å®šåˆ¶é”™è¯¯å“åº”ï¼š" class="headerlink" title="2ã€å¦‚ä½•å®šåˆ¶é”™è¯¯å“åº”ï¼š"></a>2ã€å¦‚ä½•å®šåˆ¶é”™è¯¯å“åº”ï¼š</h2><h3 id="2-1-å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢"><a href="#2-1-å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢" class="headerlink" title="2.1 å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢"></a>2.1 å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢</h3><ul><li>æœ‰æ¨¡æ¿å¼•æ“çš„æƒ…å†µä¸‹ï¼›</li></ul><p>error/çŠ¶æ€ç ; å°†é”™è¯¯é¡µé¢å‘½åä¸º<code>é”™è¯¯çŠ¶æ€ç .html</code>æ”¾åœ¨æ¨¡æ¿å¼•æ“æ–‡ä»¶å¤¹é‡Œé¢çš„erroræ–‡ä»¶å¤¹ä¸‹ï¼Œå‘ç”Ÿæ­¤çŠ¶æ€ç çš„é”™è¯¯å°±ä¼šæ¥åˆ°  å¯¹åº”çš„é¡µé¢ï¼›</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨4xxå’Œ5xxä½œä¸ºé”™è¯¯é¡µé¢çš„æ–‡ä»¶åæ¥åŒ¹é…è¿™ç§ç±»å‹çš„æ‰€æœ‰é”™è¯¯ï¼Œç²¾ç¡®ä¼˜å…ˆï¼ˆä¼˜å…ˆå¯»æ‰¾ç²¾ç¡®çš„çŠ¶æ€ç .htmlï¼‰ï¼›        </p><p>é¡µé¢èƒ½è·å–çš„ä¿¡æ¯ï¼›</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">timestampï¼šæ—¶é—´æˆ³</span></span><br><span class="line"><span class="attr">statusï¼šçŠ¶æ€ç </span></span><br><span class="line"><span class="attr">errorï¼šé”™è¯¯æç¤º</span></span><br><span class="line"><span class="attr">exceptionï¼šå¼‚å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="attr">messageï¼šå¼‚å¸¸æ¶ˆæ¯</span></span><br><span class="line"><span class="attr">errorsï¼šJSR303æ•°æ®æ ¡éªŒçš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ</span></span><br></pre></td></tr></table></figure><ul><li>æ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼ˆæ¨¡æ¿å¼•æ“æ‰¾ä¸åˆ°è¿™ä¸ªé”™è¯¯é¡µé¢ï¼‰ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ï¼›</li><li>ä»¥ä¸Šéƒ½æ²¡æœ‰é”™è¯¯é¡µé¢ï¼Œå°±æ˜¯é»˜è®¤æ¥åˆ°SpringBooté»˜è®¤çš„é”™è¯¯æç¤ºé¡µé¢</li></ul><h3 id="2-2-å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®"><a href="#2-2-å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®" class="headerlink" title="2.2 å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®"></a>2.2 å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®</h3><ul><li>è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†&amp;è¿”å›å®šåˆ¶jsonæ•°æ®ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åªè¦å‡ºç°å¼‚å¸¸ï¼ŒSpringMVCå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼ŒæŠŠå¼‚å¸¸å¯¹è±¡ä¼ è¿›æ¥</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="meta">@ExceptionHandler</span>(UserNotExistException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">  <span class="title">public</span> <span class="title">Map</span>&lt;<span class="title">String</span>, <span class="title">Object</span>&gt; <span class="title">handleException</span>(<span class="title">Exception</span> <span class="title">e</span>)</span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"code"</span>, <span class="string">"user not exist"</span>);</span><br><span class="line">    map.put(<span class="string">"message"</span>, e.getMessage());</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨ä»¥ä¸Šæ–¹æ³•æ²¡æœ‰è‡ªé€‚åº”æ•ˆæœï¼Œæµè§ˆå™¨å’Œå®¢æˆ·ç«¯è¿”å›éƒ½æ˜¯JSONæ•°æ®</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æºç ä¸­ï¼Œ<code>BasicErrorController</code>ç±»æ˜¯ç”¨æ¥å¤„ç†è‡ªé€‚åº”çš„</p><ul><li>è½¬å‘åˆ°/errorè¿›è¡Œè‡ªé€‚åº”å“åº”æ•ˆæœå¤„ç†</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@ExceptionHandler</span>(UserNotExistException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">  <span class="title">public</span> <span class="title">String</span> <span class="title">handleException</span>(<span class="title">Exception</span> <span class="title">e</span>, <span class="title">HttpServletRequest</span> <span class="title">request</span>)</span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//ä¼ å…¥æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯çŠ¶æ€ç   4xx 5xxï¼Œå¦åˆ™å°±ä¸ä¼šè¿›å…¥å®šåˆ¶é”™è¯¯é¡µé¢çš„è§£ææµç¨‹</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * AbstractErrorController.classä¸­</span></span><br><span class="line"><span class="comment">      * Integer statusCode = (Integer) request</span></span><br><span class="line"><span class="comment">      .getAttribute("javax.servlet.error.status_code");</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    request.setAttribute(<span class="string">"javax.servlet.error.status_code"</span>, <span class="number">500</span>);</span><br><span class="line">    map.put(<span class="string">"code"</span>, <span class="string">"user not exist"</span>);</span><br><span class="line">    map.put(<span class="string">"message"</span>, e.getMessage());</span><br><span class="line">    <span class="comment">// è½¬å‘åˆ°/error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"forward:/error"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›</p><p>å‡ºç°é”™è¯¯ä»¥åï¼Œä¼šæ¥åˆ°/errorè¯·æ±‚ï¼Œä¼šè¢«<code>BasicErrorController.class</code>å¤„ç†ï¼Œå“åº”å‡ºå»å¯ä»¥è·å–çš„æ•°æ®æ˜¯ç”±<code>getErrorAttributes</code>å¾—åˆ°çš„ï¼ˆæ˜¯<code>AbstractErrorController.class</code>ï¼ˆErrorControllerï¼‰è§„å®šçš„æ–¹æ³•ï¼‰ï¼›</p><ul><li>å®Œå…¨æ¥ç¼–å†™ä¸€ä¸ªErrorControllerçš„å®ç°ç±»ã€æˆ–è€…æ˜¯ç¼–å†™AbstractErrorControllerçš„å­ç±»ã€‘ï¼Œæ”¾åœ¨å®¹å™¨ä¸­ï¼›</li><li>é¡µé¢ä¸Šèƒ½ç”¨çš„æ•°æ®ï¼Œæˆ–è€…æ˜¯jsonè¿”å›èƒ½ç”¨çš„æ•°æ®éƒ½æ˜¯é€šè¿‡errorAttributes.getErrorAttributeså¾—åˆ°ï¼›</li><li>è‡ªå®šä¹‰ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™å®¹å™¨ä¸­åŠ å…¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ErrorAttributes</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrorAttributes</span> <span class="keyword">extends</span> <span class="title">DefaultErrorAttributes</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">      RequestAttributes requestAttributes, <span class="keyword">boolean</span> includeStackTrace)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = </span><br><span class="line">      <span class="keyword">super</span>.getErrorAttributes(requestAttributes, includeStackTrace);</span><br><span class="line">    map.put(<span class="string">"company"</span>, <span class="string">"MysteryGuest"</span>);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆçš„æ•ˆæœï¼šå“åº”æ˜¯è‡ªé€‚åº”çš„ï¼Œå¯ä»¥é€šè¿‡å®šåˆ¶ErrorAttributesæ”¹å˜éœ€è¦è¿”å›çš„å†…å®¹</p></li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/myexception.PNG" alt="custom exception"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€é”™è¯¯å¤„ç†æœºåˆ¶&quot;&gt;&lt;a href=&quot;#1ã€é”™è¯¯å¤„ç†æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;1ã€é”™è¯¯å¤„ç†æœºåˆ¶&quot;&gt;&lt;/a&gt;1ã€é”™è¯¯å¤„ç†æœºåˆ¶&lt;/h2&gt;&lt;h3 id=&quot;1-1-SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶&quot;&gt;&lt;a href=&quot;#1-1-SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;1.1 SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶&quot;&gt;&lt;/a&gt;1.1 SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶&lt;/h3&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootåº”ç”¨</title>
    <link href="https://mysticalguest.github.io/2020/08/14/Spring/SpringBootCRUD/"/>
    <id>https://mysticalguest.github.io/2020/08/14/Spring/SpringBootCRUD/</id>
    <published>2020-08-14T02:51:27.737Z</published>
    <updated>2020-09-10T09:52:37.557Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€Restfulé£æ ¼ç®€ä»‹"><a href="#1ã€Restfulé£æ ¼ç®€ä»‹" class="headerlink" title="1ã€Restfulé£æ ¼ç®€ä»‹"></a>1ã€Restfulé£æ ¼ç®€ä»‹</h2><a id="more"></a><h3 id="1-1-æ¦‚å¿µ"><a href="#1-1-æ¦‚å¿µ" class="headerlink" title="1.1 æ¦‚å¿µ"></a>1.1 æ¦‚å¿µ</h3><p>ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€è®¾è®¡é£æ ¼ï¼Œè€Œ<strong>ä¸æ˜¯</strong>æ ‡å‡†ï¼Œåªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚å®ƒä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’ç±»çš„è½¯ä»¶ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥<strong>æ›´ç®€æ´</strong>ï¼Œ<strong>æ›´æœ‰å±‚æ¬¡</strong>ï¼Œ<strong>æ›´æ˜“äºå®ç°ç¼“å­˜</strong>ç­‰æœºåˆ¶ã€‚</p><h3 id="1-2-URLå®šä¹‰"><a href="#1-2-URLå®šä¹‰" class="headerlink" title="1.2 URLå®šä¹‰"></a>1.2 URLå®šä¹‰</h3><ul><li><p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº</p><p>èµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚ </p><p>åˆ†åˆ«å¯¹åº”ï¼šæ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚ </p></li><li><p>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº</p><ul><li>æŸ¥è¯¢GETï¼š<a href="http://127.0.0.1/query.action?id=1">http://127.0.0.1/query.action?id=1</a></li><li>æ–°å¢POSTï¼š<a href="http://127.0.0.1/save.action">http://127.0.0.1/save.action</a></li><li>æ›´æ–°POSTï¼š<a href="http://127.0.0.1/update.action">http://127.0.0.1/update.action</a></li><li>åˆ é™¤GETæˆ–POSTï¼š<a href="http://127.0.0.1/delete.action?id=1">http://127.0.0.1/delete.action?id=1</a></li></ul></li></ul><blockquote><p>å¯ä»¥é€šè¿‡ GETã€ POSTã€ PUTã€ PATCHã€ DELETE ç­‰æ–¹å¼å¯¹æœåŠ¡ç«¯çš„èµ„æºè¿›è¡Œæ“ä½œã€‚å…¶ä¸­ï¼ŒGET ç”¨äºæŸ¥è¯¢èµ„æºï¼ŒPOST ç”¨äºåˆ›å»ºèµ„æºï¼ŒPUT ç”¨äºæ›´æ–°æœåŠ¡ç«¯çš„èµ„æºçš„å…¨éƒ¨ä¿¡æ¯ï¼ŒPATCH ç”¨äºæ›´æ–°æœåŠ¡ç«¯çš„èµ„æºçš„éƒ¨åˆ†ä¿¡æ¯ï¼ŒDELETE ç”¨äºåˆ é™¤æœåŠ¡ç«¯çš„èµ„æºã€‚</p></blockquote><ul><li>ä½¿ç”¨RESTfulæ“ä½œèµ„æº<ul><li>æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨GETï¼š<a href="http://127.0.0.1/users">http://127.0.0.1/users</a></li><li>æŸ¥çœ‹æŸä¸ªç”¨æˆ·ä¿¡æ¯GETï¼š<a href="http://127.0.0.1/users/001">http://127.0.0.1/users/001</a></li><li>æ–°å»ºç”¨æˆ·ä¿¡æ¯POSTï¼š<a href="http://127.0.0.1/users">http://127.0.0.1/users</a></li><li>æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆå…¨éƒ¨å­—æ®µï¼‰PUTï¼š<a href="http://127.0.0.1/users/001">http://127.0.0.1/users/001</a></li><li>æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆéƒ¨åˆ†å­—æ®µï¼‰PATCHï¼š<a href="http://127.0.0.1/users/001">http://127.0.0.1/users/001</a></li><li>åˆ é™¤ç”¨æˆ·ä¿¡æ¯DELETEï¼š<a href="http://127.0.0.1/users/001">http://127.0.0.1/users/001</a></li></ul></li></ul><h3 id="1-3-APIè®¾è®¡é£æ ¼åŸºæœ¬è§„åˆ™"><a href="#1-3-APIè®¾è®¡é£æ ¼åŸºæœ¬è§„åˆ™" class="headerlink" title="1.3 APIè®¾è®¡é£æ ¼åŸºæœ¬è§„åˆ™"></a>1.3 APIè®¾è®¡é£æ ¼åŸºæœ¬è§„åˆ™</h3><ul><li>ä½¿ç”¨åè¯è€Œä¸æ˜¯åŠ¨è¯<ul><li>/getAllUsers</li><li>/updateUser</li><li>/deleteUser/001</li></ul></li><li>ä½¿ç”¨å­èµ„æºè¡¨è¾¾å…³ç³»ï¼ˆå¦‚æœä¸€ä¸ªèµ„æºä¸å¦å¤–ä¸€ä¸ªèµ„æºæœ‰å…³ç³»ï¼Œä½¿ç”¨å­èµ„æºï¼‰<ul><li>è¿”å›æ‰€æœ‰ç”¨æˆ·GETï¼š/getUser/</li><li>è¿”å›001ç”¨æˆ·GETï¼š /getUser/001</li></ul></li></ul><p><strong>æ€»è€Œè¨€ä¹‹restfulæ˜¯ä¸€ç§æ—§æŠ€æœ¯æ–°é£æ ¼</strong></p><h2 id="2ã€RestfulCRUD"><a href="#2ã€RestfulCRUD" class="headerlink" title="2ã€RestfulCRUD"></a>2ã€RestfulCRUD</h2><h3 id="2-1-é»˜è®¤è®¿é—®é¦–é¡µ"><a href="#2-1-é»˜è®¤è®¿é—®é¦–é¡µ" class="headerlink" title="2.1 é»˜è®¤è®¿é—®é¦–é¡µ"></a>2.1 é»˜è®¤è®¿é—®é¦–é¡µ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMVCConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">  <span class="comment">//æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨</span></span><br><span class="line">  <span class="meta">@Bean</span> <span class="comment">//å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> WebMvcConfigurerAdapter <span class="title">webMvcConfigurerAdapter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    WebMvcConfigurerAdapter adapter = <span class="keyword">new</span> WebMvcConfigurerAdapter() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">        registry.addViewController(<span class="string">"/index.html"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> adapter;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-å›½é™…åŒ–"><a href="#2-2-å›½é™…åŒ–" class="headerlink" title="2.2 å›½é™…åŒ–"></a>2.2 å›½é™…åŒ–</h3><ul><li>ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼›</li><li>ä½¿ç”¨ResourceBundleMessageSourceç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶</li><li>åœ¨é¡µé¢ä½¿ç”¨fmt:messageï¼ˆJSPï¼‰å–å‡ºå›½é™…åŒ–å†…å®¹</li></ul><p>Spring Bootéƒ½è‡ªåŠ¨é…ç½®å¥½äº†ï¼Œå”¯ä¸€è¦åšçš„å°±æ˜¯ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶äº†</p><p><strong>æ­¥éª¤</strong></p><ul><li>ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–æ¶ˆæ¯</li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/globalization.PNG" alt="globalization"></p><ul><li>SpringBootè‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ï¼›</li></ul><p>Ctrl+Næœç´¢<code>MessageSourceAutoConfiguration</code>ç±»ï¼ŒæŸ¥çœ‹æºç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">  value = &#123;MessageSource<span class="class">.<span class="keyword">class</span>&#125;,</span></span><br><span class="line"><span class="class">  <span class="title">search</span> </span>= SearchStrategy.CURRENT</span><br><span class="line">)</span><br><span class="line"><span class="meta">@AutoConfigureOrder</span>(-<span class="number">2147483648</span>)</span><br><span class="line"><span class="meta">@Conditional</span>(&#123;MessageSourceAutoConfiguration.ResourceBundleCondition<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">EnableConfigurationProperties</span></span></span><br><span class="line"><span class="class">@<span class="title">ConfigurationProperties</span>(</span></span><br><span class="line"><span class="class">  <span class="title">prefix</span> </span>= <span class="string">"spring.messages"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageSourceAutoConfiguration</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Resource[] NO_RESOURCES = <span class="keyword">new</span> Resource[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">private</span> String basename = <span class="string">"messages"</span>; <span class="comment">//æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥æ”¾åœ¨ç±»è·¯å¾„ä¸‹å«messages.properties</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> MessageSource <span class="title">messageSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ResourceBundleMessageSource messageSource = <span class="keyword">new</span> ResourceBundleMessageSource();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.hasText(<span class="keyword">this</span>.basename)) &#123;</span><br><span class="line">      <span class="comment">// è®¾ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰</span></span><br><span class="line">      messageSource.setBasenames(</span><br><span class="line">        StringUtils.commaDelimitedListToStringArray(</span><br><span class="line">          StringUtils.trimAllWhitespace(<span class="keyword">this</span>.basename)</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.encoding != <span class="keyword">null</span>) &#123;</span><br><span class="line">      messageSource.setDefaultEncoding(<span class="keyword">this</span>.encoding.name());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    messageSource.setFallbackToSystemLocale(<span class="keyword">this</span>.fallbackToSystemLocale);</span><br><span class="line">    messageSource.setCacheSeconds(<span class="keyword">this</span>.cacheSeconds);</span><br><span class="line">    messageSource.setAlwaysUseMessageFormat(<span class="keyword">this</span>.alwaysUseMessageFormat);</span><br><span class="line">    <span class="keyword">return</span> messageSource;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å»é¡µé¢è·å–å›½é™…åŒ–çš„å€¼ï¼›</li></ul><p>Thymeleafå®˜æ–¹<a href="https://www.thymeleaf.org/documentation.html">æ–‡æ¡£</a>æŸ¥çœ‹message</p><p>ä¸»é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å›½é™…åŒ–èµ„æºè·¯å¾„</span></span><br><span class="line"><span class="meta">spring.messages.basename</span>=<span class="string">i18n/login</span></span><br><span class="line"><span class="comment">#è®¾ç½®å›½é™…åŒ–ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="meta">spring.messages.encoding</span>=<span class="string">UTF-8</span></span><br></pre></td></tr></table></figure><p>HTMLæ–‡ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"mb-4"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/asserts/img/bootstrap-solid.svg&#125;"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"asserts/img/bootstrap-solid.svg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"72"</span> <span class="attr">height</span>=<span class="string">"72"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"h3 mb-3 font-weight-normal"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.tip&#125;"</span>&gt;</span>Please sign in<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.username&#125;"</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Username"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">th:placeholder</span>=<span class="string">"#&#123;login.username&#125;"</span> <span class="attr">required</span>=<span class="string">""</span> <span class="attr">autofocus</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.password&#125;"</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Password"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">th:placeholder</span>=<span class="string">"#&#123;login.password&#125;"</span> <span class="attr">required</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkbox mb-3"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"remember-me"</span>&gt;</span> [[#&#123;login.rememberme&#125;]]</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-lg btn-primary btn-block"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.signin&#125;"</span>&gt;</span></span><br><span class="line">  Sign in</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"mt-5 mb-3 text-muted"</span>&gt;</span>Â© 2017-2018<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm"</span>&gt;</span>ä¸­æ–‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm"</span>&gt;</span>English<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼šæ ¹æ®æµè§ˆå™¨è¯­è¨€è®¾ç½®çš„ä¿¡æ¯åˆ‡æ¢äº†å›½é™…åŒ–ï¼›</p><p>åŸç†ï¼šå›½é™…åŒ–Localeï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›LocaleResolverï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">  prefix = <span class="string">"spring.mvc"</span>,</span><br><span class="line">  name = &#123;<span class="string">"locale"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.mvcProperties.getLocaleResolver() == </span><br><span class="line">    org.springframework.boot.autoconfigure.web.WebMvcProperties.LocaleResolver.FIXED) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FixedLocaleResolver(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    AcceptHeaderLocaleResolver localeResolver = <span class="keyword">new</span> AcceptHeaderLocaleResolver();</span><br><span class="line">    localeResolver.setDefaultLocale(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">    <span class="keyword">return</span> localeResolver;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯è·å–Localeè¿›è¡Œå›½é™…åŒ–</p><ul><li>ç‚¹å‡»é“¾æ¥åˆ‡æ¢å›½é™…åŒ–</li></ul><p>è‡ªå®šä¹‰ç»„ä»¶<code>MyLocaleResolver</code>ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯ä»¥åœ¨è¿æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocaleResolver</span> <span class="keyword">implements</span> <span class="title">LocaleResolver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Locale <span class="title">resolveLocale</span><span class="params">(HttpServletRequest httpServletRequest)</span> </span>&#123;</span><br><span class="line">    String l = httpServletRequest.getParameter(<span class="string">"l"</span>);</span><br><span class="line">    Locale locale = Locale.getDefault();</span><br><span class="line">    <span class="comment">// æ˜¯å¦æºå¸¦è¯­è¨€ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(l))&#123;</span><br><span class="line">      String[] split = l.split(<span class="string">"_"</span>);</span><br><span class="line">      locale = <span class="keyword">new</span> Locale(split[<span class="number">0</span>],split[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> locale;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLocale</span><span class="params">(HttpServletRequest httpServletRequest, </span></span></span><br><span class="line"><span class="function"><span class="params">    HttpServletResponse httpServletResponse, </span></span></span><br><span class="line"><span class="function"><span class="params">    Locale locale)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¸ªç»„ä»¶æ·»åŠ è¿›å®¹å™¨ï¼Œåœ¨é…ç½®æ–‡ä»¶<code>SpringMVCConfig</code>ç±»æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒºåŸŸä¿¡æ¯è§£æå™¨ç»„ä»¶</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> MyLocaleResolver();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-ç™»å½•"><a href="#2-3-ç™»å½•" class="headerlink" title="2.3 ç™»å½•"></a>2.3 ç™»å½•</h3><p>å¼€å‘æœŸé—´æ¨¡æ¿å¼•æ“é¡µé¢ä¿®æ”¹ä»¥åï¼Œè¦å®æ—¶ç”Ÿæ•ˆ</p><ul><li>ç¦ç”¨æ¨¡æ¿å¼•æ“çš„ç¼“å­˜</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¦ç”¨ç¼“å­˜</span></span><br><span class="line"><span class="meta">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure><ul><li><p>é¡µé¢ä¿®æ”¹å®Œæˆä»¥åctrl+F9ï¼šé‡æ–°ç¼–è¯‘ï¼›</p></li><li><p>ç™»é™†é”™è¯¯æ¶ˆæ¯çš„æ˜¾ç¤º</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: red"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;msg&#125;"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;not #strings.isEmpty(msg)&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-4-æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥"><a href="#2-4-æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥" class="headerlink" title="2.4 æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥"></a>2.4 æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥</h3><p>æ‹¦æˆªå™¨ç»„ä»¶ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»é™†æ£€æŸ¥ï¼Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest httpServletRequest, </span></span></span><br><span class="line"><span class="function"><span class="params">    HttpServletResponse httpServletResponse, </span></span></span><br><span class="line"><span class="function"><span class="params">    Object o)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    Object user = httpServletRequest.getSession().getAttribute(<span class="string">"loginUser"</span>);</span><br><span class="line">    <span class="keyword">if</span>(user == <span class="keyword">null</span>)&#123;</span><br><span class="line">      <span class="comment">//æœªç™»é™†ï¼Œè¿”å›ç™»é™†é¡µé¢</span></span><br><span class="line">      httpServletRequest.setAttribute(<span class="string">"msg"</span>,<span class="string">"æ²¡æœ‰æƒé™è¯·å…ˆç™»é™†"</span>);</span><br><span class="line">      httpServletRequest.getRequestDispatcher(<span class="string">"/index.html"</span>).forward(</span><br><span class="line">        httpServletRequest, </span><br><span class="line">        httpServletResponse</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//å·²ç™»é™†ï¼Œæ”¾è¡Œè¯·æ±‚</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest httpServletRequest, </span></span></span><br><span class="line"><span class="function"><span class="params">    HttpServletResponse httpServletResponse, </span></span></span><br><span class="line"><span class="function"><span class="params">    Object o, </span></span></span><br><span class="line"><span class="function"><span class="params">    ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest httpServletRequest, </span></span></span><br><span class="line"><span class="function"><span class="params">    HttpServletResponse httpServletResponse, </span></span></span><br><span class="line"><span class="function"><span class="params">    Object o, Exception e)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨å†Œæ‹¦æˆªå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨</span></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">//å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WebMvcConfigurerAdapter <span class="title">webMvcConfigurerAdapter</span><span class="params">()</span></span>&#123;</span><br><span class="line">  WebMvcConfigurerAdapter adapter = <span class="keyword">new</span> WebMvcConfigurerAdapter() &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// æ³¨å†Œæ‹¦æˆªå™¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// super.addInterceptors(registry);</span></span><br><span class="line">      <span class="comment">// "/**"è¡¨ç¤ºä»»æ„å¤šå±‚è·¯å¾„ä¸‹çš„ä»»æ„è¯·æ±‚</span></span><br><span class="line">      <span class="comment">// é™æ€èµ„æºï¼›  *.css , *.js</span></span><br><span class="line">      <span class="comment">// SpringBootå·²ç»åšå¥½äº†é™æ€èµ„æºæ˜ å°„</span></span><br><span class="line">      registry.addInterceptor(<span class="keyword">new</span> LoginHandlerInterceptor()).addPathPatterns(<span class="string">"/**"</span>)</span><br><span class="line">        .excludePathPatterns(<span class="string">"/index.html"</span>, <span class="string">"/"</span>, <span class="string">"/login"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> adapter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€CRUD-å‘˜å·¥åˆ—è¡¨"><a href="#3ã€CRUD-å‘˜å·¥åˆ—è¡¨" class="headerlink" title="3ã€CRUD-å‘˜å·¥åˆ—è¡¨"></a>3ã€CRUD-å‘˜å·¥åˆ—è¡¨</h2><h3 id="3-1-RestfulCRUDï¼šCRUDæ»¡è¶³Resté£æ ¼ï¼›"><a href="#3-1-RestfulCRUDï¼šCRUDæ»¡è¶³Resté£æ ¼ï¼›" class="headerlink" title="3.1 RestfulCRUDï¼šCRUDæ»¡è¶³Resté£æ ¼ï¼›"></a>3.1 RestfulCRUDï¼šCRUDæ»¡è¶³Resté£æ ¼ï¼›</h3><p>URIï¼š  /èµ„æºåç§°/èµ„æºæ ‡è¯†       HTTPè¯·æ±‚æ–¹å¼åŒºåˆ†å¯¹èµ„æºCRUDæ“ä½œ</p><div class="table-container"><table><thead><tr><th></th><th>æ™®é€šCRUDï¼ˆuriæ¥åŒºåˆ†æ“ä½œï¼‰</th><th>RestfulCRUD</th></tr></thead><tbody><tr><td>æŸ¥è¯¢</td><td>getEmp</td><td>empâ€”-GET</td></tr><tr><td>æ·»åŠ </td><td>addEmp?xxx</td><td>empâ€”-POST</td></tr><tr><td>ä¿®æ”¹</td><td>updateEmp?id=xxx&amp;xxx=xx</td><td>emp/{id}â€”-PUT</td></tr><tr><td>åˆ é™¤</td><td>deleteEmp?id=1</td><td>emp/{id}â€”-DELETE</td></tr></tbody></table></div><h3 id="3-2-thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–"><a href="#3-2-thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–" class="headerlink" title="3.2 thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–"></a>3.2 thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1ã€æŠ½å–å…¬å…±ç‰‡æ®µ</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">2ã€å¼•å…¥å…¬å…±ç‰‡æ®µ</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"~&#123;footer :: copy&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">~&#123;templatename::selector&#125;ï¼šæ¨¡æ¿å::é€‰æ‹©å™¨</span><br><span class="line">~&#123;templatename::fragmentname&#125;:æ¨¡æ¿å::ç‰‡æ®µå</span><br><span class="line"></span><br><span class="line">3ã€é»˜è®¤æ•ˆæœï¼š</span><br><span class="line">insertçš„å…¬å…±ç‰‡æ®µåœ¨divæ ‡ç­¾ä¸­</span><br><span class="line">å¦‚æœä½¿ç”¨th:insertç­‰å±æ€§è¿›è¡Œå¼•å…¥ï¼Œå¯ä»¥ä¸ç”¨å†™~&#123;&#125;ï¼š</span><br><span class="line">è¡Œå†…å†™æ³•å¯ä»¥åŠ ä¸Šï¼š[[~&#123;&#125;]];[(~&#123;&#125;)]ï¼›</span><br></pre></td></tr></table></figure><p>ä¸‰ç§å¼•å…¥å…¬å…±ç‰‡æ®µçš„thå±æ€§ï¼š</p><p><strong>th:insert</strong>ï¼šå°†å…¬å…±ç‰‡æ®µæ•´ä¸ªæ’å…¥åˆ°å£°æ˜å¼•å…¥çš„å…ƒç´ ä¸­</p><p><strong>th:replace</strong>ï¼šå°†å£°æ˜å¼•å…¥çš„å…ƒç´ æ›¿æ¢ä¸ºå…¬å…±ç‰‡æ®µ</p><p><strong>th:include</strong>ï¼šå°†è¢«å¼•å…¥çš„ç‰‡æ®µçš„å†…å®¹åŒ…å«è¿›è¿™ä¸ªæ ‡ç­¾ä¸­</p><p>é¡µé¢ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line">  <span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–é¡µé¢ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:include</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery</span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery</span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-å¼•å…¥ç‰‡æ®µçš„æ—¶å€™ä¼ å…¥å‚æ•°ï¼š"><a href="#3-3-å¼•å…¥ç‰‡æ®µçš„æ—¶å€™ä¼ å…¥å‚æ•°ï¼š" class="headerlink" title="3.3 å¼•å…¥ç‰‡æ®µçš„æ—¶å€™ä¼ å…¥å‚æ•°ï¼š"></a>3.3 å¼•å…¥ç‰‡æ®µçš„æ—¶å€™ä¼ å…¥å‚æ•°ï¼š</h3><p>çˆ¶é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥ä¾§è¾¹æ ;ä¼ å…¥å‚æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"commons/bar::#sidebar(activeUri='main.html')"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- sidebar --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"col-md-2 d-none d-md-block bg-light sidebar"</span> <span class="attr">id</span>=<span class="string">"sidebar"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar-sticky"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav flex-column"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"nav-link active"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">th:class</span>=<span class="string">"$&#123;activeUri=='main.html'?'nav-link active':'nav-link'&#125;"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">href</span>=<span class="string">"http://getbootstrap.com/docs/4.0/examples/dashboard/#"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">th:href</span>=<span class="string">"@&#123;main.html&#125;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">width</span>=<span class="string">"24"</span> <span class="attr">height</span>=<span class="string">"24"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">viewBox</span>=<span class="string">"0 0 24 24"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">fill</span>=<span class="string">"none"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">stroke</span>=<span class="string">"currentColor"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">stroke-width</span>=<span class="string">"2"</span> <span class="attr">s</span></span></span><br><span class="line"><span class="tag">               <span class="attr">troke-linecap</span>=<span class="string">"round"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">stroke-linejoin</span>=<span class="string">"round"</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">class</span>=<span class="string">"feather feather-home"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">"9 22 9 12 15 12 15 22"</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">          Dashboard <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-æ·»åŠ æ“ä½œ"><a href="#3-4-æ·»åŠ æ“ä½œ" class="headerlink" title="3.4 æ·»åŠ æ“ä½œ"></a>3.4 æ·»åŠ æ“ä½œ</h3><p>æ·»åŠ é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"@&#123;addEmployee&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"lastName"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"name@163.com"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span>  <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span>  <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"department.id"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æäº¤çš„æ˜¯éƒ¨é—¨çš„id --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:value</span>=<span class="string">"$&#123;dept.id&#125;"</span> <span class="attr">th:each</span>=<span class="string">"dept: $&#123;departments&#125;"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">th:text</span>=<span class="string">"$&#123;dept.departmentName&#125;"</span>&gt;</span></span><br><span class="line">        1</span><br><span class="line">      <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"birth"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"2020/01/01"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æäº¤çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼šç”Ÿæ—¥ï¼šæ—¥æœŸï¼›</p><p>2017-12-12ï¼›2017/12/12ï¼›2017.12.12ï¼›</p><p>æ—¥æœŸçš„æ ¼å¼åŒ–ï¼›SpringMVCå°†é¡µé¢æäº¤çš„å€¼éœ€è¦è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹;</p><p>2017-12-12â€”-Dateï¼› ç±»å‹è½¬æ¢ï¼Œæ ¼å¼åŒ–;</p><p>é»˜è®¤æ—¥æœŸæ˜¯æŒ‰ç…§/çš„æ–¹å¼ï¼›</p><h3 id="3-5-ä¿®æ”¹æ“ä½œ"><a href="#3-5-ä¿®æ”¹æ“ä½œ" class="headerlink" title="3.5 ä¿®æ”¹æ“ä½œ"></a>3.5 ä¿®æ”¹æ“ä½œ</h3><p>ä¿®æ”¹æ·»åŠ äºŒåˆä¸€è¡¨å•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- éœ€è¦åŒºåˆ†å‘˜å·¥ä¿®æ”¹è¿˜æ˜¯æ·»åŠ  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"$&#123;employee!=null&#125;?@&#123;updateEmployee&#125;:@&#123;addEmployee&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å‘é€putè¯·æ±‚ä¿®æ”¹åŸæ•°æ® --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    1ã€SpringMVCä¸­é…ç½®HiddenHttpMethodFilter;ï¼ˆSpringBootè‡ªåŠ¨é…ç½®å¥½çš„ï¼‰</span></span><br><span class="line"><span class="comment">    2ã€é¡µé¢åˆ›å»ºä¸€ä¸ªpostè¡¨å•</span></span><br><span class="line"><span class="comment">    3ã€åˆ›å»ºä¸€ä¸ªinputé¡¹ï¼Œname="_method";å€¼å°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¯·æ±‚æ–¹å¼</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- th:if="$&#123;employee!=null&#125;"ä¿®æ”¹é¡µé¢é‡‡ç”¨putæ–¹å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"put"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;employee!=null&#125;"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;employee!=null&#125;"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;employee.id&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"lastName"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"name"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">th:value</span>=<span class="string">"$&#123;employee!=null&#125;?$&#123;employee.lastName&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"name@163.com"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">th:value</span>=<span class="string">"$&#123;employee!=null&#125;?$&#123;employee.email&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span>  <span class="attr">value</span>=<span class="string">"1"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">th:checked</span>=<span class="string">"$&#123;employee!=null&#125;?$&#123;employee.gender&#125;==1"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span>  <span class="attr">value</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">th:checked</span>=<span class="string">"$&#123;employee!=null&#125;?$&#123;employee.gender&#125;==0"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"department.id"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- æäº¤çš„æ˜¯éƒ¨é—¨çš„id --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:selected</span>=<span class="string">"$&#123;employee!=null&#125;?$&#123;dept.id == employee.department.id&#125;"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">th:value</span>=<span class="string">"$&#123;dept.id&#125;"</span> <span class="attr">th:each</span>=<span class="string">"dept: $&#123;departments&#125;"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">th:text</span>=<span class="string">"$&#123;dept.departmentName&#125;"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"birth"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"2020/01/01"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">th:value</span>=<span class="string">"$&#123;employee!=null&#125;?$&#123;#dates.format(employee.birth, 'yyyy-MM-dd HH:mm')&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;employee!=null&#125;?'ä¿®æ”¹':'æ·»åŠ '"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-6-åˆ é™¤æ“ä½œ"><a href="#3-6-åˆ é™¤æ“ä½œ" class="headerlink" title="3.6 åˆ é™¤æ“ä½œ"></a>3.6 åˆ é™¤æ“ä½œ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">role</span>=<span class="string">"main"</span> <span class="attr">class</span>=<span class="string">"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm btn-success"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;addEmployeePage&#125;"</span>&gt;</span>æ·»åŠ å‘˜å·¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-responsive"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-striped table-sm"</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"emp: $&#123;employees&#125;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.id&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>[[$&#123;emp.lastName&#125;]]<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.email&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.gender&#125;==0?'å¥³':'ç”·'"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.department.departmentName&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm btn-primary"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/employee/&#125;+$&#123;emp.id&#125;"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;form th:action="@&#123;/employee/&#125;+$&#123;emp.id&#125;" method="post"&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--   &lt;input type="hidden" name="_method" value="delete"/&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--   &lt;button type="submit" class="btn btn-sm btn-danger"&gt;åˆ é™¤&lt;/button&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;/form&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- th:attrè‡ªå®šä¹‰æ ‡ç­¾å±æ€§ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">th:attr</span>=<span class="string">"del_uri=@&#123;/employee/&#125;+$&#123;emp.id&#125;"</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">"btn btn-sm btn-danger deleteBtn"</span>&gt;</span></span><br><span class="line">              åˆ é™¤</span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å°†è¡¨å•æ”¾åœ¨é‡Œé¢ï¼Œæ¯ä¸ªåˆ é™¤æŒ‰é’®å°±ä¼šæœ‰ä¸ªè¡¨å•ï¼Œæ”¾åœ¨å¤–é¢ç®€æ´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"deleteEmpForm"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"delete"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  $(<span class="string">".deleteBtn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//åˆ é™¤å½“å‰å‘˜å·¥çš„</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">"#deleteEmpForm"</span>).attr(<span class="string">"action"</span>,$(<span class="keyword">this</span>).attr(<span class="string">"del_uri"</span>)).submit();</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€Restfulé£æ ¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#1ã€Restfulé£æ ¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1ã€Restfulé£æ ¼ç®€ä»‹&quot;&gt;&lt;/a&gt;1ã€Restfulé£æ ¼ç®€ä»‹&lt;/h2&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot Webå¼€å‘</title>
    <link href="https://mysticalguest.github.io/2020/08/09/Spring/SpringBootWeb/"/>
    <id>https://mysticalguest.github.io/2020/08/09/Spring/SpringBootWeb/</id>
    <published>2020-08-09T07:17:01.661Z</published>
    <updated>2020-09-10T05:05:37.483Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€ä½¿ç”¨Spring-Bootï¼š"><a href="#1ã€ä½¿ç”¨Spring-Bootï¼š" class="headerlink" title="1ã€ä½¿ç”¨Spring Bootï¼š"></a>1ã€ä½¿ç”¨Spring Bootï¼š</h2><ul><li>åˆ›å»ºSpring Bootåº”ç”¨ï¼Œé€‰ä¸­æˆ‘ä»¬éœ€è¦çš„æ¨¡å—</li><li>Spring Bootå·²ç»é»˜è®¤å°†è¿™äº›åœºæ™¯é…ç½®å¥½äº†ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå°‘é‡é…ç½®å°±å¯ä»¥è¿è¡Œèµ·æ¥</li><li>è‡ªå·±ç¼–å†™ä¸šåŠ¡ä»£ç </li></ul><a id="more"></a><p>å›é¡¾è‡ªåŠ¨é…ç½®åŸç†</p><p>è¿™ä¸ªåœºæ™¯Spring Bootå¸®æˆ‘ä»¬é…ç½®äº†ä»€ä¹ˆï¼Ÿèƒ½ä¸èƒ½ä¿®æ”¹ï¼Ÿèƒ½ä¿®æ”¹å“ªäº›é…ç½®ï¼Ÿèƒ½ä¸èƒ½æ‰©å±•ï¼Ÿç­‰ç­‰</p><ul><li>xxxxAutoConfigurationï¼šå¸®æˆ‘ä»¬ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶</li><li>xxxxPropertiesï¼šé…ç½®ç±»æ¥å°è£…é…ç½®æ–‡ä»¶çš„å†…å®¹</li></ul><h2 id="2ã€Spring-Bootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™"><a href="#2ã€Spring-Bootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™" class="headerlink" title="2ã€Spring Bootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™"></a>2ã€Spring Bootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">  prefix = <span class="string">"spring.resources"</span>,</span><br><span class="line">  ignoreUnknownFields = <span class="keyword">false</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceProperties</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å¯ä»¥è®¾ç½®å’Œé™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼Œæ¯”å¦‚ç¼“å­˜æ—¶é—´</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-1-ä¾èµ–çš„æ–¹å¼"><a href="#2-1-ä¾èµ–çš„æ–¹å¼" class="headerlink" title="2.1 ä¾èµ–çš„æ–¹å¼"></a>2.1 ä¾èµ–çš„æ–¹å¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcAutoConfiguration.classæ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">    logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Integer cachePeriod = <span class="keyword">this</span>.resourceProperties.getCachePeriod();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</span><br><span class="line">      <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(</span><br><span class="line">  <span class="keyword">new</span> String[]&#123;<span class="string">"/webjars/**"</span>&#125;).addResourceLocations(</span><br><span class="line">    <span class="keyword">new</span> String[]&#123;<span class="string">"classpath:/META-INF/resources/webjars/"</span>&#125;</span><br><span class="line">  ).setCachePeriod(cachePeriod)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">      <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(</span><br><span class="line">  <span class="keyword">new</span> String[]&#123;staticPathPattern&#125;).addResourceLocations(</span><br><span class="line">    <span class="keyword">this</span>.resourceProperties.getStaticLocations()</span><br><span class="line">  ).setCachePeriod(cachePeriod)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ‰€æœ‰/webjars/**ï¼Œéƒ½å»classpath:/META-INF/resources/webjars/æ‰¾èµ„æº</p><p>webjarsï¼šä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥é™æ€èµ„æº</p></li></ul><p>webjars<a href="https://www.webjars.org/">å®˜ç½‘</a></p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/webjars-jquery.PNG" alt="webjars-jquery"></p><p>è®¿é—®æ–¹å¼ï¼š<a href="http://localhost:8088/webjars/jquery/3.5.1/jquery.js">http://localhost:8088/webjars/jquery/3.5.1/jquery.js</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥jquery-webjars --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-2-â€œ-â€è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰"><a href="#2-2-â€œ-â€è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰" class="headerlink" title="2.2 â€œ/**â€è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰"></a>2.2 â€œ/**â€è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰</h3><p>ç»§ç»­è¯»<code>addResourceHandlers</code>æ–¹æ³•ï¼Œå¦‚æœå¤„ç†ä¸äº†ï¼Œå°±å»é™æ€<code>staticPathPattern</code>è·¯å¾„å»æ‰¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">WebMvcProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.localeResolver = WebMvcProperties.LocaleResolver.ACCEPT_HEADER;</span><br><span class="line">  <span class="keyword">this</span>.dispatchTraceRequest = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.dispatchOptionsRequest = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">this</span>.ignoreDefaultModelOnRedirect = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">this</span>.throwExceptionIfNoHandlerFound = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.logResolvedException = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.mediaTypes = <span class="keyword">new</span> LinkedHashMap();</span><br><span class="line">  <span class="keyword">this</span>.staticPathPattern = <span class="string">"/**"</span>;</span><br><span class="line">  <span class="keyword">this</span>.async = <span class="keyword">new</span> WebMvcProperties.Async();</span><br><span class="line">  <span class="keyword">this</span>.servlet = <span class="keyword">new</span> WebMvcProperties.Servlet();</span><br><span class="line">  <span class="keyword">this</span>.view = <span class="keyword">new</span> WebMvcProperties.View();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å®ƒæ·»åŠ äº†ä¸ªä½ç½®<code>addResourceLocations</code>ï¼Œè¿™ä¸ªé‡Œé¢çš„<code>resourceProperties</code>æœ‰ä¸ª<code>getStaticLocations()</code>æ–¹æ³•ï¼Œç‚¹è¿›å»ï¼Œæœ‰ä¸ªå¸¸é‡<code>RESOURCE_LOCATIONS</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">  RESOURCE_LOCATIONS = <span class="keyword">new</span> String[CLASSPATH_RESOURCE_LOCATIONS.length + </span><br><span class="line">    SERVLET_RESOURCE_LOCATIONS.length];</span><br><span class="line">  System.arraycopy(SERVLET_RESOURCE_LOCATIONS, <span class="number">0</span>, RESOURCE_LOCATIONS, <span class="number">0</span>, </span><br><span class="line">    SERVLET_RESOURCE_LOCATIONS.length);</span><br><span class="line">  System.arraycopy(CLASSPATH_RESOURCE_LOCATIONS, <span class="number">0</span>, RESOURCE_LOCATIONS, </span><br><span class="line">    SERVLET_RESOURCE_LOCATIONS.length, CLASSPATH_RESOURCE_LOCATIONS.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±æ‰¾åˆ°äº†ä»¥ä¸‹æ–‡ä»¶å¤¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] SERVLET_RESOURCE_LOCATIONS = <span class="keyword">new</span> String[]&#123;<span class="string">"/"</span>&#125;; <span class="comment">// å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„</span></span><br><span class="line"><span class="comment">// å’Œ</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = <span class="keyword">new</span> String[]&#123;</span><br><span class="line">  <span class="string">"classpath:/META-INF/resources/"</span>,</span><br><span class="line">  <span class="string">"classpath:/resources/"</span>, </span><br><span class="line">  <span class="string">"classpath:/static/"</span>, </span><br><span class="line">  <span class="string">"classpath:/public/"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p><code>src/mian/java</code>å’Œ<code>src/main/resources</code>éƒ½æ˜¯ç±»è·¯å¾„</p><p>å¦‚æœè¦è®¿é—®<code>localhost:8088/*.js</code>èµ„æºï¼Œæ²¡æœ‰äººä¸ºå¤„ç†ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨å»ä¸Šé¢è¿™äº›è·¯å¾„ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹é‡Œæ‰¾è¿™äº›æ–‡ä»¶</p></blockquote><p>è®¿é—®æ–¹å¼ï¼š<a href="http://localhost:8088/asserts/img/childhood_dreams.jpg">http://localhost:8088/asserts/img/childhood_dreams.jpg</a></p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/static.PNG" alt="static"></p><h3 id="2-3-æ¬¢è¿é¡µè®¾ç½®ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰index-htmlé¡µé¢"><a href="#2-3-æ¬¢è¿é¡µè®¾ç½®ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰index-htmlé¡µé¢" class="headerlink" title="2.3 æ¬¢è¿é¡µè®¾ç½®ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰index.htmlé¡µé¢"></a>2.3 æ¬¢è¿é¡µè®¾ç½®ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰index.htmlé¡µé¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcAutoConfiguration.classæ–‡ä»¶</span></span><br><span class="line"><span class="comment">// é…ç½®æ¬¢è¿é¡µæ˜ å°„</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WebMvcAutoConfiguration.WelcomePageHandlerMapping welcomePageHandlerMapping</span><br><span class="line">    (ResourceProperties resourceProperties) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> WebMvcAutoConfiguration.WelcomePageHandlerMapping(</span><br><span class="line">    resourceProperties.getWelcomePage(), <span class="keyword">this</span>.mvcProperties.getStaticPathPattern()</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">customizeResourceHandlerRegistration</span><span class="params">(ResourceHandlerRegistration registration)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.resourceHandlerRegistrationCustomizer != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.resourceHandlerRegistrationCustomizer.customize(registration);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Springæœ€é¡¶å±‚çš„ç»„ä»¶ï¼Œä¿å­˜æ¯ä¸ªè¯·æ±‚è°æ¥å¤„ç†</p><p>ç‚¹è¿›<code>getWelcomePage()</code>æ–¹æ³•</p><p><code>this.mvcProperties.getStaticPathPattern()</code>è¿˜è¢«è°æ˜ å°„ï¼Œç‚¹è¿›å»çœ‹æºç å°±æ˜¯<code>/**</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Resource <span class="title">getWelcomePage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  String[] var1 = <span class="keyword">this</span>.getStaticWelcomePageLocations();</span><br><span class="line">  <span class="keyword">int</span> var2 = var1.length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> var3 = <span class="number">0</span>; var3 &lt; var2; ++var3) &#123;</span><br><span class="line">    String location = var1[var3];</span><br><span class="line">    Resource resource = <span class="keyword">this</span>.resourceLoader.getResource(location);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (resource.exists()) &#123;</span><br><span class="line">        resource.getURL();</span><br><span class="line">        <span class="keyword">return</span> resource;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception var7) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦éå†ï¼Œè¯´æ˜æ¬¢è¿é¡µè¿˜æŒºå¤šçš„</p><p>ç‚¹è¿›<code>getStaticWelcomePageLocations()</code>æ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String[] getStaticWelcomePageLocations() &#123;</span><br><span class="line">  String[] result = <span class="keyword">new</span> String[<span class="keyword">this</span>.staticLocations.length];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.length; ++i) &#123;</span><br><span class="line">    String location = <span class="keyword">this</span>.staticLocations[i];</span><br><span class="line">    <span class="keyword">if</span> (!location.endsWith(<span class="string">"/"</span>)) &#123;</span><br><span class="line">      location = location + <span class="string">"/"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result[i] = location + <span class="string">"index.html"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿˜æ˜¯è¿™ä¸ª<code>staticLocations</code>é™æ€æ–‡ä»¶å¤¹</p><p>é™æ€æ–‡ä»¶å¤¹è·¯å¾„éƒ½æ‹¼æ¥ä¸Š<code>index.html</code></p></blockquote><p>è®¿é—®æ–¹å¼ï¼š<a href="http://localhost:8088/">http://localhost:8088/</a>    å°±ä¼šæ‰¾indexé¡µé¢</p><h3 id="2-4-ç½‘ç«™å›¾æ ‡"><a href="#2-4-ç½‘ç«™å›¾æ ‡" class="headerlink" title="2.4 ç½‘ç«™å›¾æ ‡"></a>2.4 ç½‘ç«™å›¾æ ‡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcAutoConfiguration.classæ–‡ä»¶</span></span><br><span class="line"><span class="comment">// é…ç½®å–œæ¬¢çš„å›¾æ ‡</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">  value = &#123;<span class="string">"spring.mvc.favicon.enabled"</span>&#125;,</span><br><span class="line">  matchIfMissing = <span class="keyword">true</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FaviconConfiguration</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ResourceProperties resourceProperties;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">FaviconConfiguration</span><span class="params">(ResourceProperties resourceProperties)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.resourceProperties = resourceProperties;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> SimpleUrlHandlerMapping <span class="title">faviconHandlerMapping</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SimpleUrlHandlerMapping mapping = <span class="keyword">new</span> SimpleUrlHandlerMapping();</span><br><span class="line">    mapping.setOrder(-<span class="number">2147483647</span>);</span><br><span class="line">    mapping.setUrlMap(Collections.singletonMap(<span class="string">"**/favicon.ico"</span>, </span><br><span class="line">      <span class="keyword">this</span>.faviconRequestHandler()));</span><br><span class="line">    <span class="keyword">return</span> mapping;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title">faviconRequestHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ResourceHttpRequestHandler requestHandler = <span class="keyword">new</span> ResourceHttpRequestHandler();</span><br><span class="line">    requestHandler.setLocations(<span class="keyword">this</span>.resourceProperties.getFaviconLocations());</span><br><span class="line">    <span class="keyword">return</span> requestHandler;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ‰€æœ‰çš„<code>**/favicon.ico</code>éƒ½æ˜¯åœ¨é™æ€æ–‡ä»¶å¤¹ä¸‹æ‰¾</p></blockquote><h3 id="2-5-è‡ªå®šä¹‰è·¯å¾„"><a href="#2-5-è‡ªå®šä¹‰è·¯å¾„" class="headerlink" title="2.5 è‡ªå®šä¹‰è·¯å¾„"></a>2.5 è‡ªå®šä¹‰è·¯å¾„</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.resources.static-locations</span>=<span class="string">classpath:/hello/,classpath:initializr/</span></span><br></pre></td></tr></table></figure><p>å¤šè·¯å¾„ç”¨éƒ½å¥½éš”å¼€ï¼Œä¸€æ—¦å¯ç”¨è‡ªå®šä¹‰è·¯å¾„ï¼Œé‚£ä¹ˆé»˜è®¤çš„é™æ€èµ„æºè·¯å¾„å°±ä¸èƒ½ä½¿ç”¨äº†</p><h2 id="3ã€æ¨¡æ¿å¼•æ“"><a href="#3ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="3ã€æ¨¡æ¿å¼•æ“"></a>3ã€æ¨¡æ¿å¼•æ“</h2><p>JSPã€Velocityã€Freemarkerã€Thymeleaf</p><p align="center">  <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/template-engine.png" alt="template-engine" style="zoom: 80%;"></p><p>Spring Bootæ¨èçš„Thymeleafï¼šè¯­æ³•æ›´ç®€å•ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§</p><h3 id="3-1-å¼•å…¥Thymeleafï¼Œå¼•å…¥starterï¼š"><a href="#3-1-å¼•å…¥Thymeleafï¼Œå¼•å…¥starterï¼š" class="headerlink" title="3.1 å¼•å…¥Thymeleafï¼Œå¼•å…¥starterï¼š"></a>3.1 å¼•å…¥Thymeleafï¼Œå¼•å…¥starterï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¼•å…¥çš„åº“ï¼Œå‘ç°å¼•å…¥çš„2.1.6ç‰ˆæœ¬çš„ï¼Œå¤ªä½äº†</p><p>Thymeleafçš„<a href="https://github.com/thymeleaf/thymeleaf/releases">ç‰ˆæœ¬å‘å¸ƒ</a></p><p>Springå®˜ç½‘<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/howto-spring-mvc.html#howto-use-thymeleaf-3">Thymeleaf 3çš„ä½¿ç”¨</a></p><p>åˆ‡æ¢ç‰ˆæœ¬ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">&lt;!-- Thymeleafä¸»ç¨‹åº --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thymeleaf.version</span>&gt;</span>3.0.2.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf.version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Thymeleafå¸ƒå±€æ”¯æŒç¨‹åº Thymeleaf3è¦æ±‚layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Thymeleaf2å’Œlayout1é€‚é… --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>propertiesé‡Œé¢çš„ä¼šå±æ€§è¦†ç›–Spring Booté»˜è®¤çš„ç‰ˆæœ¬å·</p><p>thymeleaf-layout-dialectçš„<a href="https://github.com/ultraq/thymeleaf-layout-dialect/releases">ç‰ˆæœ¬å‘å¸ƒ</a></p><h3 id="3-2-Thymeleafä½¿ç”¨åŠè¯­æ³•"><a href="#3-2-Thymeleafä½¿ç”¨åŠè¯­æ³•" class="headerlink" title="3.2 Thymeleafä½¿ç”¨åŠè¯­æ³•"></a>3.2 Thymeleafä½¿ç”¨åŠè¯­æ³•</h3><p>è¿˜æ˜¯åœ¨<code>spring-boot-autoconfigure</code>è‡ªåŠ¨é…ç½®åŒ…é‡Œï¼šæ·»åŠ ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(</span><br><span class="line">  name = &#123;<span class="string">"org.thymeleaf.templatemode.TemplateMode"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Thymeleaf3Configuration</span> </span>&#123;</span><br><span class="line">  Thymeleaf3Configuration() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">  @<span class="title">ConditionalOnWebApplication</span></span></span><br><span class="line"><span class="class">  <span class="title">static</span> <span class="title">class</span> <span class="title">Thymeleaf3ViewResolverConfiguration</span> <span class="keyword">extends</span> </span></span><br><span class="line"><span class="class">      <span class="title">AbstractThymeleafViewResolverConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Thymeleaf3ViewResolverConfiguration(ThymeleafProperties properties, </span><br><span class="line">        SpringTemplateEngine templateEngine) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">super</span>(properties, templateEngine);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configureTemplateEngine</span><span class="params">(ThymeleafViewResolver resolver, </span></span></span><br><span class="line"><span class="function"><span class="params">        SpringTemplateEngine templateEngine)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      Method setTemplateEngine;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        setTemplateEngine = ReflectionUtils.findMethod(</span><br><span class="line">          resolver.getClass(), </span><br><span class="line">          <span class="string">"setTemplateEngine"</span>, </span><br><span class="line">          <span class="keyword">new</span> Class[]&#123;Class.forName(</span><br><span class="line">            <span class="string">"org.thymeleaf.ITemplateEngine"</span>, </span><br><span class="line">            <span class="keyword">true</span>, </span><br><span class="line">            resolver.getClass().getClassLoader()</span><br><span class="line">          )&#125;</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">catch</span> (ClassNotFoundException var5) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(var5);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ReflectionUtils.invokeMethod(setTemplateEngine, resolver, <span class="keyword">new</span> Object[]&#123;templateEngine&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">    name = &#123;<span class="string">"defaultTemplateResolver"</span>&#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultTemplateResolverConfiguration</span> <span class="keyword">extends</span> </span></span><br><span class="line"><span class="class">      <span class="title">AbstractTemplateResolverConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    DefaultTemplateResolverConfiguration(ThymeleafProperties properties, </span><br><span class="line">        ApplicationContext applicationContext) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">super</span>(properties, applicationContext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpringResourceTemplateResolver <span class="title">defaultTemplateResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      SpringResourceTemplateResolver resolver = <span class="keyword">super</span>.defaultTemplateResolver();</span><br><span class="line">      Method setCheckExistence = ReflectionUtils.findMethod(</span><br><span class="line">        resolver.getClass(), </span><br><span class="line">        <span class="string">"setCheckExistence"</span>, </span><br><span class="line">        <span class="keyword">new</span> Class[]&#123;Boolean.TYPE&#125;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      ReflectionUtils.invokeMethod(</span><br><span class="line">        setCheckExistence, </span><br><span class="line">        resolver, </span><br><span class="line">        <span class="keyword">new</span> Object[]&#123;<span class="keyword">this</span>.getProperties().isCheckTemplate()&#125;</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> resolver;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬å¼•å…¥çš„æ˜¯3+ç‰ˆæœ¬ï¼Œæ‰€ä»¥åªæœ‰3+ç‰ˆæœ¬ç”Ÿæ•ˆï¼›</p><p>é…ç½®äº†å“ªäº›å±æ€§ï¼Ÿåœ¨æ–‡ä»¶<code>ThymeleafProperties</code>ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">  prefix = <span class="string">"spring.thymeleaf"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafProperties</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_ENCODING = Charset.forName(<span class="string">"UTF-8"</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> MimeType DEFAULT_CONTENT_TYPE = MimeType.valueOf(<span class="string">"text/html"</span>);</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".html"</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplate = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplateLocation = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">private</span> String prefix = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">  <span class="keyword">private</span> String suffix = <span class="string">".html"</span>;</span><br><span class="line">  <span class="keyword">private</span> String mode = <span class="string">"HTML5"</span>;</span><br><span class="line">  <span class="keyword">private</span> Charset encoding;</span><br><span class="line">  <span class="keyword">private</span> MimeType contentType;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> cache;</span><br><span class="line">  <span class="keyword">private</span> Integer templateResolverOrder;</span><br><span class="line">  <span class="keyword">private</span> String[] viewNames;</span><br><span class="line">  <span class="keyword">private</span> String[] excludedViewNames;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> enabled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦æˆ‘ä»¬æŠŠHTMLé¡µé¢æ”¾åœ¨<code>classpath:/templates/</code>ï¼ŒThymeleafå°±èƒ½è‡ªåŠ¨æ¸²æŸ“</p><p>Thymeleafè¯­æ³•è¿˜æ˜¯å‚ç…§<a href="https://www.thymeleaf.org/">å®˜æ–¹ç½‘</a>çš„<a href="https://www.thymeleaf.org/documentation.html">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="3-3-ä»£ç ç¤ºä¾‹"><a href="#3-3-ä»£ç ç¤ºä¾‹" class="headerlink" title="3.3 ä»£ç ç¤ºä¾‹"></a>3.3 ä»£ç ç¤ºä¾‹</h3><ul><li>å¯¼å…¥Thymeleafçš„åç§°ç©ºé—´</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨Thymeleafè¯­æ³•</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;text&#125;"</span>&gt;</span>è¿™é‡Œæ˜¯divä¿¡æ¯<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-è¯­æ³•è§„åˆ™"><a href="#3-4-è¯­æ³•è§„åˆ™" class="headerlink" title="3.4 è¯­æ³•è§„åˆ™"></a>3.4 è¯­æ³•è§„åˆ™</h3><p><code>th:text</code>ï¼šæ”¹å˜å½“å‰å…ƒç´ é‡Œé¢çš„æ–‡æœ¬å†…å®¹ï¼›</p><p><strong>th</strong>ï¼šä»»æ„htmlå±æ€§ï¼›æ›¿æ¢åŸç”Ÿå±æ€§çš„å€¼ï¼Œä¾‹ï¼šth:classè¦†ç›–class</p><div class="table-container"><table><thead><tr><th style="text-align:center">Feature</th><th style="text-align:center">Detail</th><th style="text-align:center">Attribute</th></tr></thead><tbody><tr><td style="text-align:center">Fragment inclusion</td><td style="text-align:center">ç‰‡æ®µåŒ…å«ï¼šjsp:include</td><td style="text-align:center">th:insert<br/>th:replace</td></tr><tr><td style="text-align:center">Fragment iteration</td><td style="text-align:center">éå†ï¼šc:forEach</td><td style="text-align:center">th:each</td></tr><tr><td style="text-align:center">Conditional evaluation</td><td style="text-align:center">æ¡ä»¶åˆ¤æ–­ï¼šc:if</td><td style="text-align:center">th:if<br/>th:unless<br/>th:switch<br/>th:case</td></tr><tr><td style="text-align:center">Local variable definition</td><td style="text-align:center">å£°æ˜å˜é‡ï¼šc:set</td><td style="text-align:center">th:object<br/>th:with</td></tr><tr><td style="text-align:center">General attribute modification</td><td style="text-align:center">ä»»æ„å±æ€§ä¿®æ”¹æ”¯æŒprepend, append</td><td style="text-align:center">th:attr<br/>th:attrprepend<br/>th:attrappend</td></tr><tr><td style="text-align:center">Specific attribute modification</td><td style="text-align:center">ä¿®æ”¹åˆ¶å®šå±æ€§é»˜è®¤å€¼</td><td style="text-align:center">th:value<br/>th:href<br/>th:src<br/>â€¦</td></tr><tr><td style="text-align:center">Text (tag body modification)</td><td style="text-align:center">ä¿®æ”¹æ ‡ç­¾ä½“å†…å®¹</td><td style="text-align:center">th:text(è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦)<br/>th:utext(ä¸è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦)</td></tr><tr><td style="text-align:center">Fragment specification</td><td style="text-align:center">å£°æ˜ç‰‡æ®µ</td><td style="text-align:center">th:fragment</td></tr><tr><td style="text-align:center">Fragment removal</td><td style="text-align:center"></td><td style="text-align:center">th:remove</td></tr></tbody></table></div><h3 id="3-5-è¡¨è¾¾å¼"><a href="#3-5-è¡¨è¾¾å¼" class="headerlink" title="3.5 è¡¨è¾¾å¼"></a>3.5 è¡¨è¾¾å¼</h3><ul><li><p>Simple expressions: (è¡¨è¾¾å¼è¯­æ³•)</p><ul><li>Variable Expressions: ${â€¦}: è·å–å˜é‡å€¼; OGNL;</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">1)</span> <span class="string">è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"> <span class="meta">2)</span> <span class="string">ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡</span></span><br><span class="line"><span class="comment">   #ctx : the context object.</span></span><br><span class="line"><span class="comment">   #vars: the context variables.</span></span><br><span class="line"><span class="comment">   #locale : the context locale.</span></span><br><span class="line"><span class="comment">   #request : (only in Web Contexts) the HttpServletRequest object.</span></span><br><span class="line"><span class="comment">   #response : (only in Web Contexts) the HttpServletResponse object.</span></span><br><span class="line"><span class="comment">   #session : (only in Web Contexts) the HttpSession object.</span></span><br><span class="line"><span class="comment">   #servletContext : (only in Web Contexts) the ServletContext object.</span></span><br><span class="line"> </span><br><span class="line">   <span class="meta">$&#123;session.foo&#125;</span> <span class="string">// Retrieves the session atttribute 'foo'</span></span><br><span class="line"><span class="comment">   # é™„å½•éƒ½æœ‰æ¼”ç¤º</span></span><br><span class="line"> <span class="meta">3)</span> <span class="string">å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡</span></span><br><span class="line"><span class="comment">   #execInfo : information about the template being processed.</span></span><br><span class="line"><span class="comment">   #messages : methods for obtaining externalized messages inside variables expressions, </span></span><br><span class="line"><span class="comment"># in the same way as they would be obtained using #&#123;â€¦&#125; syntax.</span></span><br><span class="line"><span class="comment">   #uris : methods for escaping parts of URLs/URIs</span></span><br><span class="line"><span class="comment">   #conversions : methods for executing the configured conversion service (if any).</span></span><br><span class="line"><span class="comment">   #dates : methods for java.util.Date objects: formatting, component extraction, etc.</span></span><br><span class="line"><span class="comment">   #calendars : analogous to #dates , but for java.util.Calendar objects.</span></span><br><span class="line"><span class="comment">   #numbers : methods for formatting numeric objects.</span></span><br><span class="line"><span class="comment">   #strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span></span><br><span class="line"><span class="comment">   #objects : methods for objects in general.</span></span><br><span class="line"><span class="comment">   #bools : methods for boolean evaluation.</span></span><br><span class="line"><span class="comment">   #arrays : methods for arrays.</span></span><br><span class="line"><span class="comment">   #lists : methods for lists.</span></span><br><span class="line"><span class="comment">   #sets : methods for sets.</span></span><br><span class="line"><span class="comment">   #maps : methods for maps.</span></span><br><span class="line"><span class="comment">   #aggregates : methods for creating aggregates on arrays or collections.</span></span><br><span class="line"><span class="comment">   #ids : methods for dealing with id attributes that might be repeated </span></span><br><span class="line"><span class="comment"># (for example, as a result of an iteration).</span></span><br></pre></td></tr></table></figure><ul><li>Selection Variable Expressions: *{â€¦}: é€‰æ‹©è¡¨è¾¾å¼, å’Œ${}åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·çš„</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¡¥å……: é…åˆth:object="$&#123;session.user&#125;"è¿›è¡Œä½¿ç”¨</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;firstName&#125;"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;lastName&#125;"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;nationality&#125;"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>Message Expressions: #{â€¦}: è·å–å›½é™…åŒ–å†…å®¹</li><li>Link URL Expressions: @{â€¦}: å®šä¹‰URL</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@&#123;/order/process(execId=$&#123;execId&#125;,execType='FAST')&#125;</span><br></pre></td></tr></table></figure><ul><li>Fragment Expressions: ~{â€¦}: ç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æ’å…¥ç‰‡æ®µæ–‡æ¡£</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"~&#123;commons :: main&#125;"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>Literals(å­—é¢é‡)</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Text</span> <span class="string">literals: 'one text' , 'Another one!' ,â€¦</span></span><br><span class="line"><span class="attr">Number</span> <span class="string">literals: 0 , 34 , 3.0 , 12.3 ,â€¦</span></span><br><span class="line"><span class="attr">Boolean</span> <span class="string">literals: true , false</span></span><br><span class="line"><span class="attr">Null</span> <span class="string">literal: null</span></span><br><span class="line"><span class="attr">Literal</span> <span class="string">tokens: one , sometext , main ,â€¦</span></span><br></pre></td></tr></table></figure><ul><li>Text operations:(æ–‡æœ¬æ“ä½œ)</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">String</span> <span class="string">concatenation: +</span></span><br><span class="line"><span class="attr">Literal</span> <span class="string">substitutions: |The name is $&#123;name&#125;|</span></span><br></pre></td></tr></table></figure><ul><li>Arithmetic operations:(æ•°å­¦è¿ç®—)</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Binary</span> <span class="string">operators: + , - , * , / , %</span></span><br><span class="line"><span class="attr">Minus</span> <span class="string">sign (unary operator): -</span></span><br></pre></td></tr></table></figure><ul><li>Boolean operations:(å¸ƒå°”è¿ç®—)</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Binary</span> <span class="string">operators: and , or</span></span><br><span class="line"><span class="attr">Boolean</span> <span class="string">negation (unary operator): ! , not</span></span><br></pre></td></tr></table></figure><ul><li>Comparisons and equality:(æ¯”è¾ƒè¿ç®—)</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Comparators</span>: <span class="string">&gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span></span><br><span class="line"><span class="attr">Equality</span> <span class="string">operators: == , != ( eq , ne )</span></span><br></pre></td></tr></table></figure><ul><li>Conditional operators:(æ¡ä»¶è¿ç®—, ä¹Ÿæ”¯æŒ3å…ƒè¿ç®—ç¬¦)</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">If-then</span>: <span class="string">(if) ? (then)</span></span><br><span class="line"><span class="meta">If-then-else</span>: <span class="string">(if) ? (then) : (else)</span></span><br><span class="line"><span class="attr">Default</span>: <span class="string">(value) ?: (defaultvalue)</span></span><br></pre></td></tr></table></figure><ul><li>Special tokens:(ç‰¹æ®Šç¬¦å·)</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">No-Operation</span>: <span class="string">_</span></span><br></pre></td></tr></table></figure><h2 id="4ã€SpringMVCè‡ªåŠ¨é…ç½®"><a href="#4ã€SpringMVCè‡ªåŠ¨é…ç½®" class="headerlink" title="4ã€SpringMVCè‡ªåŠ¨é…ç½®"></a>4ã€SpringMVCè‡ªåŠ¨é…ç½®</h2><p>å¯ä»¥å‚é˜…å®˜æ–¹æ–‡æ¡£<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/boot-features-developing-web-applications.html">Developing web applications</a></p><h3 id="4-1-Spring-Bootä¸ºSpring-MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå¯ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºå®Œç¾é…åˆã€‚"><a href="#4-1-Spring-Bootä¸ºSpring-MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå¯ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºå®Œç¾é…åˆã€‚" class="headerlink" title="4.1 Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå¯ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºå®Œç¾é…åˆã€‚"></a>4.1 Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå¯ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºå®Œç¾é…åˆã€‚</h3><p>è‡ªåŠ¨é…ç½®ä¼šåœ¨Springçš„é»˜è®¤è®¾ç½®ä¹‹ä¸Šæ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li><p>åŒ…å«<code>ContentNegotiatingViewResolver</code>å’Œ<code>BeanNameViewResolver Bean</code>ã€‚</p><ul><li>è‡ªåŠ¨é…ç½®äº†ViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼šæ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å¾—åˆ°è§†å›¾å¯¹è±¡ï¼ˆå°±æ˜¯Viewå¯¹è±¡ï¼‰ï¼Œè§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Ÿé‡å®šå‘ï¼Ÿç­‰ï¼‰ï¼‰</li><li><code>ContentNegotiatingViewResolver</code>ï¼šç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„</li><li><p>å¦‚ä½•å®šåˆ¶ï¼šæˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼Œè‡ªåŠ¨å°†å…¶ç»„åˆè¿›æ¥</p></li><li><p>Ctrl+Nè¾“å…¥<code>DispatchServlet.class</code>åœ¨å®ƒçš„<code>doDispatch</code>æ–¹æ³•å‰é¢è®¾ç½®æ–­ç‚¹ï¼ŒDebugè¿è¡Œï¼Œæµè§ˆå™¨è®¿é—®é¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ã€‚çœ‹DispatchServleté‡Œç”¨åˆ°çš„è§†å›¾è§£æå™¨æ˜¯ä»€ä¹ˆï¼Ÿå¾—åˆ°å¦‚å›¾ï¼š</p></li></ul><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/viewResolver.png" alt="viewResolver"></p></li><li><p>æ”¯æŒæä¾›é™æ€èµ„æºï¼ŒåŒ…æ‹¬å¯¹WebJarsçš„æ”¯æŒï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚</p></li><li><p>è‡ªåŠ¨æ³¨å†Œ<code>Converter</code>ï¼Œ<code>GenericConverter</code>ï¼Œ<code>Formatter</code> beanã€‚</p><ul><li><code>Converter</code>ï¼šè½¬æ¢å™¨ï¼Œç±»å‹è½¬æ¢ä½¿ç”¨ã€‚ä¾‹å¦‚å‰ç«¯æ–‡æœ¬è½¬åå°Integer</li><li><code>Formatter</code>ï¼šæ ¼å¼åŒ–å™¨ï¼Œ2020.08.13===Date</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">  prefix = <span class="string">"spring.mvc"</span>,</span><br><span class="line">  name = &#123;<span class="string">"date-format"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Formatter&lt;Date&gt; <span class="title">dateFormatter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> DateFormatter(<span class="keyword">this</span>.mvcProperties.getDateFormat()); <span class="comment">// æ—¥æœŸæ ¼å¼åŒ–ç»„ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è‡ªå·±æ·»åŠ çš„æ ¼å¼åŒ–å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¾åœ¨å®¹å™¨ä¸­å³å¯</li></ul></li><li><p>æ”¯æŒ<code>HttpMessageConverters</code>ï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚</p><ul><li>HttpMessageConverterï¼šSpringMVCä¸­ç”¨æ¥è½¬æ¢HTTPè¯·æ±‚å’Œå“åº”çš„ï¼›ä¾‹ï¼šUserå¯¹è±¡ä»¥JSONå½¢å¼å†™å‡º</li><li><code>HttpMessageConverters</code>æ˜¯ä»å®¹å™¨ä¸­ç¡®å®šçš„ï¼Œè·å–æ‰€æœ‰çš„HttpMessageConverter</li><li>è‡ªå·±ç»™å®¹å™¨ä¸­æ·»åŠ HttpMessageConverterï¼Œåªéœ€å°†è‡ªå·±çš„ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨ä¸­ï¼ˆ@Bean, @Componentï¼‰</li></ul></li><li><p>è‡ªåŠ¨æ³¨å†Œ<code>MessageCodesResolver</code>ï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚</p><ul><li>å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™ï¼ˆä¾‹ï¼šJSR303æ ¡éªŒæ—¶ï¼‰</li></ul></li><li><p>é™æ€<code>index.html</code>æ”¯æŒã€‚</p></li><li><p>è‡ªå®šä¹‰<code>Favicon</code>æ”¯æŒï¼ˆè¯·å‚é˜…ä¸‹æ–‡ï¼‰ã€‚</p></li><li><p>è‡ªåŠ¨ä½¿ç”¨<code>ConfigurableWebBindingInitializer</code> beanï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚</p><ul><li>æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ª<code>ConfigurableWebBindingInitializer</code>æ¥æ›¿æ¢é»˜è®¤çš„ï¼›ï¼ˆæ·»åŠ åˆ°å®¹å™¨ä¸­ï¼‰</li><li>åˆå§‹åŒ–<code>WebDataBinder</code>ï¼ˆwebæ•°æ®ç»‘å®šå™¨ï¼‰ï¼›</li><li>webæ•°æ®ç»‘å®šå™¨çš„åŠŸèƒ½ï¼šè¯·æ±‚æ•°æ®=====ç»‘å®šåˆ°JavaBeanä¸­</li></ul></li></ul><p><code>org.springframework.boot.autoconfigure.web</code>ï¼šwebçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®åœºæ™¯ã€‚</p><p>å¦‚æœæ‚¨æƒ³ä¿ç•™Spring Boot MVCåŠŸèƒ½ï¼Œè€Œåªæƒ³æ·»åŠ å…¶ä»–MVCé…ç½®ï¼ˆæ‹¦æˆªå™¨ï¼Œæ ¼å¼åŒ–ç¨‹åºï¼Œè§†å›¾æ§åˆ¶å™¨ç­‰ï¼‰ï¼Œåˆ™å¯ä»¥æ·»åŠ è‡ªå·±çš„ç±»å‹ä¸º<code>WebMvcConfigurerAdapter</code>çš„<code>@Configuration</code>ç±»ï¼Œä½†æ— éœ€<code>@EnableWebMvc</code>ã€‚å¦‚æœå¸Œæœ›æä¾›<code>RequestMappingHandlerMapping</code>ï¼Œ<code>RequestMappingHandlerAdapter</code>æˆ–<code>ExceptionHandlerExceptionResolver</code>çš„è‡ªå®šä¹‰å®ä¾‹ï¼Œåˆ™å¯ä»¥å£°æ˜ä¸€ä¸ªæä¾›æ­¤ç±»ç»„ä»¶çš„<code>WebMvcRegistrationsAdapter</code>å®ä¾‹ã€‚</p><p>å¦‚æœè¦å®Œå…¨æ§åˆ¶Spring MVCï¼Œåˆ™å¯ä»¥æ·»åŠ ç”¨<code>@EnableWebMvc</code>æ³¨é‡Šçš„è‡ªå·±çš„<code>@Configuration</code>ã€‚</p><h3 id="4-2-æ‰©å±•SpringMVC"><a href="#4-2-æ‰©å±•SpringMVC" class="headerlink" title="4.2 æ‰©å±•SpringMVC"></a>4.2 æ‰©å±•SpringMVC</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">"/hello"</span> <span class="attr">view-name</span>=<span class="string">"success"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/hello"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦å®ç°ä»¥ä¸ŠSpringé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼ˆ@Configurationï¼‰ï¼Œæ˜¯<code>WebMvcConfigurerAdapter</code>ç±»å‹ï¼›ä¸èƒ½æ ‡æ³¨<code>@EnableWebMvc</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMVCConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// super.addViewControllers(registry);</span></span><br><span class="line">    <span class="comment">//æµè§ˆå™¨å‘é€ /addViewController è¯·æ±‚æ¥åˆ° thymeleaf</span></span><br><span class="line">    registry.addViewController(<span class="string">"/addViewController"</span>).setViewName(<span class="string">"thymeleaf"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¢ä¿ç•™äº†æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼›</p><p>åŸç†ï¼š</p><ul><li>WebMvcAutoConfigurationæ˜¯SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»</li><li>åœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼›@Import(<strong>EnableWebMvcConfiguration</strong>.class)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">DelegatingWebMvcConfiguration</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹è¿›å…¶çˆ¶ç±»<code>DelegatingWebMvcConfiguration</code>æŸ¥çœ‹æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">DelegatingWebMvcConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è‡ªåŠ¨è£…é…, ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„WebMvcConfigurer</span></span><br><span class="line">  <span class="meta">@Autowired</span>(</span><br><span class="line">    required = <span class="keyword">false</span></span><br><span class="line">  )</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line">        <span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">        <span class="comment">// ä¸€ä¸ªå‚è€ƒå®ç°; å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®éƒ½æ¥ä¸€èµ·è°ƒç”¨;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>WebMvcConfigurerComposite</code>ç±»ä¸­çš„ä¸€ä¸ªå®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">  Iterator var2 = <span class="keyword">this</span>.delegates.iterator();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">    WebMvcConfigurer delegate = (WebMvcConfigurer)var2.next();</span><br><span class="line">    delegate.addViewControllers(registry);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®¹å™¨ä¸­æ‰€æœ‰çš„WebMvcConfigureréƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ï¼ˆåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±å†™çš„ï¼‰ï¼›</li><li>æˆ‘ä»¬çš„é…ç½®ç±»ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›<ul><li>æ•ˆæœï¼šSpringMVCçš„è‡ªåŠ¨é…ç½®å’Œæˆ‘ä»¬çš„æ‰©å±•é…ç½®éƒ½ä¼šèµ·ä½œç”¨ï¼›</li></ul></li></ul><h3 id="4-3-å…¨é¢æ¥ç®¡SpringMVC"><a href="#4-3-å…¨é¢æ¥ç®¡SpringMVC" class="headerlink" title="4.3 å…¨é¢æ¥ç®¡SpringMVC"></a>4.3 å…¨é¢æ¥ç®¡SpringMVC</h3><p>SpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±é…ç½®ï¼›æ‰€æœ‰çš„SpringMVCçš„è‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†ï¼ˆé™æ€èµ„æºä¹Ÿä¸èƒ½è®¿é—®äº†ï¼‰</p><p><strong>æˆ‘ä»¬éœ€è¦åœ¨é…ç½®ç±»ä¸­æ·»åŠ @EnableWebMvcå³å¯ï¼›</strong></p><p>åŸç†ï¼šä¸ºä»€ä¹ˆ@EnableWebMvcè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼Ÿ</p><ul><li>@EnableWebMvcçš„æ ¸å¿ƒ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;DelegatingWebMvcConfiguration<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">EnableWebMvc</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹<code>DelegatingWebMvcConfiguration</code>ç±»çš„æºç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨æ‰¾åˆ°<code>WebMvcAutoConfiguration</code>ç±»ï¼ŒæŸ¥çœ‹ç­¾å</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>, <span class="title">DispatcherServlet</span>.<span class="title">class</span>, <span class="title">WebMvcConfigurerAdapter</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnMissingBean</span>(</span>&#123;WebMvcConfigurationSupport<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureOrder</span>(-2147483638)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureAfter</span>(</span>&#123;DispatcherServletAutoConfiguration<span class="class">.<span class="keyword">class</span>, </span></span><br><span class="line"><span class="class">  <span class="title">ValidationAutoConfiguration</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@ConditionalOnMissingBean()</code>ï¼šå®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ</p><ul><li>@EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥ï¼›</li><li>å¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚</li></ul><h2 id="5ã€å¦‚ä½•ä¿®æ”¹Spring-Bootçš„é»˜è®¤é…ç½®"><a href="#5ã€å¦‚ä½•ä¿®æ”¹Spring-Bootçš„é»˜è®¤é…ç½®" class="headerlink" title="5ã€å¦‚ä½•ä¿®æ”¹Spring Bootçš„é»˜è®¤é…ç½®"></a>5ã€å¦‚ä½•ä¿®æ”¹Spring Bootçš„é»˜è®¤é…ç½®</h2><p>æ¨¡å¼ï¼š</p><ul><li>Spring Bootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶æ—¶ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆ@Bean, @Componentï¼‰,å¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰æ‰è‡ªåŠ¨é…ç½®ï¼›å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼ˆViewResolverï¼‰å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼›</li><li>åœ¨SpringBootä¸­ä¼šæœ‰éå¸¸å¤šçš„xxxConfigurerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½®</li><li>åœ¨SpringBootä¸­ä¼šæœ‰å¾ˆå¤šçš„xxxCustomizerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œå®šåˆ¶é…ç½®</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€ä½¿ç”¨Spring-Bootï¼š&quot;&gt;&lt;a href=&quot;#1ã€ä½¿ç”¨Spring-Bootï¼š&quot; class=&quot;headerlink&quot; title=&quot;1ã€ä½¿ç”¨Spring Bootï¼š&quot;&gt;&lt;/a&gt;1ã€ä½¿ç”¨Spring Bootï¼š&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»ºSpring Bootåº”ç”¨ï¼Œé€‰ä¸­æˆ‘ä»¬éœ€è¦çš„æ¨¡å—&lt;/li&gt;
&lt;li&gt;Spring Bootå·²ç»é»˜è®¤å°†è¿™äº›åœºæ™¯é…ç½®å¥½äº†ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå°‘é‡é…ç½®å°±å¯ä»¥è¿è¡Œèµ·æ¥&lt;/li&gt;
&lt;li&gt;è‡ªå·±ç¼–å†™ä¸šåŠ¡ä»£ç &lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¸æ—¥å¿—</title>
    <link href="https://mysticalguest.github.io/2020/08/08/Spring/SpringBootLog/"/>
    <id>https://mysticalguest.github.io/2020/08/08/Spring/SpringBootLog/</id>
    <published>2020-08-08T14:52:19.278Z</published>
    <updated>2020-09-10T09:37:39.046Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€æ—¥å¿—æ¡†æ¶"><a href="#1ã€æ—¥å¿—æ¡†æ¶" class="headerlink" title="1ã€æ—¥å¿—æ¡†æ¶"></a>1ã€æ—¥å¿—æ¡†æ¶</h2><p>æ•…äº‹ï¼šæœ‰ä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œå¼€å‘ä¸€ä¸ªå¤§å‹ç³»ç»Ÿï¼›</p><a id="more"></a><blockquote><p>é‡åˆ°é‡è¦æ•°æ®ï¼Œå–œæ¬¢<code>System.out.println(&quot;&quot;)</code>ï¼Œå°†å…³é”®æ•°æ®æ‰“å°åœ¨æ§åˆ¶å°</p><p>å»æ‰ï¼Ÿå†™åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Ÿæ–¹ä¾¿ï¼Ÿ</p><p>æ¡†æ¶æ¥è®°å½•ç³»ç»Ÿçš„ä¸€äº›è¿è¡Œæ—¶ä¿¡æ¯ï¼Œæ—¥å¿—æ¡†æ¶ï¼šfirst.jar</p><p>é«˜å¤§ä¸Šçš„å‡ ä¸ªåŠŸèƒ½ï¼Ÿå¼‚æ­¥æ¨¡å¼ï¼Ÿè‡ªåŠ¨è§„å®šï¼Ÿç­‰ç­‰ï¼Ÿï¼šsecond.jar</p><p>å°†ä»¥å‰çš„æ¡†æ¶å¸ä¸‹æ¥ï¼Ÿæ¢ä¸Šæ–°çš„æ¡†æ¶ï¼Œæ›´æ–°ä¿®æ”¹ä¹‹å‰ç›¸å…³APIï¼šthird.jar</p><p>JDBCâ€”-æ•°æ®åº“é©±åŠ¨ï¼š</p><ul><li>å†™äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£å±‚ï¼šæš‚æ—¶å«åšæ—¥å¿—é—¨é¢ï¼ˆæ—¥å¿—çš„ä¸€ä¸ªæŠ½è±¡å±‚ï¼‰ï¼šfourth.jar</li><li>ç»™é¡¹ç›®ä¸­å¯¼å…¥å…·ä½“çš„æ—¥å¿—å®ç°å°±è¡Œäº†ï¼Œæˆ‘ä»¬ä¹‹å‰çš„æ—¥å¿—æ¡†æ¶éƒ½æ˜¯å®ç°çš„æŠ½è±¡å±‚</li></ul></blockquote><h2 id="2ã€å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶"><a href="#2ã€å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶" class="headerlink" title="2ã€å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶"></a>2ã€å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶</h2><p>JULã€JCLã€Jboss-loggingã€logbackã€log4jã€log4j2ã€slf4jâ€¦</p><h3 id="2-1-ä¸‹è¡¨è¡Œé—´æ— ä»»ä½•å¯¹åº”å…³ç³»"><a href="#2-1-ä¸‹è¡¨è¡Œé—´æ— ä»»ä½•å¯¹åº”å…³ç³»" class="headerlink" title="2.1 ä¸‹è¡¨è¡Œé—´æ— ä»»ä½•å¯¹åº”å…³ç³»"></a>2.1 ä¸‹è¡¨è¡Œé—´æ— ä»»ä½•å¯¹åº”å…³ç³»</h3><div class="table-container"><table><thead><tr><th>æ—¥å¿—é—¨é¢</th><th>æ—¥å¿—å®ç°</th></tr></thead><tbody><tr><td>JCL( Jakarta Commons Logging)</td><td>Log4j</td></tr><tr><td>SLF4j( Simple Logging Facade for Java)</td><td>JUL( java. util.logging)</td></tr><tr><td>jboss-logging</td><td>Log4j2</td></tr><tr><td></td><td>Logback</td></tr></tbody></table></div><p>å·¦è¾¹é€‰ä¸€ä¸ªé—¨é¢ï¼ˆæŠ½è±¡å±‚ï¼‰ã€å³è¾¹é€‰ä¸€ä¸ªå®ç°</p><p>é€‰å“ªä¸ªå‘¢ï¼Ÿæ’é™¤æ³•</p><h3 id="2-2-æ—¥å¿—é—¨é¢ï¼šslf4j"><a href="#2-2-æ—¥å¿—é—¨é¢ï¼šslf4j" class="headerlink" title="2.2 æ—¥å¿—é—¨é¢ï¼šslf4j"></a>2.2 æ—¥å¿—é—¨é¢ï¼šslf4j</h3><p>Jboss-loggingï¼šæ™®é€šç¨‹åºå‘˜ç”¨ä¸äº†</p><p>JCLï¼šæœ€åä¸€æ¬¡æ›´æ–°æ˜¯åœ¨2014å¹´ï¼Œå»‰é¢‡è€çŸ£ï¼Œå°šèƒ½é¥­å¦ï¼Ÿ</p><p>å‰©ä¸‹slf4jç†æ‰€åº”å½“</p><h3 id="2-3-æ—¥å¿—å®ç°ï¼šlogback"><a href="#2-3-æ—¥å¿—å®ç°ï¼šlogback" class="headerlink" title="2.3 æ—¥å¿—å®ç°ï¼šlogback"></a>2.3 æ—¥å¿—å®ç°ï¼šlogback</h3><p>log4jã€logbackå’Œslf4jéƒ½æ˜¯ä¸€ä¸ªäººå†™çš„ï¼Œé€‚é…æ€§å¥½ï¼Œlog4jä¸é”™ä½†æœ‰æ€§èƒ½é—®é¢˜ï¼Œä½†å‡çº§æ¶ˆè€—å¤ªå¤§ï¼Œå°±é‡å†™äº†logback</p><p>æ‰€æœ‰log4jæ²¡æœ‰logbackå…ˆè¿›ï¼ŒJULæ˜¯Javaè‡ªå¸¦çš„ï¼Œæ€•æ—¥å¿—å¸‚åœºè¢«å ï¼Œæ¯”è¾ƒç®€ç•¥</p><p>log4j2æ˜¯å€Ÿlog4jä¹‹åï¼Œç”±Apacheå…¬å¸é‡æ–°åšçš„æ¡†æ¶ï¼Œè®¾è®¡åœ°éå¸¸å¥½ï¼Œç”±äºå¤ªå¥½è¿˜æ²¡é€‚é…</p><h3 id="2-4-Spring-Bootæ€ä¹ˆåšçš„å‘¢ï¼Ÿ"><a href="#2-4-Spring-Bootæ€ä¹ˆåšçš„å‘¢ï¼Ÿ" class="headerlink" title="2.4 Spring Bootæ€ä¹ˆåšçš„å‘¢ï¼Ÿ"></a>2.4 Spring Bootæ€ä¹ˆåšçš„å‘¢ï¼Ÿ</h3><p>Springæ¡†æ¶é»˜è®¤æ˜¯ç”¨JCLæ—¥å¿—æ¡†æ¶</p><p>Spring Booté€‰ç”¨slf4jå’Œlogback</p><h2 id="3ã€slf4jçš„ä½¿ç”¨"><a href="#3ã€slf4jçš„ä½¿ç”¨" class="headerlink" title="3ã€slf4jçš„ä½¿ç”¨"></a>3ã€slf4jçš„ä½¿ç”¨</h2><p>å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨slf4jï¼Ÿ<a href="http://www.slf4j.org/">å®˜æ–¹æ–‡æ¡£</a></p><ul><li><p>ä»¥åå¼€å‘çš„æ—¶å€™ï¼Œæ—¥å¿—è®°å½•æ–¹æ³•å¾—è°ƒç”¨ï¼Œä¸åº”è¯¥æ¥ç›´æ¥è°ƒç”¨æ—¥å¿—çš„å®ç°ç±»ï¼Œè€Œæ˜¯è°ƒç”¨æ—¥å¿—æŠ½è±¡å±‚é‡Œé¢çš„æ–¹æ³•</p></li><li><p>å‚è§ç”¨æˆ·æ‰‹å†Œ<a href="http://www.slf4j.org/manual.html">SLF4J user manual</a>ç»™ç³»ç»Ÿä¸­å¯¼å…¥slf4jçš„jarå’Œlogbackçš„å®ç°jar</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Logger logger = LoggerFactory.getLogger(HelloWorld<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    logger.info(<span class="string">"Hello World"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è™½ç„¶é»˜è®¤ç”¨çš„æ˜¯logbackçš„å®ç°ï¼Œå¦‚æœæƒ³è¦å…¶ä»–å®ç°ä¹Ÿå¯ä»¥ï¼Œæ¯•ç«Ÿslf4jæ˜¯æŠ½è±¡å±‚ï¼Œå®ç°ç”¨ä»€ä¹ˆéƒ½è¡Œ</p></blockquote><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/SLF4J-user-manual.png" alt="Spring Boot"></p><h3 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><ul><li><p>å¦‚æœç³»ç»Ÿä¸­åªå¯¼å…¥äº†slf4jï¼Œæˆ‘ä»¬è¦è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œå°±ä¼šè¿”å›ç©ºå€¼ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•å®ç°</p></li><li><p>æ­£ç¡®ç”¨æ³•ï¼šæˆ‘çš„åº”ç”¨ç¨‹åºé¢å‘slf4jç¼–ç¨‹ï¼Œè°ƒç”¨å®ƒçš„æ–¹æ³•è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œåœ¨ç¨‹åºä¸­ä¹Ÿå¯¼å…¥æ—¥å¿—å®ç°ï¼Œè™½ç„¶è°ƒç”¨slf4jæ¥å£ï¼Œä½†logbackä¼šå®ç°ï¼Œè®°å½•åˆ°æ–‡ä»¶æˆ–æ§åˆ¶å°</p></li><li><p>å¦‚æœslf4jè¦ç»‘å®šlog4jï¼Œlog4jå‡ºç°æ¯”è¾ƒæ—©ï¼Œæ²¡æƒ³åˆ°è¦é€‚é…slf4jï¼Œæ‰€ä»¥ä¸¤è€…ç»‘å®šè¦æœ‰ä¸€ä¸ªé€‚é…å±‚ï¼ˆslf4jå®ç°çš„ï¼‰ï¼Œé€‚é…å±‚ç›¸å½“äºä¸Šé¢å®ç°äº†slf4jçš„å…·ä½“æ–¹æ³•ï¼Œè€Œåœ¨æ–¹æ³•é‡Œé¢è¦è¿›è¡ŒçœŸæ­£æ—¥å¿—è®°å½•çš„æ—¶å€™ï¼Œåˆè°ƒäº†log4jçš„APIï¼Œè¦ç”¨log4jè¿˜è¦å¯¼å…¥é€‚é…å±‚å³å¯<br>JULåŒç†</p></li><li><p>slf4jä¹Ÿæœ‰ç®€å•æ—¥å¿—å®ç°ä¹Ÿèƒ½ç”¨ï¼Œæˆ–è€…slf4jæ²¡æœ‰ä»€ä¹ˆæ“ä½œçš„å®ç°åŒ…ï¼Œä¹Ÿæ˜¯è¾“å‡ºç©ºå€¼</p></li><li><p>æ¯ä¸€ä¸ªæ—¥å¿—çš„å®ç°æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨slf4jä»¥åï¼Œé…ç½®æ–‡ä»¶è¿˜æ˜¯åšæˆæ—¥å¿—å®ç°æ¡†æ¶è‡ªå·±æœ¬èº«çš„é…ç½®æ–‡ä»¶</p></li><li>slf4jåªæä¾›æŠ½è±¡å±‚ï¼Œç”¨å“ªä¸ªå®ç°å°±å†™é‚£ä¸ªçš„é…ç½®æ–‡ä»¶</li></ul><h2 id="4ã€é—ç•™é—®é¢˜"><a href="#4ã€é—ç•™é—®é¢˜" class="headerlink" title="4ã€é—ç•™é—®é¢˜"></a>4ã€é—ç•™é—®é¢˜</h2><p>å¼€å‘æŸä¸ªç³»ç»Ÿæ—¶ï¼šä½¿ç”¨{slf4j+logback}ï¼Œä¾èµ–Springæ¡†æ¶ï¼ˆcommons-loggingï¼‰ï¼Œä¾èµ–Hibernateæ¡†æ¶ï¼ˆJboss-loggingï¼‰ï¼Œä¾èµ–MyBatisæ¡†æ¶ç­‰ç­‰å¯èƒ½ä¸€å¤§å †</p><p>å‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œç³»ç»Ÿä¸­æ—¥å¿—æ‚äº¤ï¼Ÿ</p><p>ç°åœ¨å°±è¦åšåŒä¸€æ—¥å¿—è®°å½•ï¼Œå³ä½¿æ˜¯åˆ«çš„æ¡†æ¶å’Œæˆ‘ä¸€èµ·ä½¿ç”¨slf4jè¿›è¡Œè¾“å‡ºï¼Ÿ</p><p>è¿›å…¥<a href="http://www.slf4j.org/">slf4jå®˜æ–¹æ–‡æ¡£</a>çš„<a href="http://www.slf4j.org/legacy.html">legacy APIs</a></p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/legacy.png" alt="Spring Boot"></p><p>ç»Ÿä¸€slf4jï¼Œä½¿ç”¨å…¶ä»–åŒ…æ›¿æ¢åŸæœ‰æ—¥å¿—æ¡†æ¶ï¼Œæ›¿æ¢çš„æ„æ€å°±æ˜¯ï¼Œä¾‹å¦‚è¦æŠŠåŸæ¡†æ¶é‡Œé¢å¯¹Commons-loggingçš„ä¾èµ–æ’é™¤æ‰</p><p>ä½†å¦‚æœæˆ‘ç°åœ¨ç”¨çš„Springæ¡†æ¶ç¼ºå°‘Commons-loggingå°±è¿è¡Œä¸èµ·æ¥äº†ï¼ŒSpringåº•å±‚è®°å½•æ—¥å¿—å°±éœ€è¦Commons-loggingï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿå°±ç”¨jcl-over-slf4j.jaræ›¿æ¢è¿™ä¸ªåŒ…ï¼ŒSpringè¦ç”¨çš„ç±»è¿™ä¸ªæ›¿æ¢åŒ…ä¾‹è¿˜æ˜¯æœ‰çš„ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†</p><p>ä½†æ–°çš„åŒ…å®ç°æ€ä¹ˆåŠå‘¢ï¼Ÿæ–°çš„åŒ…è°ƒå…¥slf4jï¼ŒäºŒslf4jåˆè°ƒåˆ°çœŸæ­£çš„å®ç°ä¸­ï¼Œå…¶ä»–æ¡†æ¶ä¸åŒæ—¥å¿—æ¡†æ¶åŒç†æ›¿æ¢</p><p>å…¶ä»–ç»„åˆæ–¹å¼ä¹Ÿæ˜¯å¦‚æ­¤</p><p>å¦‚ä½•è®©ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¥å¿—éƒ½åŒä¸€åˆ°slf4jï¼š</p><ul><li>å°†ç³»ç»Ÿä¸­å…¶ä»–æ—¥å¿—æ¡†æ¶å…ˆæ’é™¤å»ï¼›</li><li>ç”¨ä¸­é—´åŒ…æ¥æ›¿æ¢åŸæœ‰çš„æ—¥å¿—æ¡†æ¶</li><li>æˆ‘ä»¬å¯¼å…¥slf4jå…¶ä»–çš„å®ç°</li></ul><h2 id="5ã€Spring-Bootæ—¥å¿—å…³ç³»"><a href="#5ã€Spring-Bootæ—¥å¿—å…³ç³»" class="headerlink" title="5ã€Spring Bootæ—¥å¿—å…³ç³»"></a>5ã€Spring Bootæ—¥å¿—å…³ç³»</h2><p>æ¯ä¸ªå¯åŠ¨å™¨ï¼ˆåœºæ™¯ï¼‰éƒ½è¦ä¾èµ–çš„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Spring Bootä½¿ç”¨å®ƒæ¥åšæ—¥å¿—åŠŸèƒ½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¾èµ–å›¾ç¤ºï¼š</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/slf4j-uml.png" alt="Spring Boot"></p><p>æ€»ç»“ï¼š</p><ul><li><p>Spring Bootåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è¿›è¡Œæ—¥å¿—è®°å½•</p></li><li><p>Spring Bootä¹Ÿæ˜¯æŠŠå…¶ä»–çš„æ—¥å¿—éƒ½æ›¿æ¢æˆäº†slf4j</p></li><li><p>ä¸­é—´æ›¿æ¢åŒ…ï¼Œä»¥<code>jcl-over-slf4j.jar</code>ä¸ºä¾‹ï¼š</p><p>åœ¨é¡¹ç›®çš„ä¾èµ–åŒ…ä¸­æ‰¾åˆ°å…¶å¯¹åº”jaråŒ…ï¼šï¼ˆä¸­é—´è½¬æ¢åŒ…ï¼‰</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/jcl-over-slf4j.PNG" alt="Spring Boot"></p></li><li><p>ä»å›¾ä¸­çœ‹å‡ºï¼Œè™½ç„¶åŒ…åç”¨çš„Apacheçš„ï¼Œä½†å®ç°å´æ˜¯ä½¿ç”¨çš„<code>SLF4JLogFactory()</code>çš„æ—¥å¿—å·¥å‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">LogFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = </span><br><span class="line">    <span class="string">"http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> LogFactory logFactory = <span class="keyword">new</span> SLF4JLogFactory();</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å¦‚æœæˆ‘ä»¬è¦å¼•å…¥å…¶ä»–æ¡†æ¶ï¼Ÿä¸€å®šè¦æŠŠè¿™ä¸ªæ¡†æ¶çš„é»˜è®¤æ—¥å¿—ä¾èµ–ç§»é™¤æ‰ï¼</p><p>Springæ¡†æ¶ç”¨çš„æ˜¯commons-loggingï¼š</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Spring Bootèƒ½è‡ªåŠ¨é€‚é…æ‰€æœ‰çš„æ—¥å¿—ï¼Œè€Œä¸”åº•å±‚ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è®°å½•æ—¥å¿—ï¼Œæˆ‘ä»¬å”¯ä¸€éœ€è¦åšçš„æ˜¯ï¼Œå¼•å…¥å…¶ä»–æ¡†æ¶çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªæ¡†æ¶ä¾èµ–çš„æ—¥å¿—æ¡†æ¶æ’é™¤æ‰ã€‚</p><h2 id="6ã€æ—¥å¿—ä½¿ç”¨"><a href="#6ã€æ—¥å¿—ä½¿ç”¨" class="headerlink" title="6ã€æ—¥å¿—ä½¿ç”¨"></a>6ã€æ—¥å¿—ä½¿ç”¨</h2><h3 id="6-1-é»˜è®¤é…ç½®"><a href="#6-1-é»˜è®¤é…ç½®" class="headerlink" title="6.1 é»˜è®¤é…ç½®"></a>6.1 é»˜è®¤é…ç½®</h3><p>å½“æˆ‘ä»¬åˆå§‹åŒ–é¡¹ç›®è¿è¡Œåï¼Œè‡ªå·±æ²¡æœ‰é…ç½®æ—¥å¿—ï¼Œä½†æ§åˆ¶å°æ˜¯ç”±è¾“å‡ºä¿¡æ¯çš„</p><p>Spring Booté»˜è®¤å¸®æˆ‘ä»¬é…ç½®å¥½äº†æ—¥å¿—ï¼Œç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LoggerFactoryæ˜¯è®°å½•å™¨å·¥å‚ï¼Œè®°å½•å™¨</span></span><br><span class="line">Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ—¥å¿—çš„çº§åˆ«</span></span><br><span class="line"><span class="comment">    * ç”±ä½åˆ°é«˜ï¼štrace&lt;debug&lt;info&lt;waring&lt;error</span></span><br><span class="line"><span class="comment">    * å¯ä»¥è°ƒæ•´è¾“å‡ºçš„æ—¥å¿—çº§åˆ«</span></span><br><span class="line"><span class="comment">    * åªæ‰“å°é«˜çº§åˆ«å³ä»¥åï¼ˆæ›´é«˜çº§åˆ«ï¼‰çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  logger.trace(<span class="string">"è¿™æ˜¯è·Ÿè¸ªè½¨è¿¹æ—¥å¿—...trace..."</span>);</span><br><span class="line">  logger.debug(<span class="string">"è¿™æ˜¯è°ƒè¯•æ—¥å¿—...debug"</span>);</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Spring Booté»˜è®¤ä½¿ç”¨çš„æ˜¯infoçº§åˆ«çš„ï¼Œè¾“å‡ºinfoçº§åˆ«å³ä»¥åçš„å†…å®¹</span></span><br><span class="line"><span class="comment">    * æ²¡æœ‰æŒ‡å®šçº§åˆ«çš„å°±ç”¨Spring Booté»˜è®¤è§„å®šçš„çº§åˆ«ï¼ˆrootçº§åˆ«ï¼‰</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  logger.info(<span class="string">"è¿™æ˜¯ä¿¡æ¯æ—¥å¿—...info..."</span>);</span><br><span class="line">  logger.warn(<span class="string">"è¿™æ˜¯è­¦å‘Šä¿¡æ¯...warning..."</span>);</span><br><span class="line">  logger.error(<span class="string">"è¿™æ˜¯é”™è¯¯ä¿¡æ¯æ—¥å¿—ï¼Œå¼‚å¸¸æ•è·...error..."</span>);</span><br><span class="line">  <span class="comment">// ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹çº§åˆ«</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</p><ul><li>%dï¼šè¡¨ç¤ºæ—¶é—´</li><li>%threadï¼šè¡¨ç¤ºçº¿ç¨‹å</li><li>%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦</li><li>%logger{50}ï¼šè¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²</li><li>%msgï¼šæ—¥å¿—æ¶ˆæ¯</li><li>%nï¼šæ¢è¡Œ</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># traceåŠä»¥åçš„çº§åˆ«ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">logging.level.com.initializr</span>=<span class="string">trace</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆspringbootæ—¥å¿—æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨å†³å®šè·¯å¾„</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸æŒ‡å®šè·¯å¾„ï¼Œå°±åœ¨å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆ</span></span><br><span class="line"><span class="meta">logging.file</span>=<span class="string">springboot.log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨logging.pathå¯ä»¥ä¸ä½¿ç”¨logging.fileï¼Œä½¿ç”¨spring.logé»˜è®¤æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># åœ¨å½“å‰ç£ç›˜çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶ç”Ÿæˆæ—¥å¿—æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#logging.path=/spring/log</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼</span></span><br><span class="line"><span class="meta">logging.pattern.console</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span></span><br><span class="line"><span class="comment"># æŒ‡å®šæ–‡ä»¶ä¸­è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼</span></span><br><span class="line"><span class="meta">logging.pattern.file</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss&#125; === [%thread] === %-5level %logger&#123;50&#125; === %msg%n</span></span><br></pre></td></tr></table></figure><h3 id="6-2-è‡ªå®šä¹‰æ—¥å¿—ã€æŒ‡å®šé…ç½®"><a href="#6-2-è‡ªå®šä¹‰æ—¥å¿—ã€æŒ‡å®šé…ç½®" class="headerlink" title="6.2 è‡ªå®šä¹‰æ—¥å¿—ã€æŒ‡å®šé…ç½®"></a>6.2 è‡ªå®šä¹‰æ—¥å¿—ã€æŒ‡å®šé…ç½®</h3><p>å¯ä»<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/boot-features-logging.html">å®˜æ–¹æ–‡æ¡£-æ—¥å¿—</a>å‚è§ç¬¬26.5æ¡Custom log configuration</p><p>ç»™ç±»è·¯å¾„ä¸‹æ”¾ä¸Šæ¯ä¸ªæ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶å³å¯ï¼ŒSpring Bootå°±ä¸ä½¿ç”¨é»˜è®¤é…ç½®äº†</p><div class="table-container"><table><thead><tr><th>Logging System</th><th>Customization</th></tr></thead><tbody><tr><td>Logback</td><td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td></tr><tr><td>Log4j2</td><td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td></tr><tr><td>JDK (Java Util Logging)</td><td><code>logging.properties</code></td></tr></tbody></table></div><p><code>logback.xml</code>ï¼šç›´æ¥å°±è¢«æ—¥å¿—æ¡†æ¶è¯†åˆ«äº†</p><p><code>logback-spring.xml</code>ï¼šæ—¥å¿—æ¡†æ¶å°±ä¸ç›´æ¥åŠ è½½æ—¥å¿—çš„é…ç½®é¡¹ï¼Œç”±Spring Bootè§£ææ—¥å¿—é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨Spring Bootçš„é«˜çº§ProfileåŠŸèƒ½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"staging"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev, staging"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- configuration to be enabled when the "dev" or "staging" profiles are active --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!production"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æŒ‡å®šæŸæ®µé…ç½®åªåœ¨æŸä¸ªç¯å¢ƒä¸‹ç”Ÿæ•ˆ</p><p>å¦åˆ™å°±ä¼šæŠ¥é”™</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalStateException: Logback configuration error detected: </span><br><span class="line">ERROR <span class="keyword">in</span> ch.qos.logback.core.joran.spi.Interpreter@<span class="number">23</span>:<span class="number">39</span> - </span><br><span class="line">no applicable action <span class="keyword">for</span> [<span class="type">springProfile</span>]...</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>logback-spring.xml</code>é…ç½®æ–‡ä»¶æ—¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ§åˆ¶å°æ‰“å° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"STDOUT"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!dev"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="7ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶"><a href="#7ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶" class="headerlink" title="7ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶"></a>7ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶</h2><h3 id="7-1-ç°åœ¨æˆ‘ä»¬æƒ³ç”¨log4jå®ç°"><a href="#7-1-ç°åœ¨æˆ‘ä»¬æƒ³ç”¨log4jå®ç°" class="headerlink" title="7.1 ç°åœ¨æˆ‘ä»¬æƒ³ç”¨log4jå®ç°"></a>7.1 ç°åœ¨æˆ‘ä»¬æƒ³ç”¨log4jå®ç°</h3><p>æ ¹æ®ä¹‹å‰çš„åŸç†ï¼Œå°±è¦é™¤å»æœ‰å…³log4jçš„è½¬æ¢åŒ…ï¼Œç”¨åŸå§‹åŒ…ï¼›è¿˜è¦å¯¼å‡ºlogbackçš„jaråŒ…</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/exclude-logback.png" alt="Spring Boot"></p><p>IDEA-&gt;åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­é¼ æ ‡å³é”®-&gt;Diagrams-&gt;Show Dependencies-&gt;é€‰æ‹©è¦é™¤å»çš„jaråŒ…-&gt;é¼ æ ‡å³é”®-&gt;Exclude</p><p>å…¶ä»–çš„JCLå’ŒJCLæœ‰çš„æ¡†æ¶è¿˜è¦ç”¨ï¼Œæ‰€æœ‰è½¬æ¢åŒ…è¦ç•™ç€</p><p>ä½†log4j-over-slf4j.jarè¦å»æ‰ï¼Œè¿™æ˜¯ä¸ªæ›¿æ¢åŒ…ï¼Œé‡Œé¢çš„log4jéƒ½ç”¨å¤„slf4jäº†ï¼Œä½†ç°åœ¨æˆ‘ä»¬è¦ç”¨log4jäº†ï¼Œè€Œä¸æ˜¯æ›¿æ¢ï¼Œæ‰€ä»¥ä¹Ÿå°†å…¶æ’é™¤</p><p>æœ€ç»ˆï¼š</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/excluded.PNG" alt="Spring Boot"></p><p>é¢å‘slf4jç¼–ç¨‹ï¼Œç”¨log4jå®ç°</p><p>å¯¼å…¥ä¸€ä¸ªé€‚é…å±‚çš„åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å…¶æºç ï¼Œè‡ªåŠ¨å¯¼å…¥äº†log4jçš„æ¡†æ¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŒ‰ç…§slf4jçš„æ—¥å¿—é€‚é…å›¾ï¼Œè¿›è¡Œç›¸å…³çš„åˆ‡æ¢</p><p>å¾—åˆ°æœ€ç»ˆçš„pom.xmlæ–‡ä»¶é…ç½®ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-2-åˆ‡æ¢è‡³log4j2"><a href="#7-2-åˆ‡æ¢è‡³log4j2" class="headerlink" title="7.2 åˆ‡æ¢è‡³log4j2"></a>7.2 åˆ‡æ¢è‡³log4j2</h3><p>å‚é˜…<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/using-boot-build-systems.html#using-boot-starter">å®˜æ–¹æ–‡æ¡£</a>è¡¨13.3. Spring Boot technical starters</p><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/exclude-starter-logging.png" alt="Spring Boot"></p><p>æŒ‰ç…§ä¹‹å‰çš„æ“ä½œå°†<code>spring-boot-start-logging.jar</code>é™¤å»</p><p>åœ¨pom.xmlæ–‡ä»¶ä¸­å¯¼å…¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€æ—¥å¿—æ¡†æ¶&quot;&gt;&lt;a href=&quot;#1ã€æ—¥å¿—æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;1ã€æ—¥å¿—æ¡†æ¶&quot;&gt;&lt;/a&gt;1ã€æ—¥å¿—æ¡†æ¶&lt;/h2&gt;&lt;p&gt;æ•…äº‹ï¼šæœ‰ä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œå¼€å‘ä¸€ä¸ªå¤§å‹ç³»ç»Ÿï¼›&lt;/p&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Booté…ç½®</title>
    <link href="https://mysticalguest.github.io/2020/08/07/Spring/SpringBootConfig/"/>
    <id>https://mysticalguest.github.io/2020/08/07/Spring/SpringBootConfig/</id>
    <published>2020-08-07T11:29:02.683Z</published>
    <updated>2020-09-10T10:02:05.153Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€é…ç½®æ–‡ä»¶"><a href="#1ã€é…ç½®æ–‡ä»¶" class="headerlink" title="1ã€é…ç½®æ–‡ä»¶"></a>1ã€é…ç½®æ–‡ä»¶</h2><a id="more"></a><h3 id="1-1-æ–‡ä»¶ç±»å‹"><a href="#1-1-æ–‡ä»¶ç±»å‹" class="headerlink" title="1.1 æ–‡ä»¶ç±»å‹"></a>1.1 æ–‡ä»¶ç±»å‹</h3><p>Spring Bootä½¿ç”¨ä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åæ˜¯å›ºå®šçš„</p><ul><li>application.properties</li><li>application.yml</li></ul><p>é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šä¿®æ”¹Spring Bootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼ˆSpring Bootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½ï¼‰</p><p>YAML(YAML Ainâ€™t a Markup Language)</p><ul><li>YAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€çš„é€’å½’ç¼©å†™</li><li>åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</li></ul><p>æ ‡è®°è¯­è¨€</p><ul><li>ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå¤§å¤šéƒ½ä½¿ç”¨XMLæ–‡ä»¶</li><li>YAMLä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¯”JSONï¼ŒXMLç­‰æ›´é€‚åˆåšé…ç½®æ–‡ä»¶</li></ul><p>ä¾‹å­</p><p>YAML</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure><p>XML</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">port</span>&gt;</span>8081<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2ã€YAMLè¯­æ³•"><a href="#2ã€YAMLè¯­æ³•" class="headerlink" title="2ã€YAMLè¯­æ³•"></a>2ã€YAMLè¯­æ³•</h2><h3 id="2-1-åŸºæœ¬è¯­æ³•"><a href="#2-1-åŸºæœ¬è¯­æ³•" class="headerlink" title="2.1 åŸºæœ¬è¯­æ³•"></a>2.1 åŸºæœ¬è¯­æ³•</h3><p><code>key:(ç©ºæ ¼)value</code>è¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹</p><p>ä»¥<strong>ç©ºæ ¼</strong>çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯åšå¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯ç»Ÿä¸€å±‚çº§çš„</p><p>å±æ€§å’Œå€¼ä¹Ÿæ˜¯å¤§å°å†™æ•æ„Ÿ</p><h3 id="2-2-å€¼çš„å†™æ³•"><a href="#2-2-å€¼çš„å†™æ³•" class="headerlink" title="2.2 å€¼çš„å†™æ³•"></a>2.2 å€¼çš„å†™æ³•</h3><h4 id="å­—é¢é‡ï¼šæ™®é€šå€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰"><a href="#å­—é¢é‡ï¼šæ™®é€šå€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰" class="headerlink" title="å­—é¢é‡ï¼šæ™®é€šå€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰"></a>å­—é¢é‡ï¼šæ™®é€šå€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰</h4><p><code>key: value</code>å­—é¢ç›´æ¥æ¥å†™</p><p>å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–åŒå¼•å·</p><ul><li><p>åŒå¼•å·ï¼šä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€</p><p>name: â€œHello \n Worldâ€ï¼Œè¾“å‡ºï¼šHello æ¢è¡Œ World</p></li><li><p>å•å¼•å·ï¼šä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®</p><p>name: â€˜Hello \n Worldâ€™ï¼Œè¾“å‡ºï¼šHello \n World</p></li></ul><h4 id="å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰"><a href="#å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰" class="headerlink" title="å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰"></a>å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰</h4><p><code>key: value</code>åœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»ï¼Œæ³¨æ„ç¼©è¿›</p><p>å¯¹è±¡è¿˜æ˜¯<code>key: value</code>çš„æ–¹å¼</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">friends:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">Tom</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure><p>è¡Œå†…å†™æ³•</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">friends:</span> <span class="string">(name:</span> <span class="string">Tom,age</span> <span class="number">20</span><span class="string">)</span></span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„ï¼ˆListã€Setï¼‰"><a href="#æ•°ç»„ï¼ˆListã€Setï¼‰" class="headerlink" title="æ•°ç»„ï¼ˆListã€Setï¼‰"></a>æ•°ç»„ï¼ˆListã€Setï¼‰</h4><p>ç”¨<code>- value</code>è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pig</span></span><br></pre></td></tr></table></figure><p>è¡Œå†…å†™æ³•</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span> <span class="string">[cat,</span> <span class="string">dog,</span> <span class="string">pig]</span></span><br></pre></td></tr></table></figure><h3 id="2-3-é…ç½®æ–‡ä»¶å€¼æ³¨å…¥"><a href="#2-3-é…ç½®æ–‡ä»¶å€¼æ³¨å…¥" class="headerlink" title="2.3 é…ç½®æ–‡ä»¶å€¼æ³¨å…¥"></a>2.3 é…ç½®æ–‡ä»¶å€¼æ³¨å…¥</h3><p>é…ç½®æ–‡ä»¶<code>application.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">MysteryGuest</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">21</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">1999</span><span class="string">/01/09</span></span><br><span class="line">  <span class="attr">map:</span> <span class="string">&#123;k1:</span> <span class="string">v1,</span> <span class="attr">k2:</span> <span class="string">v2&#125;</span></span><br><span class="line">  <span class="attr">list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">China</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Hubei</span></span><br><span class="line">  <span class="attr">pet:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">niuniu</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><ul><li><code>@ConfigurationProperties</code>çš„æ–¹å¼</li></ul><p><code>javaBean</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªæ•°ç»„ä¸­</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ConfigurationProperties</span>: å‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="comment"> * prefix = "person": é…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨å®¹å™¨æä¾›çš„<span class="doctag">@ConfigurationProperties</span>åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">  <span class="keyword">private</span> Date birth;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;String, Object&gt; map;</span><br><span class="line">  <span class="keyword">private</span> List&lt;Object&gt; list;</span><br><span class="line">  <span class="keyword">private</span> Pet pet;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getter() and setter()</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åå°±æœ‰è‡ªåŠ¨æç¤ºäº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>@Value</code>çš„æ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦ä¸€ç§æ–¹å¼ï¼ŒSpringçš„åº•å±‚æ³¨è§£</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ç±»ä¼¼ä»¥å‰</span></span><br><span class="line"><span class="comment">    * &lt;bean class="Person"&gt;</span></span><br><span class="line"><span class="comment">    *     &lt;property name="name" value="MysteryGuest"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">    * &lt;/bean&gt;</span></span><br><span class="line"><span class="comment">    * &lt;bean&gt;æ ‡ç­¾ç›¸å½“äº<span class="doctag">@Compoent</span></span></span><br><span class="line"><span class="comment">    * &lt;property&gt;æ ‡ç­¾ä¸­çš„valueç›¸å½“äº<span class="doctag">@Value</span></span></span><br><span class="line"><span class="comment">    * valueçš„å‚æ•°å¯ä»¥æ˜¯å­—é¢é‡ã€$&#123;key&#125;ä»ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶è·å–å€¼ã€#&#123;SpEL&#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"$&#123;person.name&#125;"</span>)</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"#&#123;11*2&#125;"</span>)</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">  <span class="keyword">private</span> Date birth;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;String, Object&gt; map;</span><br><span class="line">  <span class="keyword">private</span> List&lt;Object&gt; list;</span><br><span class="line">  <span class="keyword">private</span> Pet pet;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getter() and setter()</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-Valueè·å–å€¼å’Œ-ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ"><a href="#2-4-Valueè·å–å€¼å’Œ-ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ" class="headerlink" title="2.4 @Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ"></a>2.4 @Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ</h3><div class="table-container"><table><thead><tr><th></th><th>@ConfigurationProperties</th><th>@Value</th></tr></thead><tbody><tr><td>åŠŸèƒ½</td><td>æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</td><td>ä¸€ä¸ªä¸€ä¸ªæŒ‡å®š</td></tr><tr><td>æ¾æ•£ç»‘å®šï¼ˆæ¾æ•£è¯­æ³•ï¼‰</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>SpELï¼ˆä¾‹ï¼š#{}ï¼‰</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>JSR303æ•°æ®æ ¡éªŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¤æ‚ç±»å‹å°è£…ï¼ˆä¾‹ï¼šMapï¼‰</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table></div><p>å±æ€§ååŒ¹é…è§„åˆ™ï¼ˆRelaxed bindingï¼Œæ¾æ•£ç»‘å®šï¼‰</p><ul><li><p>person.firstNameï¼šä½¿ç”¨æ ‡å‡†æ–¹å¼</p></li><li><p>person.first-nameï¼šå¤§å†™ç”¨-</p></li><li><p>person.first_nameï¼šå¤§å†™ç”¨_</p></li><li><p>PERSON_FIRST_NAEMï¼š</p><p>æ¨èç³»ç»Ÿå±æ€§ä½¿ç”¨è¿™ç§å†™æ³•</p></li></ul><p>é…ç½®æ–‡ä»¶ï¼ˆymlå’Œpropertiesï¼‰éƒ½èƒ½è·å–å€¼</p><p>å¦‚æœè¯´æˆ‘ä»¬åªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦è·å–ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œä½¿ç”¨<code>@value</code></p><p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªjavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨<code>@ConfigurationProperties</code></p><h3 id="2-5-é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ ¡éªŒ"><a href="#2-5-é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ ¡éªŒ" class="headerlink" title="2.5 é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ ¡éªŒ"></a>2.5 é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ ¡éªŒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="meta">@Validated</span> <span class="comment">// JSR303æ•°æ®æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Email</span> <span class="comment">// @valueä¸æ”¯æŒ</span></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">  <span class="keyword">private</span> Date birth;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;String, Object&gt; map;</span><br><span class="line">  <span class="keyword">private</span> List&lt;Object&gt; list;</span><br><span class="line">  <span class="keyword">private</span> Pet pet;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getter() and setter()</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€-PropertySourceå’Œ-ImportResource"><a href="#3ã€-PropertySourceå’Œ-ImportResource" class="headerlink" title="3ã€@PropertySourceå’Œ@ImportResource"></a>3ã€@PropertySourceå’Œ@ImportResource</h2><p><code>@PropertySource</code>ç”¨æ¥åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PropertySource</span>(value = &#123;<span class="string">"classpath:person.properties"</span>&#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;...&#125;</span><br></pre></td></tr></table></figure><p><code>@ImportResource</code>å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆ</p><p>Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«</p><p>æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼Œ<code>@ImportResource</code>æ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource</span>(locations = &#123;<span class="string">"classpath:beans.xml"</span>&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-1-Spring-Bootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼"><a href="#3-1-Spring-Bootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼" class="headerlink" title="3.1 Spring Bootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼"></a>3.1 Spring Bootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼</h3><p>ä¸æ¥ç¼–å†™Springçš„é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">  http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="tag"><span class="string">  http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"helloService"</span> <span class="attr">class</span>=<span class="string">"com.initializr.service.HelloService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>@Beanæ—¢å¯ä»¥æ ‡è®°åœ¨ç±»ä¸Šï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå…ƒæ³¨è§£</p><p><strong>æ¨èä½¿ç”¨å…¨æ³¨è§£çš„æ–¹å¼</strong></p><ul><li>é…ç½®ç±»â€”â€”â€”-Springé…ç½®æ–‡ä»¶</li><li>ä½¿ç”¨@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Configuration</span>æŒ‡æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå°±æ˜¯æ¥æ›¿ä»£ä¹‹å‰çš„Springé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ä»¥å‰åœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨&lt;bean&gt;&lt;/bean&gt;æ ‡ç­¾æ·»åŠ ç»„ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span> <span class="comment">// å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> HelloService <span class="title">helloService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"é…ç½®ç±»ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶äº†..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> HelloService();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"><a href="#4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦" class="headerlink" title="4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦"></a>4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</h2><h3 id="4-1-éšæœºæ•°"><a href="#4-1-éšæœºæ•°" class="headerlink" title="4.1 éšæœºæ•°"></a>4.1 éšæœºæ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;random.uuid&#125;  $&#123;random.<span class="keyword">int</span>&#125;  $&#123;random.<span class="keyword">long</span>&#125;</span><br><span class="line">$&#123;random.<span class="keyword">int</span>(<span class="number">10</span>)&#125;  $&#123;random.<span class="keyword">int</span>[<span class="number">1024</span>,<span class="number">65536</span>]&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰é…ç½®å€¼ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼"><a href="#4-2-å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰é…ç½®å€¼ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼" class="headerlink" title="4.2 å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰é…ç½®å€¼ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼"></a>4.2 å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰é…ç½®å€¼ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">person.name=MysticalGuest$&#123;random.uuid&#125;</span><br><span class="line">person.age=$&#123;random.<span class="keyword">int</span>&#125;</span><br><span class="line">person.birth=<span class="number">1999</span>/<span class="number">01</span>/<span class="number">09</span></span><br><span class="line">person.map.k1=v1</span><br><span class="line">person.map.k2=v2</span><br><span class="line">person.list=[a, b, c]</span><br><span class="line">person.pet.name=$&#123;person.hello:hello&#125;$&#123;person.name&#125;<span class="string">'s dog</span></span><br><span class="line"><span class="string"># å¦‚æœæ–‡ä»¶ä¸­æ²¡æœ‰å®šä¹‰person.helloï¼Œé‚£ä¹ˆå–åé¢çš„helloå€¼</span></span><br><span class="line"><span class="string">person.pet.age=6</span></span><br></pre></td></tr></table></figure><h2 id="5ã€Profile"><a href="#5ã€Profile" class="headerlink" title="5ã€Profile"></a>5ã€Profile</h2><p>Profileæ˜¯Springå¯¹ä¸åŒç¯å¢ƒæä¾›ä¸åŒé…ç½®åŠŸèƒ½çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¿€æ´»ã€æŒ‡å®šå‚æ•°ç­‰æ–¹å¼å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒ</p><h3 id="5-1-å¤šProfileæ–‡ä»¶"><a href="#5-1-å¤šProfileæ–‡ä»¶" class="headerlink" title="5.1 å¤šProfileæ–‡ä»¶"></a>5.1 å¤šProfileæ–‡ä»¶</h3><p>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯application-{profile}.properties/yml</p><p>é»˜è®¤ä½¿ç”¨application.properties/ymlçš„é…ç½®</p><h3 id="5-2-ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼"><a href="#5-2-ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼" class="headerlink" title="5.2 ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼"></a>5.2 ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8085</span></span><br><span class="line">  <span class="attr">spring:</span></span><br><span class="line">    <span class="attr">profiles:</span> <span class="string">prod</span></span><br></pre></td></tr></table></figure><h3 id="5-3-æ¿€æ´»æŒ‡å®šprofile"><a href="#5-3-æ¿€æ´»æŒ‡å®šprofile" class="headerlink" title="5.3 æ¿€æ´»æŒ‡å®šprofile"></a>5.3 æ¿€æ´»æŒ‡å®šprofile</h3><ul><li>æŒ‡å®šæ¿€æ´»å¼€å‘ç¯å¢ƒé…ç½®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.profiles.active=dev</span><br></pre></td></tr></table></figure><ul><li><p>ç¼–è¾‘è¿è¡Œé…ç½®å‚æ•°</p><p><code>--spring.profiles.active=dev</code></p></li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/profile.png" alt="Spring Boot"></p><ul><li><p>å‘½ä»¤è¡Œ</p><p>æ‰“åŒ…åè¿è¡Œé¡¹ç›®ï¼Œåˆ‡æ¢ç«¯å£ï¼Œé…ç½®ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> java <span class="literal">-jar</span> target/myproject<span class="literal">-0</span>.<span class="number">0.1</span><span class="literal">-SNAPSHOT</span>.jar -<span class="literal">-spring</span>.profiles.active=dev</span><br></pre></td></tr></table></figure></li><li><p>è™šæ‹Ÿæœºå‚æ•°</p><p><code>-Dspring.profiles.active=dev</code></p></li></ul><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/vm.png" alt="Spring Boot"></p><h2 id="6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"><a href="#6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®" class="headerlink" title="6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"></a>6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h2><p>Spring Bootå¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„<code>application.properties</code>æˆ–è€…<code>application.yml</code>æ–‡ä»¶ä½œä¸º Spring Bootçš„é»˜è®¤é…ç½®æ–‡ä»¶</p><ul><li><p>file: ./config/       fileä¸ºå½“å‰é¡¹ç›®ç›®å½•</p></li><li><p>file: ./</p></li><li><p>classpath: /config/</p></li><li><p>classpath: /</p></li><li><p>ä»¥ä¸Šæ˜¯æŒ‰ç…§<strong>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½</strong>çš„é¡ºåºï¼Œæ‰€æœ‰ä½ç½®çš„æ–‡ä»¶éƒ½ä¼šè¢«åŠ è½½ï¼Œ<strong>é«˜ä¼˜å…ˆ</strong><br><strong>çº§é…ç½®</strong>å†…å®¹ä¼š<strong>è¦†ç›–ä½ä¼˜å…ˆçº§é…ç½®</strong>å†…å®¹ï¼›Spring Bootä¼šä»è¿™4ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼Œ<strong>äº’è¡¥é…ç½®</strong></p></li><li><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®<code>spring.config.location</code>æ¥æ”¹å˜é»˜è®¤é…ç½®</p><p>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„ä¸»é…ç½®æ–‡ä»¶</p></li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> java <span class="literal">-jar</span> target/myproject<span class="literal">-0</span>.<span class="number">0.1</span><span class="literal">-SNAPSHOT</span>.jar -<span class="literal">-spring</span>.config.location=D:/application.properties</span><br></pre></td></tr></table></figure><p>  ä»¥ä¾¿è¿ç»´çš„æ—¶å€™ä¿®æ”¹æŸäº›é…ç½®</p><h2 id="7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"><a href="#7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº" class="headerlink" title="7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"></a>7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</h2><p>Spring Bootæ”¯æŒå¤šç§å¤–éƒ¨é…ç½®æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä»ä»¥ä¸‹ä½ç½®åŠ è½½é…ç½®ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®è¦†ç›–ç¬¬ä¼˜å…ˆçº§çš„é…ç½®ï¼Œæ‰€æœ‰çš„é…ç½®ä¼šå½¢æˆäº’è¡¥é…ç½®</p><p>è¿™äº›æ–¹å¼ä¼˜å…ˆçº§å¦‚ä¸‹ï¼Œå¯ä»¥å‚é˜…<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/boot-features-external-config.html">å®˜æ–¹æ–‡æ¡£</a></p><ol><li><strong>å‘½ä»¤è¡Œå‚æ•°</strong></li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> java <span class="literal">-jar</span> target/myproject<span class="literal">-0</span>.<span class="number">0.1</span><span class="literal">-SNAPSHOT</span>.jar -<span class="literal">-server</span>.port=<span class="number">8089</span> -<span class="literal">-server</span>.context<span class="literal">-path</span>=/initcmd</span><br></pre></td></tr></table></figure><ol><li><p>æ¥è‡ª java: comp/envçš„JNDIå±æ€§</p></li><li><p>Javaç³»ç»Ÿå±æ€§( System getProperties() )</p></li><li><p>æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡</p></li><li><p>RandomValuePropertySourceé…ç½®çš„Random.*å±æ€§å€¼</p></li><li><p><strong>jaråŒ…å¤–éƒ¨çš„application-{profile}.propertiesæˆ–application.ymlï¼ˆå¸¦spring.profileï¼‰é…ç½®æ–‡ä»¶</strong></p><blockquote><p>ç”±jaråŒ…å¤–å‘jaråŒ…å†…è¿›è¡Œå¯»æ‰¾ï¼Œä¼˜å…ˆåŠ è½½å¸¦profile</p></blockquote></li><li><p><strong>jaråŒ…å†…éƒ¨çš„application-{profile}-propertiesæˆ–application.ymlï¼ˆspring profile)é…ç½®æ–‡ä»¶</strong></p></li><li><p><strong>jaråŒ…å¤–éƒ¨çš„application.propertiesæˆ–applcation.ymlï¼ˆä¸å¸¦spring.profileï¼‰é…ç½®æ–‡ä»¶</strong></p></li><li><p><strong>jaråŒ…å†…éƒ¨çš„application.propertiesæˆ–application.ymlï¼ˆä¸å¸¦spring.profileï¼‰é…ç½®æ–‡ä»¶</strong></p></li><li><p>@Configurationæ³¨è§£ç±»ä¸Šçš„@PropertySource</p></li><li><p>é€šè¿‡SpringApplication.setDefaultPropertiesæŒ‡å®šçš„é»˜è®¤å±æ€§</p></li></ol><h2 id="8ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#8ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="8ã€è‡ªåŠ¨é…ç½®åŸç†"></a>8ã€è‡ªåŠ¨é…ç½®åŸç†</h2><p>é…ç½®ä¾æ®<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/common-application-properties.html">å®˜æ–¹æ–‡æ¡£</a></p><ul><li><p>Spring Bootå¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½<code>@EnableAuto Configuratio</code></p></li><li><p>@EnableAutoConfigurationä½œç”¨</p><ul><li>åˆ©ç”¨<code>EnableAutoConfigurationlmportSelector</code>ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶?<br>å¯ä»¥æŸ¥çœ‹<code>selectImports()</code>æ–¹æ³•çš„å†…å®¹</li><li>List<String> configurations = getCandidateConfigurations(annotation Metadata, attributes)è·å–å€™é€‰çš„é…ç½®</li><li>SpringFactorfesLoader.loadFactoryNames()<br>æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹ META-INF/ spring.factories<br>æŠŠæ‰«æåˆ°çš„è¿™äº›æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡<br>ä»propertiesä¸­è·å–åˆ°EnableAutoconfiguration.classç±»ï¼ˆç±»åï¼‰å¯¹åº”çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åœ¨å™¨ä¸­</li><li>å°†ç±»è·¯å¾„ä¸‹ META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰ EnableAutoConfigurationçš„å€¼åŠ å…¥åˆ°äº†å®¹å™¨ä¸­</li></ul></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Auto Configure</span></span><br><span class="line"><span class="meta">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">\</span></span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\</span><br><span class="line"><span class="attr">...</span></span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\</span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration</span></span><br></pre></td></tr></table></figure><p> æ¯ä¸€ä¸ªè¿™æ ·çš„<code>xxxAutoConfiguration</code>ç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œç”¨ä»–ä»¬æ¥åšè‡ªåŠ¨é…ç½®</p><ul><li>æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½</li></ul><h2 id="8-1-ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†"><a href="#8-1-ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="8.1 ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†"></a>8.1 ä»¥HttpEncodingAutoConfigurationä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(&#123;HttpEncodingProperties<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnWebApplication</span></span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnClass</span>(</span>&#123;CharacterEncodingFilter<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnProperty</span>(</span></span><br><span class="line"><span class="class">  <span class="title">prefix</span> </span>= <span class="string">"spring.http.encoding"</span>,</span><br><span class="line">  value = &#123;<span class="string">"enabled"</span>&#125;,</span><br><span class="line">  matchIfMissing = <span class="keyword">true</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingAutoConfiguration</span> </span>&#123;</span><br><span class="line">  <span class="comment">// å·²ç»å’ŒSpring Bootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> HttpEncodingProperties properties;</span><br><span class="line">  <span class="comment">// åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">HttpEncodingAutoConfiguration</span><span class="params">(HttpEncodingProperties properties)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.properties = properties;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Bean</span> <span class="comment">// ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean</span>(&#123;CharacterEncodingFilter<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">  <span class="title">public</span> <span class="title">CharacterEncodingFilter</span> <span class="title">characterEncodingFilter</span>() </span>&#123;</span><br><span class="line">    CharacterEncodingFilter filter = <span class="keyword">new</span> OrderedCharacterEncodingFilter();</span><br><span class="line">    filter.setEncoding(<span class="keyword">this</span>.properties.getCharset().name());</span><br><span class="line">    filter.setForceRequestEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.REQUEST));</span><br><span class="line">    filter.setForceResponseEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.RESPONSE));</span><br><span class="line">    <span class="keyword">return</span> filter;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>@Configuration</code>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä¹‹å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p></li><li><p><code>@EnableConfigurationProperties</code>å¯ç”¨æŒ‡å®šç±»ConfigurationPropertiesåŠŸèƒ½ï¼Œå°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpEncodingPropertiesç»‘å®šèµ·æ¥ï¼›å¹¶æŠŠHttpEncodingPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­ï¼Œå°±å¯ä»¥ç”¨äº†</p></li><li><p>æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…ç€ï¼Œé…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">  prefix = <span class="string">"spring.http.encoding"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingProperties</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_CHARSET = Charset.forName(<span class="string">"UTF-8"</span>);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>@ConfigurationProperties(prefix = &quot;spring.http.encoding&quot;)</code>ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š</p></blockquote><ul><li><p><code>@ConditionalOnWebApplication</code>æ˜¯Springåº•å±‚@Conditionalæ³¨è§£ï¼Œæ ¹æ®ä¸åŒæ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›</p><p>è¿™ä¸ªæ³¨è§£æ˜¯åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ</p></li><li><p><code>@ConditionalOnClass</code>åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰æŒ‡å®šç±»CharacterEncodingFilter.class</p></li><li><p><code>CharacterEncodingFilter.class</code>æ˜¯SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼Œä»¥å‰éƒ½æ˜¯é…ç½®åœ¨web.xmlä¸­çš„</p></li><li><p><code>@ConditionalOnProperty</code>åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®spring.http.encoding.enabledï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„</p><p>å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®spring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„</p></li></ul><p>ä¸€å¥è¯è§£é‡Šè¿™ä¸ªé…ç½®ç±»ï¼Œæ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ</p><p>ä¸€æ—¦è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼Œè¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„</p><h3 id="8-2-Spring-Bootç²¾é«“"><a href="#8-2-Spring-Bootç²¾é«“" class="headerlink" title="8.2 Spring Bootç²¾é«“"></a>8.2 Spring Bootç²¾é«“</h3><ul><li>SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</li><li>æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰Spring Booté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»</li><li>æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼ˆåªè¦æœ‰æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®äº†ï¼Œå¦åˆ™ï¼Œè‡ªå·±é…ç½®æ·»åŠ ï¼Œä¸æ»¡æ„ä¹Ÿå¯ä»¥æ”¹ï¼‰</li><li>ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼</li></ul><p><code>xxxAutoConfiguration</code>ï¼šè‡ªåŠ¨é…ç½®ç±»ï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p><p><code>xxxproperties</code>ï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§</p><h3 id="8-3-ç»†èŠ‚"><a href="#8-3-ç»†èŠ‚" class="headerlink" title="8.3 ç»†èŠ‚"></a>8.3 ç»†èŠ‚</h3><p>åœ¨HttpEncodingAutoConfigurationé…ç½®é‡Œä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(&#123;CharacterEncodingFilter<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">CharacterEncodingFilter</span> <span class="title">characterEncodingFilter</span>() </span>&#123;</span><br><span class="line">  CharacterEncodingFilter filter = <span class="keyword">new</span> OrderedCharacterEncodingFilter();</span><br><span class="line">  filter.setEncoding(<span class="keyword">this</span>.properties.getCharset().name());</span><br><span class="line">  filter.setForceRequestEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.REQUEST));</span><br><span class="line">  filter.setForceResponseEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.RESPONSE));</span><br><span class="line">  <span class="keyword">return</span> filter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ–¹æ³•ä¸Šä¹Ÿæœ‰ä¸€ä¸ªæ³¨è§£ï¼Œåˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦é…ç½®äº†è¿™ä¸ªç»„ä»¶ï¼Œå¦‚æœæ²¡æœ‰åˆ™ç”Ÿæ•ˆï¼Œè¿›è¡Œé…ç½®</p></blockquote><ul><li><p><code>@Conditional</code>æ´¾ç”Ÿæ³¨è§£</p><p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®æ–‡ä»¶é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆ</p></li></ul><div class="table-container"><table><thead><tr><th>Conditionalæ‰©å±æ³¨è§£</th><th>ä½œç”¨(åˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰æŒ‡å®šæ¡ä»¶)</th></tr></thead><tbody><tr><td>@ConditionalOnJava</td><td>ç³»ç»Ÿçš„javaç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</td></tr><tr><td>@ConditionalOnBean</td><td>å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šBean</td></tr><tr><td>@ConditionalOnMissingBean</td><td>å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBean</td></tr><tr><td>@ConditionalOnExpression</td><td>æ»¡è¶³SpELè¡¨è¾¾å¼æŒ‡å®š</td></tr><tr><td>@ConditionalOnClass</td><td>ç³»ç»Ÿä¸­æœ‰æŒ‡å®šçš„ç±»</td></tr><tr><td>@ConditionalOnMissingClass</td><td>ç³»ç»Ÿä¸­æ²¡æœ‰æŒ‡å®šçš„ç±»</td></tr><tr><td>@ConditionalOnSingleCandidate</td><td>å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªæŒ‡å®šçš„Beanï¼Œæˆ–è€…è¿™ä¸ªBeanæ˜¯é¦–é€‰Bean</td></tr><tr><td>@ConditionalOnProperty</td><td>ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼</td></tr><tr><td>@ConditionalOnResource</td><td>ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶</td></tr><tr><td>@ConditionalOnWebApplication</td><td>å½“å‰æ˜¯webç¯å¢ƒ</td></tr><tr><td>Conditionalon NotWebApplication</td><td>å½“å‰ä¸æ˜¯webç¯å¢ƒ</td></tr><tr><td>@ConditionalOnJndi</td><td>JNDIå­˜åœ¨æŒ‡å®šé¡¹</td></tr></tbody></table></div><blockquote><p>è™½ç„¶è‡ªåŠ¨é…ç½®ç±»å¾ˆå¤šï¼Œä½†å¤§å¤šéƒ½éœ€è¦ä¸€å®šæ¡ä»¶æ‰ä¼šç”Ÿæ•ˆ</p><p>ä¹‹å‰è§£æè¿‡ç¨‹ä¸­ï¼Œè™½ç„¶åŠ è½½äº†å¾ˆå¤šè‡ªåŠ¨é…ç½®ç±»ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„éƒ½ç”Ÿæ•ˆ</p></blockquote><ul><li>ç°åœ¨é‡è¦çš„æ˜¯æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›é…ç½®ç±»ç”Ÿæ•ˆäº†</li></ul><p>æˆ‘ä»¬å¯ä»¥å¯ç”¨debugå±æ€§</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯Springçš„debugï¼Œé»˜è®¤false</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œåè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">=========================</span><br><span class="line">AUTO<span class="literal">-CONFIGURATION</span> REPORT</span><br><span class="line">=========================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Positive matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">  DispatcherServletAutoConfiguration matched:</span><br><span class="line">      - @ConditionalOnClass found required <span class="class"><span class="keyword">class</span> </span></span><br><span class="line"><span class="class">      '<span class="title">org</span>.<span class="title">springframework</span>.<span class="title">web</span>.<span class="title">servlet</span>.<span class="title">DispatcherServlet</span>';</span></span><br><span class="line"><span class="class">      @<span class="title">ConditionalOnMissingClass</span> <span class="title">did</span> <span class="title">not</span> <span class="title">find</span> <span class="title">unwanted</span> <span class="title">class</span> (<span class="title">OnClassCondition</span>)</span></span><br><span class="line"><span class="class">      - @<span class="title">ConditionalOnWebApplication</span> (<span class="title">required</span>) <span class="title">found</span> <span class="title">StandardServletEnvironment</span> </span></span><br><span class="line"><span class="class">      (<span class="title">OnWebApplicationCondition</span>)</span></span><br><span class="line"><span class="class">   ...</span></span><br><span class="line"><span class="class"><span class="title">Negative</span> <span class="title">matches</span>:</span></span><br><span class="line"><span class="class">-----------------</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">   <span class="title">ActiveMQAutoConfiguration</span>:</span></span><br><span class="line"><span class="class">      <span class="title">Did</span> <span class="title">not</span> <span class="title">match</span>:</span></span><br><span class="line"><span class="class">        - @<span class="title">ConditionalOnClass</span> <span class="title">did</span> <span class="title">not</span> <span class="title">find</span> <span class="title">required</span> </span></span><br><span class="line"><span class="class">        <span class="title">classes</span> '<span class="title">javax</span>.<span class="title">jms</span>.<span class="title">ConnectionFactory</span>', </span></span><br><span class="line"><span class="class">        '<span class="title">org</span>.<span class="title">apache</span>.<span class="title">activemq</span>.<span class="title">ActiveMQConnectionFactory</span>' (<span class="title">OnClassCondition</span>)</span></span><br><span class="line"><span class="class">   ...</span></span><br><span class="line"><span class="class"><span class="title">Unconditional</span> <span class="title">classes</span>:</span></span><br><span class="line"><span class="class">----------------------</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">boot</span>.<span class="title">autoconfigure</span>.<span class="title">context</span>.<span class="title">ConfigurationPropertiesAutoConfiguration</span></span></span><br><span class="line"><span class="class">    ...</span></span><br></pre></td></tr></table></figure><ul><li>Positive matchesï¼šè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„<br>Negative matchesï¼šæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€é…ç½®æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#1ã€é…ç½®æ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;1ã€é…ç½®æ–‡ä»¶&quot;&gt;&lt;/a&gt;1ã€é…ç½®æ–‡ä»¶&lt;/h2&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootå…¥é—¨ï¼Œæºç è§£æ</title>
    <link href="https://mysticalguest.github.io/2020/08/07/Spring/SpringBootStart/"/>
    <id>https://mysticalguest.github.io/2020/08/07/Spring/SpringBootStart/</id>
    <published>2020-08-07T01:38:45.171Z</published>
    <updated>2020-09-10T09:26:34.389Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€Spring-Bootç®€ä»‹"><a href="#1ã€Spring-Bootç®€ä»‹" class="headerlink" title="1ã€Spring Bootç®€ä»‹"></a>1ã€Spring Bootç®€ä»‹</h2><p>ç®€åŒ–Springåº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æ¶</p><p>æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§æ•´åˆ</p><a id="more"></a><p>J2EEå¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ</p><h2 id="2ã€å¾®æœåŠ¡"><a href="#2ã€å¾®æœåŠ¡" class="headerlink" title="2ã€å¾®æœåŠ¡"></a>2ã€å¾®æœåŠ¡</h2><p>2014ï¼Œ<a href="https://martinfowler.com/">Martin Fowler</a>å¾®æœåŠ¡<a href="https://martinfowler.com/microservices/">è®ºæ–‡</a></p><p>å¾®æœåŠ¡ï¼šæ¶æ„é£æ ¼ï¼ˆæœåŠ¡å¾®åŒ–ï¼‰</p><p>æ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒ</p><p>ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°å‹æœåŠ¡ï¼šå¯ä»¥é€šè¿‡HTTPçš„æ–¹å¼è¿›è¡Œäº’é€š</p><p>å•ä½“åº”ç”¨</p><p>ç¯å¢ƒçº¦æŸï¼ˆæˆ‘çš„å¼€å‘ç¯å¢ƒï¼‰ï¼š</p><ul><li>JDK8ï¼šjava version â€œ1.8.0_131â€</li><li>Maven3.xï¼šApache Maven 3.6.3</li><li>IntelliJ IDEA2019.2</li><li>SpringBoot 1.5.9.RELEASE</li></ul><h2 id="3ã€Spring-Boot-HelloWorld"><a href="#3ã€Spring-Boot-HelloWorld" class="headerlink" title="3ã€Spring Boot HelloWorld"></a>3ã€Spring Boot HelloWorld</h2><p>ä¸€ä¸ªåŠŸèƒ½ï¼š</p><p>æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”â€Hello Worldâ€å­—ç¬¦ä¸²</p><h3 id="3-1-åˆ›å»ºä¸€ä¸ªMavenå·¥ç¨‹"><a href="#3-1-åˆ›å»ºä¸€ä¸ªMavenå·¥ç¨‹" class="headerlink" title="3.1 åˆ›å»ºä¸€ä¸ªMavenå·¥ç¨‹"></a>3.1 åˆ›å»ºä¸€ä¸ªMavenå·¥ç¨‹</h3><h3 id="3-2-å¯¼å…¥ä¾èµ–Spring-Bootç›¸å…³çš„ä¾èµ–"><a href="#3-2-å¯¼å…¥ä¾èµ–Spring-Bootç›¸å…³çš„ä¾èµ–" class="headerlink" title="3.2 å¯¼å…¥ä¾èµ–Spring Bootç›¸å…³çš„ä¾èµ–"></a>3.2 å¯¼å…¥ä¾èµ–Spring Bootç›¸å…³çš„ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Inherit defaults from Spring Boot --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Add typical dependencies for a web application --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åº"><a href="#3-3-ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åº" class="headerlink" title="3.3 ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åº"></a>3.3 ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åº</h3><p>å¯åŠ¨Spring Bootåº”ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    SpringApplication.run(DemoApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(@RequestParam(value = <span class="string">"name"</span>, defaultValue = <span class="string">"World"</span>)</span> String name) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> String.format(<span class="string">"Hello %s!"</span>, name);</span><br><span class="line">  &#125;      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-ç¼–å†™ç›¸å…³çš„Controllerã€Serviceå±‚"><a href="#3-4-ç¼–å†™ç›¸å…³çš„Controllerã€Serviceå±‚" class="headerlink" title="3.4 ç¼–å†™ç›¸å…³çš„Controllerã€Serviceå±‚"></a>3.4 ç¼–å†™ç›¸å…³çš„Controllerã€Serviceå±‚</h3><h3 id="3-5-è¿è¡Œä¸»ç¨‹åºæµ‹è¯•"><a href="#3-5-è¿è¡Œä¸»ç¨‹åºæµ‹è¯•" class="headerlink" title="3.5 è¿è¡Œä¸»ç¨‹åºæµ‹è¯•"></a>3.5 è¿è¡Œä¸»ç¨‹åºæµ‹è¯•</h3><h3 id="3-6-ç®€åŒ–éƒ¨ç½²"><a href="#3-6-ç®€åŒ–éƒ¨ç½²" class="headerlink" title="3.6 ç®€åŒ–éƒ¨ç½²"></a>3.6 ç®€åŒ–éƒ¨ç½²</h3><p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/getting-started-first-application.html#getting-started-first-application-executable-jar">Springå®˜æ–¹éƒ¨ç½²æ–‡æ¡£</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™ä¸ªæ’ä»¶å¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œè¯·ä½¿ç”¨java -jarå‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> java <span class="literal">-jar</span> target/myproject<span class="literal">-0</span>.<span class="number">0.1</span><span class="literal">-SNAPSHOT</span>.jar</span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___<span class="string">'_ __ _ _(_)_ __  __ _ \ \ \ \</span></span><br><span class="line"><span class="string">( ( )\___ | '</span>_ | <span class="string">'_| | '</span>_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  <span class="string">'  |____| .__|_| |_|_| |_\__, | / / / /</span></span><br><span class="line"><span class="string"> =========|_|==============|___/=/_/_/_/</span></span><br><span class="line"><span class="string"> :: Spring Boot ::  (v1.5.9.RELEASE)</span></span><br><span class="line"><span class="string">....... . . .</span></span><br><span class="line"><span class="string">....... . . . (log output here)</span></span><br><span class="line"><span class="string">....... . . .</span></span><br><span class="line"><span class="string">........ Started Example in 2.536 seconds (JVM running for 2.864)</span></span><br></pre></td></tr></table></figure><h2 id="4ã€Hello-Worldæ¢ç©¶"><a href="#4ã€Hello-Worldæ¢ç©¶" class="headerlink" title="4ã€Hello Worldæ¢ç©¶"></a>4ã€Hello Worldæ¢ç©¶</h2><h3 id="4-1-POMæ–‡ä»¶"><a href="#4-1-POMæ–‡ä»¶" class="headerlink" title="4.1 POMæ–‡ä»¶"></a>4.1 POMæ–‡ä»¶</h3><p>çˆ¶é¡¹ç›®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Ctrl+é¼ æ ‡å·¦é”®æŸ¥çœ‹åº•å±‚æºç ï¼Œä¸Šé¢è¿™ä¸ªçˆ¶é¡¹ç›®è¿˜ä¾èµ–äº</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../../spring-boot-dependencies<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®ç°çœŸæ­£ç®¡ç†Spring Bootåº”ç”¨é‡Œé¢çš„æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬</p><p>Spring Bootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Dependency versions --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activemq.version</span>&gt;</span>5.14.5<span class="tag">&lt;/<span class="name">activemq.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">antlr2.version</span>&gt;</span>2.7.7<span class="tag">&lt;/<span class="name">antlr2.version</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="tag">&lt;<span class="name">maven-war-plugin.version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">maven-war-plugin.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">versions-maven-plugin.version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">versions-maven-plugin.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼ˆæ²¡æœ‰åœ¨dependenciesé‡Œé¢ç®¡ç†çš„ä¾èµ–è‡ªç„¶éœ€è¦å£°æ˜ç‰ˆæœ¬å·ï¼‰</p><h3 id="4-2-å¯¼å…¥çš„ä¾èµ–"><a href="#4-2-å¯¼å…¥çš„ä¾èµ–" class="headerlink" title="4.2 å¯¼å…¥çš„ä¾èµ–"></a>4.2 å¯¼å…¥çš„ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>spring-boot-starter</strong>-<strong>web</strong></p><ul><li>spring-boot-starterï¼šspring-bootåœºæ™¯å¯åŠ¨å™¨ï¼›å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶</li><li><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/using-boot-build-systems.html#using-boot-starter">æ›´å¤šå¯åŠ¨å™¨</a></li><li>Spring Bootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„starterï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®é‡Œå¼•å…¥è¿™äº›starterç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨</li></ul><h3 id="4-3-ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"><a href="#4-3-ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»" class="headerlink" title="4.3 ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"></a>4.3 ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br></pre></td></tr></table></figure><blockquote><p>Spring Bootåº”ç”¨æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯Spring Bootçš„ä¸»é…ç½®ç±»ï¼ŒSpring Bootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨Spring Bootåº”ç”¨</p><p>ç‚¹å‡»è¿™ä¸ªæ³¨è§£ï¼ˆannotationï¼‰æŸ¥çœ‹æºç </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(</span><br><span class="line">    excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">), @<span class="title">Filter</span>(</span></span><br><span class="line"><span class="class">    <span class="title">type</span> </span>= FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter<span class="class">.<span class="keyword">class</span>&#125;</span></span><br><span class="line"><span class="class">)&#125;</span></span><br><span class="line"><span class="class">)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">SpringBootApplication</span> </span>&#123;</span><br><span class="line">  <span class="meta">@AliasFor</span>(</span><br><span class="line">    annotation = EnableAutoConfiguration<span class="class">.<span class="keyword">class</span>,</span></span><br><span class="line"><span class="class">    <span class="title">attribute</span> </span>= <span class="string">"exclude"</span></span><br><span class="line">  )</span><br><span class="line">  Class&lt;?&gt;[] exclude() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@AliasFor</span>(</span><br><span class="line">    annotation = EnableAutoConfiguration<span class="class">.<span class="keyword">class</span>,</span></span><br><span class="line"><span class="class">    <span class="title">attribute</span> </span>= <span class="string">"excludeName"</span></span><br><span class="line">  )</span><br><span class="line">  String[] excludeName() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@AliasFor</span>(</span><br><span class="line">    annotation = ComponentScan<span class="class">.<span class="keyword">class</span>,</span></span><br><span class="line"><span class="class">    <span class="title">attribute</span> </span>= <span class="string">"basePackages"</span></span><br><span class="line">  )</span><br><span class="line">  String[] scanBasePackages() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@AliasFor</span>(</span><br><span class="line">    annotation = ComponentScan<span class="class">.<span class="keyword">class</span>,</span></span><br><span class="line"><span class="class">    <span class="title">attribute</span> </span>= <span class="string">"basePackageClasses"</span></span><br><span class="line">  )</span><br><span class="line">  Class&lt;?&gt;[] scanBasePackageClasses() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span> <span class="comment">// spring bootå®šä¹‰çš„æ³¨è§£</span></span><br></pre></td></tr></table></figure><blockquote><p>Spring Bootçš„é…ç½®ç±»ï¼Œæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpring Bootçš„é…ç½®ç±»</p><p>ç‚¹å‡»è¿™ä¸ªæ³¨è§£ï¼ˆannotationï¼‰æŸ¥çœ‹æºç </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// springå®šä¹‰çš„æ³¨è§£</span></span><br></pre></td></tr></table></figure><blockquote><p>é…ç½®ç±»ä¸Šæ¥æ ‡æ³¨è¿™ä¸ªæ³¨è§£</p><p>é…ç½®ç±»â€”-é…ç½®æ–‡ä»¶ï¼šé…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼š<code>@Commponent</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br></pre></td></tr></table></figure><blockquote><p>å¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½</p><p>ä»¥å‰æˆ‘ä»¬éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼ŒSpring Bootå¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®ï¼Œè¿™ä¸ªæ³¨è§£å‘Šè¯‰Spring Bootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆ</p></blockquote><p>ç‚¹å‡»è¿™ä¸ªæ³¨è§£ï¼ˆannotationï¼‰æŸ¥çœ‹æºç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;EnableAutoConfigurationImportSelector<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">EnableAutoConfiguration</span> </span>&#123;</span><br><span class="line">  String ENABLED_OVERRIDE_PROPERTY = <span class="string">"spring.boot.enableautoconfiguration"</span>;</span><br><span class="line"></span><br><span class="line">  Class&lt;?&gt;[] exclude() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  String[] excludeName() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br></pre></td></tr></table></figure><blockquote><p>è‡ªåŠ¨é…ç½®åŒ…</p></blockquote><p>ç‚¹å‡»è¿™ä¸ªæ³¨è§£ï¼ˆannotationï¼‰æŸ¥çœ‹æºç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;Registrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">AutoConfigurationPackage</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(&#123;Registrar<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br></pre></td></tr></table></figure><p>Springçš„åº•å±‚æ³¨è§£<code>@import</code>ï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶</p><p>å¯¼å…¥çš„ç»„ä»¶ç”±<code>Registrar.class</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Registrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span>, <span class="title">DeterminableImports</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// metadataæ˜¯æ³¨è§£çš„åŸä¿¡æ¯</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata metadata, </span></span></span><br><span class="line"><span class="function"><span class="params">      BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    AutoConfigurationPackages.register(</span><br><span class="line">      registry, </span><br><span class="line">      (<span class="keyword">new</span> AutoConfigurationPackages.PackageImport(metadata)).getPackageName()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>å°†ä¸»é…ç½®ç±»ï¼ˆ<code>@SpringBootApplication</code>æ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨</strong></p></blockquote><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/Registrar.PNG" alt="Spring Boot" style="zoom: 80%;"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(&#123;EnableAutoConfigurationImportSelector<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br></pre></td></tr></table></figure><p>ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ï¼Œè¿™æ˜¯å¯¼å…¥é‚£äº›ç»„ä»¶çš„é€‰æ‹©å™¨</p><p>ç‚¹å‡»è¿™ä¸ªæ³¨è§£ï¼ˆannotationï¼‰æŸ¥çœ‹æºç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@deprecated</span> */</span></span><br><span class="line"><span class="meta">@Deprecated</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableAutoConfigurationImportSelector</span> <span class="keyword">extends</span> <span class="title">AutoConfigurationImportSelector</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">EnableAutoConfigurationImportSelector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">(AnnotationMetadata metadata)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.getClass().equals(</span><br><span class="line">        EnableAutoConfigurationImportSelector<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">      ) ? </span></span><br><span class="line"><span class="class">      (<span class="title">Boolean</span>)<span class="title">this</span>.<span class="title">getEnvironment</span>().<span class="title">getProperty</span>(</span></span><br><span class="line">        "spring.boot.enableautoconfiguration", </span><br><span class="line">        Boolean<span class="class">.<span class="keyword">class</span>, </span></span><br><span class="line">        true) : true;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†æŸ¥çœ‹å…¶çˆ¶ç±»çš„æºç </p><p>é‡Œé¢æœ‰ä¸€ä¸ª<code>selectImports</code>æ–¹æ³•ï¼Œå°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼Œè¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­</p><p>ä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰ï¼šå°±æ˜¯ç»™å®¹å™¨ä¸­è¿™ä¸ªåœºæ™¯æ‰€éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶</p><p align="center">    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/AutoConfiguration.PNG" alt="Spring Boot"></p><p>æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œ</p><p><code>selectImports</code>ä¼šè°ƒç”¨è¯¥ç±»é‡Œçš„<code>getCandidateConfigurations</code>æ–¹æ³•</p><p><code>getCandidateConfigurations</code>åˆè°ƒç”¨äº†<code>SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class, classLoader)</code></p><p>Spring Bootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„<code>META-INF/spring.factories</code>ä¸­è·å–<code>EnableAutoConfiguration</code>æŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œ</p><p>ä»¥å‰æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®çš„ä¸œè¥¿ï¼Œè‡ªåŠ¨é…ç½®ç±»å¸®æˆ‘ä»¬</p><p>J2EEçš„æ•´ä½“æ•´åˆè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨<code>spring-boot-autoconfigure-1.5.9.RELEASE.jar</code></p><h2 id="5ã€ä½¿ç”¨Spring-Initializerå¿«é€Ÿåˆ›å»ºSpring-Booté¡¹ç›®"><a href="#5ã€ä½¿ç”¨Spring-Initializerå¿«é€Ÿåˆ›å»ºSpring-Booté¡¹ç›®" class="headerlink" title="5ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®"></a>5ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®</h2><p>IDEéƒ½æ”¯æŒä½¿ç”¨Springçš„é¡¹ç›®åˆ›å»ºå‘å¯¼å¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼›</p><p>é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼Œå‘å¯¼ä¼šè”ç½‘åˆ›å»ºSpring Booté¡¹ç›®ï¼›</p><p>é»˜è®¤ç”Ÿæˆçš„Spring Booté¡¹ç›®ï¼š</p><ul><li><p>ä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ è‡ªå·±çš„é€»è¾‘å³å¯</p></li><li><p>resourcesæ–‡ä»¶å¤¹ä¸­çš„ç›®å½•ç»“æ„</p><ul><li>staticï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼šjs, css, images</li><li>templatesï¼šä¿å­˜æ‰€ä»¥çš„æ¨¡æ¿é¡µé¢ï¼šï¼ˆSpring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒJSPé¡µé¢ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å®˜æ–¹æ¨èæ¨¡æ¿å¼•æ“ï¼ˆFreemarker, Thymeleafï¼‰</li><li>application.propertiesï¼šSpring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œè™½ç„¶Spring Bootæœ‰é»˜è®¤é…ç½®ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤é…ç½®</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1ã€Spring-Bootç®€ä»‹&quot;&gt;&lt;a href=&quot;#1ã€Spring-Bootç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;1ã€Spring Bootç®€ä»‹&quot;&gt;&lt;/a&gt;1ã€Spring Bootç®€ä»‹&lt;/h2&gt;&lt;p&gt;ç®€åŒ–Springåº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æ¶&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§æ•´åˆ&lt;/p&gt;
    
    </summary>
    
    
      <category term="æ¡†æ¶" scheme="https://mysticalguest.github.io/categories/%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="Spring" scheme="https://mysticalguest.github.io/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>å¤„ç†æœºè°ƒåº¦ä¸è¿›ç¨‹æ­»é”</title>
    <link href="https://mysticalguest.github.io/2020/07/17/OS/DispatchandDeadlock/"/>
    <id>https://mysticalguest.github.io/2020/07/17/OS/DispatchandDeadlock/</id>
    <published>2020-07-17T10:00:00.000Z</published>
    <updated>2020-07-21T11:37:42.207Z</updated>
    
    <content type="html"><![CDATA[<p>å¤„ç†æœºè°ƒåº¦ä¸è¿›ç¨‹æ­»é”ç¬”è®°æ•´ç†</p><a id="more"></a><h1 id="å¤„ç†æœºè°ƒåº¦"><a href="#å¤„ç†æœºè°ƒåº¦" class="headerlink" title="å¤„ç†æœºè°ƒåº¦"></a>å¤„ç†æœºè°ƒåº¦</h1><h2 id="1-è°ƒåº¦ç±»å‹"><a href="#1-è°ƒåº¦ç±»å‹" class="headerlink" title="1 è°ƒåº¦ç±»å‹"></a>1 è°ƒåº¦ç±»å‹</h2><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Course/OS/DispatchDeadlock/DispatchType.PNG" alt=""></p><h3 id="1-1-ä¸‰ç±»è°ƒåº¦"><a href="#1-1-ä¸‰ç±»è°ƒåº¦" class="headerlink" title="1.1 ä¸‰ç±»è°ƒåº¦"></a>1.1 ä¸‰ç±»è°ƒåº¦</h3><ul><li><p>é•¿ç¨‹è°ƒåº¦â€”â€”ä½œä¸šè°ƒåº¦</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å†³å®šå“ªä¸ªä½œä¸šå¯ä»¥è¿›å…¥ç³»ç»Ÿ</p></li><li><p>ä¸­ç¨‹è°ƒåº¦â€”â€”å†…å­˜è°ƒåº¦</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å†³å®šå°†å“ªä¸ªï¼ˆäº›ï¼‰è¿›ç¨‹è°ƒå…¥å†…å­˜</p><p>â€‹        <i class="fa fa-paper-plane" aria-hidden="true"></i>  æ¢å…¥ï¼šå–å†³äºç®¡ç†ç³»ç»Ÿå¹¶å‘åº¦çš„éœ€æ±‚ï¼›</p><p>â€‹        <i class="fa fa-paper-plane" aria-hidden="true"></i>  æ¢å‡ºï¼šè¿›ç¨‹çš„å­˜å‚¨éœ€æ±‚ã€‚</p></li><li><p>çŸ­ç¨‹è°ƒåº¦â€”â€”è¿›ç¨‹è°ƒåº¦</p></li></ul><p>å†³å®šå“ªä¸ªè¿›ç¨‹å°†è·å¾—CPU</p><ul><li>é•¿ç¨‹è°ƒåº¦ç¨‹åºæ‰§è¡Œé¢‘ç‡è¾ƒä½ï¼›</li><li>ä¸­ç¨‹è°ƒåº¦ç¨‹åºæ‰§è¡Œé¢‘ç‡ç¨é«˜ï¼›</li><li>çŸ­ç¨‹è°ƒåº¦ç¨‹åºæ‰§è¡Œé¢‘ç‡æœ€é«˜ã€‚</li></ul><h3 id="1-2-è°ƒåº¦çš„æ—¶æœºå’Œç­–ç•¥"><a href="#1-2-è°ƒåº¦çš„æ—¶æœºå’Œç­–ç•¥" class="headerlink" title="1.2 è°ƒåº¦çš„æ—¶æœºå’Œç­–ç•¥"></a>1.2 è°ƒåº¦çš„æ—¶æœºå’Œç­–ç•¥</h3><ul><li><p>ä½•æ—¶è°ƒåº¦ï¼Ÿ</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æœ‰ä»»åŠ¡ç»ˆæ­¢æ—¶</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å¤„ç†å™¨çš„ç©ºé—²æ—¶</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç»ˆç«¯ç”¨æˆ·ç™»å½•æ—¶</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æœ‰æ›´ç´§æ€¥ä»»åŠ¡åˆ°è¾¾æ—¶</p></li><li><p>è°ƒåº¦å“ªä¸ªï¼Ÿ</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å…ˆæ¥å…ˆæœåŠ¡</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¼˜å…ˆçº§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å®æ—¶æ€§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æœåŠ¡æ—¶é—´</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>I/Oéœ€æ±‚</p></li></ul><h3 id="1-3-è°ƒåº¦ç®—æ³•çš„è¯„ä»·å‡†åˆ™"><a href="#1-3-è°ƒåº¦ç®—æ³•çš„è¯„ä»·å‡†åˆ™" class="headerlink" title="1.3 è°ƒåº¦ç®—æ³•çš„è¯„ä»·å‡†åˆ™"></a>1.3 è°ƒåº¦ç®—æ³•çš„è¯„ä»·å‡†åˆ™</h3><h4 id="1-3-1-é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½ç›¸å…³"><a href="#1-3-1-é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½ç›¸å…³" class="headerlink" title="1.3.1 é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½ç›¸å…³"></a>1.3.1 é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½ç›¸å…³</h4><ul><li><p>å‘¨è½¬æ—¶é—´</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä»æäº¤åˆ°å®Œæˆä¹‹é—´çš„æ—¶é—´é—´éš”</p></li><li><p>å“åº”æ—¶é—´</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä»æäº¤åˆ°å¼€å§‹æ¥æ”¶å“åº”ä¹‹é—´çš„æ—¶é—´é—´éš”</p></li><li><p>æˆªæ­¢æœŸé™</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>è¿›ç¨‹å®Œæˆçš„æœ€åæœŸé™</p></li></ul><h4 id="1-3-2-é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½æ— å…³"><a href="#1-3-2-é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½æ— å…³" class="headerlink" title="1.3.2 é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½æ— å…³"></a>1.3.2 é¢å‘ç”¨æˆ·ï¼Œä¸æ€§èƒ½æ— å…³</h4><ul><li><p>å¯é¢„æµ‹æ€§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å¸Œæœ›æä¾›ç»™ç”¨æˆ·çš„æœåŠ¡èƒ½å¤Ÿéšç€æ—¶é—´çš„æµé€å±•ç°ç»™ç”¨æˆ·ä¸€è´¯ç›¸åŒçš„ç‰¹æ€§ï¼Œè€Œä¸ç³»ç»Ÿæ‰§è¡Œçš„å…¶ä»–å·¥ä½œæ— å…³ã€‚</p></li></ul><h4 id="1-3-3-é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½ç›¸å…³"><a href="#1-3-3-é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½ç›¸å…³" class="headerlink" title="1.3.3 é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½ç›¸å…³"></a>1.3.3 é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½ç›¸å…³</h4><ul><li><p>ååé‡</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å•ä½æ—¶é—´å†…å®Œæˆçš„è¿›ç¨‹æ•°ç›®</p></li><li><p>å¤„ç†å™¨åˆ©ç”¨ç‡</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å¤„ç†å™¨å¤„äºå¿™çš„çŠ¶æ€çš„æ—¶é—´ç™¾åˆ†æ¯”</p></li></ul><h4 id="1-3-4-é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½æ— å…³"><a href="#1-3-4-é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½æ— å…³" class="headerlink" title="1.3.4 é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½æ— å…³"></a>1.3.4 é¢å‘ç³»ç»Ÿï¼Œä¸æ€§èƒ½æ— å…³</h4><ul><li><p>å…¬å¹³æ€§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>è¿›ç¨‹è¢«å…¬å¹³å¯¹å¾…</p></li><li><p>å¼ºåˆ¶ä¼˜å…ˆçº§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>è¿›ç¨‹è¢«æŒ‡å®šä¼˜å…ˆçº§ï¼Œè°ƒåº¦ç­–ç•¥ä¼˜å…ˆé€‰æ‹©é«˜ä¼˜å…ˆçº§è¿›ç¨‹</p></li><li><p>å¹³è¡¡èµ„æº</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¿æŒç³»ç»Ÿä¸­æ‰€æœ‰èµ„æºå¤„äºç¹å¿™çŠ¶æ€ï¼Œè¾ƒå°‘é€‚ç”¨ç´§ç¼ºèµ„æºçš„è¿›ç¨‹åº”è¯¥å—åˆ°ç…§é¡¾</p></li></ul><h3 id="1-4-è°ƒåº¦æ¨¡å¼"><a href="#1-4-è°ƒåº¦æ¨¡å¼" class="headerlink" title="1.4 è°ƒåº¦æ¨¡å¼"></a>1.4 è°ƒåº¦æ¨¡å¼</h3><ul><li>æŠ¢å ï¼ˆå‰¥å¤ºï¼‰â€”â€”å¯¹æœ‰å®æ—¶æ€§æˆ–å“åº”æ—¶é—´è¦æ±‚çš„ä»»åŠ¡ï¼Œå¿…é¡»é‡‡ç”¨æŠ¢å å¼è°ƒåº¦</li><li>éæŠ¢å ï¼ˆéå‰¥å¤ºï¼‰â€”â€”å¯¹æ²¡æœ‰å“åº”æ—¶é—´è¦æ±‚çš„ä»»åŠ¡ï¼Œå¯é‡‡ç”¨éæŠ¢å å¼è°ƒåº¦</li></ul><h3 id="1-5-ä¼˜å…ˆçº§çš„ä½¿ç”¨"><a href="#1-5-ä¼˜å…ˆçº§çš„ä½¿ç”¨" class="headerlink" title="1.5 ä¼˜å…ˆçº§çš„ä½¿ç”¨"></a>1.5 ä¼˜å…ˆçº§çš„ä½¿ç”¨</h3><ul><li><p>æ¯ä¸ªè¿›ç¨‹è¢«æŒ‡å®šä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè°ƒåº¦ç¨‹åºæ€»æ˜¯é€‰æ‹©å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹ã€‚</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>çº¯ç²¹çš„ä¼˜å…ˆçº§è°ƒåº¦æ–¹æ¡ˆå¯èƒ½ä¼šå¯¼è‡´ç¬¬ä¼˜å…ˆçº§è¿›ç¨‹é•¿æ—¶é—´å¤„äºé¥¥é¥¿çŠ¶æ€</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¸€ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§å¯éšç€å®ƒçš„æ—¶é—´æˆ–æ‰§è¡Œå†å²è€Œå˜åŒ–</p></li></ul><h2 id="2-è°ƒåº¦ç®—æ³•"><a href="#2-è°ƒåº¦ç®—æ³•" class="headerlink" title="2 è°ƒåº¦ç®—æ³•"></a>2 è°ƒåº¦ç®—æ³•</h2><h3 id="2-1-å‡ ç§å¸¸ç”¨è°ƒåº¦ç®—æ³•çš„æ¯”è¾ƒ"><a href="#2-1-å‡ ç§å¸¸ç”¨è°ƒåº¦ç®—æ³•çš„æ¯”è¾ƒ" class="headerlink" title="2.1 å‡ ç§å¸¸ç”¨è°ƒåº¦ç®—æ³•çš„æ¯”è¾ƒ"></a>2.1 å‡ ç§å¸¸ç”¨è°ƒåº¦ç®—æ³•çš„æ¯”è¾ƒ</h3><div class="table-container"><table><thead><tr><th style="text-align:center">ç®—æ³•</th><th style="text-align:center">FCFS(å…ˆæ¥å…ˆæœåŠ¡)</th><th style="text-align:center">RR(è½®è½¬)</th><th style="text-align:center">SPN(æœ€çŸ­è¿›ç¨‹ä¼˜å…ˆ)</th><th style="text-align:center">SRT(æœ€çŸ­å‰©ä½™æ—¶é—´)</th><th style="text-align:center">HRRN(æœ€é«˜å“åº”æ¯”ä¼˜å…ˆ)</th><th style="text-align:center">ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆ</th><th style="text-align:center">åé¦ˆæ³•å¤šé˜Ÿé‡Œ</th></tr></thead><tbody><tr><td style="text-align:center">é€‰æ‹©ä¾æ®</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"><script type="math/tex">max((w+s)/s)</script></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">è°ƒåº¦æ–¹å¼</td><td style="text-align:center">éæŠ¢å å¼</td><td style="text-align:center">æŠ¢å å¼ï¼ˆæŒ‰æ—¶é—´ç‰‡ï¼‰</td><td style="text-align:center">éæŠ¢å å¼</td><td style="text-align:center">æŠ¢å å¼ï¼ˆè¿›ç¨‹åˆ°è¾¾æ—¶ï¼‰</td><td style="text-align:center">éæŠ¢å å¼</td><td style="text-align:center"></td><td style="text-align:center">æŠ¢å å¼ï¼ˆæ—¶é—´ç‰‡ï¼‰</td></tr><tr><td style="text-align:center">å“åº”æ—¶é—´</td><td style="text-align:center">å¯èƒ½å¾ˆé«˜</td><td style="text-align:center">å¯¹äºçŸ­è¿›ç¨‹æä¾›è‰¯å¥½çš„å“åº”æ—¶é—´</td><td style="text-align:center"></td><td style="text-align:center">æä¾›è¾ƒå¥½çš„å“åº”æ—¶é—´</td><td style="text-align:center">æä¾›è¾ƒå¥½çš„å“åº”æ—¶é—´</td><td style="text-align:center"></td><td style="text-align:center">ä¸çªå‡º</td></tr><tr><td style="text-align:center">å¼€é”€</td><td style="text-align:center">æœ€å°</td><td style="text-align:center">ä½</td><td style="text-align:center">å¯èƒ½é«˜</td><td style="text-align:center">å¯èƒ½é«˜</td><td style="text-align:center">å¯èƒ½é«˜</td><td style="text-align:center"></td><td style="text-align:center">å¯èƒ½é«˜</td></tr><tr><td style="text-align:center">å¯¹è¿›ç¨‹çš„ä½œç”¨</td><td style="text-align:center">ä¸åˆ©äºçŸ­ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰å’ŒI/Oç¹å¿™ä½œä¸š</td><td style="text-align:center">å…¬å¹³å¯¹å¾…</td><td style="text-align:center">ä¸åˆ©äºé•¿ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰</td><td style="text-align:center">ä¸åˆ©äºé•¿ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰</td><td style="text-align:center">è¾ƒå¥½å‡è¡¡ä¸ª</td><td style="text-align:center"></td><td style="text-align:center">åçˆ±I/Oç¹å¿™å‹è¿›ç¨‹</td></tr><tr><td style="text-align:center">â€œé¥¥é¥¿â€é—®é¢˜</td><td style="text-align:center">æ— </td><td style="text-align:center">æ— </td><td style="text-align:center">å¯èƒ½</td><td style="text-align:center">å¯èƒ½</td><td style="text-align:center">æ— </td><td style="text-align:center"></td><td style="text-align:center">å¯èƒ½</td></tr></tbody></table></div><h3 id="2-2-è¡¥å……"><a href="#2-2-è¡¥å……" class="headerlink" title="2.2 è¡¥å……"></a>2.2 è¡¥å……</h3><h4 id="2-2-1-HRRN"><a href="#2-2-1-HRRN" class="headerlink" title="2.2.1 HRRN"></a>2.2.1 HRRN</h4><ul><li><p>å…¬å¼ï¼š<script type="math/tex">R=(w+s)/s</script>ï¼Œå…¶ä¸­ï¼š</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>Rï¼šå“åº”æ¯”</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>wï¼šç­‰å¾…å¤„ç†å™¨çš„æ—¶é—´</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>é¢„è®¡çš„æœåŠ¡æ—¶é—´</p></li></ul><h4 id="2-2-2-ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆ"><a href="#2-2-2-ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆ" class="headerlink" title="2.2.2 ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆ"></a>2.2.2 ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆ</h4><ul><li>çº¦å®šï¼šæ•°å°ä»£è¡¨ä¼˜å…ˆçº§é«˜</li></ul><h4 id="2-2-3-ä¼ ç»Ÿçš„UNIXè°ƒåº¦"><a href="#2-2-3-ä¼ ç»Ÿçš„UNIXè°ƒåº¦" class="headerlink" title="2.2.3 ä¼ ç»Ÿçš„UNIXè°ƒåº¦"></a>2.2.3 ä¼ ç»Ÿçš„UNIXè°ƒåº¦</h4><ul><li><p>å¤šçº§åé¦ˆ</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æ¯ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ä½¿ç”¨è½®è½¬æ–¹æ³•</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä½¿ç”¨1ç§’æŠ¢å æ–¹å¼</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æ¯ç§’éƒ½ä¼šé‡æ–°è®¡ç®—æ¯ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§</p></li></ul><h3 id="2-3-çº¿ç¨‹è°ƒåº¦"><a href="#2-3-çº¿ç¨‹è°ƒåº¦" class="headerlink" title="2.3 çº¿ç¨‹è°ƒåº¦"></a>2.3 çº¿ç¨‹è°ƒåº¦</h3><ul><li><p>è´Ÿè½½åˆ†é…</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç³»ç»Ÿç»´æŠ¤ä¸€ä¸ªå°±ç»ªçº¿ç¨‹çš„å…¨å±€é˜Ÿåˆ—ï¼Œæ¯ä¸ªå¤„ç†å™¨åªè¦ç©ºé—²å°±ä»é˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ã€‚</p></li><li><p>ç»„è°ƒåº¦</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¸€ç»„ç›¸å…³çš„çº¿ç¨‹åŸºäºä¸€å¯¹ä¸€çš„åŸåˆ™ï¼ŒåŒæ—¶è°ƒåº¦åˆ°ä¸€ç»„å¤„ç†å™¨ä¸Šè¿è¡Œã€‚</p></li><li><p>ä¸“ç”¨å¤„ç†å™¨è°ƒåº¦</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç»„è°ƒåº¦çš„ä¸€ç§æç«¯å½¢å¼ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼ŒæŠŠä¸€ç»„å¤„ç†å™¨ä¸“é—¨åˆ†é…ç»™è¿™ä¸ªåº”ç”¨ç¨‹åºã€‚</p></li><li><p>åŠ¨æ€è°ƒåº¦</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æŸäº›åº”ç”¨ç¨‹åºå…è®¸åŠ¨æ€åœ°æ”¹å˜è¿›ç¨‹ä¸­çº¿ç¨‹æ•°ç›®ï¼Œéœ€è¦åŠ¨æ€è°ƒåº¦ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£åˆ†é…å¤„ç†å™¨ç»™ä½œä¸šï¼Œä½œä¸šè‡ªè¡Œè°ƒåº¦ã€‚</p></li></ul><h2 id="3-å¤šæœºç³»ç»Ÿä¸å®æ—¶ç³»ç»Ÿè°ƒåº¦"><a href="#3-å¤šæœºç³»ç»Ÿä¸å®æ—¶ç³»ç»Ÿè°ƒåº¦" class="headerlink" title="3 å¤šæœºç³»ç»Ÿä¸å®æ—¶ç³»ç»Ÿè°ƒåº¦"></a>3 å¤šæœºç³»ç»Ÿä¸å®æ—¶ç³»ç»Ÿè°ƒåº¦</h2><h3 id="3-1å®æ—¶è°ƒåº¦"><a href="#3-1å®æ—¶è°ƒåº¦" class="headerlink" title="3.1å®æ—¶è°ƒåº¦"></a>3.1å®æ—¶è°ƒåº¦</h3><ul><li><p>å®æ—¶è®¡ç®—</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç³»ç»Ÿçš„æ­£ç¡®æ€§ä¸ä»…å–å†³äºè®¡ç®—çš„é€»è¾‘ç»“æœï¼Œè¿˜ä¾èµ–äºäº§ç”Ÿç»“æœçš„æ—¶é—´ã€‚</p></li><li><p>å®æ—¶ä»»åŠ¡</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç¡¬å®æ—¶ä»»åŠ¡ã€è½¯å®æ—¶ä»»åŠ¡</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å‘¨æœŸæ€§ä»»åŠ¡ã€éå‘¨æœŸæ€§ä»»åŠ¡</p></li><li><p>å®æ—¶ç³»ç»Ÿåº”ç”¨çš„ä¾‹å­</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç›®å‰ï¼šå®éªŒæ§åˆ¶ã€è¿‡ç¨‹æ§åˆ¶ã€æœºå™¨äººã€ç©ºä¸­äº¤é€šç®¡åˆ¶ã€ç”µä¿¡ã€å†›äº‹æŒ‡æŒ¥ä¸æ§åˆ¶ç³»ç»Ÿã€‚</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¸‹ä¸€ä»£ï¼šè‡ªåŠ¨é©¾é©¶æ±½è½¦ã€å…·æœ‰å¼¹æ€§å…³èŠ‚çš„æœºå™¨äººæ§åˆ¶å™¨ã€æ™ºèƒ½åŒ–ç”Ÿäº§ä¸­ç³»ç»ŸæŸ¥æ‰¾ã€ç©ºé—´ç«™å’Œæµ·åº•å‹˜æ¢ã€‚</p></li></ul><h3 id="3-2-å®æ—¶æ“ä½œç³»ç»Ÿçš„ç‰¹ç‚¹"><a href="#3-2-å®æ—¶æ“ä½œç³»ç»Ÿçš„ç‰¹ç‚¹" class="headerlink" title="3.2 å®æ—¶æ“ä½œç³»ç»Ÿçš„ç‰¹ç‚¹"></a>3.2 å®æ—¶æ“ä½œç³»ç»Ÿçš„ç‰¹ç‚¹</h3><ul><li><p>å¯ç¡®å®šæ€§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æŒ‰ç…§å›ºå®šçš„ã€é¢„å…ˆç¡®å®šçš„æ—¶é—´æˆ–æ—¶é—´é—´éš”æ‰§è¡Œæ“ä½œã€‚</p></li><li><p>å¯å“åº”æ€§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¸ºä¸­æ–­æä¾›æœåŠ¡æ—¶é—´ã€‚</p></li><li><p>ç”¨æˆ·æ§åˆ¶</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å…è®¸ç”¨æˆ·ç»†ç²’åº¦åœ°æ§åˆ¶ä»»åŠ¡ä¼˜å…ˆçº§ï¼ŒæŒ‡å®šä¸€äº›ç‰¹æ€§ç­‰ã€‚</p></li><li><p>å¯é æ€§</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æ€§èƒ½çš„æŸå¤±æˆ–é™ä½å¯èƒ½äº§ç”Ÿç¾éš¾æ€§çš„åæœã€‚</p></li><li><p>æ•…éšœå¼±åŒ–æ“ä½œ</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ç³»ç»Ÿåœ¨æ•…éšœæ—¶å°½å¯èƒ½å¤šåœ°ä¿å­˜å…¶æ€§èƒ½å’Œæ•°æ®çš„èƒ½åŠ›ã€‚</p></li></ul><h3 id="3-3-å®æ—¶ç³»ç»Ÿè°ƒåº¦çš„ç‰¹å¾"><a href="#3-3-å®æ—¶ç³»ç»Ÿè°ƒåº¦çš„ç‰¹å¾" class="headerlink" title="3.3 å®æ—¶ç³»ç»Ÿè°ƒåº¦çš„ç‰¹å¾"></a>3.3 å®æ—¶ç³»ç»Ÿè°ƒåº¦çš„ç‰¹å¾</h3><ul><li>å¿«é€Ÿçš„è¿›ç¨‹æˆ–çº¿ç¨‹åˆ‡æ¢ã€‚</li><li>ä½“ç§¯å°ï¼ˆåªå…·å¤‡æœ€å°é™åº¦çš„åŠŸèƒ½ï¼‰ã€‚</li><li>è¿…é€Ÿå“åº”å¤–éƒ¨ä¸­æ–­çš„èƒ½åŠ›ã€‚</li><li>é€šè¿‡è¯¸å¤šä¿¡å·é‡ã€ä¿¡å·å’Œæ—¶é—´ä¹‹ç±»çš„è¿›ç¨‹é—´é€šä¿¡å·¥å…·ï¼Œå®ç°å¤šä»»åŠ¡å¤„ç†ã€‚</li><li>ä½¿ç”¨ç‰¹æ®Šçš„é¡ºåºæ–‡ä»¶ï¼Œå¯ä»¥å¿«é€Ÿå­˜å‚¨æ•°æ®ã€‚</li><li>åŸºäºä¼˜å…ˆçº§çš„æŠ¢å å¼è°ƒåº¦ã€‚</li><li>æœ€å°åŒ–ç¦æ­¢ä¸­æ–­çš„æ—¶é—´é—´éš”ã€‚</li><li>ç”¨äºä½¿ä»»åŠ¡å»¶è¿Ÿä¸€æ®µå›ºå®šçš„æ—¶é—´æˆ–æš‚åœ/æ¢å¤ä»»åŠ¡çš„åŸè¯­ã€‚</li><li>ç‰¹åˆ«çš„è­¦æŠ¥å’Œè¶…æ—¶è®¾å®šã€‚</li></ul><h3 id="3-4-å®æ—¶ç³»ç»Ÿè°ƒåº¦ç®—æ³•"><a href="#3-4-å®æ—¶ç³»ç»Ÿè°ƒåº¦ç®—æ³•" class="headerlink" title="3.4 å®æ—¶ç³»ç»Ÿè°ƒåº¦ç®—æ³•"></a>3.4 å®æ—¶ç³»ç»Ÿè°ƒåº¦ç®—æ³•</h3><ul><li><p>é™æ€è¡¨æ³•</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æ‰§è¡Œå…³äºå¯è¡Œè°ƒåº¦çš„é™æ€åˆ†æã€‚åˆ†æçš„ç»“æœæ˜¯ä¸€ä¸ªè°ƒåº¦ï¼Œå®ƒç”¨äºç¡®å®šåœ¨è¿è¡Œæ—¶ä¸€ä¸ªä»»åŠ¡ä½•æ—¶å¿…é¡»å¼€å§‹æ‰§è¡Œã€‚</p></li><li><p>é™æ€ä¼˜å…ˆçº§æŠ¢å æ³•</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>æ‰§è¡Œä¸€ä¸ªé™æ€åˆ†æï¼Œä½†æ˜¯æ²¡æœ‰åˆ¶å®šè°ƒåº¦ï¼Œé€šè¿‡ç»™ä»»åŠ¡åˆ¶å®šä¼˜å…ˆçº§ï¼Œä½¿ç”¨ä¼ ç»Ÿçš„åŸºäºä¼˜å…ˆçº§çš„æŠ¢å å¼è°ƒåº¦ã€‚</p></li><li><p>åŸºäºåŠ¨æ€è§„åˆ’è°ƒåº¦æ³•</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ç¡®å®šå¯è¡Œæ€§ï¼Œå¯è¡Œæ€§åˆ†æçš„ç»“æœæ˜¯ä¸€ä¸ªè°ƒåº¦æˆ–è§„åˆ’ï¼Œå¯ç”¨äºç¡®å®šä½•æ—¶åˆ†æ´¾è¿™ä¸ªä»»åŠ¡ã€‚</p></li><li><p>åŠ¨æ€å°½åŠ›è°ƒåº¦æ³•</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>ä¸æ‰§è¡Œå¯è¡Œæ€§åˆ†æã€‚ç³»ç»Ÿè¯•å›¾æ»¡è¶³æ‰€æœ‰çš„æœ€åæœŸé™ï¼Œå¹¶ç»ˆæ­¢ä»»ä½•å·²ç»å¼€å§‹è¿è¡Œä½†é”™è¿‡æœ€åæœŸé™çš„è¿›ç¨‹ã€‚</p></li></ul><h3 id="3-5-æˆªæ­¢æ—¶é—´è°ƒåº¦"><a href="#3-5-æˆªæ­¢æ—¶é—´è°ƒåº¦" class="headerlink" title="3.5 æˆªæ­¢æ—¶é—´è°ƒåº¦"></a>3.5 æˆªæ­¢æ—¶é—´è°ƒåº¦</h3><ul><li><p>å®æ—¶åº”ç”¨ç¨‹åºé€šå¸¸å¹¶ä¸å…³æ³¨ç»å¯¹é€Ÿåº¦ï¼Œå®ƒå…³æ³¨çš„æ˜¯åœ¨æœ€æœ‰ä»·å€¼çš„æ—¶é—´å®Œæˆï¼ˆæˆ–å¯åŠ¨ï¼‰ä»»åŠ¡ã€‚</p></li><li><p>æˆªæ­¢æ—¶é—´è°ƒåº¦ï¼šæœ€æ—©æœ€åæˆªæ­¢æ—¶é—´ä¼˜å…ˆã€‚</p></li><li><p>æœ€åæœŸé™</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å¼€å§‹æˆªæ­¢æ—¶é—´ï¼šä»»åŠ¡å¿…é¡»å¼€å§‹çš„æ—¶é—´ã€‚</p><p><i class="fa fa-angle-double-right" aria-hidden="true"></i>å®Œæˆæˆªæ­¢æ—¶é—´ï¼šä»»åŠ¡å¿…é¡»å®Œæˆçš„æ—¶é—´ã€‚</p></li></ul><h3 id="3-6-ä¼˜å…ˆçº§åè½¬"><a href="#3-6-ä¼˜å…ˆçº§åè½¬" class="headerlink" title="3.6 ä¼˜å…ˆçº§åè½¬"></a>3.6 ä¼˜å…ˆçº§åè½¬</h3><ul><li>åœ¨ä»»ä½•ä¼˜å…ˆçº§è°ƒåº¦æ–¹æ¡ˆä¸­ï¼Œç³»ç»Ÿåº”è¯¥ä¸åœåœ°æ‰§è¡Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚å½“ç³»ç»Ÿå†…çš„ç¯å¢ƒè¿«ä½¿ä¸€ä¸ªè¾ƒé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å»ç­‰å¾…ä¸€ä¸ªè¾ƒä½ä¼˜å…ˆçº§çš„ä»»åŠ¡æ—¶ï¼Œä¼˜å…ˆçº§åè½¬å°±ä¼šå‘ç”Ÿã€‚</li><li>ä¼˜å…ˆçº§ï¼š<script type="math/tex">T_1>T_2>T_3</script>ï¼Œé«˜ä¼˜å…ˆçº§çš„<script type="math/tex">T_1</script>è¢«ä½ä¼˜å…ˆçº§çš„<script type="math/tex">T_2</script>å å…ˆã€‚</li><li>è§£å†³æ–¹æ¡ˆï¼šä¼˜å…ˆçº§ç»§æ‰¿ã€‚</li></ul><h1 id="è¿›ç¨‹æ­»é”"><a href="#è¿›ç¨‹æ­»é”" class="headerlink" title="è¿›ç¨‹æ­»é”"></a>è¿›ç¨‹æ­»é”</h1><h2 id="1-æ­»é”å­˜åœ¨çš„æ¡ä»¶"><a href="#1-æ­»é”å­˜åœ¨çš„æ¡ä»¶" class="headerlink" title="1 æ­»é”å­˜åœ¨çš„æ¡ä»¶"></a>1 æ­»é”å­˜åœ¨çš„æ¡ä»¶</h2><ul><li>äº’æ–¥</li><li>æ— æŠ¢å </li><li>ä¿æŒå¹¶ç­‰å¾…</li><li>å¾ªç¯ç­‰å¾…</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¤„ç†æœºè°ƒåº¦ä¸è¿›ç¨‹æ­»é”ç¬”è®°æ•´ç†&lt;/p&gt;
    
    </summary>
    
    
      <category term="è¯¾ç¨‹" scheme="https://mysticalguest.github.io/categories/%E8%AF%BE%E7%A8%8B/"/>
    
    
      <category term="OS" scheme="https://mysticalguest.github.io/tags/OS/"/>
    
  </entry>
  
</feed>
