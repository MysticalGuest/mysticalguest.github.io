<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>高级操作系统 - Longing(MysteryGuest的博客)</title><meta description="文件系统 课堂笔记"><meta property="og:type" content="blog"><meta property="og:title" content="高级操作系统"><meta property="og:url" content="http://yoursite.com/2020/07/01/OS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><meta property="og:site_name" content="Longing(MysteryGuest的博客)"><meta property="og:description" content="文件系统 课堂笔记"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://pic.yupoo.com/mysteryguest/ba2b052b/1f316f3a.jpg"><meta property="article:published_time" content="2020-07-01T13:56:54.676Z"><meta property="article:modified_time" content="2020-07-06T07:30:54.881Z"><meta property="article:author" content="MysticalGuest"><meta property="article:tag" content="OS"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://pic.yupoo.com/mysteryguest/ba2b052b/1f316f3a.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/07/01/OS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"},"headline":"Longing(MysteryGuest的博客)","image":["http://pic.yupoo.com/mysteryguest/ba2b052b/1f316f3a.jpg"],"datePublished":"2020-07-01T13:56:54.676Z","dateModified":"2020-07-06T07:30:54.881Z","author":{"@type":"Person","name":"MysticalGuest"},"description":"文件系统 课堂笔记"}</script><link rel="canonical" href="http://yoursite.com/2020/07/01/OS%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"><link rel="icon" href="/img/bird.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script src="/js/click.js"></script><script src="/js/anime.min.js"></script><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script src="/js/snow.js"></script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-6320686616967489" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><link rel="alternate" href="/atom.xml" title="Longing(MysteryGuest的博客)" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/mylogo.svg" alt="Longing(MysteryGuest的博客)" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Visit on GitHub" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="http://pic.yupoo.com/mysteryguest/ba2b052b/1f316f3a.jpg" alt="高级操作系统"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-07-01T13:56:54.676Z" title="2020-07-01T13:56:54.676Z">2020-07-01</time><span class="level-item"><a class="link-muted" href="/categories/%E8%AF%BE%E7%A8%8B/">课程</a></span><span class="level-item">27 minutes read (About 4122 words)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span> visits</span></div></div><h1 class="title is-3 is-size-4-mobile">高级操作系统</h1><div class="content"><p><strong><em>文件系统</em></strong></p>
<p>课堂笔记</p>
<a id="more"></a>
<h1 id="1-文件与文件系统"><a href="#1-文件与文件系统" class="headerlink" title="1.文件与文件系统"></a>1.文件与文件系统</h1><p><strong>文件</strong>：具有符号名的一组相关元素的集合。</p>
<p>通常，文件由<strong>记录</strong>组成，记录用于描述对象的属性，记录又可包含若干个<em>数据项</em>。</p>
<p><strong>文件系统</strong>是OS中管理文件的子系统，它实现文件的<strong>存储、检索、更新、共享和保护</strong>等，并为用户提供方便有效的文件使用和操作方法。</p>
<h2 id="1-1-文件系统的功能"><a href="#1-1-文件系统的功能" class="headerlink" title="1.1 文件系统的功能"></a>1.1 文件系统的功能</h2><ul>
<li><p>文件的按名存取</p>
</li>
<li><p>文件目录建立和维护</p>
</li>
</ul>
<p>实现逻辑文件到物理文件的转换</p>
<p>文件存储空间的分配和管理</p>
<p>提供合适的文件存取方法</p>
<p>实现文件的共享、保护和保密</p>
<p>提供一组可供用户使用的文件操作</p>
<h2 id="1-2-文件系统的优点"><a href="#1-2-文件系统的优点" class="headerlink" title="1.2 文件系统的优点"></a>1.2 文件系统的优点</h2><p><strong>使用方便</strong>：由于文件系统实现了案名存取，因而用户无需关心文件存放的物理位置<br><strong>数据安全</strong>：文件系统可以提供各种保护措施，防止用户对文件有意或无意的破坏<br><strong>接口统一</strong>：用户可以使用统一的接口来操作各种介质上的文件</p>
<h2 id="1-3-文件系统的分层结构"><a href="#1-3-文件系统的分层结构" class="headerlink" title="1.3 文件系统的分层结构"></a>1.3 文件系统的分层结构</h2><ul>
<li><p>文件管理—实现文件的逻辑结构，为用户提供各种文件系统调用，及种文件系统调用，及文件访问权限的设置等工作；</p>
</li>
<li><p>目录管理—负责查找文件描述符，进而找到需要访问的文件，及进行访问权限检查等工作;</p>
</li>
<li><p>外存映射管理—将文件的逻辑地址转换成磁盘的物理地址，即由逻辑块号找到柱面号、磁道号和扇区号，具体的数据传输操作由设备管理实现。</p>
</li>
</ul>
<h2 id="1-4-文件的存取"><a href="#1-4-文件的存取" class="headerlink" title="1.4 文件的存取"></a>1.4 文件的存取</h2><p>存取方法是操作系统为用户程序提供的使用文件的技术和手段。</p>
<p>存取方法（决定和影响着文件的物理结构）</p>
<p>​    -顺序存取：若当前存取的记录是Ri，则下次必存取Ri+1</p>
<p>​    -直接（随机）存取</p>
<p>​    -索引存取</p>
<p>​    -按（键）值存取</p>
<h2 id="1-5-文件的操作"><a href="#1-5-文件的操作" class="headerlink" title="1.5 文件的操作"></a>1.5 文件的操作</h2><p>对记录的操作：检索、插入、删除、修改</p>
<p>对文件的操作：创建文件、删除文件、打开文件、关闭文件、读文件、写文件</p>
<h1 id="2-文件目录与文件检索"><a href="#2-文件目录与文件检索" class="headerlink" title="2 文件目录与文件检索"></a>2 文件目录与文件检索</h1><ul>
<li><p>通过文件目录实现文件的“按名存取”；</p>
</li>
<li><p>文件系统基本功能之一是负责文件目录的建立、维护和检索。</p>
</li>
<li><p>存放管理文件所需信息的数据结构即<code>文件目录</code>，一个文件的文件目录即其<code>目录项</code>又称<code>文件控制块FCB</code>（File Control Block）：</p>
<p>-文件和文件控制块是一一对应的；</p>
<p>-FCB通常包括：文件名、用户名、类型、文件结构、建立日期、存取权限、物理地址等</p>
</li>
</ul>
<h2 id="2-1-文件目录与目录项"><a href="#2-1-文件目录与目录项" class="headerlink" title="2.1 文件目录与目录项"></a>2.1 文件目录与目录项</h2><p><strong>目录文件</strong>：把FCB集中起来，组成文件，保存于外存，这个文件称作目录文件</p>
<p><strong>文件检索</strong>：给定一个文件名，查找相应的目录文件找到该文件所对应的目录项</p>
<h3 id="2-1-1-单级目录"><a href="#2-1-1-单级目录" class="headerlink" title="2.1.1 单级目录"></a>2.1.1 单级目录</h3><p>整个系统只有一张目录表，所有文件均登记在该表中，每个文件占有一项。</p>
<p>目录表存放在存储设备的固定地方，系统启动时调用内存。</p>
<p>单级目录的优点是非常简单，但：</p>
<p>​    -不允许重名</p>
<p>​    -查找速度慢</p>
<h3 id="2-1-2-二级目录"><a href="#2-1-2-二级目录" class="headerlink" title="2.1.2 二级目录"></a>2.1.2 二级目录</h3><ul>
<li><p>系统设置唯一一个主文件目录MFD（Master File Directiry）。</p>
</li>
<li><p>每个用户设立一个用户文件目录UFD（User）。UFD由该用户所有文件的FCB构成。</p>
</li>
<li><p>每个UFD在MFD中占有一个目录项，其中包括用户名和指向该用户文件的指针。</p>
</li>
<li><p>优点：</p>
</li>
</ul>
<p>​    -提高了查找速度<br>​    -解决了重名问题</p>
<h3 id="2-1-3-多级目录"><a href="#2-1-3-多级目录" class="headerlink" title="2.1.3 多级目录"></a>2.1.3 多级目录</h3><ul>
<li>树形目录结构，最高层是根目录，最低层是数据文件，其他是目录文件。</li>
</ul>
<h3 id="2-1-4-层级目录结构"><a href="#2-1-4-层级目录结构" class="headerlink" title="2.1.4 层级目录结构"></a>2.1.4 层级目录结构</h3><ul>
<li><p>每一级目录即可以包含下一级目录(即目录文件的目录项)，也可以包含具体文件(即具体文件的目录项)，形成层次关系。</p>
</li>
<li><p>多级目录结构采用树形结构，是一棵倒向有根树，树根是根目录；从根向下，每个树枝是一个子目录；而树叶是文件。</p>
</li>
<li><p>树型多级目录优点：组织灵活、便于命名、检索高效。</p>
</li>
</ul>
<h3 id="2-1-5-UNIX-Linux目录项"><a href="#2-1-5-UNIX-Linux目录项" class="headerlink" title="2.1.5 UNIX/Linux目录项"></a>2.1.5 UNIX/Linux目录项</h3><p>文件名            inode节点号<br>14字节            2字节<br>0号目录项和索引节点</p>
<p>思考：UNIX使用i-node的好处是什么?</p>
<p>➢因为按文件名检索目录文件时，只用到了文件名。当找到该文件名时，才需要它的其它描述信息。所以在把存放该目录文件的盘块从外存调入内存进行比较时，应使一个盘块中包含尽量多的文件名，以<code>减少访问磁盘次数，加快文件检索速度</code>。</p>
<p>例:设物理块大小为512B,某目录下有128个文件。</p>
<ul>
<li><p>原来的FCB占64B，则每物理块能容纳512/64=8个FCB，则该目录文件需占128/8= 16块，查找一个文件的平均访盘次数为:(1+16) /2= 8.5次。</p>
</li>
<li><p>采用i-node后:文件名部分有16B，i-node部 分有64B，每物理块能容纳512/16=32个文件名部分或512/64=8个i-node，则该目录的文件名部分需占128/32=4块，i-node部分需占128/8=16块。查找一个文件的平均访盘次数为:(1+4) /2+1=3.5次。</p>
</li>
</ul>
<h1 id="3-文件逻辑结构与数据存储"><a href="#3-文件逻辑结构与数据存储" class="headerlink" title="3 文件逻辑结构与数据存储"></a>3 文件逻辑结构与数据存储</h1><ul>
<li><p>文件的逻辑结构：用户所看到的文件结构</p>
<p>-记录式文件，文件由若干记录所构成</p>
<p>-流式文件，文件由若干字符（字节）序列构成</p>
</li>
<li><p>文件的物理结构：文件在外存的存放形式</p>
<p>-顺序文件:逻辑文件中的信息顺序地存放在相邻的物理块中</p>
<p>-链接文件:文件中的信息不是顺序排列的，它们可以存放在不相邻的物理块中，通过指针连接成链表索引文件:为每一文件建立一个索引表，用以实现逻辑记录和物理块号之间的映射</p>
</li>
</ul>
<h2 id="3-1-文件结构与文件存储"><a href="#3-1-文件结构与文件存储" class="headerlink" title="3.1 文件结构与文件存储"></a>3.1 文件结构与文件存储</h2><p>物理块是存储介质上连续信息所组成的一个区域。</p>
<p>块是主存储器和辅助存储设备信息交换的物理单位，每次交换一块或整块数。</p>
<p>决定块的大小要考虑到用户使用方式、数据传输效率和存储设备类型等多种因素。</p>
<p>不同类型的存储介质，块的大小常常各不相同；同一类型的存储介质，块的大小也可以不同。</p>
<p>间隙是块之间不记录用户代码信息的空闲区城。</p>
<h2 id="3-2-文件的逻辑结构"><a href="#3-2-文件的逻辑结构" class="headerlink" title="3.2 文件的逻辑结构"></a>3.2 文件的逻辑结构</h2><p>文件的逻辑结构是用户所见的信息组织方式。</p>
<p>文件的逻辑结构分为：流式文件，记录式文件。</p>
<p>流式文件指文件内的数据不再组成记录，只是依次的一串信息(字节)集合。</p>
<p>流式文件常按字节数来读取所需信息，也可用插入特殊字符作为分界。</p>
<p>记录式文件由逻辑记录组成，逻辑记录具有特定的逻辑含意。</p>
<h2 id="3-3-记录组块和分解"><a href="#3-3-记录组块和分解" class="headerlink" title="3.3 记录组块和分解"></a>3.3 记录组块和分解</h2><p>逻辑记录和块的关系：</p>
<ul>
<li><p>逻辑记录是按信息的逻辑含义所划分的单位，块是存储介质上连续的存储区域。</p>
</li>
<li><p>逻辑记录存放到文件存储器上时，一个记录可能占用一块或多块，也可能多个存放到一个物理块中。</p>
</li>
</ul>
<p>记录组块—将多个记录置于一个存储块中。</p>
<p>记录分解—从存储块中分解出逻辑记录。</p>
<p>块因子—一个存储块中包含多少个记录。</p>
<h2 id="3-4-记录组块"><a href="#3-4-记录组块" class="headerlink" title="3.4 记录组块"></a>3.4 记录组块</h2><h3 id="3-4-1-需考虑的问题："><a href="#3-4-1-需考虑的问题：" class="headerlink" title="3.4.1 需考虑的问题："></a>3.4.1 需考虑的问题：</h3><ul>
<li>块的长度是固定的还是可变的?</li>
</ul>
<p>​    -大多数系统中，块的固定长度的的。</p>
<ul>
<li>与记录的平均大小相比，块的相对大小是多少？</li>
</ul>
<p>​    -综合考虑顺序访问的频率和访问的局部性潜能，倾向于用大的块，以减少I/O传送时间。</p>
<h3 id="3-4-2-记录组块的方法"><a href="#3-4-2-记录组块的方法" class="headerlink" title="3.4.2 记录组块的方法"></a>3.4.2 记录组块的方法</h3><p>固定组块</p>
<p>可变长度跨越式组块</p>
<p>可变长度非跨越式组块</p>
<h1 id="4-文件存储器管理"><a href="#4-文件存储器管理" class="headerlink" title="4.文件存储器管理"></a>4.文件存储器管理</h1><h2 id="4-1-空闲盘块管理"><a href="#4-1-空闲盘块管理" class="headerlink" title="4.1 空闲盘块管理"></a>4.1 空闲盘块管理</h2><p>-》磁盘分配表</p>
<p>-》常用的空闲空间管理技术</p>
<p>​    -位示图</p>
<p>​    -空闲块列表</p>
<p>​    -空闲区链表</p>
<p>​    -空闲块索引</p>
<p>-》文件卷</p>
<p>​    -一组在辅助存储上可寻址的扇区的集合，操作系统或应用程序用卷来存储数据。一个卷中的扇区在物理上并不需要是连续的，只需要对操作系统或应用程序来讲是连续的。一个卷可能是更小的卷合并或组合后的结果。</p>
<h2 id="4-2文件存储空间管理"><a href="#4-2文件存储空间管理" class="headerlink" title="4.2文件存储空间管理"></a>4.2文件存储空间管理</h2><h3 id="4-2-1-预分配与动态分配"><a href="#4-2-1-预分配与动态分配" class="headerlink" title="4.2.1 预分配与动态分配"></a>4.2.1 预分配与动态分配</h3><ul>
<li>预分配策略要求在发出创建文件的请求时，声明该文件的最大大小。</li>
</ul>
<p>​    -若不能可靠地估计文件可能的最大大小，通常会多估计一些，以避免分配的空间不够。—浪费</p>
<ul>
<li>动态分配只有在需要时才给文件分配空间。</li>
</ul>
<p>​    -当创建一个新文件时，是否一次性地分配所需要的最大空间？</p>
<ul>
<li>预分配与动态分配</li>
</ul>
<p>​    -在分配时，采用什么分配策略?</p>
<p>​        a.可变大小的连续分区(类似分区式)</p>
<p>​        b.大小相等但不连续的块(类似页式)</p>
<p>​        c.采用什么数据结构记录分配给文件的空间?—文件分配表</p>
<h3 id="4-2-2-分配策略"><a href="#4-2-2-分配策略" class="headerlink" title="4.2.2 分配策略"></a>4.2.2 分配策略</h3><ul>
<li>文件分配时，需要综合考虑单个文件的效率和整个系统的效率</li>
</ul>
<p>​    -连续空间可以提高磁盘访问性能；</p>
<p>​    -使用可变大小的分区，可以减少由于超额分配而产生的未使用存储空间的派费；</p>
<p>​    -使用固定大小的分区可以简化空间的再分配；</p>
<p>​    -数目较多的小分区会增加用于管理分配信息表的大小。</p>
<ul>
<li>综合考虑的两种选择:</li>
</ul>
<p>​    -可变大小的连续分区</p>
<p>​        a.大小可变避免了浪費，文件分配表比较小</p>
<p>​        b.空间很难再次利用</p>
<p>​    -大小相等但不连续的块</p>
<p>​        a.小的固定分区提供了更多的灵活性</p>
<p>​        b.可能需要较大的文件分配表或更复杂的结构</p>
<h1 id="5-文件的物理结构"><a href="#5-文件的物理结构" class="headerlink" title="5.文件的物理结构"></a>5.文件的物理结构</h1><p>文件的物理结构是指文件在物理存储空间中存放(分配)的形式，亦称为文件的物理组织。</p>
<p>文件的物理结构涉及：块的划分、记录的排列索引的组织、信息的搜索，其优劣直接影响文件系统的性能。</p>
<p>文件的物理结构：顺序文件、链式文件、索引文件、直接文件</p>
<h2 id="5-1-顺序文件（连续文件）"><a href="#5-1-顺序文件（连续文件）" class="headerlink" title="5.1 顺序文件（连续文件）"></a>5.1 顺序文件（连续文件）</h2><ul>
<li><p>将一个文件存放到文件存储器连续的物理块中，便形成了顺序文件。</p>
</li>
<li><p>顺序文件中逻辑记录和物理记录顺序完全一致。通常记录按次序被读出或修改。</p>
</li>
<li><p>顺序文件的优点/缺点：读写高效/改变大小困难，磁盘碎片问题。File Allocation Table</p>
</li>
</ul>
<h2 id="5-2-链式文件（串联文件）"><a href="#5-2-链式文件（串联文件）" class="headerlink" title="5.2 链式文件（串联文件）"></a>5.2 链式文件（串联文件）</h2><ul>
<li><p>链式文件通过链指针将存放文件内容的各物理块联系起来</p>
</li>
<li><p>连接结构的优/缺点：文件读写效率低/易于扩展，不存在磁盘碎片问题</p>
</li>
</ul>
<h2 id="5-3-直接文件（哈希文件）"><a href="#5-3-直接文件（哈希文件）" class="headerlink" title="5.3 直接文件（哈希文件）"></a>5.3 直接文件（哈希文件）</h2><ul>
<li><p>通过hash函数在记录的关键字与其存储地址之间建立关系，据此实现存取即称为直接文件。</p>
</li>
<li><p>文件控制块</p>
</li>
</ul>
<h2 id="5-4-索引文件（链式文件的高效实现，现在几乎都采用）"><a href="#5-4-索引文件（链式文件的高效实现，现在几乎都采用）" class="headerlink" title="5.4 索引文件（链式文件的高效实现，现在几乎都采用）"></a>5.4 索引文件（链式文件的高效实现，现在几乎都采用）</h2><p>索引结构是实现非连续存储的另一种方法，适用于数据记录保存有随机存取存储设备上的文件。</p>
<p>使用索引表，其中登记了存放文件的物理块。</p>
<p>如果块长4KB (即索引块和数据块长4K)，每个指针(盘块号) 4B，则采用这种索引分配时，允许的文件最大尺寸是多少?</p>
<p>直接地址: 10X 4KB= 40KB</p>
<p>一级索引: 4KBX (4KB/4B)= 4MB</p>
<p>二级索引: 4KBX (4KB/4B)2= 4GB</p>
<p>三级索引: 4KB X (4KB/4B)3= 4TB</p>
<p>合计大小: 40KB+4MB+4GB+4TB</p>
<h1 id="6-文件共享与保护"><a href="#6-文件共享与保护" class="headerlink" title="6.文件共享与保护"></a>6.文件共享与保护</h1><ul>
<li>访问权限</li>
</ul>
<p>​    -无</p>
<p>​    -知道</p>
<p>​    -执行</p>
<p>​    -读</p>
<p>​    -追加</p>
<p>​    -更新</p>
<p>​    -改变保护</p>
<p>​    -删除</p>
<ul>
<li>同时访问</li>
</ul>
<p>​    -加锁</p>
<p>​    -互斥和死锁问题</p>
<h2 id="6-1-文件共享"><a href="#6-1-文件共享" class="headerlink" title="6.1 文件共享"></a>6.1 文件共享</h2><h3 id="6-1-1-基于目录指针实现文件共享"><a href="#6-1-1-基于目录指针实现文件共享" class="headerlink" title="6.1.1 基于目录指针实现文件共享"></a>6.1.1 基于目录指针实现文件共享</h3><p>允许一个文件可以有多个父目录，即有多个属于不同用户的目录，同时指向同一个文件，即可实现文件共享(但这会破坏树的特性一多个父节点! )</p>
<h3 id="6-1-2-利用索引节点"><a href="#6-1-2-利用索引节点" class="headerlink" title="6.1.2 利用索引节点"></a>6.1.2 利用索引节点</h3><p>利用索引结点，存放文件的物理地址、文件属性和文件共享与保护相关信息，而不同用户在其文件目录中设置共性文件的别名及指向相应索引结点的指针。</p>
<h3 id="6-1-3-利用符号链实现共享"><a href="#6-1-3-利用符号链实现共享" class="headerlink" title="6.1.3 利用符号链实现共享"></a>6.1.3 利用符号链实现共享</h3><p>由操作系统为被共享文件的创建一个LINK类型的文件(即该共享文件的路径名，称为符号链)，用户通过在自己的文件目录中包含指向该符号链文件的方法实现文件共享。</p>
<h2 id="6-2-文件保护"><a href="#6-2-文件保护" class="headerlink" title="6.2 文件保护"></a>6.2 文件保护</h2><p>利用符号链实现共享的优缺点</p>
<p>优点：只有文件主才拥有指向其索引结点的指针，而其他共享用户则只有该文件的路径名，因此不会因文件主删除一个共享 文件后留下悬空指针的问题。共享者通过符号链访问一个已被删除的共享文件将会访问失败时，则删除符号链。</p>
<p>缺点：用户访问共享文件时，系统是根据给定的文件路径名逐个分量(名)去查找目录，直至找到该文件的索引结点。因此，可能要多次读盘，开销大。此外，要为每个共享用户建立一条符号链，而由于链本身实际上是一个文件，也要为它分配索引结点，这也要耗费磁盘空间。</p>
<ul>
<li>文件保护用于防止文件被破坏。包括两个方面:</li>
</ul>
<p>​    一是防止系统崩溃所造成的文件破坏;</p>
<p>​    二是防止文件主和其他用户有意或无意的非法操作所造成的文件不安全性。</p>
<ul>
<li>防止系统崩溃造成文件破坏的方法:</li>
</ul>
<p>​    ➢定时转储</p>
<p>​    ➢多副本</p>
<ul>
<li><p>防止非法操作的方法:基本思想是建立三元组: (用户、 对象、存取权限)—访问控制</p>
</li>
<li><p>访问矩阵</p>
</li>
</ul>
<p>​    -主体</p>
<p>​    -对象</p>
<ul>
<li>访问权限</li>
</ul>
<h2 id="6-3-UNIX文件保护"><a href="#6-3-UNIX文件保护" class="headerlink" title="6.3 UNIX文件保护"></a>6.3 UNIX文件保护</h2><ul>
<li><p>UNIX/Linux把用户分为3类：文件主、同组用户、其他用户</p>
</li>
<li><p>定义3种存取权限：可读r、可写w、可执行x。文件属性共有10位：</p>
</li>
</ul>
<p>​    -rwxrwxrwx</p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/OS/">OS</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>Alipay</span><span class="qrcode"><img src="/donate/alipay.jpg" alt="Alipay"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>Wechat</span><span class="qrcode"><img src="/donate/wechatpay.png" alt="Wechat"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/07/04/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%AE%AD%E5%8D%81%E4%B8%80/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">数据结构进阶实训十一 树</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/06/30/AdvancedOS/"><span class="level-item">高级操作系统</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "vucxC0bltE95lsPGxGXlUJBf-gzGzoHsz",
            appKey: "YgRn5inwLxs6B4VgyLp4zvti",
            placeholder: "ヾﾉ≧∀≦)o快来评论一下吧!",
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "en",
            
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/shadow.jpg" alt="肖梦杰"></figure><p class="title is-size-4 is-block line-height-inherit">肖梦杰</p><p class="is-size-6 is-block">MysticalGuest</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Xiangyang City, Hubei Province, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">8</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/MysticalGuest" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="QQ" href="https://user.qzone.qq.com/1317148109/main"><i class="fab fa-qq"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/MysticalGuest"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:etherealsymbol@gmail.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#1-文件与文件系统"><span class="mr-2">1</span><span>1.文件与文件系统</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-1-文件系统的功能"><span class="mr-2">1.1</span><span>1.1 文件系统的功能</span></a></li><li><a class="is-flex" href="#1-2-文件系统的优点"><span class="mr-2">1.2</span><span>1.2 文件系统的优点</span></a></li><li><a class="is-flex" href="#1-3-文件系统的分层结构"><span class="mr-2">1.3</span><span>1.3 文件系统的分层结构</span></a></li><li><a class="is-flex" href="#1-4-文件的存取"><span class="mr-2">1.4</span><span>1.4 文件的存取</span></a></li><li><a class="is-flex" href="#1-5-文件的操作"><span class="mr-2">1.5</span><span>1.5 文件的操作</span></a></li></ul></li><li><a class="is-flex" href="#2-文件目录与文件检索"><span class="mr-2">2</span><span>2 文件目录与文件检索</span></a><ul class="menu-list"><li><a class="is-flex" href="#2-1-文件目录与目录项"><span class="mr-2">2.1</span><span>2.1 文件目录与目录项</span></a><ul class="menu-list"><li><a class="is-flex" href="#2-1-1-单级目录"><span class="mr-2">2.1.1</span><span>2.1.1 单级目录</span></a></li><li><a class="is-flex" href="#2-1-2-二级目录"><span class="mr-2">2.1.2</span><span>2.1.2 二级目录</span></a></li><li><a class="is-flex" href="#2-1-3-多级目录"><span class="mr-2">2.1.3</span><span>2.1.3 多级目录</span></a></li><li><a class="is-flex" href="#2-1-4-层级目录结构"><span class="mr-2">2.1.4</span><span>2.1.4 层级目录结构</span></a></li><li><a class="is-flex" href="#2-1-5-UNIX-Linux目录项"><span class="mr-2">2.1.5</span><span>2.1.5 UNIX/Linux目录项</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#3-文件逻辑结构与数据存储"><span class="mr-2">3</span><span>3 文件逻辑结构与数据存储</span></a><ul class="menu-list"><li><a class="is-flex" href="#3-1-文件结构与文件存储"><span class="mr-2">3.1</span><span>3.1 文件结构与文件存储</span></a></li><li><a class="is-flex" href="#3-2-文件的逻辑结构"><span class="mr-2">3.2</span><span>3.2 文件的逻辑结构</span></a></li><li><a class="is-flex" href="#3-3-记录组块和分解"><span class="mr-2">3.3</span><span>3.3 记录组块和分解</span></a></li><li><a class="is-flex" href="#3-4-记录组块"><span class="mr-2">3.4</span><span>3.4 记录组块</span></a><ul class="menu-list"><li><a class="is-flex" href="#3-4-1-需考虑的问题："><span class="mr-2">3.4.1</span><span>3.4.1 需考虑的问题：</span></a></li><li><a class="is-flex" href="#3-4-2-记录组块的方法"><span class="mr-2">3.4.2</span><span>3.4.2 记录组块的方法</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#4-文件存储器管理"><span class="mr-2">4</span><span>4.文件存储器管理</span></a><ul class="menu-list"><li><a class="is-flex" href="#4-1-空闲盘块管理"><span class="mr-2">4.1</span><span>4.1 空闲盘块管理</span></a></li><li><a class="is-flex" href="#4-2文件存储空间管理"><span class="mr-2">4.2</span><span>4.2文件存储空间管理</span></a><ul class="menu-list"><li><a class="is-flex" href="#4-2-1-预分配与动态分配"><span class="mr-2">4.2.1</span><span>4.2.1 预分配与动态分配</span></a></li><li><a class="is-flex" href="#4-2-2-分配策略"><span class="mr-2">4.2.2</span><span>4.2.2 分配策略</span></a></li></ul></li></ul></li><li><a class="is-flex" href="#5-文件的物理结构"><span class="mr-2">5</span><span>5.文件的物理结构</span></a><ul class="menu-list"><li><a class="is-flex" href="#5-1-顺序文件（连续文件）"><span class="mr-2">5.1</span><span>5.1 顺序文件（连续文件）</span></a></li><li><a class="is-flex" href="#5-2-链式文件（串联文件）"><span class="mr-2">5.2</span><span>5.2 链式文件（串联文件）</span></a></li><li><a class="is-flex" href="#5-3-直接文件（哈希文件）"><span class="mr-2">5.3</span><span>5.3 直接文件（哈希文件）</span></a></li><li><a class="is-flex" href="#5-4-索引文件（链式文件的高效实现，现在几乎都采用）"><span class="mr-2">5.4</span><span>5.4 索引文件（链式文件的高效实现，现在几乎都采用）</span></a></li></ul></li><li><a class="is-flex" href="#6-文件共享与保护"><span class="mr-2">6</span><span>6.文件共享与保护</span></a><ul class="menu-list"><li><a class="is-flex" href="#6-1-文件共享"><span class="mr-2">6.1</span><span>6.1 文件共享</span></a><ul class="menu-list"><li><a class="is-flex" href="#6-1-1-基于目录指针实现文件共享"><span class="mr-2">6.1.1</span><span>6.1.1 基于目录指针实现文件共享</span></a></li><li><a class="is-flex" href="#6-1-2-利用索引节点"><span class="mr-2">6.1.2</span><span>6.1.2 利用索引节点</span></a></li><li><a class="is-flex" href="#6-1-3-利用符号链实现共享"><span class="mr-2">6.1.3</span><span>6.1.3 利用符号链实现共享</span></a></li></ul></li><li><a class="is-flex" href="#6-2-文件保护"><span class="mr-2">6.2</span><span>6.2 文件保护</span></a></li><li><a class="is-flex" href="#6-3-UNIX文件保护"><span class="mr-2">6.3</span><span>6.3 UNIX文件保护</span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Compile/"><span class="level-start"><span class="level-item">Compile</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%B8%BB%E9%A2%98/"><span class="level-start"><span class="level-item">主题</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%BE%E7%A8%8B/"><span class="level-start"><span class="level-item">课程</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%85%8D%E7%BD%AE/"><span class="level-start"><span class="level-item">配置</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Axios/"><span class="tag">Axios</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Electron-Vue/"><span class="tag">Electron-Vue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Element-UI/"><span class="tag">Element-UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OS/"><span class="tag">OS</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe to Updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6320686616967489" data-ad-slot="123456789" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/mylogo.svg" alt="Longing(MysteryGuest的博客)" height="28"></a><p class="size-small"><span>&copy; 2020 MysticalGuest</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span><br><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv">0</span>次</span><br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><span><script>	var now = new Date();	function createtime() {		var grt= new Date("4/2/2020 08:00:00");		now.setTime(now.getTime()+250);		days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 		hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 		if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 		mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 		seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 		snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 		document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 		document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";	}	setInterval("createtime()",250);</script></span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://yoursite.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/click.js"></script><script src="/js/anime.min.js"></script><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script src="/js/snow.js"></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>