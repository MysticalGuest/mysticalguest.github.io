<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Spring Boot Web开发 - Longing(MysteryGuest的博客)</title><meta description="1、使用Spring Boot： 创建Spring Boot应用，选中我们需要的模块 Spring Boot已经默认将这些场景配置好了，只需要在配置文件中指定少量配置就可以运行起来 自己编写业务代码"><meta property="og:type" content="blog"><meta property="og:title" content="Spring Boot Web开发"><meta property="og:url" content="https://mysticalguest.github.io/"><meta property="og:site_name" content="Longing(MysteryGuest的博客)"><meta property="og:description" content="1、使用Spring Boot： 创建Spring Boot应用，选中我们需要的模块 Spring Boot已经默认将这些场景配置好了，只需要在配置文件中指定少量配置就可以运行起来 自己编写业务代码"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/ice.jpg"><meta property="article:published_time" content="2020-08-09T07:17:01.661Z"><meta property="article:modified_time" content="2020-09-10T05:05:37.483Z"><meta property="article:author" content="MysticalGuest"><meta property="article:tag" content="Spring"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/ice.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mysticalguest.github.io/2020/08/09/Spring/SpringBootWeb/"},"headline":"MysteryGuest","image":["https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/ice.jpg"],"datePublished":"2020-08-09T07:17:01.661Z","dateModified":"2020-09-10T05:05:37.483Z","author":{"@type":"Person","name":"MysticalGuest"},"description":"java,技术分享,后端开发,算法,spring"}</script><link rel="canonical" href="https://mysticalguest.github.io/2020/08/09/Spring/SpringBootWeb/"><link rel="alternative" href="/atom.xml" title="Longing(MysteryGuest的博客)" type="application/atom+xml"><link rel="icon" href="/img/bird.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script src="/js/click.js"></script><script src="/js/anime.min.js"></script><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script src="/js/snow.js"></script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/mylogo.svg" alt="Longing(MysteryGuest的博客)" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Visit on GitHub" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/ice.jpg" alt="Spring Boot Web开发"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-09T07:17:01.661Z" title="2020-08-09T07:17:01.661Z">2020-08-09</time><span class="level-item"><a class="link-muted" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a></span><span class="level-item">23 分钟 读完 (大约 3452 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Spring Boot Web开发</h1><div class="content"><h2 id="1、使用Spring-Boot："><a href="#1、使用Spring-Boot：" class="headerlink" title="1、使用Spring Boot："></a>1、使用Spring Boot：</h2><ul>
<li>创建Spring Boot应用，选中我们需要的模块</li>
<li>Spring Boot已经默认将这些场景配置好了，只需要在配置文件中指定少量配置就可以运行起来</li>
<li>自己编写业务代码</li>
</ul>
<a id="more"></a>
<p>回顾自动配置原理</p>
<p>这个场景Spring Boot帮我们配置了什么？能不能修改？能修改哪些配置？能不能扩展？等等</p>
<ul>
<li>xxxxAutoConfiguration：帮我们给容器中自动配置组件</li>
<li>xxxxProperties：配置类来封装配置文件的内容</li>
</ul>
<h2 id="2、Spring-Boot对静态资源的映射规则"><a href="#2、Spring-Boot对静态资源的映射规则" class="headerlink" title="2、Spring Boot对静态资源的映射规则"></a>2、Spring Boot对静态资源的映射规则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">  prefix = <span class="string">"spring.resources"</span>,</span><br><span class="line">  ignoreUnknownFields = <span class="keyword">false</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceProperties</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 可以设置和静态资源有关的参数，比如缓存时间</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-依赖的方式"><a href="#2-1-依赖的方式" class="headerlink" title="2.1 依赖的方式"></a>2.1 依赖的方式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcAutoConfiguration.class文件</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">    logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Integer cachePeriod = <span class="keyword">this</span>.resourceProperties.getCachePeriod();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</span><br><span class="line">      <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(</span><br><span class="line">  <span class="keyword">new</span> String[]&#123;<span class="string">"/webjars/**"</span>&#125;).addResourceLocations(</span><br><span class="line">    <span class="keyword">new</span> String[]&#123;<span class="string">"classpath:/META-INF/resources/webjars/"</span>&#125;</span><br><span class="line">  ).setCachePeriod(cachePeriod)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">      <span class="keyword">this</span>.customizeResourceHandlerRegistration(registry.addResourceHandler(</span><br><span class="line">  <span class="keyword">new</span> String[]&#123;staticPathPattern&#125;).addResourceLocations(</span><br><span class="line">    <span class="keyword">this</span>.resourceProperties.getStaticLocations()</span><br><span class="line">  ).setCachePeriod(cachePeriod)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>所有/webjars/**，都去classpath:/META-INF/resources/webjars/找资源</p>
<p>webjars：以jar包的方式引入静态资源</p>
</li>
</ul>
<p>webjars<a href="https://www.webjars.org/">官网</a></p>
<p align="center">
    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/webjars-jquery.PNG" alt="webjars-jquery">
</p>

<p>访问方式：<a href="http://localhost:8088/webjars/jquery/3.5.1/jquery.js">http://localhost:8088/webjars/jquery/3.5.1/jquery.js</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入jquery-webjars --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-“-”访问当前项目的任何资源（静态资源的文件夹）"><a href="#2-2-“-”访问当前项目的任何资源（静态资源的文件夹）" class="headerlink" title="2.2 “/**”访问当前项目的任何资源（静态资源的文件夹）"></a>2.2 “/**”访问当前项目的任何资源（静态资源的文件夹）</h3><p>继续读<code>addResourceHandlers</code>方法，如果处理不了，就去静态<code>staticPathPattern</code>路径去找</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">WebMvcProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.localeResolver = WebMvcProperties.LocaleResolver.ACCEPT_HEADER;</span><br><span class="line">  <span class="keyword">this</span>.dispatchTraceRequest = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.dispatchOptionsRequest = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">this</span>.ignoreDefaultModelOnRedirect = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">this</span>.throwExceptionIfNoHandlerFound = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.logResolvedException = <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">this</span>.mediaTypes = <span class="keyword">new</span> LinkedHashMap();</span><br><span class="line">  <span class="keyword">this</span>.staticPathPattern = <span class="string">"/**"</span>;</span><br><span class="line">  <span class="keyword">this</span>.async = <span class="keyword">new</span> WebMvcProperties.Async();</span><br><span class="line">  <span class="keyword">this</span>.servlet = <span class="keyword">new</span> WebMvcProperties.Servlet();</span><br><span class="line">  <span class="keyword">this</span>.view = <span class="keyword">new</span> WebMvcProperties.View();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>它添加了个位置<code>addResourceLocations</code>，这个里面的<code>resourceProperties</code>有个<code>getStaticLocations()</code>方法，点进去，有个常量<code>RESOURCE_LOCATIONS</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">  RESOURCE_LOCATIONS = <span class="keyword">new</span> String[CLASSPATH_RESOURCE_LOCATIONS.length + </span><br><span class="line">    SERVLET_RESOURCE_LOCATIONS.length];</span><br><span class="line">  System.arraycopy(SERVLET_RESOURCE_LOCATIONS, <span class="number">0</span>, RESOURCE_LOCATIONS, <span class="number">0</span>, </span><br><span class="line">    SERVLET_RESOURCE_LOCATIONS.length);</span><br><span class="line">  System.arraycopy(CLASSPATH_RESOURCE_LOCATIONS, <span class="number">0</span>, RESOURCE_LOCATIONS, </span><br><span class="line">    SERVLET_RESOURCE_LOCATIONS.length, CLASSPATH_RESOURCE_LOCATIONS.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就找到了以下文件夹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] SERVLET_RESOURCE_LOCATIONS = <span class="keyword">new</span> String[]&#123;<span class="string">"/"</span>&#125;; <span class="comment">// 当前项目的根路径</span></span><br><span class="line"><span class="comment">// 和</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = <span class="keyword">new</span> String[]&#123;</span><br><span class="line">  <span class="string">"classpath:/META-INF/resources/"</span>,</span><br><span class="line">  <span class="string">"classpath:/resources/"</span>, </span><br><span class="line">  <span class="string">"classpath:/static/"</span>, </span><br><span class="line">  <span class="string">"classpath:/public/"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>src/mian/java</code>和<code>src/main/resources</code>都是类路径</p>
<p>如果要访问<code>localhost:8088/*.js</code>资源，没有人为处理，那么会自动去上面这些路径，静态资源文件夹里找这些文件</p>
</blockquote>
<p>访问方式：<a href="http://localhost:8088/asserts/img/childhood_dreams.jpg">http://localhost:8088/asserts/img/childhood_dreams.jpg</a></p>
<p align="center">
    <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/static.PNG" alt="static">
</p>

<h3 id="2-3-欢迎页设置，静态资源文件夹下的所有index-html页面"><a href="#2-3-欢迎页设置，静态资源文件夹下的所有index-html页面" class="headerlink" title="2.3 欢迎页设置，静态资源文件夹下的所有index.html页面"></a>2.3 欢迎页设置，静态资源文件夹下的所有index.html页面</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcAutoConfiguration.class文件</span></span><br><span class="line"><span class="comment">// 配置欢迎页映射</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WebMvcAutoConfiguration.WelcomePageHandlerMapping welcomePageHandlerMapping</span><br><span class="line">    (ResourceProperties resourceProperties) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> WebMvcAutoConfiguration.WelcomePageHandlerMapping(</span><br><span class="line">    resourceProperties.getWelcomePage(), <span class="keyword">this</span>.mvcProperties.getStaticPathPattern()</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">customizeResourceHandlerRegistration</span><span class="params">(ResourceHandlerRegistration registration)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.resourceHandlerRegistrationCustomizer != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.resourceHandlerRegistrationCustomizer.customize(registration);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Spring最顶层的组件，保存每个请求谁来处理</p>
<p>点进<code>getWelcomePage()</code>方法</p>
<p><code>this.mvcProperties.getStaticPathPattern()</code>还被谁映射，点进去看源码就是<code>/**</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Resource <span class="title">getWelcomePage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  String[] var1 = <span class="keyword">this</span>.getStaticWelcomePageLocations();</span><br><span class="line">  <span class="keyword">int</span> var2 = var1.length;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> var3 = <span class="number">0</span>; var3 &lt; var2; ++var3) &#123;</span><br><span class="line">    String location = var1[var3];</span><br><span class="line">    Resource resource = <span class="keyword">this</span>.resourceLoader.getResource(location);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (resource.exists()) &#123;</span><br><span class="line">        resource.getURL();</span><br><span class="line">        <span class="keyword">return</span> resource;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception var7) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>需要遍历，说明欢迎页还挺多的</p>
<p>点进<code>getStaticWelcomePageLocations()</code>方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String[] getStaticWelcomePageLocations() &#123;</span><br><span class="line">  String[] result = <span class="keyword">new</span> String[<span class="keyword">this</span>.staticLocations.length];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.length; ++i) &#123;</span><br><span class="line">    String location = <span class="keyword">this</span>.staticLocations[i];</span><br><span class="line">    <span class="keyword">if</span> (!location.endsWith(<span class="string">"/"</span>)) &#123;</span><br><span class="line">      location = location + <span class="string">"/"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result[i] = location + <span class="string">"index.html"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>还是这个<code>staticLocations</code>静态文件夹</p>
<p>静态文件夹路径都拼接上<code>index.html</code></p>
</blockquote>
<p>访问方式：<a href="http://localhost:8088/">http://localhost:8088/</a>    就会找index页面</p>
<h3 id="2-4-网站图标"><a href="#2-4-网站图标" class="headerlink" title="2.4 网站图标"></a>2.4 网站图标</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WebMvcAutoConfiguration.class文件</span></span><br><span class="line"><span class="comment">// 配置喜欢的图标</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">  value = &#123;<span class="string">"spring.mvc.favicon.enabled"</span>&#125;,</span><br><span class="line">  matchIfMissing = <span class="keyword">true</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FaviconConfiguration</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ResourceProperties resourceProperties;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">FaviconConfiguration</span><span class="params">(ResourceProperties resourceProperties)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.resourceProperties = resourceProperties;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> SimpleUrlHandlerMapping <span class="title">faviconHandlerMapping</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SimpleUrlHandlerMapping mapping = <span class="keyword">new</span> SimpleUrlHandlerMapping();</span><br><span class="line">    mapping.setOrder(-<span class="number">2147483647</span>);</span><br><span class="line">    mapping.setUrlMap(Collections.singletonMap(<span class="string">"**/favicon.ico"</span>, </span><br><span class="line">      <span class="keyword">this</span>.faviconRequestHandler()));</span><br><span class="line">    <span class="keyword">return</span> mapping;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title">faviconRequestHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ResourceHttpRequestHandler requestHandler = <span class="keyword">new</span> ResourceHttpRequestHandler();</span><br><span class="line">    requestHandler.setLocations(<span class="keyword">this</span>.resourceProperties.getFaviconLocations());</span><br><span class="line">    <span class="keyword">return</span> requestHandler;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>所有的<code>**/favicon.ico</code>都是在静态文件夹下找</p>
</blockquote>
<h3 id="2-5-自定义路径"><a href="#2-5-自定义路径" class="headerlink" title="2.5 自定义路径"></a>2.5 自定义路径</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.resources.static-locations</span>=<span class="string">classpath:/hello/,classpath:initializr/</span></span><br></pre></td></tr></table></figure>
<p>多路径用都好隔开，一旦启用自定义路径，那么默认的静态资源路径就不能使用了</p>
<h2 id="3、模板引擎"><a href="#3、模板引擎" class="headerlink" title="3、模板引擎"></a>3、模板引擎</h2><p>JSP、Velocity、Freemarker、Thymeleaf</p>
<p align="center">
  <img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/template-engine.png" alt="template-engine" style="zoom: 80%;">
</p>


<p>Spring Boot推荐的Thymeleaf：语法更简单，功能更强大</p>
<h3 id="3-1-引入Thymeleaf，引入starter："><a href="#3-1-引入Thymeleaf，引入starter：" class="headerlink" title="3.1 引入Thymeleaf，引入starter："></a>3.1 引入Thymeleaf，引入starter：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>查看引入的库，发现引入的2.1.6版本的，太低了</p>
<p>Thymeleaf的<a href="https://github.com/thymeleaf/thymeleaf/releases">版本发布</a></p>
<p>Spring官网<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/howto-spring-mvc.html#howto-use-thymeleaf-3">Thymeleaf 3的使用</a></p>
<p>切换版本：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">&lt;!-- Thymeleaf主程序 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thymeleaf.version</span>&gt;</span>3.0.2.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf.version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Thymeleaf布局支持程序 Thymeleaf3要求layout2以上版本 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Thymeleaf2和layout1适配 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>properties里面的会属性覆盖Spring Boot默认的版本号</p>
<p>thymeleaf-layout-dialect的<a href="https://github.com/ultraq/thymeleaf-layout-dialect/releases">版本发布</a></p>
<h3 id="3-2-Thymeleaf使用及语法"><a href="#3-2-Thymeleaf使用及语法" class="headerlink" title="3.2 Thymeleaf使用及语法"></a>3.2 Thymeleaf使用及语法</h3><p>还是在<code>spring-boot-autoconfigure</code>自动配置包里：添加组件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(</span><br><span class="line">  name = &#123;<span class="string">"org.thymeleaf.templatemode.TemplateMode"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Thymeleaf3Configuration</span> </span>&#123;</span><br><span class="line">  Thymeleaf3Configuration() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">  @<span class="title">ConditionalOnWebApplication</span></span></span><br><span class="line"><span class="class">  <span class="title">static</span> <span class="title">class</span> <span class="title">Thymeleaf3ViewResolverConfiguration</span> <span class="keyword">extends</span> </span></span><br><span class="line"><span class="class">      <span class="title">AbstractThymeleafViewResolverConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Thymeleaf3ViewResolverConfiguration(ThymeleafProperties properties, </span><br><span class="line">        SpringTemplateEngine templateEngine) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">super</span>(properties, templateEngine);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configureTemplateEngine</span><span class="params">(ThymeleafViewResolver resolver, </span></span></span><br><span class="line"><span class="function"><span class="params">        SpringTemplateEngine templateEngine)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      Method setTemplateEngine;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        setTemplateEngine = ReflectionUtils.findMethod(</span><br><span class="line">          resolver.getClass(), </span><br><span class="line">          <span class="string">"setTemplateEngine"</span>, </span><br><span class="line">          <span class="keyword">new</span> Class[]&#123;Class.forName(</span><br><span class="line">            <span class="string">"org.thymeleaf.ITemplateEngine"</span>, </span><br><span class="line">            <span class="keyword">true</span>, </span><br><span class="line">            resolver.getClass().getClassLoader()</span><br><span class="line">          )&#125;</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">catch</span> (ClassNotFoundException var5) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(var5);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ReflectionUtils.invokeMethod(setTemplateEngine, resolver, <span class="keyword">new</span> Object[]&#123;templateEngine&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Configuration</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean</span>(</span><br><span class="line">    name = &#123;<span class="string">"defaultTemplateResolver"</span>&#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultTemplateResolverConfiguration</span> <span class="keyword">extends</span> </span></span><br><span class="line"><span class="class">      <span class="title">AbstractTemplateResolverConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    DefaultTemplateResolverConfiguration(ThymeleafProperties properties, </span><br><span class="line">        ApplicationContext applicationContext) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">super</span>(properties, applicationContext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpringResourceTemplateResolver <span class="title">defaultTemplateResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      SpringResourceTemplateResolver resolver = <span class="keyword">super</span>.defaultTemplateResolver();</span><br><span class="line">      Method setCheckExistence = ReflectionUtils.findMethod(</span><br><span class="line">        resolver.getClass(), </span><br><span class="line">        <span class="string">"setCheckExistence"</span>, </span><br><span class="line">        <span class="keyword">new</span> Class[]&#123;Boolean.TYPE&#125;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      ReflectionUtils.invokeMethod(</span><br><span class="line">        setCheckExistence, </span><br><span class="line">        resolver, </span><br><span class="line">        <span class="keyword">new</span> Object[]&#123;<span class="keyword">this</span>.getProperties().isCheckTemplate()&#125;</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> resolver;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为我们引入的是3+版本，所以只有3+版本生效；</p>
<p>配置了哪些属性？在文件<code>ThymeleafProperties</code>中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">  prefix = <span class="string">"spring.thymeleaf"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafProperties</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_ENCODING = Charset.forName(<span class="string">"UTF-8"</span>);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> MimeType DEFAULT_CONTENT_TYPE = MimeType.valueOf(<span class="string">"text/html"</span>);</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".html"</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplate = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplateLocation = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">private</span> String prefix = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">  <span class="keyword">private</span> String suffix = <span class="string">".html"</span>;</span><br><span class="line">  <span class="keyword">private</span> String mode = <span class="string">"HTML5"</span>;</span><br><span class="line">  <span class="keyword">private</span> Charset encoding;</span><br><span class="line">  <span class="keyword">private</span> MimeType contentType;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> cache;</span><br><span class="line">  <span class="keyword">private</span> Integer templateResolverOrder;</span><br><span class="line">  <span class="keyword">private</span> String[] viewNames;</span><br><span class="line">  <span class="keyword">private</span> String[] excludedViewNames;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> enabled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只要我们把HTML页面放在<code>classpath:/templates/</code>，Thymeleaf就能自动渲染</p>
<p>Thymeleaf语法还是参照<a href="https://www.thymeleaf.org/">官方网</a>的<a href="https://www.thymeleaf.org/documentation.html">官方文档</a></p>
<h3 id="3-3-代码示例"><a href="#3-3-代码示例" class="headerlink" title="3.3 代码示例"></a>3.3 代码示例</h3><ul>
<li>导入Thymeleaf的名称空间</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用Thymeleaf语法</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;text&#125;"</span>&gt;</span>这里是div信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-语法规则"><a href="#3-4-语法规则" class="headerlink" title="3.4 语法规则"></a>3.4 语法规则</h3><p><code>th:text</code>：改变当前元素里面的文本内容；</p>
<p><strong>th</strong>：任意html属性；替换原生属性的值，例：th:class覆盖class</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Feature</th>
<th style="text-align:center">Detail</th>
<th style="text-align:center">Attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Fragment inclusion</td>
<td style="text-align:center">片段包含：jsp:include</td>
<td style="text-align:center">th:insert<br/>th:replace</td>
</tr>
<tr>
<td style="text-align:center">Fragment iteration</td>
<td style="text-align:center">遍历：c:forEach</td>
<td style="text-align:center">th:each</td>
</tr>
<tr>
<td style="text-align:center">Conditional evaluation</td>
<td style="text-align:center">条件判断：c:if</td>
<td style="text-align:center">th:if<br/>th:unless<br/>th:switch<br/>th:case</td>
</tr>
<tr>
<td style="text-align:center">Local variable definition</td>
<td style="text-align:center">声明变量：c:set</td>
<td style="text-align:center">th:object<br/>th:with</td>
</tr>
<tr>
<td style="text-align:center">General attribute modification</td>
<td style="text-align:center">任意属性修改支持prepend, append</td>
<td style="text-align:center">th:attr<br/>th:attrprepend<br/>th:attrappend</td>
</tr>
<tr>
<td style="text-align:center">Specific attribute modification</td>
<td style="text-align:center">修改制定属性默认值</td>
<td style="text-align:center">th:value<br/>th:href<br/>th:src<br/>…</td>
</tr>
<tr>
<td style="text-align:center">Text (tag body modification)</td>
<td style="text-align:center">修改标签体内容</td>
<td style="text-align:center">th:text(转义特殊字符)<br/>th:utext(不转义特殊字符)</td>
</tr>
<tr>
<td style="text-align:center">Fragment specification</td>
<td style="text-align:center">声明片段</td>
<td style="text-align:center">th:fragment</td>
</tr>
<tr>
<td style="text-align:center">Fragment removal</td>
<td style="text-align:center"></td>
<td style="text-align:center">th:remove</td>
</tr>
</tbody>
</table>
</div>
<h3 id="3-5-表达式"><a href="#3-5-表达式" class="headerlink" title="3.5 表达式"></a>3.5 表达式</h3><ul>
<li><p>Simple expressions: (表达式语法)</p>
<ul>
<li>Variable Expressions: ${…}: 获取变量值; OGNL;</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">1)</span> <span class="string">获取对象的属性、调用方法</span></span><br><span class="line"> <span class="meta">2)</span> <span class="string">使用内置的基本对象</span></span><br><span class="line"><span class="comment">   #ctx : the context object.</span></span><br><span class="line"><span class="comment">   #vars: the context variables.</span></span><br><span class="line"><span class="comment">   #locale : the context locale.</span></span><br><span class="line"><span class="comment">   #request : (only in Web Contexts) the HttpServletRequest object.</span></span><br><span class="line"><span class="comment">   #response : (only in Web Contexts) the HttpServletResponse object.</span></span><br><span class="line"><span class="comment">   #session : (only in Web Contexts) the HttpSession object.</span></span><br><span class="line"><span class="comment">   #servletContext : (only in Web Contexts) the ServletContext object.</span></span><br><span class="line"> </span><br><span class="line">   <span class="meta">$&#123;session.foo&#125;</span> <span class="string">// Retrieves the session atttribute 'foo'</span></span><br><span class="line"><span class="comment">   # 附录都有演示</span></span><br><span class="line"> <span class="meta">3)</span> <span class="string">内置的一些工具对象</span></span><br><span class="line"><span class="comment">   #execInfo : information about the template being processed.</span></span><br><span class="line"><span class="comment">   #messages : methods for obtaining externalized messages inside variables expressions, </span></span><br><span class="line"><span class="comment"># in the same way as they would be obtained using #&#123;…&#125; syntax.</span></span><br><span class="line"><span class="comment">   #uris : methods for escaping parts of URLs/URIs</span></span><br><span class="line"><span class="comment">   #conversions : methods for executing the configured conversion service (if any).</span></span><br><span class="line"><span class="comment">   #dates : methods for java.util.Date objects: formatting, component extraction, etc.</span></span><br><span class="line"><span class="comment">   #calendars : analogous to #dates , but for java.util.Calendar objects.</span></span><br><span class="line"><span class="comment">   #numbers : methods for formatting numeric objects.</span></span><br><span class="line"><span class="comment">   #strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span></span><br><span class="line"><span class="comment">   #objects : methods for objects in general.</span></span><br><span class="line"><span class="comment">   #bools : methods for boolean evaluation.</span></span><br><span class="line"><span class="comment">   #arrays : methods for arrays.</span></span><br><span class="line"><span class="comment">   #lists : methods for lists.</span></span><br><span class="line"><span class="comment">   #sets : methods for sets.</span></span><br><span class="line"><span class="comment">   #maps : methods for maps.</span></span><br><span class="line"><span class="comment">   #aggregates : methods for creating aggregates on arrays or collections.</span></span><br><span class="line"><span class="comment">   #ids : methods for dealing with id attributes that might be repeated </span></span><br><span class="line"><span class="comment"># (for example, as a result of an iteration).</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Selection Variable Expressions: *{…}: 选择表达式, 和${}在功能上是一样的</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">补充: 配合th:object="$&#123;session.user&#125;"进行使用</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;firstName&#125;"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;lastName&#125;"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;nationality&#125;"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Message Expressions: #{…}: 获取国际化内容</li>
<li>Link URL Expressions: @{…}: 定义URL</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@&#123;/order/process(execId=$&#123;execId&#125;,execType='FAST')&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Fragment Expressions: ~{…}: 片段引用表达式</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 插入片段文档</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"~&#123;commons :: main&#125;"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Literals(字面量)</p>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Text</span> <span class="string">literals: 'one text' , 'Another one!' ,…</span></span><br><span class="line"><span class="attr">Number</span> <span class="string">literals: 0 , 34 , 3.0 , 12.3 ,…</span></span><br><span class="line"><span class="attr">Boolean</span> <span class="string">literals: true , false</span></span><br><span class="line"><span class="attr">Null</span> <span class="string">literal: null</span></span><br><span class="line"><span class="attr">Literal</span> <span class="string">tokens: one , sometext , main ,…</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Text operations:(文本操作)</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">String</span> <span class="string">concatenation: +</span></span><br><span class="line"><span class="attr">Literal</span> <span class="string">substitutions: |The name is $&#123;name&#125;|</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Arithmetic operations:(数学运算)</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Binary</span> <span class="string">operators: + , - , * , / , %</span></span><br><span class="line"><span class="attr">Minus</span> <span class="string">sign (unary operator): -</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Boolean operations:(布尔运算)</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Binary</span> <span class="string">operators: and , or</span></span><br><span class="line"><span class="attr">Boolean</span> <span class="string">negation (unary operator): ! , not</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Comparisons and equality:(比较运算)</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Comparators</span>: <span class="string">&gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span></span><br><span class="line"><span class="attr">Equality</span> <span class="string">operators: == , != ( eq , ne )</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Conditional operators:(条件运算, 也支持3元运算符)</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">If-then</span>: <span class="string">(if) ? (then)</span></span><br><span class="line"><span class="meta">If-then-else</span>: <span class="string">(if) ? (then) : (else)</span></span><br><span class="line"><span class="attr">Default</span>: <span class="string">(value) ?: (defaultvalue)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Special tokens:(特殊符号)</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">No-Operation</span>: <span class="string">_</span></span><br></pre></td></tr></table></figure>
<h2 id="4、SpringMVC自动配置"><a href="#4、SpringMVC自动配置" class="headerlink" title="4、SpringMVC自动配置"></a>4、SpringMVC自动配置</h2><p>可以参阅官方文档<a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/html/boot-features-developing-web-applications.html">Developing web applications</a></p>
<h3 id="4-1-Spring-Boot为Spring-MVC提供了自动配置，可与大多数应用程序完美配合。"><a href="#4-1-Spring-Boot为Spring-MVC提供了自动配置，可与大多数应用程序完美配合。" class="headerlink" title="4.1 Spring Boot为Spring MVC提供了自动配置，可与大多数应用程序完美配合。"></a>4.1 Spring Boot为Spring MVC提供了自动配置，可与大多数应用程序完美配合。</h3><p>自动配置会在Spring的默认设置之上添加以下功能：</p>
<ul>
<li><p>包含<code>ContentNegotiatingViewResolver</code>和<code>BeanNameViewResolver Bean</code>。</p>
<ul>
<li>自动配置了ViewResolver（视图解析器：根据方法的返回值得到视图对象（就是View对象），视图对象决定如何渲染（转发？重定向？等））</li>
<li><code>ContentNegotiatingViewResolver</code>：组合所有的视图解析器的</li>
<li><p>如何定制：我们可以自己给容器中添加一个视图解析器，自动将其组合进来</p>
</li>
<li><p>Ctrl+N输入<code>DispatchServlet.class</code>在它的<code>doDispatch</code>方法前面设置断点，Debug运行，浏览器访问页面，查看控制台。看DispatchServlet里用到的视图解析器是什么？得到如图：</p>
</li>
</ul>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Spring/viewResolver.png" alt="viewResolver"></p>
</li>
<li><p>支持提供静态资源，包括对WebJars的支持（请参见下文）。</p>
</li>
<li><p>自动注册<code>Converter</code>，<code>GenericConverter</code>，<code>Formatter</code> bean。</p>
<ul>
<li><code>Converter</code>：转换器，类型转换使用。例如前端文本转后台Integer</li>
<li><code>Formatter</code>：格式化器，2020.08.13===Date</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置文件中配置日期格式化的规则</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(</span><br><span class="line">  prefix = <span class="string">"spring.mvc"</span>,</span><br><span class="line">  name = &#123;<span class="string">"date-format"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Formatter&lt;Date&gt; <span class="title">dateFormatter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> DateFormatter(<span class="keyword">this</span>.mvcProperties.getDateFormat()); <span class="comment">// 日期格式化组件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>自己添加的格式化器，我们只需要放在容器中即可</li>
</ul>
</li>
<li><p>支持<code>HttpMessageConverters</code>（请参见下文）。</p>
<ul>
<li>HttpMessageConverter：SpringMVC中用来转换HTTP请求和响应的；例：User对象以JSON形式写出</li>
<li><code>HttpMessageConverters</code>是从容器中确定的，获取所有的HttpMessageConverter</li>
<li>自己给容器中添加HttpMessageConverter，只需将自己的组件注册在容器中（@Bean, @Component）</li>
</ul>
</li>
<li><p>自动注册<code>MessageCodesResolver</code>（请参见下文）。</p>
<ul>
<li>定义错误代码生成规则（例：JSR303校验时）</li>
</ul>
</li>
<li><p>静态<code>index.html</code>支持。</p>
</li>
<li><p>自定义<code>Favicon</code>支持（请参阅下文）。</p>
</li>
<li><p>自动使用<code>ConfigurableWebBindingInitializer</code> bean（请参见下文）。</p>
<ul>
<li>我们可以配置一个<code>ConfigurableWebBindingInitializer</code>来替换默认的；（添加到容器中）</li>
<li>初始化<code>WebDataBinder</code>（web数据绑定器）；</li>
<li>web数据绑定器的功能：请求数据=====绑定到JavaBean中</li>
</ul>
</li>
</ul>
<p><code>org.springframework.boot.autoconfigure.web</code>：web的所有自动配置场景。</p>
<p>如果您想保留Spring Boot MVC功能，而只想添加其他MVC配置（拦截器，格式化程序，视图控制器等），则可以添加自己的类型为<code>WebMvcConfigurerAdapter</code>的<code>@Configuration</code>类，但无需<code>@EnableWebMvc</code>。如果希望提供<code>RequestMappingHandlerMapping</code>，<code>RequestMappingHandlerAdapter</code>或<code>ExceptionHandlerExceptionResolver</code>的自定义实例，则可以声明一个提供此类组件的<code>WebMvcRegistrationsAdapter</code>实例。</p>
<p>如果要完全控制Spring MVC，则可以添加用<code>@EnableWebMvc</code>注释的自己的<code>@Configuration</code>。</p>
<h3 id="4-2-扩展SpringMVC"><a href="#4-2-扩展SpringMVC" class="headerlink" title="4.2 扩展SpringMVC"></a>4.2 扩展SpringMVC</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">"/hello"</span> <span class="attr">view-name</span>=<span class="string">"success"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/hello"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要实现以上Spring配置文件的内容，编写一个配置类（@Configuration），是<code>WebMvcConfigurerAdapter</code>类型；不能标注<code>@EnableWebMvc</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用WebMvcConfigurerAdapter可以来扩展SpringMVC的功能</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMVCConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// super.addViewControllers(registry);</span></span><br><span class="line">    <span class="comment">//浏览器发送 /addViewController 请求来到 thymeleaf</span></span><br><span class="line">    registry.addViewController(<span class="string">"/addViewController"</span>).setViewName(<span class="string">"thymeleaf"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>既保留了所有的自动配置，也能用我们扩展的配置；</p>
<p>原理：</p>
<ul>
<li>WebMvcAutoConfiguration是SpringMVC的自动配置类</li>
<li>在做其他自动配置时会导入；@Import(<strong>EnableWebMvcConfiguration</strong>.class)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">DelegatingWebMvcConfiguration</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>点进其父类<code>DelegatingWebMvcConfiguration</code>查看源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">DelegatingWebMvcConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//自动装配, 从容器中获取所有的WebMvcConfigurer</span></span><br><span class="line">  <span class="meta">@Autowired</span>(</span><br><span class="line">    required = <span class="keyword">false</span></span><br><span class="line">  )</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line">        <span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">        <span class="comment">// 一个参考实现; 将所有的WebMvcConfigurer相关配置都来一起调用;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>WebMvcConfigurerComposite</code>类中的一个实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">  Iterator var2 = <span class="keyword">this</span>.delegates.iterator();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">    WebMvcConfigurer delegate = (WebMvcConfigurer)var2.next();</span><br><span class="line">    delegate.addViewControllers(registry);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>容器中所有的WebMvcConfigurer都会一起起作用（包括我们自己写的）；</li>
<li>我们的配置类也会被调用；<ul>
<li>效果：SpringMVC的自动配置和我们的扩展配置都会起作用；</li>
</ul>
</li>
</ul>
<h3 id="4-3-全面接管SpringMVC"><a href="#4-3-全面接管SpringMVC" class="headerlink" title="4.3 全面接管SpringMVC"></a>4.3 全面接管SpringMVC</h3><p>SpringBoot对SpringMVC的自动配置不需要了，所有都是我们自己配置；所有的SpringMVC的自动配置都失效了（静态资源也不能访问了）</p>
<p><strong>我们需要在配置类中添加@EnableWebMvc即可；</strong></p>
<p>原理：为什么@EnableWebMvc自动配置就失效了？</p>
<ul>
<li>@EnableWebMvc的核心</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;DelegatingWebMvcConfiguration<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> @<span class="title">interface</span> <span class="title">EnableWebMvc</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>查看<code>DelegatingWebMvcConfiguration</code>类的源码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在找到<code>WebMvcAutoConfiguration</code>类，查看签名</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;Servlet<span class="class">.<span class="keyword">class</span>, <span class="title">DispatcherServlet</span>.<span class="title">class</span>, <span class="title">WebMvcConfigurerAdapter</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnMissingBean</span>(</span>&#123;WebMvcConfigurationSupport<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureOrder</span>(-2147483638)</span></span><br><span class="line"><span class="class">@<span class="title">AutoConfigureAfter</span>(</span>&#123;DispatcherServletAutoConfiguration<span class="class">.<span class="keyword">class</span>, </span></span><br><span class="line"><span class="class">  <span class="title">ValidationAutoConfiguration</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@ConditionalOnMissingBean()</code>：容器中没有这个组件的时候，这个自动配置类才生效</p>
<ul>
<li>@EnableWebMvc将WebMvcConfigurationSupport组件导入进来；</li>
<li>导入的WebMvcConfigurationSupport只是SpringMVC最基本的功能。</li>
</ul>
<h2 id="5、如何修改Spring-Boot的默认配置"><a href="#5、如何修改Spring-Boot的默认配置" class="headerlink" title="5、如何修改Spring Boot的默认配置"></a>5、如何修改Spring Boot的默认配置</h2><p>模式：</p>
<ul>
<li>Spring Boot在自动配置很多组件时，先看容器中有没有用户自己配置的（@Bean, @Component）,如果有就用用户配置的，如果没有才自动配置；如果有些组件可以有多个（ViewResolver）将用户配置的和自己默认的组合起来；</li>
<li>在SpringBoot中会有非常多的xxxConfigurer帮助我们进行扩展配置</li>
<li>在SpringBoot中会有很多的xxxCustomizer帮助我们进行定制配置</li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Spring/">Spring</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/donate/alipay.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/donate/wechatpay.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/08/14/Spring/SpringBootCRUD/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Spring Boot应用</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/08/Spring/SpringBootLog/"><span class="level-item">Spring Boot与日志</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "vucxC0bltE95lsPGxGXlUJBf-gzGzoHsz",
            appKey: "YgRn5inwLxs6B4VgyLp4zvti",
            placeholder: "ヾﾉ≧∀≦)o快来评论一下吧!",
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/shadow.jpg" alt="肖梦杰"></figure><p class="title is-size-4 is-block line-height-inherit">肖梦杰</p><p class="is-size-6 is-block">MysticalGuest</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Xiangyang City, Hubei Province, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">56</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/MysticalGuest" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="QQ" href="https://user.qzone.qq.com/1317148109/main"><i class="fab fa-qq"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/MysticalGuest"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:etherealsymbol@gmail.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#1、使用Spring-Boot："><span class="mr-2">1</span><span>1、使用Spring Boot：</span></a></li><li><a class="is-flex" href="#2、Spring-Boot对静态资源的映射规则"><span class="mr-2">2</span><span>2、Spring Boot对静态资源的映射规则</span></a><ul class="menu-list"><li><a class="is-flex" href="#2-1-依赖的方式"><span class="mr-2">2.1</span><span>2.1 依赖的方式</span></a></li><li><a class="is-flex" href="#2-2-“-”访问当前项目的任何资源（静态资源的文件夹）"><span class="mr-2">2.2</span><span>2.2 “/**”访问当前项目的任何资源（静态资源的文件夹）</span></a></li><li><a class="is-flex" href="#2-3-欢迎页设置，静态资源文件夹下的所有index-html页面"><span class="mr-2">2.3</span><span>2.3 欢迎页设置，静态资源文件夹下的所有index.html页面</span></a></li><li><a class="is-flex" href="#2-4-网站图标"><span class="mr-2">2.4</span><span>2.4 网站图标</span></a></li><li><a class="is-flex" href="#2-5-自定义路径"><span class="mr-2">2.5</span><span>2.5 自定义路径</span></a></li></ul></li><li><a class="is-flex" href="#3、模板引擎"><span class="mr-2">3</span><span>3、模板引擎</span></a><ul class="menu-list"><li><a class="is-flex" href="#3-1-引入Thymeleaf，引入starter："><span class="mr-2">3.1</span><span>3.1 引入Thymeleaf，引入starter：</span></a></li><li><a class="is-flex" href="#3-2-Thymeleaf使用及语法"><span class="mr-2">3.2</span><span>3.2 Thymeleaf使用及语法</span></a></li><li><a class="is-flex" href="#3-3-代码示例"><span class="mr-2">3.3</span><span>3.3 代码示例</span></a></li><li><a class="is-flex" href="#3-4-语法规则"><span class="mr-2">3.4</span><span>3.4 语法规则</span></a></li><li><a class="is-flex" href="#3-5-表达式"><span class="mr-2">3.5</span><span>3.5 表达式</span></a></li></ul></li><li><a class="is-flex" href="#4、SpringMVC自动配置"><span class="mr-2">4</span><span>4、SpringMVC自动配置</span></a><ul class="menu-list"><li><a class="is-flex" href="#4-1-Spring-Boot为Spring-MVC提供了自动配置，可与大多数应用程序完美配合。"><span class="mr-2">4.1</span><span>4.1 Spring Boot为Spring MVC提供了自动配置，可与大多数应用程序完美配合。</span></a></li><li><a class="is-flex" href="#4-2-扩展SpringMVC"><span class="mr-2">4.2</span><span>4.2 扩展SpringMVC</span></a></li><li><a class="is-flex" href="#4-3-全面接管SpringMVC"><span class="mr-2">4.3</span><span>4.3 全面接管SpringMVC</span></a></li></ul></li><li><a class="is-flex" href="#5、如何修改Spring-Boot的默认配置"><span class="mr-2">5</span><span>5、如何修改Spring Boot的默认配置</span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://spring.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Spring</span></span><span class="level-right"><span class="level-item tag">spring.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://redis.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Redis</span></span><span class="level-right"><span class="level-item tag">redis.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://docker.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Docker</span></span><span class="level-right"><span class="level-item tag">docker.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/English/"><span class="level-start"><span class="level-item">English</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%B8%BB%E9%A2%98/"><span class="level-start"><span class="level-item">主题</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%A4%8D%E8%AF%95/"><span class="level-start"><span class="level-item">复试</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"><span class="level-start"><span class="level-item">搜索引擎</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%A0%A1%E6%8B%9B%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">校招面试</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%A1%86%E6%9E%B6/"><span class="level-start"><span class="level-item">框架</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%A7%AF%E7%B4%AF/"><span class="level-start"><span class="level-item">积累</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%80%83%E7%A0%94/"><span class="level-start"><span class="level-item">考研</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">计算机基础</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%BE%E7%A8%8B/"><span class="level-start"><span class="level-item">课程</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%85%8D%E7%BD%AE/"><span class="level-start"><span class="level-item">配置</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"><span class="level-start"><span class="level-item">面试题集</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Axios/"><span class="tag">Axios</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CSharp/"><span class="tag">CSharp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ElasticSearch/"><span class="tag">ElasticSearch</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Electron-Vue/"><span class="tag">Electron-Vue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Element-UI/"><span class="tag">Element-UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub/"><span class="tag">GitHub</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Huawei/"><span class="tag">Huawei</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OS/"><span class="tag">OS</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Study/"><span class="tag">Study</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/mylogo.svg" alt="Longing(MysteryGuest的博客)" height="28"></a><p class="size-small"><span>&copy; 2021 MysticalGuest</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span><br><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv">0</span>次</span><br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><span><script>	var now = new Date();	function createtime() {		var grt= new Date("4/2/2020 08:00:00");		now.setTime(now.getTime()+250);		days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 		hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 		if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 		mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 		seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 		snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 		document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 		document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";	}	setInterval("createtime()",250);</script></span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://mysticalguest.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/click.js"></script><script src="/js/anime.min.js"></script><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script src="/js/snow.js"></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>