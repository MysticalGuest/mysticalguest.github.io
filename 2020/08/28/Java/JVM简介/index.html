<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Java及JVM简介 - Longing(MysteryGuest的博客)</title><meta description="1、前言1.1 你是否也遇到过这些问题?"><meta property="og:type" content="blog"><meta property="og:title" content="Java及JVM简介"><meta property="og:url" content="https://mysticalguest.github.io/"><meta property="og:site_name" content="Longing(MysteryGuest的博客)"><meta property="og:description" content="1、前言1.1 你是否也遇到过这些问题?"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/romantic_couple.jpg"><meta property="article:published_time" content="2020-08-28T14:49:08.862Z"><meta property="article:modified_time" content="2020-08-29T09:05:38.432Z"><meta property="article:author" content="MysticalGuest"><meta property="article:tag" content="Java"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/romantic_couple.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mysticalguest.github.io/2020/08/28/Java/JVM%E7%AE%80%E4%BB%8B/"},"headline":"MysteryGuest","image":["https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/romantic_couple.jpg"],"datePublished":"2020-08-28T14:49:08.862Z","dateModified":"2020-08-29T09:05:38.432Z","author":{"@type":"Person","name":"MysticalGuest"},"description":"java,技术分享,后端开发,算法,spring"}</script><link rel="canonical" href="https://mysticalguest.github.io/2020/08/28/Java/JVM%E7%AE%80%E4%BB%8B/"><link rel="alternative" href="/atom.xml" title="Longing(MysteryGuest的博客)" type="application/atom+xml"><link rel="icon" href="/img/bird.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script src="/js/click.js"></script><script src="/js/anime.min.js"></script><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script src="/js/snow.js"></script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/mylogo.svg" alt="Longing(MysteryGuest的博客)" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Visit on GitHub" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/romantic_couple.jpg" alt="Java及JVM简介"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-28T14:49:08.862Z" title="2020-08-28T14:49:08.862Z">2020-08-28</time><span class="level-item"><a class="link-muted" href="/categories/Compile/">Compile</a></span><span class="level-item">38 分钟 读完 (大约 5747 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Java及JVM简介</h1><div class="content"><h2 id="1、前言"><a href="#1、前言" class="headerlink" title="1、前言"></a>1、前言</h2><h3 id="1-1-你是否也遇到过这些问题"><a href="#1-1-你是否也遇到过这些问题" class="headerlink" title="1.1 你是否也遇到过这些问题?"></a>1.1 你是否也遇到过这些问题?</h3><a id="more"></a>
<ul>
<li><p>运行着的线上系统突然卡死，系统无法访问，甚至直接OOM（Out Of Memory）!</p>
</li>
<li><p>想解决线上 JVM GC（ JVM垃圾回收 ）问题，但却无从下手。</p>
</li>
<li><p>新项目上线，对各种JVM参数设置一脸茫然，直接默认吧，然后就错了。</p>
</li>
<li><p>每次面试之前都要重新背一遍J的一些原理概念性的东西，然而面试官却经常问你在实际项目中如何调优JVM参数，如何解决GC、OOM等问题，一脸懵逼。</p>
</li>
</ul>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/JVM.PNG" alt="JVM"></p>
<p>我们通常都是学习基础的技能，在此基础上学习更复杂的功能。</p>
<h3 id="1-2-开发人员如何看待上层框架"><a href="#1-2-开发人员如何看待上层框架" class="headerlink" title="1.2 开发人员如何看待上层框架"></a>1.2 开发人员如何看待上层框架</h3><ul>
<li><p>一些有一定工作经验的开发人员，打心眼儿里觉得SSM、微服务等上层技术才是重点，基础技术并不重要，这其实是一种本末倒置的“病态“。</p>
</li>
<li><p>如果我们把核心类库的 API 比做数学公式的话，那么 Java 虚拟机的知识就好比公式的推导过程</p>
</li>
</ul>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Composition-principle.PNG" alt=""></p>
<blockquote>
<p>计算机系统体系对我们来说越来越远，在不了解底层实现方式的前提下，通过高级语言很容易编写程序代码。但事实上计算机并不认识高级语言。</p>
</blockquote>
<h3 id="1-3-架构师每天都在思考什么"><a href="#1-3-架构师每天都在思考什么" class="headerlink" title="1.3 架构师每天都在思考什么?"></a>1.3 架构师每天都在思考什么?</h3><ul>
<li><p>应该如何让我的系统更快?</p>
</li>
<li><p>如何避免系统出现瓶颈?</p>
</li>
</ul>
<h3 id="1-4-知乎上有条帖子：应该如何看招聘信息，直通年薪50万"><a href="#1-4-知乎上有条帖子：应该如何看招聘信息，直通年薪50万" class="headerlink" title="1.4 知乎上有条帖子：应该如何看招聘信息，直通年薪50万+?"></a>1.4 知乎上有条帖子：应该如何看招聘信息，直通年薪50万+?</h3><ul>
<li>参与现有系统的性能优化，重构，保证平台性能和稳定性</li>
<li>根据业务场景和需求，决定技术方向，做技术选型</li>
<li>能够独立架构和设计海量数据下高并发分布式解决方案，满足功能和非功能需求</li>
<li>解决各类潜在系统风险，核心功能的架构与代码编写</li>
<li>分析系统瓶颈，解决各种疑难杂症,性能调优等</li>
</ul>
<h3 id="1-5-为什么要学JVM？"><a href="#1-5-为什么要学JVM？" class="headerlink" title="1.5 为什么要学JVM？"></a>1.5 为什么要学JVM？</h3><ul>
<li>面试的需要：入职BATJ（京东）、T（头条）MD（滴滴）、P（拼多多）K（快手）Q（趣头条）等一线大厂不光关注技术的广度，更关注技术的深度，JVM技术是大厂面试的必备技能，掌握越深越好</li>
<li>中高级程序员、架构师必备技能：架构师每天都在思考如何让我的系统更快，如何避免系统出现性能瓶颈。单纯的依靠物理机不足以解决问题，分析系统性能、调优系统瓶颈离不了对JVM中内存、垃圾回收、字节码指令、性能监控工具、调优参数的熟练掌握。</li>
<li>精进技术、极客（好奇与行动）追求：JVM是Java生态的核心价值的体现，垃圾回收算法、JIT（ just in time 的缩写，也就是即时编译编译器，AOT：提前编译器）、底层原理值得每个程序员去探索。同时，JVM作为跨语言的平台，对于深入理解Scala、Kotlin、JavaScript、Jython、Groovy也很有帮助。Java最前沿最成熟垃圾回收算法。</li>
</ul>
<h3 id="1-6-Java-vs-C"><a href="#1-6-Java-vs-C" class="headerlink" title="1.6 Java  vs  C++"></a>1.6 Java  vs  C++</h3><p>以C语言代表的语言是高级语言的开端了，Java借鉴了C和C++的有点，并摈弃其缺点；缺点主要就是<strong>内存动态分配</strong>和<strong>垃圾收集技术</strong>。</p>
<p>分配内存想要再次使用就要垃圾回收，否则就成一次性内存了。对于C语言来说，就需要程序员自己分配内存自己回收；Java是自动管理内存的。对于自动管理内存的弊端就是不了解Java内部的内存结构和工作机制，对于项目调优就没办法了，理解为黑盒？心中胆怯，没底？</p>
<p>垃圾收集机制为我们打理了很多繁琐的工作，大大提高了开发的效率，但是，垃圾收集也不是万能的，懂得JVM内部的内存结构、工作机制，是设计高扩展性应用和诊断运行时问题的基础，也是Java工程师进阶的必备能力。</p>
<h2 id="2、Java及JVM简介"><a href="#2、Java及JVM简介" class="headerlink" title="2、Java及JVM简介"></a>2、Java及JVM简介</h2><p>栈管运行，堆管存储？Java半解释型，半编译型语言？</p>
<p><a href="https://docs.oracle.com/javase/specs/index.html">Java虚拟机官方文档下载</a></p>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/hotspot.PNG" alt="HotSpot"></p>
<p><a href="https://www.tiobe.com/tiobe-index/">TIOBE语言热度排行榜</a></p>
<h3 id="2-1-Java生态圈"><a href="#2-1-Java生态圈" class="headerlink" title="2.1 Java生态圈"></a>2.1 Java生态圈</h3><p>Java是目前应用最为广泛的软件开发平台之一。随着Java以及Java社区的不断壮大，Java也早已不再是简简单单的一门计算机语言了,它更是一个平台、一种文化、一个社区。</p>
<ul>
<li><p><strong>作为一个平台</strong>，Java虚拟机扮演着举足轻重的作用。</p>
<p>Groovy、 Scala、 JRuby、Kot]in等都是Java平台的一部分</p>
</li>
<li><p><strong>作为一种文化</strong>，Java几乎成为了“开源”的代名词</p>
<ul>
<li>第三方开源软件和框架。如 Tomcat、 struts, My Batis, Spring等。</li>
<li>就连UDK和JM自身也有不少开源的实现,如 OpenJDK、 Harmony（开源的JVM）</li>
</ul>
</li>
<li><p><strong>作为一个社区</strong>，Java拥有全世界最多的技术拥护者和开源社区支持，有数不清的论坛和资料。从桌面应用软件、嵌入式开发到企业级应用、后台服务器、中间件，都可以看到Java的身影。其应用形式之复杂、参与人数之众多也令人咋舌</p>
</li>
</ul>
<h3 id="2-2-Java：跨平台的语言"><a href="#2-2-Java：跨平台的语言" class="headerlink" title="2.2 Java：跨平台的语言"></a>2.2 Java：跨平台的语言</h3><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Cross-platform.PNG" alt=""></p>
<h3 id="2-3-JVM虚拟机规范"><a href="#2-3-JVM虚拟机规范" class="headerlink" title="2.3 JVM虚拟机规范"></a>2.3 JVM虚拟机规范</h3><p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-1.html#jvms-1">The Java Virtual Machine Specification, Java SE 8 Edition</a></p>
<p>Java虚拟机是Java平台的基石。 它是技术的组成部分，负责硬件和操作系统的独立性，编译代码的小巧大小以及保护用户免受恶意程序攻击的能力。</p>
<p>编译代码的小巧（小尺寸）：在一个程序中用到了基本数据类型和类，在编译字节码文件时对应一个常量池，运行的时候对应运行常量池，通过常量指向，避免去字节码文件加载大量数据和类，以保证字节码文件的小尺寸，</p>
<h3 id="2-4-JVM：跨语言的平台"><a href="#2-4-JVM：跨语言的平台" class="headerlink" title="2.4 JVM：跨语言的平台"></a>2.4 JVM：跨语言的平台</h3><p>Java：跨平台的语言</p>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Cross-language.PNG" alt=""></p>
<p>不仅可以执行Java程序，其他语言也是可以的。只需保证各<strong>自的编译器</strong>编译出的字节码文件遵循Java虚拟机规范即可。在Java虚拟机的<strong>编译器</strong>中运行。</p>
<p>三大并行难题：CPU、OS、编译器。</p>
<ul>
<li><p>随着Java7的正式发布，Java虚拟机的设计者们通过JSR-292规范基本实现在<strong>Java虚拟机平台上运行非Java语言编写的程序。</strong></p>
</li>
<li><p>Java虚拟机根本不关心运行在其内部的程序到底是使用何种编程语言编写的，<strong>它只关心“字节码”文件</strong>。也就是说Java虚拟机拥有语言无关性，并不会单纯地与Java语言“终身绑定”，只要其他编程语言的编译结果满足并包含Java虚拟机的内部指令集、符号表以及其他的辅助信息，它就是一个有效的字节码文件，就能够被虚拟机所识别并装载运行。</p>
</li>
</ul>
<p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-1.html#jvms-1">The Java Virtual Machine Specification, Java SE 8 Edition</a></p>
<p>为了安全起见，Java虚拟机对类文件中的代码施加了严格的语法和结构约束。 但是，Java虚拟机可以托管任何具有<strong>可用有效类文件表示的功能的语言</strong>。 受通用的独立于机器的平台的吸引，其他语言的实现者可以将Java虚拟机作为其语言的交付工具。</p>
<p>Java不是最强大的语言，但是JVM是最强大的虚拟机。</p>
<h3 id="2-5-字节码"><a href="#2-5-字节码" class="headerlink" title="2.5 字节码"></a>2.5 字节码</h3><ul>
<li><p>我们平时说的java字节码，指的是用java语言编译成的字节码。准确的说任何能在JVM平台上执行的字节码格式都是一样的。所以应该统称为<strong>JVM字节码</strong>。</p>
</li>
<li><p>不同的编译器，可以编译出相同的字节码文件，字节码文件也可以在不同的JVM上运行。</p>
</li>
<li><p>Java 虚拟机与Java 语言并没有必然的联系，它只与特定的二进制文件格式——Class文件格式所关联，Class文件中包含了Java虚拟机指令集（或者称为字节码、 Bytecodes）和符号表，还有一些其他辅助信息。</p>
</li>
</ul>
<h3 id="2-6-多语言混合编程"><a href="#2-6-多语言混合编程" class="headerlink" title="2.6 多语言混合编程"></a>2.6 多语言混合编程</h3><ul>
<li><p>Java平台上的<strong>多语言混合编程</strong>正成为主流，通过<strong>特定领域的语言</strong>去解决<strong>特定领域的问题</strong>是当前软件干发应对日趋复杂的项目需求的一个方向。</p>
</li>
<li><p>试想一下，在一个项目之中，并行处理用Clojure语言编写，展示层使用JRuby/Rails，中间层则是Java，每个应用层都将使用不同的编程语言来完成，而且，接口对每一层的开发者都是透明的，<strong>各种语言之间的交互</strong>不存在任何困难，就像使用自己语言的原生API一样方便，因为它们最终都运行在<strong>一个虚拟机</strong>之上。</p>
</li>
<li><p>对这些运行于Java虚拟机之上、Java之外的语言，来自系统级的、底层的支持正在迅速增强，以JSR-292为核心的一系列项目和功能改进（如Da Vinci machine项目、 Nashorn引擎、 Invoke Dynamic指令、java.lang.invoke包等），<strong>推动Java虚拟机从“Java语言的虚拟机”向“多语言虚拟机”的方向发展</strong>。</p>
</li>
</ul>
<h2 id="3、Java发展的重大事件"><a href="#3、Java发展的重大事件" class="headerlink" title="3、Java发展的重大事件"></a>3、Java发展的重大事件</h2><ul>
<li><p>1990年，在Sun计算机公司中，由 Patrick Naughton、 Mikesheridan及James Gosling领导的小组 Green Team，开发出的新的程序语言，命名为oak，后期命名为Java</p>
</li>
<li><p>1995年，Sun正式发布Java和 HotJava产品，Java首次公开亮相。</p>
</li>
<li><p>1996年1月23日 Sun Microsystems发布了JDK1.0。</p>
</li>
<li><p>1998年，JDK1.2版木发布。同时，sun发布了JSP/ Servlet、EJB规范，以及将Java分成了J2EE（企业级应用）、J2SE（桌面级应用）和J2ME（移动端）。这表明了Java开始向企业、桌面应用和移动设备应用3大领域挺进。</p>
</li>
<li><p>2000年，JDK1.3发布， <strong>Java Hotspot Virtual Machine正式发布，成为</strong><br><strong>Java的默认虚拟机</strong>。</p>
</li>
<li><p>2002年，JDK1.4发布，古老的 Classic虚拟机退出历史舞台，同期微软.NET发布</p>
</li>
<li><p>2003年年底，<strong>Java平台的 Scala正式发布，同年 Groovy也加入了Java阵营</strong>。</p>
</li>
<li><p>2004年，JDK1.5发布。同时JDK1.5改名为 JavaSE5.0。</p>
</li>
<li><p>2006年，JDK6发布。同年，<strong>Java开源并建立了 OpenJDK</strong>。顺理成章，<strong>Hotspot虚拟机也成为了 OpenJDK中的默认虚拟机</strong>。</p>
</li>
<li><p>2007年，Java平台迎来了新伙伴Clojure。</p>
</li>
<li><p>2008年，Oracle收购了BEA，得到了JRockit虚拟机。</p>
</li>
<li><p>2009年，Twitter宣布把后台大部分程序从Ruby迁移到 Scala，这是Java平台的又一次大规模应用。</p>
</li>
<li><p>2010年，Oracle收购了Sun，<strong>获得Java商标和最具价值的 Hotspot虚拟机</strong>，JCP组织管理Java语言，但Oracle话语权比较重。此时，Oracle拥有市场占用率最高的两款虚拟机Hot Spot和 JRockit，并计划在未来对它们进行整合：Hotrockit</p>
</li>
<li><p>2011年，JDK7发布。在JDK1.7u4中，正式启用了新的垃圾回收器G1。</p>
</li>
<li><p>2014年，算是整合了上述两款虚拟机Hotrockit，从JavaSE8.0后</p>
</li>
<li><p>2017年，JDK9发布。将G1设置为默认GC，替代CMS。同年，<strong>IBM的J9开源</strong>，形成了现在的 Open J9社区</p>
</li>
<li><p>2018年，Android的Java侵权案判决，Google赔偿Oracle计88亿美元。同年，OracLe宣告 JavaEE成为历史名词，JDBC、JMS、servlet赠予Eclipse基金会。同年，JDK11发布，LTS版本的JDK，<strong>发布革命性的ZGC，调整JDK授权许可</strong></p>
</li>
<li><p>2019年，JDK12发布，加入RedHat领导开发的 Shenandoah GC</p>
</li>
</ul>
<p>在JDK11之前，OracleJDK中还会存在一些 OpenJDK中没有的、闭源的功能。但在JDK11中，我们可以认为 OpenJDK和 oracleJDK代码实质上已经完全一致的程度。主要是基于的协议不同，OpenJDK基于OPL协议，OracleJDK基于OPN协议。OpenJDK维护期半年，过了就更新下一版本，OracleJDK持续维护3年</p>
<h2 id="4、虚拟机与Java虚拟机"><a href="#4、虚拟机与Java虚拟机" class="headerlink" title="4、虚拟机与Java虚拟机"></a>4、虚拟机与Java虚拟机</h2><h3 id="4-1-虚拟机"><a href="#4-1-虚拟机" class="headerlink" title="4.1 虚拟机"></a>4.1 虚拟机</h3><ul>
<li><p>所谓虚拟机( Virtual Machine)，就是一台虚拟的计算机它是一款软件，用来执行一系列虚拟计算机指令。大体上，虚拟机可以分为<strong>系统虚拟机</strong>和<strong>程序虚拟机</strong>。</p>
<ul>
<li>大名鼎鼎的 Visual Box，VMware就属于系统虚拟机，它们<strong>完全是对物理计算机的仿真</strong>，提供了一个可运行完整操作系统的软件平台。</li>
<li>程序虚拟机的典型代表就是Java虚拟机，它<strong>专门为执行单个计算机程序而设计</strong>，在Java虚拟机中执行的指令我们称为Java字节码指令。</li>
</ul>
</li>
<li><p>无论是系统虚拟机还是程序虚拟机，在上面运行的软件都被限制于虚拟机提供的资源中。</p>
</li>
</ul>
<h3 id="4-2-Java虚拟机"><a href="#4-2-Java虚拟机" class="headerlink" title="4.2 Java虚拟机"></a>4.2 Java虚拟机</h3><ul>
<li><p>Java虚拟机是一台执行Java字节码的虚拟计算机，它拥有独立的运行机制，其运行的Java字节码也未必由Java语言编译而成。</p>
</li>
<li><p>JVM平台的各种语言可以共享Java虚拟机带来的跨平台性、优秀的垃圾回收器，以及可靠的即时编译器。</p>
</li>
<li><p><strong>Java技术的核心就是Java虚拟机</strong>（JVM，Java Virtual Machine）因为所有的Java程序都运行在Java虚拟机内部。</p>
</li>
<li><p>作用：</p>
<p><strong>Java虚拟机就是二进制字节码的运行环境</strong>，负责装载字节码到其内部，解释/编译为对应平台上的机器指令执行。每一条Java指令，Java虚拟机规范中都有详细定义，如怎么取操作数，怎么处理操作数，处理结果放在哪里。</p>
</li>
<li><p>特点</p>
<ul>
<li>一次编译，到处运行</li>
<li>自动内存管理</li>
<li>自动垃圾回收功能</li>
</ul>
</li>
</ul>
<h2 id="5、JVM的位置"><a href="#5、JVM的位置" class="headerlink" title="5、JVM的位置"></a>5、JVM的位置</h2><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/JVM-location.PNG" alt=""></p>
<p>JⅥM是运行在操作系统之上的，它与硬件没有直接的交互。不同操作系统的JVM是有区别的。</p>
<h2 id="6、JVM的整体结构"><a href="#6、JVM的整体结构" class="headerlink" title="6、JVM的整体结构"></a>6、JVM的整体结构</h2><ul>
<li><p>HotSpot VM是目前市面上高性能虚拟机的代表作之一。</p>
</li>
<li><p>它采用解释器与即时编译器并存的架构。</p>
</li>
<li><p>在今天，Java程序的运行性能早已脱胎换骨，已经达到了可以和C/C++程序一较高下的地步。</p>
</li>
</ul>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/overall-structure.PNG" alt=""></p>
<p>将图示结构分为上中下层：</p>
<ul>
<li><p>上层：入口是字节码文件，通过装载器加载到内存中，生成class对象；</p>
</li>
<li><p>中层：有对应class的实例了；多线程共享方法区和堆，虚拟机栈（Java栈），本地方法栈和程序计数器是每个线程独有的。</p>
</li>
<li><p>下层：有“后端编译器”，将高级语言翻译为机器语言</p>
</li>
</ul>
<h2 id="7、Java代码执行流程"><a href="#7、Java代码执行流程" class="headerlink" title="7、Java代码执行流程"></a>7、Java代码执行流程</h2><p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/Implementation-process.png" alt=""></p>
<p>关于上图中Java编译器（“前端”编译器）的细节不用过多关注，除非涉及开发一门语言；在这个过程中任何一个过程失败，都不能正确生成字节码文件。字节码文件也是跨平台的</p>
<p>“解析执行”和“编译执行“模块相当于执行引擎，”解析执行“保证响应时间，逐行对字节码解释执行，反复执行的代码称为”热点代码“，“编译执行”有个二次编译，第一编译为字节码的热点代码，将其缓存起来，下次直接调用，转换为机器指令。</p>
<h2 id="8、JVM的架构模型"><a href="#8、JVM的架构模型" class="headerlink" title="8、JVM的架构模型"></a>8、JVM的架构模型</h2><p>Java编译器输入的指令流基本上是一种基于<strong>栈的指令集架构</strong>，另外一种指令集架构则是基于<strong>寄存器的指令集架构</strong>。HotSpot是基于栈的架构。</p>
<h3 id="8-1-具体来说：这两种架构之间的区别："><a href="#8-1-具体来说：这两种架构之间的区别：" class="headerlink" title="8.1 具体来说：这两种架构之间的区别："></a>8.1 具体来说：这两种架构之间的区别：</h3><ul>
<li>基于栈式架构的特点<ul>
<li>设计和实现更简单，适用于资源受限的系统；（方法，入栈出栈？实现简单）</li>
<li>避开了寄存器的分配难题：使用零地址（无地址，只有操作数）指令方式分配。（栈的结构？栈顶元素？不需要知道地址？不麻烦）</li>
<li>指令流中的指令大部分是零地址指令，其执行过程依赖于操作栈。指令集更小，编译器容易实现。</li>
<li>不需要硬件支持，可移植性更好，更好实现跨平台。（栈与内存交互）</li>
</ul>
</li>
<li>基于寄存器架构的特点<ul>
<li>典型的应用是x86的二进制指令集：比如传统的PC以及Android的Davlik虚拟机。</li>
<li><strong>指令集架构则完全依赖硬件，可移植性差</strong></li>
<li><strong>性能优秀和执行更高效</strong></li>
<li>花费更少的指令去完成一项操作。</li>
<li>在大部分情况下，基于寄存器架构的指令集往往都以一地址指令、二地址指令和三地址指令为主，而基于栈式架构的指令集却是以零地址指令为主方水洋</li>
</ul>
</li>
</ul>
<h3 id="8-2-示例"><a href="#8-2-示例" class="headerlink" title="8.2 示例"></a>8.2 示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackStructureTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        int i = 1+2;</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">int</span> k = i+j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译运行后，会在项目的out文件夹下生成字节码文件：</p>
<p><img src="https://gitee.com/mysteryguest/ObjectStorage/raw/master/Java/JVM/out-complie.PNG" alt=""></p>
<p>在“chapter01”下打开cmd执行下面语句进行反编译：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> javap <span class="literal">-v</span> StackStructureTest<span class="class">.<span class="keyword">class</span></span></span><br></pre></td></tr></table></figure>
<p>输出：（基于栈的计算流程（以Java虚拟机为例））</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  <span class="comment">#23 = Utf8               java/lang/Object</span></span><br><span class="line">&#123;</span><br><span class="line">  public com.chapter01.StackStructureTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">1</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial <span class="comment">#1                  // Method java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">         <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">3</span>: <span class="number">0</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>       <span class="number">5</span>     <span class="number">0</span>  this   Lcom/chapter01/StackStructureTest;</span><br><span class="line"></span><br><span class="line">  public <span class="keyword">static</span> void main(java.lang.String[]);</span><br><span class="line">    descriptor: ([<span class="type">Ljava</span>/<span class="type">lang</span>/<span class="built_in">String</span>;)<span class="type">V</span></span><br><span class="line">    <span class="type">flags</span>: <span class="type">ACC_PUBLIC</span>, <span class="type">ACC_STATIC</span></span><br><span class="line">    <span class="type">Code</span>:</span><br><span class="line">      <span class="type">stack</span>=<span class="number">2</span>, <span class="type">locals</span>=<span class="number">4</span>, <span class="type">args_size</span>=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: <span class="type">iconst_3</span>  // 定义常量<span class="number">3</span></span><br><span class="line">         <span class="number">1</span>: <span class="type">istore_1</span>  // <span class="number">1</span>是操作数栈的索引位置，将上面常量保存到索引为<span class="number">1</span>的操作数栈中</span><br><span class="line">         <span class="number">2</span>: <span class="type">iconst_4</span></span><br><span class="line">         <span class="number">3</span>: <span class="type">istore_2</span></span><br><span class="line">         <span class="number">4</span>: <span class="type">iload_1</span>   // 将索引<span class="number">1</span>加载进来</span><br><span class="line">         <span class="number">5</span>: <span class="type">iload_2</span>   // 加载索引<span class="number">2</span></span><br><span class="line">         <span class="number">6</span>: <span class="type">iadd</span>      // 求和操作</span><br><span class="line">         <span class="number">7</span>: <span class="type">istore_3</span>  // 将结果存到索引为<span class="number">3</span>的操作数栈中</span><br><span class="line">         <span class="number">8</span>: <span class="type">return</span>    // <span class="number">8</span>行，寄存器的话</span><br><span class="line">      <span class="type">LineNumberTable</span>:</span><br><span class="line">        <span class="type">line</span> <span class="number">7</span>: <span class="number">0</span></span><br><span class="line">        <span class="type">line</span> <span class="number">8</span>: <span class="number">2</span></span><br><span class="line">        <span class="type">line</span> <span class="number">9</span>: <span class="number">4</span></span><br><span class="line">        <span class="type">line</span> <span class="number">10</span>: <span class="number">8</span></span><br><span class="line">      <span class="type">LocalVariableTable</span>:</span><br><span class="line">        <span class="type">Start</span>  <span class="type">Length</span>  <span class="type">Slot</span>  <span class="type">Name</span>   <span class="type">Signature</span></span><br><span class="line">            <span class="number">0</span>       <span class="number">9</span>     <span class="number">0</span>  <span class="type">args</span>   [<span class="type">Ljava</span>/<span class="type">lang</span>/<span class="built_in">String</span>;</span><br><span class="line">            <span class="number">2</span>       <span class="number">7</span>     <span class="number">1</span>     <span class="type">i</span>   <span class="type">I</span></span><br><span class="line">            <span class="number">4</span>       <span class="number">5</span>     <span class="number">2</span>     <span class="type">j</span>   <span class="type">I</span></span><br><span class="line">            <span class="number">8</span>       <span class="number">1</span>     <span class="number">3</span>     <span class="type">k</span>   <span class="type">I</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">SourceFile</span>: <span class="string">"StackStructureTest.java"</span></span><br></pre></td></tr></table></figure>
<p>而基于寄存器的计算流程：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mov eax,<span class="number">2</span> //将eax寄存器的值设为<span class="number">1</span></span><br><span class="line">add eax,<span class="number">3</span> //使eax寄存器的值加<span class="number">3</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-总结"><a href="#8-3-总结" class="headerlink" title="8.3 总结"></a>8.3 总结</h3><p><strong>由于跨平台性的设计，Java的指令都是根据栈来设计的。</strong>不同平台CPU架构不同，所以不能设计为基于寄存器的。优点是跨平台，指令集小，编译器容易实现，缺点是性能下降，实现同样的功能需要更多的指令。</p>
<p>时至今日，尽管嵌入式平台已经不是Java程序的主流运行平台了（准确来说应该是HotSpot VM的宿主环境已经不局限于嵌入式平台了），那么为什么不将架构更换为基于寄存器的架构呢？</p>
<p>栈：跨平台性、指令集小、指令多；执行性能比寄存器差</p>
<h2 id="9、JVM的生命周期"><a href="#9、JVM的生命周期" class="headerlink" title="9、JVM的生命周期"></a>9、JVM的生命周期</h2><h3 id="9-1-虚拟机的启动"><a href="#9-1-虚拟机的启动" class="headerlink" title="9.1 虚拟机的启动"></a>9.1 虚拟机的启动</h3><p>Java虚拟机的启动是通过引导类加载器（bootstrap class loader）创建一个初始类（initial class）来完成的，这个类是由虚拟机的具体实现指定的。</p>
<p>自定义的类通过系统类加载器加载，继承自Object，Object需要被引导类加载器加载，Object并不是初始类，一个简单类的执行就需要加载很多类，此时JVM启动</p>
<h3 id="9-2-虚拟机的执行"><a href="#9-2-虚拟机的执行" class="headerlink" title="9.2 虚拟机的执行"></a>9.2 虚拟机的执行</h3><ul>
<li><p>一个运行中的Java虚拟机有着一个清晰的任务：执行Java程序。</p>
</li>
<li><p>程序开始执行时他才运行，<strong>程序结束时他就停止</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackStructureTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        int i = 1+2;</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">int</span> k = i+j;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">6000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行，趁还没有结束，在cmd中输入：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> jps    // 打印当前执行程序中的进程</span><br><span class="line"><span class="number">22272</span> StackStructureTest   // <span class="number">22272</span>端口号</span><br><span class="line"><span class="number">22548</span></span><br><span class="line"><span class="number">24164</span> RemoteMavenServer36</span><br><span class="line"><span class="number">22024</span> Launcher</span><br><span class="line"><span class="number">21388</span> Jps   // JVM就退出了</span><br><span class="line"><span class="variable">$</span> jps    // 结束后</span><br><span class="line"><span class="number">22548</span></span><br><span class="line"><span class="number">24164</span> RemoteMavenServer36</span><br><span class="line"><span class="number">3188</span> Jps</span><br><span class="line"><span class="number">22024</span> Launcher</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>执行一个所谓的Java程序的时候，真真正正在执行的是一个叫做<strong>Java虚拟机的进程</strong>。</li>
</ul>
<h3 id="9-3-虚拟机的退出"><a href="#9-3-虚拟机的退出" class="headerlink" title="9.3 虚拟机的退出"></a>9.3 虚拟机的退出</h3><p>有如下的几种情况：</p>
<ul>
<li>程序正常执行结束</li>
<li>程序在执行过程中遇到了异常（没有处理的异常）或错误而异常终止</li>
<li>由于操作系统用现错误而导致Java虚拟机进程终止</li>
<li>某线程调用Runtime类或system类的exit方法，或Runtime类的halt方法，并且Java安全管理器也允许这次exit或halt操作。</li>
<li>除此之外，JNI（Java Native Interface）规范描述了用JNI Invocation API来加载或卸载 Java虚拟机时，Java虚拟机的退出情况。</li>
</ul>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Java/">Java</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/donate/alipay.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/donate/wechatpay.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/28/Spring/AdvancedSpringBootCache/"><span class="level-item">Spring Boot与缓存</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "vucxC0bltE95lsPGxGXlUJBf-gzGzoHsz",
            appKey: "YgRn5inwLxs6B4VgyLp4zvti",
            placeholder: "ヾﾉ≧∀≦)o快来评论一下吧!",
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/shadow.jpg" alt="肖梦杰"></figure><p class="title is-size-4 is-block line-height-inherit">肖梦杰</p><p class="is-size-6 is-block">MysticalGuest</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Xiangyang City, Hubei Province, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">40</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/MysticalGuest" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="QQ" href="https://user.qzone.qq.com/1317148109/main"><i class="fab fa-qq"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/MysticalGuest"><i class="fab fa-weibo"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:etherealsymbol@gmail.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#1、前言"><span class="mr-2">1</span><span>1、前言</span></a><ul class="menu-list"><li><a class="is-flex" href="#1-1-你是否也遇到过这些问题"><span class="mr-2">1.1</span><span>1.1 你是否也遇到过这些问题?</span></a></li><li><a class="is-flex" href="#1-2-开发人员如何看待上层框架"><span class="mr-2">1.2</span><span>1.2 开发人员如何看待上层框架</span></a></li><li><a class="is-flex" href="#1-3-架构师每天都在思考什么"><span class="mr-2">1.3</span><span>1.3 架构师每天都在思考什么?</span></a></li><li><a class="is-flex" href="#1-4-知乎上有条帖子：应该如何看招聘信息，直通年薪50万"><span class="mr-2">1.4</span><span>1.4 知乎上有条帖子：应该如何看招聘信息，直通年薪50万+?</span></a></li><li><a class="is-flex" href="#1-5-为什么要学JVM？"><span class="mr-2">1.5</span><span>1.5 为什么要学JVM？</span></a></li><li><a class="is-flex" href="#1-6-Java-vs-C"><span class="mr-2">1.6</span><span>1.6 Java  vs  C++</span></a></li></ul></li><li><a class="is-flex" href="#2、Java及JVM简介"><span class="mr-2">2</span><span>2、Java及JVM简介</span></a><ul class="menu-list"><li><a class="is-flex" href="#2-1-Java生态圈"><span class="mr-2">2.1</span><span>2.1 Java生态圈</span></a></li><li><a class="is-flex" href="#2-2-Java：跨平台的语言"><span class="mr-2">2.2</span><span>2.2 Java：跨平台的语言</span></a></li><li><a class="is-flex" href="#2-3-JVM虚拟机规范"><span class="mr-2">2.3</span><span>2.3 JVM虚拟机规范</span></a></li><li><a class="is-flex" href="#2-4-JVM：跨语言的平台"><span class="mr-2">2.4</span><span>2.4 JVM：跨语言的平台</span></a></li><li><a class="is-flex" href="#2-5-字节码"><span class="mr-2">2.5</span><span>2.5 字节码</span></a></li><li><a class="is-flex" href="#2-6-多语言混合编程"><span class="mr-2">2.6</span><span>2.6 多语言混合编程</span></a></li></ul></li><li><a class="is-flex" href="#3、Java发展的重大事件"><span class="mr-2">3</span><span>3、Java发展的重大事件</span></a></li><li><a class="is-flex" href="#4、虚拟机与Java虚拟机"><span class="mr-2">4</span><span>4、虚拟机与Java虚拟机</span></a><ul class="menu-list"><li><a class="is-flex" href="#4-1-虚拟机"><span class="mr-2">4.1</span><span>4.1 虚拟机</span></a></li><li><a class="is-flex" href="#4-2-Java虚拟机"><span class="mr-2">4.2</span><span>4.2 Java虚拟机</span></a></li></ul></li><li><a class="is-flex" href="#5、JVM的位置"><span class="mr-2">5</span><span>5、JVM的位置</span></a></li><li><a class="is-flex" href="#6、JVM的整体结构"><span class="mr-2">6</span><span>6、JVM的整体结构</span></a></li><li><a class="is-flex" href="#7、Java代码执行流程"><span class="mr-2">7</span><span>7、Java代码执行流程</span></a></li><li><a class="is-flex" href="#8、JVM的架构模型"><span class="mr-2">8</span><span>8、JVM的架构模型</span></a><ul class="menu-list"><li><a class="is-flex" href="#8-1-具体来说：这两种架构之间的区别："><span class="mr-2">8.1</span><span>8.1 具体来说：这两种架构之间的区别：</span></a></li><li><a class="is-flex" href="#8-2-示例"><span class="mr-2">8.2</span><span>8.2 示例</span></a></li><li><a class="is-flex" href="#8-3-总结"><span class="mr-2">8.3</span><span>8.3 总结</span></a></li></ul></li><li><a class="is-flex" href="#9、JVM的生命周期"><span class="mr-2">9</span><span>9、JVM的生命周期</span></a><ul class="menu-list"><li><a class="is-flex" href="#9-1-虚拟机的启动"><span class="mr-2">9.1</span><span>9.1 虚拟机的启动</span></a></li><li><a class="is-flex" href="#9-2-虚拟机的执行"><span class="mr-2">9.2</span><span>9.2 虚拟机的执行</span></a></li><li><a class="is-flex" href="#9-3-虚拟机的退出"><span class="mr-2">9.3</span><span>9.3 虚拟机的退出</span></a></li></ul></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://spring.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Spring</span></span><span class="level-right"><span class="level-item tag">spring.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://redis.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Redis</span></span><span class="level-right"><span class="level-item tag">redis.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://www.docker.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Docker</span></span><span class="level-right"><span class="level-item tag">www.docker.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Compile/"><span class="level-start"><span class="level-item">Compile</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Review/"><span class="level-start"><span class="level-item">Review</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%B8%BB%E9%A2%98/"><span class="level-start"><span class="level-item">主题</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%A1%86%E6%9E%B6/"><span class="level-start"><span class="level-item">框架</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%BE%E7%A8%8B/"><span class="level-start"><span class="level-item">课程</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%85%8D%E7%BD%AE/"><span class="level-start"><span class="level-item">配置</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Axios/"><span class="tag">Axios</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag is-grey-lightest">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Electron-Vue/"><span class="tag">Electron-Vue</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Element-UI/"><span class="tag">Element-UI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OS/"><span class="tag">OS</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/mylogo.svg" alt="Longing(MysteryGuest的博客)" height="28"></a><p class="size-small"><span>&copy; 2020 MysticalGuest</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span><br><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv">0</span>次</span><br><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><span><script>	var now = new Date();	function createtime() {		var grt= new Date("4/2/2020 08:00:00");		now.setTime(now.getTime()+250);		days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 		hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 		if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 		mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 		seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 		snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 		document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 		document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";	}	setInterval("createtime()",250);</script></span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/MysticalGuest"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://mysticalguest.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="/js/click.js"></script><script src="/js/anime.min.js"></script><canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas><script src="/js/snow.js"></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>